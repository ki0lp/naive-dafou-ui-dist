import{_ as p,r as o,o as l,a as c,b as n,d as t,F as i,e as s,c as e}from"./app.04b7753e.js";var u="/assets/image-20211215200720688.182fae17.png",r="/assets/image-20211215201508033.0a5272f6.png",d="/assets/image-20211215203139170.7d9f1812.png",k="/assets/image-20211215205404167.79ef5246.png",v="/assets/image-20211215223259857.6f3dde0d.png",m="/assets/image-20211215233624460.fcd2da7a.png",g="/assets/image-20211216005102539.ae74a9c4.png",b="/assets/image-20211216005548490.5d51bbba.png",h="/assets/image-20211216015238565.35b66410.png",f="/assets/image-20211216015455878.682ffa93.png",y="/assets/image-20211216020203576.a471bbf8.png",w="/assets/image-20211216020734338.e6078d78.png",_="/assets/image-20211216022749890.28a8f4aa.png",q="/assets/image-20211216024028126.2348b3c6.png",x="/assets/image-20211216034556804.3e7f3452.png",S="/assets/image-20211216040719937.0a5270c8.png",I="/assets/image-20211216042510992.da4a1195.png",j="/assets/image-20211216044251418.6d496fff.png",C="/assets/image-20211216063933708.241076dc.png",R="/assets/image-20211216153033730.11e805d8.png",A="/assets/image-20211216153955110.601c184e.png",E="/assets/image-20211216154201843.c2ab694a.png",O="/assets/image-20211216154252534.989148ce.png",M="/assets/image-20211216154701410.b242a787.png",T="/assets/image-20211216154644930.0ee02fcb.png",P="/assets/image-20211216162359221.9d0bce39.png",B="/assets/image-20211216180011193.3bcef984.png",D="/assets/image-20211216181726127.cc87a3d3.png",F="/assets/image-20211216191823494.c6bba187.png",H="/assets/image-20211216203353758.7e7bf250.png",N="/assets/image-20211216205012250.f9f711a3.png",G="/assets/image-20211216210624035.ddb69034.png",U="/assets/image-20211216214528768.2d8f3318.png",L="/assets/image-20211216223836509.c1753c02.png",$="/assets/hystrix-logo-tagline-640.d4904cf9.png",z="/assets/image-20211216234807370.78faa940.png",V="/assets/image-20211216235142728.52636fb1.png",W="/assets/image-20211217000753519.6c06d1db.png",X="/assets/image-20211217001126800.2b5f41d2.png",J="/assets/image-20211217001755366.d5015fd5.png",Q="/assets/image-20211217001728314.8db66d73.png",Z="/assets/image-20211217002055371.374036e7.png",K="/assets/image-20211217003741810.b42dc1c2.png",Y="/assets/image-20211217004459999.cf31589d.png",nn="/assets/image-20211217021235912.ffea4b29.png",sn="/assets/image-20211217022306337.84755e90.png",an="/assets/image-20211217022251704.fdd38210.png",tn="/assets/image-20211217024148826.5da1e588.png",en="/assets/image-20211217033014732.7e194669.png",pn="/assets/image-20211217033147482.b1ff49ac.png",on="/assets/Hystrix-20211217041416232.cd6266c9.png",ln="/assets/image-20211217043428882.23c11b97.png",cn="/assets/image-20211217044244593.2993f74d.png",un="/assets/image-20211217044039587.e609a8b9.png",rn="/assets/image-20211217044415598.c1e4c039.png",dn="/assets/image-20211217050342171.07e3005d.png",kn="/assets/image-20211217051025657.4bb5f5a5.png",vn="/assets/image-20211217051316053.19340023.png",mn="/assets/image-20211217054323502.9dcf4ab1.png",gn="/assets/image-20211217055034167.4f686ede.png",bn="/assets/image-20211217055646451.715410bf.png",hn="/assets/image-20211217055906628.69fac5ec.png",fn="/assets/image-20211217062035537.2e77a8de.png",yn="/assets/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5NzIyNDc1,size_16,color_FFFFFF,t_70.c3191dbd.png",wn="/assets/image-20211217080245773.36c47547.png",_n="/assets/image-20211217080409622.ce15c740.png",qn="/assets/image-20211217165445068.49265dec.png",xn="/assets/strip.57dd326b.gif",Sn="/assets/image-20211217202827524.a9077157.png",In="/assets/image-20211217202841412.bd67c569.png",jn="/assets/image-20211217203707737.17f3a786.png",Cn="/assets/image-20211217211453217.81cf4bc7.png",Rn="/assets/image-20211217235958779.14ff01d5.png",An="/assets/image-20211217225711837.87204e61.png",En="/assets/image-20211218000648951.87eb4ee5.png",On="/assets/image-20211218000820608.bfd6e2c7.png",Mn="/assets/image-20211218002557938.bd411089.png",Tn="/assets/image-20211218011712292.42521e9f.png",Pn="/assets/image-20211218012925122.283baf03.png",Bn="/assets/image-20211218013119206.e75161d2.png",Dn="/assets/image-20211218013143040.d2fcf189.png",Fn="/assets/image-20211218034649115.5dba32c6.png",Hn="/assets/image-20211218035243314.038e43fe.png",Nn="/assets/image-20211218035252061.7c4123f3.png",Gn="/assets/image-20211218035354141.f7dd652e.png",Un="/assets/image-20211218043514795.a8a46231.png",Ln="/assets/image-20211218043626656.cd848d10.png",$n="/assets/image-20211218045121607.de3add54.png",zn="/assets/image-20211218045526488.eede7632.png",Vn="/assets/image-20211218045623397.5a6a28d1.png",Wn="/assets/image-20211218053529615.ab2ac682.png",Xn="/assets/image-20211210210801146.5d42ab2a.png",Jn="/assets/image-20211218063755168.0b082931.png",Qn="/assets/image-20211218072131283.f82e78b7.png",Zn="/assets/image-20211218074338504.c31be64c.png",Kn="/assets/image-20211218072016420.082be56a.png",Yn="/assets/image-20211218074637496.3beaae2c.png",ns="/assets/image-20211218074722599.676c5404.png",ss="/assets/image-20211218121802075.cdc030f3.png",as="/assets/image-20211218191128019.99979a18.png",ts="/assets/image-20211218191424880.cb909541.png",es="/assets/image-20211218194031126.352c6e0b.png",ps="/assets/image-20211218203850769.3c938c15.png",os="/assets/image-20211218204349903.6a7f3d24.png",ls="/assets/image-20211218204558903.00cf309c.png",cs="/assets/image-20211218205413784.b48dd545.png",is="/assets/image-20211218210227168.38e4571d.png",us="/assets/image-20211218210815876.887bb04e.png",rs="/assets/image-20211218210914353.3a865691.png",ds="/assets/image-20211218211639507.f02f44b5.png",ks="/assets/image-20211218215828694.85fd68bd.png",vs="/assets/image-20211218220051280.d7da033e.png",ms="/assets/image-20211218224019835.1c9a11fc.png",gs="/assets/image-20211218235307792.619f985a.png",bs="/assets/image-20211219002604723.32251544.png",hs="/assets/image-20211219011445145.ff22f51e.png",fs="/assets/image-20211219024625184.586f1eed.png",ys="/assets/image-20211219030756936.7c46f8bf.png",ws="/assets/image-20211219032131490.45f5d40d.png",_s="/assets/image-20211219032914735.5d63946c.png",qs="/assets/image-20211219040257490.9d3e5f3c.png",xs="/assets/image-20211219044055678.61c7728d.png",Ss="/assets/image-20211219052448213.9a3c976b.png",Is="/assets/image-20211219233640865.a3c8d73a.png",js="/assets/image-20211219235949992.40604021.png",Cs="/assets/image-20211220015508554.35826fae.png",Rs="/assets/image-20211220015633239.5a6a5f53.png",As="/assets/image-20211220021902382.36c8ddf8.png",Es="/assets/image-20211220022000472.0dfd27e7.png",Os="/assets/image-20211220025422531.498eeda6.png",Ms="/assets/image-20211220025514922.78b1e436.png",Ts="/assets/image-20211220030852211.7b6569e5.png",Ps="/assets/image-20211220033545935.723f6bd7.png",Bs="/assets/874963-20200112125452205-1938615670.8dbf9ee1.png",Ds="/assets/image-20211220035935151.8144705b.png",Fs="/assets/image-20211220040617911.6fa0fc96.png",Hs="/assets/image-20211220041022410.d95a449e.png",Ns="/assets/image-20211220044121509.3f2317fa.png",Gs="/assets/image-20211220045414394.28e93448.png",Us="/assets/sentinel-flow-overview.2bbb4493.jpg",Ls="/assets/image-20211220055638686.18cb72f5.png",$s="/assets/image-20211220052734101.a35c57dd.png",zs="/assets/image-20211220053138472.debebdaa.png",Vs="/assets/image-20211220054106829.a3733fbf.png",Ws="/assets/image-20211220054331387.d8fe2ce5.png",Xs="/assets/image-20211220054509053.b7f84465.png",Js="/assets/image-20211220054717669.6de0b372.png",Qs="/assets/image-20211220061548885.25a54dcf.png",Zs="/assets/image-20211220064056121.e65f3e7d.png",Ks="/assets/image-20211220064202805.8a003c8b.png",Ys="/assets/warmup.48871c5b.gif",na="/assets/image-20211220071503507.540882f0.png",sa="/assets/queue.2599dd55.gif",aa="/assets/image-20211220072757951.2ff6a993.png",ta="/assets/62410811-cd871680-b61d-11e9-9df7-3ee41c618644.e1b06751.png",ea="/assets/image-20211220074737081.1c4bf389.png",pa="/assets/image-20211220075944766.0acb3343.png",oa="/assets/image-20211220074754932.c342bbc5.png",la="/assets/image-20211220081753209.e7962136.png",ca="/assets/image-20211220082437249.e80b858f.png",ia="/assets/image-20211220085727561.ae772350.png",ua="/assets/image-20211220085823862.d49783b4.png",ra="/assets/image-20211220091037057.3581ec0f.png",da="/assets/image-20211220091414624.82bea192.png",ka="/assets/image-20211220190835602.77a63292.png",va="/assets/image-20211220191347313.5c02c832.png",ma="/assets/image-20211220192135220.c0545754.png",ga="/assets/image-20211220193351507.da7d80cf.png",ba="/assets/image-20211220202120895.9be27fc5.png",ha="/assets/image-20211220202135429.ccd3e088.png",fa="/assets/image-20211220202749527.67d919cf.png",ya="/assets/image-20211220202803146.8b5b68b8.png",wa="/assets/image-20211220210748610.73fdd99c.png",_a="/assets/image-20211220210929921.87a40bf2.png",qa="/assets/image-20211220210956430.8efaa4fb.png",xa="/assets/image-20211220223214081.63513c8c.png",Sa="/assets/image-20211220223450676.b8d5f18d.png",Ia="/assets/image-20211220223816611.2c2f88ec.png",ja="/assets/image-20211220224108549.42d66982.png",Ca="/assets/image-20211220224805160.82fa3ece.png",Ra="/assets/image-20211220224928617.3b9c6428.png",Aa="/assets/image-20211220225104195.aa8186a6.png",Ea="/assets/image-20211220230434407.1f3ff7df.png",Oa="/assets/image-20211220230748386.325affc7.png",Ma="/assets/image-20211221004110477.97560710.png",Ta="/assets/image-20211221005055226.684ddd60.png",Pa="/assets/image-20211221005227959.25d492cc.png",Ba="/assets/image-20211221005351624.3ca584d7.png",Da="/assets/image-20211221005904923.15f88542.png",Fa="/assets/image-20211221011817723.4412a44c.png",Ha="/assets/image-20211221013758262.ebb6365b.png",Na="/assets/image-20211221013830907.3e16090a.png",Ga="/assets/image-20211221015202810.e836ec07.png";const Ua={},La=n("blockquote",null,[n("p",null,"springcloud\u7248\u672C\uFF1AHoxton SR6")],-1),$a=n("h2",{id:"\u6982\u8FF0"},[n("a",{class:"header-anchor",href:"#\u6982\u8FF0","aria-hidden":"true"},"#"),s(" \u6982\u8FF0")],-1),za=n("p",null,"springcloud \u63D0\u4F9B\u4E86\u4E00\u7CFB\u5217\u7684\u5DE5\u5177\u96C6\u6765\u5E2E\u52A9\u6211\u4EEC\u670D\u52A1\u7CFB\u7EDF\u4E2D\u7684\u670D\u52A1\u6CBB\u7406\u548C\u670D\u52A1\u76D1\u63A7\u3002",-1),Va=n("h3",{id:"\u4EC0\u4E48\u662F\u5FAE\u670D\u52A1"},[n("a",{class:"header-anchor",href:"#\u4EC0\u4E48\u662F\u5FAE\u670D\u52A1","aria-hidden":"true"},"#"),s(" \u4EC0\u4E48\u662F\u5FAE\u670D\u52A1")],-1),Wa=n("p",null,"\u5B98\u7F51\uFF1Ahttps://martinfowler.com/microservices/",-1),Xa=n("p",null,[s("In short, the microservice architectural style is an approach to developing a single application as "),n("strong",null,"a suite of small services"),s(", each "),n("strong",null,"running in its own process"),s(" and communicating with lightweight mechanisms, often an HTTP resource API. These services are "),n("strong",null,"built around business capabilities"),s(" and "),n("strong",null,"independently deployable"),s(" by fully automated deployment machinery. There is a "),n("strong",null,"bare minimum of centralized management"),s(" of these services, which may be written in different programming languages and use different data storage technologies.")],-1),Ja=s("-- "),Qa={href:"https://martinfowler.com/articles/microservices.html",target:"_blank",rel:"noopener noreferrer"},Za=s("James Lewis and Martin Fowler (2014)"),Ka=e(`<div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">-</span> a suite of small services													- \u4E00\u7CFB\u5217\u5FAE\u5C0F\u670D\u52A1
<span class="token list punctuation">-</span> running in its own process												- \u8FD0\u884C\u5728\u81EA\u5DF1\u7684\u8FDB\u7A0B\u91CC
<span class="token list punctuation">-</span> built around business capabilities								- \u56F4\u7ED5\u81EA\u5DF1\u7684\u4E1A\u52A1\u5F00\u53D1
<span class="token list punctuation">-</span> independently deployable													- \u72EC\u7ACB\u90E8\u7F72
<span class="token list punctuation">-</span> bare minimum of centralized management						- \u57FA\u4E8E\u5206\u5E03\u5F0F\u7BA1\u7406
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u5B98\u65B9\u5B9A\u4E49\uFF1A\u5FAE\u670D\u52A1\u5C31\u662F\u7531\u4E00\u7CFB\u5217\u56F4\u7ED5\u81EA\u5DF1\u4E1A\u52A1\u5F00\u53D1\u7684\u5FAE\u5C0F\u670D\u52A1\u6784\u6210\uFF0C\u4ED6\u4EEC\u72EC\u7ACB\u4E0D\u662F\u5728\u81EA\u5DF1\u7684\u8FDB\u7A0B\u91CC\uFF0C\u57FA\u4E8E\u5206\u5E03\u5F0F\u7684\u7BA1\u7406</li></ul><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>App\u9879\u76EE\uFF1A
	<span class="token list punctuation">-</span> \u5355\u4F53\u5E94\u7528\uFF1A\u5206\u7C7B\u6A21\u5757\u3001\u89C6\u9891\u6A21\u5757\u3001\u8BC4\u8BBA\u6A21\u5757\u3001\u7528\u6237\u6A21\u5757\u3001\u7EDF\u8BA1\u6A21\u5757.... \u8FD9\u4E9B\u5982\u679C\u662F\u5728\u4E00\u4E2A\u9879\u76EE\u4E2D\uFF0C\u8FD0\u884C\u5728\u540C\u4E00\u4E2A\u670D\u52A1\u5668\u4E2D\u5C31\u53EB\u5355\u4F53\u5E94\u7528
	<span class="token list punctuation">-</span> \u5FAE\u670D\u52A1\uFF1A\u72EC\u7ACB\u5E94\u7528\u2014&gt;\u8BA1\u7B97\u673A\u8FDB\u7A0B\u91CC\u9762-&gt;\u72EC\u7ACB\u90E8\u7F72\uFF0C\u6240\u6709\u7684\u670D\u52A1\u624D\u80FD\u7EC4\u6210\u6574\u4E2A\u5E94\u7528\uFF0C\u57FA\u4E8E\u5206\u5E03\u5F0F\u7684\u670D\u52A1\u7BA1\u7406\u5E94\u7528
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u901A\u4FD7\u5B9A\u4E49\uFF1A\u5FAE\u670D\u52A1\u662F\u4E00\u79CD\u67B6\u6784\uFF0C\u8FD9\u79CD\u67B6\u6784\u662F\u5C06\u5355\u4E2A\u7684\u6574\u4F53\u5E94\u7528\u7A0B\u5E8F\u5206\u5272\u6210\u66F4\u5C0F\u7684\u9879\u76EE\u5173\u8054\u7684\u72EC\u7ACB\u7684\u670D\u52A1\u3002\u4E00\u4E2A\u670D\u52A1\u901A\u5E38\u5B9E\u73B0\u4E00\u7EC4\u72EC\u7ACB\u7684\u7279\u6027\u6216\u8005\u529F\u80FD\uFF0C\u5305\u542B\u81EA\u5DF1\u7684\u4E1A\u52A1\u903B\u8F91\u548C\u9002\u914D\u5668\u3002\u5404\u4E2A\u5FAE\u670D\u52A1\u4E4B\u95F4\u7684\u5173\u8054\u901A\u8FC7\u66B4\u9732api\u6765\u5B9E\u73B0\u3002\u8FD9\u4E9B\u72EC\u7ACB\u7684\u5FAE\u670D\u52A1\u4E0D\u9700\u8981\u90E8\u7F72\u5728\u540C\u4E00\u4E2A\u865A\u62DF\u673A\u3001\u540C\u4E00\u4E2A\u7CFB\u7EDF\u548C\u540C\u4E00\u4E2A\u5E94\u7528\u670D\u52A1\u5668\u4E2D</li></ul><h3 id="\u4E3A\u4EC0\u4E48\u662F\u5FAE\u670D\u52A1"><a class="header-anchor" href="#\u4E3A\u4EC0\u4E48\u662F\u5FAE\u670D\u52A1" aria-hidden="true">#</a> \u4E3A\u4EC0\u4E48\u662F\u5FAE\u670D\u52A1</h3><h4 id="\u5355\u4F53\u5E94\u7528"><a class="header-anchor" href="#\u5355\u4F53\u5E94\u7528" aria-hidden="true">#</a> \u5355\u4F53\u5E94\u7528</h4><p><img src="`+u+'" alt="image-20211215200720688"></p><p>\u5355\u4F53\u5E94\u7528\u4F18\u7F3A\u70B9\uFF1A</p><p>\u4F18\u70B9\uFF1A</p><ul><li>\u5355\u4E00\u67B6\u6784\u6A21\u5F0F\u5728\u9879\u76EE\u521D\u671F\u5F88\u5C0F\u7684\u65F6\u5019\u5F00\u53D1\u65B9\u4FBF\uFF0C\u6D4B\u8BD5\u65B9\u4FBF\uFF0C\u90E8\u7F72\u65B9\u4FBF\uFF0C\u8FD0\u884C\u826F\u597D</li></ul><p>\u7F3A\u70B9\uFF1A</p><ul><li>\u5E94\u7528\u968F\u7740\u65F6\u95F4\u7684\u63A8\u8FDB\uFF0C\u52A0\u5165\u7684\u529F\u80FD\u8D8A\u6765\u8D8A\u591A\uFF0C\u6700\u7EC8\u4F1A\u53D8\u5F97\u5DE8\u5927\uFF0C\u4E00\u4E2A\u9879\u76EE\u4E2D\u5F88\u53EF\u80FD\u6570\u767E\u4E07\u884C\u7684\u4EE3\u7801\uFF0C\u76F8\u4E92\u4E4B\u95F4\u7E41\u7410\u7684jar\u5305\u4F9D\u8D56</li><li>\u4E45\u800C\u4E45\u4E4B\uFF0C\u5F00\u53D1\u6548\u7387\u4F4E\uFF0C\u4EE3\u7801\u7EF4\u62A4\u56F0\u96BE</li><li>\u8FD8\u6709\u4E00\u4E2A\u5982\u679C\u60F3\u6574\u4F53\u5E94\u7528\u91C7\u7528\u65B0\u7684\u6280\u672F\uFF0C\u65B0\u7684\u6846\u67B6\u6216\u8005\u8BED\u8A00\uFF0C\u90FD\u662F\u4E0D\u53EF\u80FD\u7684</li><li>\u4EFB\u610F\u6A21\u5757\u7684\u6F0F\u6D1E\u6216\u8005\u9519\u8BEF\u90FD\u4F1A\u5F71\u54CD\u8FD9\u4E2A\u5E94\u7528\uFF0C\u964D\u4F4E\u7CFB\u7EDF\u7684\u53EF\u9760\u6027</li></ul><h4 id="\u5FAE\u670D\u52A1\u67B6\u6784\u5E94\u7528"><a class="header-anchor" href="#\u5FAE\u670D\u52A1\u67B6\u6784\u5E94\u7528" aria-hidden="true">#</a> \u5FAE\u670D\u52A1\u67B6\u6784\u5E94\u7528</h4><p><img src="'+r+'" alt="image-20211215201508033"></p><p>\u5FAE\u670D\u52A1\u4F18\u7F3A\u70B9\uFF1A</p><p>\u4F18\u70B9\uFF1A</p><ul><li>\u5C06\u670D\u52A1\u62C6\u5206\u6210\u591A\u4E2A\u5355\u4E00\u804C\u8D23\u7684\u5C0F\u7684\u670D\u52A1\uFF0C\u8FDB\u884C\u5355\u72EC\u90E8\u7F72\uFF0C\u670D\u52A1\u4E4B\u95F4\u901A\u8FC7\u7F51\u7EDC\u8FDB\u884C\u901A\u4FE1</li><li>\u6BCF\u4E2A\u670D\u52A1\u5E94\u8BE5\u6709\u81EA\u5DF1\u7684\u5355\u72EC\u7684\u7BA1\u7406\u56E2\u961F\uFF0C\u9AD8\u5EA6\u81EA\u6CBB</li><li>\u670D\u52A1\u5404\u81EA\u6709\u81EA\u5DF1\u7684\u5355\u72EC\u7684\u804C\u8D23\uFF0C\u670D\u52A1\u4E4B\u95F4\u677E\u8026\u5408\uFF0C\u907F\u514D\u56E0\u4E00\u4E2A\u6A21\u5757\u7684\u95EE\u9898\u5BFC\u81F4\u670D\u52A1\u5D29\u6E83</li></ul><p>\u7F3A\u70B9\uFF1A</p><ul><li>\u5F00\u53D1\u4EBA\u5458\u5904\u7406\u5206\u5E03\u5F0F\u7CFB\u7EDF\u7684\u590D\u6742\u6027</li><li>\u591A\u670D\u52A1\u8FD0\u7EF4\u96BE\u5EA6\uFF0C\u968F\u7740\u670D\u52A1\u7684\u589E\u52A0\uFF0C\u8FD0\u7EF4\u7684\u538B\u529B\u4E5F\u5728\u589E\u5927</li><li>\u670D\u52A1\u6CBB\u7406 \u548C \u670D\u52A1\u76D1\u63A7 \u662F\u5173\u952E</li></ul><h4 id="\u67B6\u6784\u7684\u6F14\u53D8"><a class="header-anchor" href="#\u67B6\u6784\u7684\u6F14\u53D8" aria-hidden="true">#</a> \u67B6\u6784\u7684\u6F14\u53D8</h4><h4 id="\u67B6\u6784\u7684\u6F14\u53D8\u8FC7\u7A0B"><a class="header-anchor" href="#\u67B6\u6784\u7684\u6F14\u53D8\u8FC7\u7A0B" aria-hidden="true">#</a> \u67B6\u6784\u7684\u6F14\u53D8\u8FC7\u7A0B</h4><p>\u5355\u4E00\u5E94\u7528\u67B6\u6784-&gt;\u5782\u76F4\u5E94\u7528\u67B6\u6784-&gt;\u5206\u5E03\u5F0F\u670D\u52A1\u67B6\u6784-&gt;\u6D41\u52A8\u8BA1\u7B97\u67B6\u6784 | \u5FAE\u670D\u52A1\u67B6\u6784-&gt;\u672A\u77E5</p><blockquote><p>\u5B98\u7F51\uFF1Ahttps://dubbo.apache.org/zh/</p></blockquote><p><img src="'+d+'" alt="image-20211215203139170"></p><p>\u6F14\u53D8\uFF1A</p><ol><li>All in One Application \u5355\u4E00\u67B6\u6784</li></ol><p>\u8D77\u521D\u5F53\u7F51\u7AD9\u6D41\u91CF\u5F88\u5C0F\u7684\u65F6\u5019\uFF0C\u5C06\u6240\u6709\u7684\u529F\u80FD\u90FD\u5199\u5728\u4E00\u4E2A\u5E94\u7528\u91CC\u9762\uFF0C\u5BF9\u6574\u4E2A\u5E94\u7528\u8FDB\u884C\u90E8\u7F72\uFF0C\u4EE5\u51CF\u5C11\u90E8\u7F72\u8282\u70B9\u548C\u6210\u672C\u3002\u5BF9\u4E8E\u8FD9\u4E2A\u67B6\u6784\u7B80\u5316\u589E\u5220\u6539\u67E5\u7684\u5DE5\u4F5C\u91CF\u7684\u6570\u636E\u8BBF\u95EE\u67B6\u6784\uFF08ORM\uFF09\u662F\u5173\u952E</p><ol start="2"><li>Vertical Application \u5782\u76F4\u67B6\u6784</li></ol><p>\u5F53\u8BBF\u95EE\u91CF\u9010\u6E10\u589E\u5927\uFF0C\u5355\u4E00\u5E94\u7528\u589E\u52A0\u673A\u5668\u5E26\u6765\u7684\u52A0\u901F\u5EA6\u8D8A\u6765\u8D8A\u5C0F\uFF0C\u63D0\u5347\u6548\u7387\u7684\u65B9\u6CD5\u4E4B\u4E00\u662F\u5C06\u5E94\u7528\u62C6\u5206\u6210\u4E92\u4E0D\u76F8\u5E72\u7684\u51E0\u4E2A\u5E94\u7528\uFF0C\u4EE5\u63D0\u5347\u6548\u7387\u3002\u6B64\u65F6\uFF0C\u7528\u4E8E\u52A0\u901F\u524D\u7AEF\u9875\u9762\u5F00\u53D1\u7684web\u6846\u67B6\uFF08MVC\uFF09\u662F\u5173\u952E</p><ol start="3"><li>Distributed Service \u5206\u5E03\u5F0F\u670D\u52A1\u67B6\u6784</li></ol><p>\u5F53\u5782\u76F4\u5E94\u7528\u8D8A\u6765\u8D8A\u591A\uFF0C\u5E94\u7528\u4E4B\u95F4\u4EA4\u4E92\u4E0D\u53EF\u907F\u514D\uFF0C\u5C06\u6838\u5FC3\u4E1A\u52A1\u62BD\u53D6\u51FA\u6765\uFF0C\u4F5C\u4E3A\u72EC\u7ACB\u7684\u670D\u52A1\uFF0C\u9010\u6E10\u5F62\u6210\u7A33\u5B9A\u7684\u670D\u52A1\u4E2D\u5FC3\uFF0C\u4F7F\u524D\u7AEF\u5E94\u7528\u66F4\u5FEB\u7684\u54CD\u5E94\u591A\u53D8\u7684\u5E02\u573A\u9700\u6C42\u3002\u6B64\u65F6\uFF0C\u7528\u4E8E\u63D0\u9AD8\u4E1A\u52A1\u590D\u7528\u53CA\u6574\u5408\u7684\u5206\u5E03\u5F0F\u670D\u52A1\u6846\u67B6\uFF08RPC\uFF09\u662F\u5173\u952E</p><ol start="4"><li>Elastic Comuting \u6D41\u52A8\u8BA1\u7B97\u67B6\u6784\u5373\u5FAE\u670D\u52A1\u67B6\u6784</li></ol><p>\u5F53\u670D\u52A1\u8D8A\u6765\u8D8A\u591A\uFF0C\u5BB9\u91CF\u7684\u8BC4\u4F30\uFF0C\u5C0F\u670D\u52A1\u8D44\u6E90\u7684\u6D6A\u8D39\u7B49\u95EE\u9898\u9010\u6E10\u663E\u73B0\uFF0C\u6B64\u65F6\u9700\u8981\u589E\u52A0\u4E00\u4E2A\u8C03\u5EA6\u4E2D\u5FC3\u57FA\u4E8E\u8BBF\u95EE\u538B\u529B\u5B9E\u65F6\u7BA1\u7406\u96C6\u7FA4\u5BB9\u91CF\uFF0C\u63D0\u9AD8\u96C6\u7FA4\u5229\u7528\u7387\u3002\u6B64\u65F6\uFF0C\u7528\u4E8E\u63D0\u9AD8\u673A\u5668\u5229\u7528\u7387\u7684\u8D44\u6E90\u8C03\u5EA6\u548C\u6CBB\u7406\u4E2D\u5FC3\uFF08SOA\uFF09\u662F\u5173\u952E</p><blockquote><p>\u597D\u7684\u67B6\u6784\u5E76\u4E0D\u662F\u8BBE\u8BA1\u51FA\u6765\u7684\uFF0C\u800C\u662F\u8FDB\u5316\u51FA\u6765\u7684</p></blockquote><h3 id="\u5FAE\u670D\u52A1\u7684\u89E3\u51B3\u65B9\u6848"><a class="header-anchor" href="#\u5FAE\u670D\u52A1\u7684\u89E3\u51B3\u65B9\u6848" aria-hidden="true">#</a> \u5FAE\u670D\u52A1\u7684\u89E3\u51B3\u65B9\u6848</h3><h4 id="dubbo-\u963F\u91CC\u7CFB"><a class="header-anchor" href="#dubbo-\u963F\u91CC\u7CFB" aria-hidden="true">#</a> dubbo\uFF08\u963F\u91CC\u7CFB\uFF09</h4><ol><li>\u521D\u51FA\u8305\u5E90</li></ol><p>2011\u5E74\u672B\uFF0C\u963F\u91CC\u5DF4\u5DF4\u5728GitHub\u4E0A\u5F00\u6E90\u4E86\u57FA\u4E8EJava\u7684\u5206\u5E03\u5F0F\u670D\u52A1\u6CBB\u7406\u6846\u67B6dubbo\uFF0C\u4E4B\u540E\u5B83\u6210\u4E3A\u4E86\u56FD\u5185\u8BE5\u7C7B\u5F00\u6E90\u9879\u76EE\u7684\u4F7C\u4F7C\u8005\uFF0C\u8BB8\u591A\u5F00\u53D1\u8005\u5BF9\u5176\u8868\u793A\u9752\u7750\uFF0C\u540C\u65F6\uFF0C\u5148\u540E\u6709\u4E0D\u5C11\u516C\u53F8\u5728\u5B9E\u8DF5\u4E2D\u57FA\u4E8Edubbo\u8FDB\u884C\u5206\u5E03\u5F0F\u7CFB\u7EDF\u67B6\u6784\uFF0C\u76EE\u524D\u6742GitHub\u4E0A\uFF0C\u5B83\u7684fork\u3001star\u6570\u5747\u5DF2\u7834\u4E07\u3002dubbo\u81F4\u529B\u4E8E\u63D0\u4F9B\u9AD8\u6027\u80FD\u548C\u900F\u660E\u5316\u7684RPC\u8FDC\u7A0B\u670D\u52A1\u8C03\u7528\u65B9\u6848\uFF0C\u4EE5\u53CASOA\u670D\u52A1\u6CBB\u7406\u65B9\u6848\uFF0C\u4F7F\u5F97\u5E94\u7528\u53EF\u901A\u8FC7\u9AD8\u6027\u80FDRPC\u5B9E\u73B0\u670D\u52A1\u7684\u8F93\u51FA\u3001\u8F93\u5165\u529F\u80FD\u548Cspring\u6846\u67B6\u65E0\u7F1D\u96C6\u6210\u3002dubbo\u5305\u542B\u8FDC\u7A0B\u901A\u8BAF\u3001\u96C6\u7FA4\u5BB9\u9519\u548C\u81EA\u52A8\u53D1\u73B0\u4E09\u4E2A\u6838\u5FC3\u90E8\u5206</p><ol start="2"><li>\u505C\u6B62\u7EF4\u62A4</li></ol><p>2012\u5E7410\u670823\u65E5\u53D1\u5E03Dubbo2.5.3\u7248\u672C\uFF0C\u81F3\u6B64\u4E4B\u540E\uFF0C\u963F\u91CC\u57FA\u672C\u505C\u6B62\u4E86\u5BF9Dubbo\u7684\u4E3B\u8981\u5347\u7EA7\uFF1B\u4EC5\u572813\u300114\u5E74\u8FDB\u884C\u8FC7\u51E0\u6B21\u66F4\u65B0\u7EF4\u62A4\u7248\u672C\u7136\u540E\u5C31\u505C\u6B62\u4E86\u6240\u6709\u7684\u7EF4\u62A4\u5DE5\u4F5C\uFF1B\u540C\u65F6Dubbo\u5BF9Srping\u7684\u652F\u6301\u4E5F\u505C\u7559\u5728\u4E86Spring 2.5.6\u7248\u672C\u4E0A\u3002\u5728\u963F\u91CC\u505C\u6B62\u7EF4\u62A4\u548C\u5347\u7EA7Dubbo\u671F\u95F4\uFF0C\u5F53\u5F53\u7F51\u5F00\u59CB\u7EF4\u62A4\u81EA\u5DF1\u7684Dubbo\u5206\u652F\u7248\u672CDubbox\uFF0C\u652F\u6301\u4E86\u65B0\u7248\u672C\u7684Spring\uFF0C\u5E76\u5BF9\u5916\u5F00\u6E90\u4E86Dubbox</p><ol start="3"><li>\u6B7B\u800C\u590D\u751F</li></ol><p>2017\u5E749\u67087\u65E5\u53D1\u5E03Dubbo\u76842.5.4\u7248\u672C\uFF0C\u8DDD\u79BB\u4E0A\u4E00\u4E2A\u7248\u672C2.5.3\u53D1\u5E03\u5DF2\u7ECF\u63A5\u8FD1\u5FEB5\u5E74\u65F6\u95F4\u4E86\u3002\u5728\u968F\u540E\u7684\u51E0\u4E2A\u6708\u4E2D\uFF0C\u963F\u91CCDubbo\u5F00\u53D1\u56E2\u961F\u4EE5\u5DEE\u4E0D\u591A\u6BCF\u6708\u4E00\u7248\u672C\u7684\u901F\u5EA6\u5F00\u59CB\u5FEB\u901F\u5347\u7EA7\u8FED\u4EE3\uFF0C\u4FEE\u8865\u4E86Dubbo\u8001\u7248\u672C\u591A\u5E74\u6765\u5B58\u5728\u7684\u8BF8\u591Abug\uFF0C\u5E76\u5BF9Spring\u7B49\u7EC4\u4EF6\u7684\u652F\u6301\u8FDB\u884C\u4E86\u5168\u9762\u5347\u7EA7</p><ol start="4"><li>Dubbo 3.0\u542F\u52A8</li></ol><p>2018\u5E741\u67088\u65E5\uFF0CDubbo\u521B\u59CB\u4EBA\u4E4B\u4E00\u6881\u98DE\u5728Dubbo\u4EA4\u6D41\u7FA4\u91CC\u900F\u9732\u4E86Dubbo 3.0\u6B63\u5728\u52A8\u5DE5\u7684\u6D88\u606F\u3002Dubbo 3.0\u5185\u6838\u4E0EDubbo2.0\u5B8C\u5168\u4E0D\u540C\uFF0C\u4F46\u517C\u5BB9Dubbo 2.0\u3002Dubbo 3.0\u5C06\u4EE5Streaming\u4E3A\u5185\u6838\uFF0C\u4E0D\u518D\u662FDubbo\u65F6\u4EE3\u7684RPC\uFF0C\u4F46\u662FRPC\u4F1A\u5728Dubbo3.0\u4E2D\u53D8\u6210\u8FDC\u7A0BStreaming\u5BF9\u63A5\u7684\u4E00\u79CD\u53EF\u9009\u5F62\u6001\u3002Dubbo 3.0\u5C06\u652F\u6301\u53EF\u9009Service Mesh\uFF0C\u591A\u52A0\u4E00\u5C42IPC\uFF0C\u8FD9\u4E3B\u8981\u662F\u4E3A\u4E86\u517C\u5BB9\u8001\u7CFB\u7EDF\uFF0C\u800C\u5185\u90E8\u5219\u4F1A\u4F18\u5148\u5C1D\u8BD5\u5185\u5D4C\u6A21\u5F0F\u3002\u4EE3\u7406\u6A21\u5F0FOps\u53EF\u72EC\u7ACB\u5347\u7EA7\u6846\u67B6\uFF0C\u51CF\u5C11\u4E1A\u52A1\u4FB5\u5165\uFF0C\u800C\u5185\u5D4C\u6A21\u5F0F\u53EF\u4EE5\u5E26\u4E1A\u52A1\u6D4B\u8BD5\u3001\u90E8\u7F72\u8282\u70B9\u5C11\u3001\u7A33\u5B9A\u6027\u68C0\u6D4B\u65B9\u4FBF\u3002\u540C\u65F6\uFF0C\u53EF\u4EE5\u5C06Dubbo3.0\u542F\u52A8\u4E3A\u72EC\u7ACB\u8FDB\u7A0B\uFF0C\u7531dubbo-mesh\u8FDB\u884CIPC\uFF0C\u8DEF\u7531\u3001\u8D1F\u8F7D\u5747\u8861\u548C\u7194\u65AD\u673A\u5236\u5C06\u7531\u72EC\u7ACB\u8FDB\u7A0B\u63A7\u5236</p><ol start="5"><li>\u5C06Dubbo\u5F00\u6E90\u8D21\u732E\u7ED9Apache</li></ol><p>2018\u5E742\u670815\u65E5\uFF0C\u963F\u91CC\u5C06Dubbo\u5F00\u6E90\u8D21\u732E\u7ED9Apache\uFF0C\u5373incubator-dubbo\u30022019 \u5E74 5 \u6708 20 \u65E5\uFF0CApache \u8F6F\u4EF6\u57FA\u91D1\u4F1A\u5728\u9A6C\u8428\u8BF8\u585E\u5DDE\u7EF4\u514B\u83F2\u5C14\u5FB7\u5BA3\u5E03\uFF0CApache Dubbo \u5347\u7EA7\u4E3A\u9876\u7EA7\u9879\u76EE</p><p>**\u7ED3\u8BBA\uFF1A**\u5F53\u524D\u7531\u4E8ERPC\u534F\u8BAE\u3001\u6CE8\u518C\u4E2D\u5FC3\u5143\u6570\u636E\u4E0D\u5339\u914D\u7B49\u95EE\u9898\uFF0C\u5728\u9762\u4E34\u5FAE\u670D\u52A1\u57FA\u7840\u6846\u67B6\u9009\u578B\u65F6dubbo\u4E0Espring Cloud\u662F\u53EA\u80FD\u4E8C\u9009\u4E00\uFF0C\u8FD9\u4E5F\u662F\u4E3A\u4EC0\u4E48\u5927\u5BB6\u603B\u662F\u62FFdubbo\u548Cspring cloud\u505A\u5BF9\u6BD4\u7684\u539F\u56E0\u4E4B\u4E00\u3002dubbo\u4E4B\u540E\u4F1A\u79EF\u6781\u5BFB\u627E\u9002\u914D\u5230spring Cloud\u751F\u6001\uFF0C\u6BD4\u5982\u4F5C\u4E3Aspring Cloud\u7684\u4E8C\u8FDB\u5236\u901A\u4FE1\u65B9\u6848\u6765\u53D1\u6325dubbo\u7684\u6027\u80FD\u4F18\u52BF\uFF0C\u6216\u8005dubbo\u901A\u8FC7\u6A21\u5757\u5316\u4EE5\u53CA\u5BF9http\u7684\u652F\u6301\u9002\u914D\u5230spring Cloud\u4E2D</p><p><img src="'+k+`" alt="image-20211215205404167"></p><h4 id="springcloud"><a class="header-anchor" href="#springcloud" aria-hidden="true">#</a> springcloud</h4><p>spring Cloud Netflix\uFF1A\u57FA\u4E8E\u7F8E\u56FDnetflix\u516C\u53F8\u5F00\u6E90\u7684\u7EC4\u4EF6\u8FDB\u884C\u5C01\u88C5\uFF0C\u63D0\u4F9B\u4E86\u5FAE\u670D\u52A1\u4E00\u7AD9\u5F0F\u7684\u89E3\u51B3\u65B9\u6848</p><p>spring Cloud alibaba\uFF1A\u5728spring cloud netflix \u57FA\u7840\u4E0A\u5C01\u88C5\u4E86\u963F\u91CC\u5DF4\u5DF4\u5FAE\u670D\u52A1\u89E3\u51B3\u65B9\u6848</p><p>spring Cloud spring\uFF1A\u76EE\u524Dspring\u5B98\u65B9\u5176\u5B9E\u6B63\u5728\u9010\u6E10\u5438\u6536Netflix\u7EC4\u4EF6\u7684\u7CBE\u534E\uFF0C\u5E76\u5728\u6B64\u57FA\u7840\u4E0A\u8FDB\u884C\u4E8C\u6B21\u5C01\u88C5\u4F18\u5316\uFF0C\u6253\u9020spring\u4E13\u6709\u7684\u89E3\u51B3\u65B9\u6848</p><h3 id="\u4EC0\u4E48\u662Fspringcloud"><a class="header-anchor" href="#\u4EC0\u4E48\u662Fspringcloud" aria-hidden="true">#</a> \u4EC0\u4E48\u662Fspringcloud</h3><h4 id="\u5B98\u65B9\u5B9A\u4E49"><a class="header-anchor" href="#\u5B98\u65B9\u5B9A\u4E49" aria-hidden="true">#</a> \u5B98\u65B9\u5B9A\u4E49</h4><blockquote><p>\u5B98\u65B9\u7F51\u5740\uFF1Ahttps://docs.spring.io/spring-cloud/docs/Hoxton.SR12/reference/html/</p><p>Spring Cloud provides tools for developers to quickly build some of the common patterns in distributed systems (e.g. configuration management, service discovery, circuit breakers, intelligent routing, micro-proxy, control bus). Coordination of distributed systems leads to boiler plate patterns, and using Spring Cloud developers can quickly stand up services and applications that implement those patterns.</p><p>Release Train Version: <strong>Hoxton.SR12</strong></p><p>Supported Boot Version: <strong>2.3.12.RELEASE</strong></p><p>\u7FFB\u8BD1\uFF1A</p><p>Spring Cloud \u4E3A\u5F00\u53D1\u4EBA\u5458\u63D0\u4F9B\u4E86\u5FEB\u901F\u6784\u5EFA\u5206\u5E03\u5F0F\u7CFB\u7EDF\u4E2D\u4E00\u4E9B\u5E38\u7528\u6A21\u5F0F\u7684\u5DE5\u5177\uFF08\u4F8B\u5982\u914D\u7F6E\u7BA1\u7406\u3001\u670D\u52A1\u53D1\u73B0\u3001\u65AD\u8DEF\u5668\u3001\u667A\u80FD\u8DEF\u7531\u3001\u5FAE\u4EE3\u7406\u3001\u63A7\u5236\u603B\u7EBF\uFF09\u3002\u5206\u5E03\u5F0F\u7CFB\u7EDF\u7684\u534F\u8C03\u5BFC\u81F4\u4E86\u6837\u677F\u6A21\u5F0F\uFF0C\u4F7F\u7528 Spring Cloud \u5F00\u53D1\u4EBA\u5458\u53EF\u4EE5\u5FEB\u901F\u5EFA\u7ACB\u5B9E\u73B0\u8FD9\u4E9B\u6A21\u5F0F\u7684\u670D\u52A1\u548C\u5E94\u7528\u7A0B\u5E8F</p><p>\u901A\u4FD7\u7406\u89E3\uFF1A</p><p><strong>springcloud\u662F\u4E00\u4E2A\u542B\u6709\u591A\u4E2A\u5B50\u9879\u76EE\u7684\u5F00\u53D1\u5DE5\u5177\u96C6</strong>\uFF0C\u96C6\u5408\u4E86\u4F17\u591A\u7684\u5F00\u6E90\u6846\u67B6\uFF0C\u5B83\u5229\u7528\u4E86springboot\u5F00\u53D1\u7684\u4FBF\u5229\u6027\u5B9E\u73B0\u4E86\u5F88\u591A\u529F\u80FD\uFF0C\u5982\u670D\u52A1\u6CE8\u518C\u3001\u670D\u52A1\u53D1\u73B0\u3001\u8D1F\u8F7D\u5747\u8861\u7B49\u3002springcloud\u5728\u6574\u5408\u8FC7\u7A0B\u4E2D\u4E3B\u8981\u662F\u9488\u5BF9Netflix\u5F00\u6E90\u7EC4\u4EF6\u7684\u5C01\u88C5\u3002springcloud\u7684\u51FA\u73B0\u771F\u6B63\u7684\u7B80\u5316\u4E86\u5206\u5E03\u5F0F\u67B6\u6784\u7684\u5F00\u53D1</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>collections\uFF1A
	<span class="token list punctuation">-</span> \u7EC4\u4EF61 \u5B50\u9879\u76EE
	<span class="token list punctuation">-</span> \u7EC4\u4EF62 \u5B50\u9879\u76EE
	<span class="token list punctuation">-</span> \u7EC4\u4EF63 \u5B50\u9879\u76EE
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>\u5FAE\u670D\u52A1\u57FA\u4E8E\u72EC\u7ACB\u4E1A\u52A1\u62C6\u5206\u6210\u4E00\u4E2A\u5FAE\u5C0F\u7684\u670D\u52A1\uFF0C\u6BCF\u4E2A\u670D\u52A1\u72EC\u7ACB\u90E8\u7F72\uFF0C\u8FD0\u884C\u5728\u81EA\u5DF1\u7684\u8FDB\u7A0B\u91CC\u9762\uFF0C\u670D\u52A1\u4E4B\u95F4\u4F7F\u7528http rest\u7684\u65B9\u5F0F\u8FDB\u884C\u901A\u4FE1</p><p>\u5728\u5355\u4F53\u5E94\u7528\u7684\u65F6\u5019\uFF0C\u5B58\u5728\u5206\u7C7B\u6A21\u5757\u3001\u89C6\u9891\u6A21\u5757\u3001\u7528\u6237\u6A21\u5757....</p><p>\u5728\u5FAE\u670D\u52A1\u67B6\u6784\u5E94\u7528\u7684\u65F6\u5019\uFF0C\u5B58\u5728\u5206\u7C7B\u670D\u52A1 \u89C6\u9891\u670D\u52A1 \u7528\u6237\u670D\u52A1....\u5176\u5B9E\u5F00\u53D1\u8FD9\u4E9B\u670D\u52A1\u5E76\u4E0D\u96BE\uFF0C\u53EA\u9700\u8981\u521B\u5EFA\u5F88\u591Aspringboot\u9879\u76EE\u5C31\u53EF\u4EE5\u4E86</p><p>\u5FAE\u670D\u52A1\u67B6\u6784\u4E0B\u5B58\u5728\u7684\u95EE\u9898\uFF1F</p><ul><li>\u8981\u6709\u4E2A\u7EC4\u4EF6\u5E2E\u52A9\u6211\u4EEC\u8BB0\u5F55\u670D\u52A1\u3001\u76D1\u63A7\u670D\u52A1\u3001\u670D\u52A1\u53D1\u73B0\uFF0C\u4E5F\u53EB\u670D\u52A1\u7684\u6CE8\u518C\u548C\u53D1\u73B0\u7EC4\u4EF6 \u670D\u52A1\u7684\u6CE8\u518C\u4E2D\u5FC3\u7EC4\u4EF6</li><li>\u670D\u52A1\u7684\u8C03\u7528\u95EE\u9898\uFF0Chttp rest\u65B9\u5F0F\u8C03\u7528\uFF0C\u5982\u4F55\u8C03\u7528\uFF1F\u670D\u52A1\u8C03\u7528\u65F6\u5982\u4F55\u5B9E\u73B0\u670D\u52A1\u7684\u8D1F\u8F7D\u5747\u8861\uFF08\u591A\u6B21\u8BF7\u6C42\u5206\u5747\u5230\u4E0D\u540C\u7684\u8282\u70B9\u4E0A\uFF09\uFF1F</li><li>\u670D\u52A1\u7684\u96EA\u5D29\u6548\u5E94\u5982\u4F55\u5904\u7406\uFF1F\uFF08\u6BD4\u5982\u7528\u6237\u4E0A\u4F20\u89C6\u9891\u7684\u65F6\u5019\uFF0C\u5C31\u4F1A\u901A\u8FC7\u7528\u6237\u670D\u52A1\u8C03\u7528\u89C6\u9891\u670D\u52A1\uFF0C\u89C6\u9891\u670D\u52A1\u8C03\u7528\u5206\u7C7B\u670D\u52A1\uFF0C\u5F53\u5206\u7C7B\u670D\u52A1\u5904\u7406\u5F97\u6BD4\u8F83\u6162\u53C8\u4E0D\u65AD\u6709\u65B0\u7684\u8BF7\u6C42\u7684\u65F6\u5019\uFF0C\u5C31\u4F1A\u5BFC\u81F4\u5206\u7C7B\u670D\u52A1\u5D29\u6E83\uFF0C\u89C6\u9891\u670D\u52A1\u5C31\u4F1A\u7B49\u5F85\u5206\u7C7B\u670D\u52A1\u5904\u7406\u5B8C\uFF0C\u800C\u89C6\u9891\u670D\u52A1\u53C8\u4F1A\u4E0D\u65AD\u63A5\u6536\u5230\u7528\u6237\u670D\u52A1\u7684\u8BF7\u6C42\uFF0C\u6B64\u65F6\u5C31\u4F1A\u5BFC\u81F4\u89C6\u9891\u670D\u52A1\u7684\u7EBF\u7A0B\u8D44\u6E90\u88AB\u8017\u5C3D\uFF0C\u4E45\u800C\u4E45\u4E4B\uFF0C\u7528\u6237\u670D\u52A1\u4E5F\u4F1A\u7EBF\u7A0B\u8017\u5C3D\uFF09</li><li>\u670D\u52A1\u7684\u914D\u7F6E\u6587\u4EF6\u7BA1\u7406\uFF08\u5728\u5FAE\u670D\u52A1\u4E0B\uFF0C\u505A\u96C6\u7FA4\u90E8\u7F72\uFF0C\u8FD9\u4E2A\u65F6\u5019\u5982\u4F55\u8BA9\u914D\u7F6E\u6587\u4EF6\u7684\u7EDF\u4E00\u7BA1\u7406\uFF09</li><li>\u7F51\u5173\u7EC4\u4EF6\uFF08\u5355\u4F53\u5E94\u7528\u7684\u65F6\u5019\uFF0C\u7ED9\u5176\u4ED6\u7684\u8BF7\u6C42\u90FD\u662F\u7EDF\u4E00\u5165\u53E3\uFF1Alocoalhost:8080\uFF0C\u4F46\u662F\u5982\u679C\u5728\u5FAE\u670D\u52A1\u4E0B\uFF0C\u6BCF\u4E2A\u670D\u52A1\u90FD\u6709\u81EA\u5DF1\u7684\u63A5\u53E3\uFF0C\u90A3\u4E48\u5728\u524D\u7AEF\u6216\u8005app\u8C03\u7528\u7684\u65F6\u5019\uFF0C\u603B\u4E0D\u80FD\u8BF4\u8C03\u7528\u90A3\u4E2A\u670D\u52A1\u5C31\u5199\u90A3\u4E2A\u63A5\u53E3\u5427\uFF0C\u6240\u4EE5\u5C31\u9700\u8981\u4E00\u4E2A\u7EDF\u4E00\u7F51\u5173\uFF0C\u5B9E\u73B0\u8DEF\u7531\u7684\u8F6C\u53D1\uFF0C\u524D\u7AEF\u7684\u8BF7\u6C42\u5230\u7F51\u5173\uFF0C\u7136\u540E\u7F51\u5173\u8F6C\u53D1\u5230\u4E0D\u540C\u670D\u52A1\u4E0A\uFF09</li></ul><h4 id="\u6838\u5FC3\u67B6\u6784\u53CA\u5176\u7EC4\u4EF6"><a class="header-anchor" href="#\u6838\u5FC3\u67B6\u6784\u53CA\u5176\u7EC4\u4EF6" aria-hidden="true">#</a> \u6838\u5FC3\u67B6\u6784\u53CA\u5176\u7EC4\u4EF6</h4><ol><li>\u6838\u5FC3\u7EC4\u4EF6\u8BF4\u660E</li></ol><ul><li>eureka server\u3001consul(go\u8BED\u8A00\u5F00\u53D1\u7684)\u3001nacos(alibaba) \u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3\u7EC4\u4EF6</li><li>rabbion &amp; openfeign \u670D\u52A1\u8D1F\u8F7D\u5747\u8861 \u548C \u670D\u52A1\u8C03\u7528\u7EC4\u4EF6</li><li>hystrix &amp; hystrix dashboard \u670D\u52A1\u65AD\u8DEF\u5668\uFF08\u670D\u52A1\u5728\u51FA\u73B0\u96EA\u5D29\u7684\u65F6\u5019\uFF0C\u5C06\u8C03\u7528\u94FE\u8DEF\u65AD\u6389\uFF09 \u548C \u670D\u52A1\u76D1\u63A7\u7EC4\u4EF6</li><li>zuul\u3001gateway \u670D\u52A1\u7F51\u5173\u7EC4\u4EF6</li><li>config \u7EDF\u4E00\u914D\u7F6E\u4E2D\u5FC3\u7EC4\u4EF6</li><li>bus \u6D88\u606F\u603B\u7EBF\u7EC4\u4EF6 \u5B9E\u73B0\u7EDF\u4E00\u914D\u7F6E\u6587\u4EF6\u7684\u81EA\u52A8\u5237\u65B0\u529F\u80FD</li><li>stream \u7528\u6765\u89E3\u51B3\u6D88\u606F\u4E2D\u95F4\u4EF6\u4E0D\u4E00\u81F4\u7684\u95EE\u9898</li><li>....</li></ul><p><img src="`+v+'" alt="image-20211215223259857"></p><h2 id="\u73AF\u5883\u642D\u5EFA"><a class="header-anchor" href="#\u73AF\u5883\u642D\u5EFA" aria-hidden="true">#</a> \u73AF\u5883\u642D\u5EFA</h2><h3 id="\u7248\u672C\u547D\u540D"><a class="header-anchor" href="#\u7248\u672C\u547D\u540D" aria-hidden="true">#</a> \u7248\u672C\u547D\u540D</h3>',66),Ya=e("<p>\u5B98\u65B9\u7F51\u5740\uFF1Ahttps://github.com/spring-cloud/spring-cloud-release/wiki/Release-Train-Naming-Convention</p><p><strong>\u4ECB\u7ECD</strong></p><p>Spring Cloud \u662F\u4E00\u4E2A\u4F1E\u5F62\u9879\u76EE\uFF0C\u7531\u72EC\u7ACB\u7684\u9879\u76EE\u7EC4\u6210\uFF0C\u539F\u5219\u4E0A\u4E0D\u540C\u7684\u53D1\u5E03\u8282\u594F\u3002\u4E3A\u4E86\u7BA1\u7406\u6295\u8D44\u7EC4\u5408\uFF0C\u53D1\u5E03\u4E86\u4E00\u4E2A BOM\uFF08\u7269\u6599\u6E05\u5355\uFF09\uFF0C\u5176\u4E2D\u5305\u542B\u5BF9\u5355\u4E2A\u9879\u76EE\u7684\u4E00\u7EC4\u7CBE\u9009\u7684\u4F9D\u8D56\u9879\u3002</p><p><strong>\u5386\u53F2\u547D\u540D</strong></p><p>\u4ECE\u5386\u53F2\u4E0A\u770B\uFF0C\u53D1\u5E03\u7CFB\u5217\u6709\u540D\u79F0\uFF0C\u800C\u4E0D\u662F\u7248\u672C\uFF0C\u4EE5\u907F\u514D\u4E0E\u5B50\u9879\u76EE\u6DF7\u6DC6\u3002\u540D\u79F0\u662F\u6309\u5B57\u6BCD\u987A\u5E8F\u6392\u5217\uFF08\u56E0\u6B64\u60A8\u53EF\u4EE5\u6309\u65F6\u95F4\u987A\u5E8F\u5BF9\u5B83\u4EEC\u8FDB\u884C\u6392\u5E8F\uFF09\u548C\u4F26\u6566\u5730\u94C1\u7AD9\u7684\u540D\u79F0\uFF08\u201CAngel\u201D\u662F\u7B2C\u4E00\u4E2A\u7248\u672C\uFF0C\u201CBrixton\u201D\u662F\u7B2C\u4E8C\u4E2A\uFF0C\u7B49\u7B49\u2026\u2026\uFF09\u3002\u5F53\u5355\u4E2A\u9879\u76EE\u7684\u70B9\u53D1\u5E03\u79EF\u7D2F\u5230\u4E34\u754C\u8D28\u91CF\u65F6\uFF0C\u6216\u8005\u5982\u679C\u5176\u4E2D\u4E00\u4E2A\u9879\u76EE\u5B58\u5728\u9700\u8981\u5BF9\u6240\u6709\u4EBA\u53EF\u7528\u7684\u4E25\u91CD\u9519\u8BEF\uFF0C\u53D1\u5E03\u7CFB\u5217\u5C06\u63A8\u51FA\u540D\u79F0\u4EE5\u201C.SRX\u201D\u7ED3\u5C3E\u7684\u201C\u670D\u52A1\u7248\u672C\u201D\uFF0C\u5176\u4E2D\u201CX\u201D\u662F\u4E00\u4E2A\u6570\u5B57\u3002</p><p>\u547D\u540D\u7684\u53D1\u5E03\u7CFB\u5217\u662F\uFF1A</p><ul><li>\u5929\u4F7F</li><li>\u5E03\u91CC\u514B\u65AF\u987F</li><li>\u5361\u59C6\u767B</li><li>\u8FBE\u5C14\u65AF\u987F</li><li>\u8FB9\u7F18\u8F6F\u4EF6</li><li>\u82AC\u5947\u5229</li><li>\u683C\u6797\u5A01\u6CBB</li><li>\u970D\u514B\u65AF\u987F</li></ul>",7),nt=s("Hoxton \u5C06\u662F\u6700\u540E\u4E00\u4E2A\u547D\u540D\u7684\u53D1\u5E03\u5217\u8F66\u3002\u8BF7\u53C2\u9605"),st={href:"https://github.com/spring-cloud/spring-cloud-release/wiki/Supported-Versions",target:"_blank",rel:"noopener noreferrer"},at=s("Supported-Versions"),tt=s("\u4E86\u89E3\u5176\u652F\u6301\u65F6\u95F4\u8868\u3002"),et=n("p",null,[n("strong",null,"Calver \u53D1\u5E03\u706B\u8F66")],-1),pt=s("\u4ECE 2020 \u5E74\u5F00\u59CB\uFF0C"),ot={href:"https://spring.io/blog/2020/04/30/updates-to-spring-versions",target:"_blank",rel:"noopener noreferrer"},lt=s("Spring \u56E2\u961F\u8F6C\u5411"),ct=s("\u4E86"),it={href:"https://calver.org/",target:"_blank",rel:"noopener noreferrer"},ut=s("Calendar Versioning"),rt=s("\uFF08\u6216\u7B80\u79F0 calver\uFF09\u98CE\u683C\u7684\u53D1\u5E03\u706B\u8F66\u7248\u672C\u3002\u5BF9\u4E8E Spring Cloud\uFF0C\u8FD9\u662F\u4ECE"),dt={href:"https://spring.io/blog/2020/04/17/spring-cloud-2020-0-0-m1-released",target:"_blank",rel:"noopener noreferrer"},kt=s("2020.0.0-M1"),vt=s("\u5F00\u59CB\u7684\u3002"),mt=s("\u6211\u4EEC\u4F1A\u6309\u7167"),gt=n("code",null,"YYYY.MINOR.MICRO",-1),bt=s(),ht={href:"https://calver.org/#scheme",target:"_blank",rel:"noopener noreferrer"},ft=s("\u8BA1\u5212"),yt=e("\u5728\u90A3\u91CC<code>MINOR</code>\u662F\u4E00\u4E2A\u9012\u589E\u7684\u6570\u5B57\uFF0C\u5F00\u59CB\u4E8E\u6BCF\u5E74\u4E3A\u96F6\u3002\u8BE5<code>MICRO</code>\u6BB5\u5BF9\u5E94\u4E8E\u5148\u524D\u4F7F\u7528\u7684\u540E\u7F00\uFF1A<code>.0</code>\u7C7B\u4F3C\u4E8E<code>.RELEASE</code>\u548C<code>.2</code>\u7C7B\u4F3C\u4E8E<code>.SR2</code>\u3002\u9884\u53D1\u5E03\u540E\u7F00\u4E5F\u5C06\u4ECE\u4F7F\u7528 a \u66F4\u6539<code>.</code>\u4E3A a<code>-</code>\u4F5C\u4E3A\u5206\u9694\u7B26\uFF0C\u4F8B\u5982\uFF0C<code>2020.0.0-M1</code>\u548C<code>2020.0.0-RC2</code>\u3002\u6211\u4EEC\u8FD8\u5C06\u505C\u6B62\u4E3A\u5FEB\u7167\u6DFB\u52A0\u524D\u7F00<code>BUILD-</code>- \u4F8B\u5982<code>2020.0.0-SNAPSHOT</code>\u3002",25),wt=n("p",null,"\u6211\u4EEC\u5C06\u7EE7\u7EED\u4F7F\u7528\u4F26\u6566\u5730\u94C1\u7AD9\u540D\u79F0\u4F5C\u4E3A\u4EE3\u53F7\u3002\u8FD9\u4E9B\u540D\u79F0\u5C06\u4E0D\u518D\u7528\u4E8E\u53D1\u5E03\u5230 Maven \u5B58\u50A8\u5E93\u7684\u7248\u672C\u4E2D\u3002",-1),_t=n("p",null,"Calver \u53D1\u5E03\u706B\u8F66",-1),qt=n("ul",null,[n("li",null,[s("2020.0\uFF08\u4EE3\u53F7"),n("code",null,"Ilford"),s("\uFF09")])],-1),xt=n("h3",{id:"\u7248\u672C\u9009\u62E9"},[n("a",{class:"header-anchor",href:"#\u7248\u672C\u9009\u62E9","aria-hidden":"true"},"#"),s(" \u7248\u672C\u9009\u62E9")],-1),St=n("p",null,"\u5B98\u65B9\u7F51\u5740\uFF1Ahttps://spring.io/projects/spring-cloud#overview",-1),It=n("p",null,"\u5982\u679C\u60A8\u60F3\u8981\u5C06 Spring Cloud \u6DFB\u52A0\u5230\u8BE5\u5E94\u7528\u7A0B\u5E8F\u7684\u73B0\u6709 Spring Boot \u5E94\u7528\u7A0B\u5E8F\uFF0C\u7B2C\u4E00\u6B65\u662F\u786E\u5B9A\u60A8\u5E94\u8BE5\u4F7F\u7528\u7684 Spring Cloud \u7248\u672C\u3002\u60A8\u5728\u5E94\u7528\u4E2D\u4F7F\u7528\u7684\u7248\u672C\u53D6\u51B3\u4E8E\u60A8\u4F7F\u7528\u7684 Spring Boot \u7248\u672C",-1),jt=n("p",null,"\u4E0B\u8868\u6982\u8FF0\u4E86\u54EA\u4E2A\u7248\u672C\u7684 Spring Cloud \u6620\u5C04\u5230\u54EA\u4E2A\u7248\u672C\u7684 Spring Boot",-1),Ct=n("p",null,[n("strong",null,"\u53D1\u5E03\u7CFB\u5217 Spring Boot \u517C\u5BB9\u6027")],-1),Rt=n("thead",null,[n("tr",null,[n("th",{style:{"text-align":"left"}},"Release Train"),n("th",{style:{"text-align":"left"}},"Boot Version")])],-1),At={style:{"text-align":"left"}},Et={href:"https://github.com/spring-cloud/spring-cloud-release/wiki/Spring-Cloud-2021.0-Release-Notes",target:"_blank",rel:"noopener noreferrer"},Ot=s("2021.0.x"),Mt=s(" aka Jubilee"),Tt=n("td",{style:{"text-align":"left"}},"2.6.x",-1),Pt={style:{"text-align":"left"}},Bt={href:"https://github.com/spring-cloud/spring-cloud-release/wiki/Spring-Cloud-2020.0-Release-Notes",target:"_blank",rel:"noopener noreferrer"},Dt=s("2020.0.x"),Ft=s(" aka Ilford"),Ht=n("td",{style:{"text-align":"left"}},"2.4.x, 2.5.x (Starting with 2020.0.3)",-1),Nt={style:{"text-align":"left"}},Gt={href:"https://github.com/spring-cloud/spring-cloud-release/wiki/Spring-Cloud-Hoxton-Release-Notes",target:"_blank",rel:"noopener noreferrer"},Ut=s("Hoxton"),Lt=n("td",{style:{"text-align":"left"}},"2.2.x, 2.3.x (Starting with SR5)",-1),$t={style:{"text-align":"left"}},zt={href:"https://github.com/spring-projects/spring-cloud/wiki/Spring-Cloud-Greenwich-Release-Notes",target:"_blank",rel:"noopener noreferrer"},Vt=s("Greenwich"),Wt=n("td",{style:{"text-align":"left"}},"2.1.x",-1),Xt={style:{"text-align":"left"}},Jt={href:"https://github.com/spring-projects/spring-cloud/wiki/Spring-Cloud-Finchley-Release-Notes",target:"_blank",rel:"noopener noreferrer"},Qt=s("Finchley"),Zt=n("td",{style:{"text-align":"left"}},"2.0.x",-1),Kt={style:{"text-align":"left"}},Yt={href:"https://github.com/spring-projects/spring-cloud/wiki/Spring-Cloud-Edgware-Release-Notes",target:"_blank",rel:"noopener noreferrer"},ne=s("Edgware"),se=n("td",{style:{"text-align":"left"}},"1.5.x",-1),ae={style:{"text-align":"left"}},te={href:"https://github.com/spring-projects/spring-cloud/wiki/Spring-Cloud-Dalston-Release-Notes",target:"_blank",rel:"noopener noreferrer"},ee=s("Dalston"),pe=n("td",{style:{"text-align":"left"}},"1.5.x",-1),oe=n("div",{class:"language-markdown ext-md line-numbers-mode"},[n("pre",{class:"language-markdown"},[n("code",null,`Spring Cloud Dalston\u3001Edgware\u3001Finchley \u548C Greenwich \u90FD\u5DF2\u8FBE\u5230\u751F\u547D\u5468\u671F\u7EC8\u6B62\u72B6\u6001\uFF0C\u4E0D\u518D\u53D7\u652F\u6301
`)]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),le=e(`<h3 id="\u73AF\u5883\u642D\u5EFA-1"><a class="header-anchor" href="#\u73AF\u5883\u642D\u5EFA-1" aria-hidden="true">#</a> \u73AF\u5883\u642D\u5EFA</h3><p>\u4EC5\u4EC5\u662F\u5148\u5F00\u53D1springCloud\u7684\u73AF\u5883\uFF0C\u800C\u4E0D\u662F\u5F00\u53D1\u67D0\u4E00\u4E2A\u7EC4\u4EF6</p><ol><li>\u8BF4\u660E</li></ol><ul><li>springboot 2.2.5.RELEASE+</li><li>springcloud Hoxton SR6</li><li>java8+</li><li>maven 3.8.1</li><li>idea 2020.02</li></ul><ol start="2"><li>\u521B\u5EFAspringboot\u9879\u76EE \u6307\u5B9A\u7248\u672C\u4E3A2.2.5</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- lookup parent from repository --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u5F15\u5165springcloud\u7684\u7248\u672C\u7BA1\u7406</li></ol><blockquote><p>\u56E0\u4E3AspringCloud\u5728\u4E0B\u8F7Dmaven\u4ED3\u5E93\u7684\u65F6\u5019\uFF0C\u4F1A\u4E0B\u8F7D\u4E0D\u4E0B\u6765\uFF0C\u6240\u4EE5springCloud\u5B98\u65B9\u5371\u7EF4\u62A4\u4E86\u4E00\u4E2A\u4ED3\u5E93\uFF0C\u4E0B\u8F7DspringCloud\u7684\u76F8\u5173\u4F9D\u8D56\u7684\u65F6\u5019\uFF0C\u9700\u8981\u4ECEspringcloud\u7684\u4ED3\u5E93\u4E0B\u8F7D\uFF0C\u6240\u4EE5\u5728\u5F00\u53D1springCloud\u7684\u76F8\u5173\u7EC4\u4EF6\u7684\u65F6\u5019\u90FD\u8981\u914D\u7F6EspringCloud\u4F9D\u8D56</p></blockquote><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring-cloud.version</span><span class="token punctuation">&gt;</span></span>Hoxton.SR6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring-cloud.version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- \u5168\u5C40\u7BA1\u7406springcloud\u7248\u672C\uFF0C \u5E76\u4E0D\u4F1A\u5F15\u5165\u5177\u4F53\u7684\u4F9D\u8D56\uFF0C\u53EA\u662F --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${spring-cloud.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u5B8C\u6210\u4E0A\u8FF0\u64CD\u4F5C\u4E4B\u540Espringboot\u4E0Espringcloud\u73AF\u5883\u642D\u5EFA\u5B8C\u6210</li></ol><p>\u63A5\u4E0B\u6765\u5C31\u662F\u4F7F\u7528\u5230\u5177\u4F53\u7684springcloud\u7EC4\u4EF6\uFF0C\u5728\u9879\u76EE\u4E2D\u5F15\u5165\u5177\u4F53\u7EC4\u4EF6\u5373\u53EF</p><h2 id="\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3"><a class="header-anchor" href="#\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3" aria-hidden="true">#</a> \u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3</h2><p><strong>\u65E0\u8BBA\u4F7F\u7528\u90A3\u4E2A\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3\uFF0C\u5FAE\u670D\u52A1\u4E4B\u95F4\u7684\u8C03\u7528\u662F\u4E0D\u53D8\u7684</strong></p><h3 id="\u4EC0\u4E48\u662F\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3"><a class="header-anchor" href="#\u4EC0\u4E48\u662F\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3" aria-hidden="true">#</a> \u4EC0\u4E48\u662F\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3</h3><p>\u6240\u8C13\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3\u5C31\u662F\u5728\u6574\u4E2A\u7684\u5FAE\u670D\u52A1\u67B6\u6784\u4E2D\u5355\u72EC\u63D0\u51FA\u4E00\u4E2A\u670D\u52A1\uFF0C\u8FD9\u4E2A\u670D\u52A1\u4E0D\u5B8C\u6210\u7CFB\u7EDF\u7684\u4E1A\u52A1\u529F\u80FD\uFF0C\u4EC5\u4EC5\u7528\u6765\u5B8C\u6210\u5BF9\u6574\u4E2A\u5FAE\u670D\u52A1\u7CFB\u7EDF\u7684\u670D\u52A1\u6CE8\u518C\u548C\u670D\u52A1\u53D1\u73B0\uFF0C\u4EE5\u53CA\u5BF9\u670D\u52A1\u5065\u5EB7\u72B6\u6001\u7684\u76D1\u63A7\u548C\u7BA1\u7406\u529F\u80FD</p><p><img src="`+m+`" alt="image-20211215233624460"></p><p>\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3</p><ul><li>\u53EF\u4EE5\u5BF9\u6240\u6709\u7684\u5FAE\u670D\u52A1\u7684\u4FE1\u606F\u8FDB\u884C\u5B58\u50A8\uFF0C\u5982\u5FAE\u670D\u52A1\u7684\u540D\u79F0\u3001IP\u3001\u7AEF\u53E3\u7B49</li><li>\u53EF\u4EE5\u5728\u8FDB\u884C\u670D\u52A1\u8C03\u7528\u65F6\u901A\u8FC7\u670D\u52A1\u53D1\u73B0\u67E5\u8BE2\u53EF\u7528\u7684\u5FAE\u670D\u52A1\u5217\u8868\u53CA\u7F51\u7EDC\u5730\u5740\u8FDB\u884C\u670D\u52A1\u8C03\u7528</li><li>\u53EF\u4EE5\u5BF9\u6240\u6709\u5FAE\u670D\u52A1\u8FDB\u884C\u5FC3\u8DF3\u68C0\u6D4B\uFF0C\u5982\u53D1\u73B0\u67D0\u5B9E\u4F8B\u957F\u65F6\u95F4\u65E0\u6CD5\u8BBF\u95EE\uFF0C\u5C31\u4F1A\u4ECE\u670D\u52A1\u6CE8\u518C\u8868\u4E2D\u79FB\u9664\u8BE5\u5B9E\u4F8B</li></ul><h3 id="\u5E38\u7528\u7684\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3"><a class="header-anchor" href="#\u5E38\u7528\u7684\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3" aria-hidden="true">#</a> \u5E38\u7528\u7684\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3</h3><p>springcloud\u652F\u6301\u7684\u591A\u79CD\u6CE8\u518C\u4E2D\u5FC3eureka\u3001consul\u3001zookeeper\u3001\u4EE5\u53CA\u963F\u91CC\u5DF4\u5DF4\u63A8\u51FA\u7684nacos\u7EC4\u4EF6\u3002\u8FD9\u4E9B\u6CE8\u518C\u4E2D\u5FC3\u5728\u672C\u8D28\u4E0A\u90FD\u662F\u7528\u6765\u7BA1\u7406\u670D\u52A1\u6CE8\u518C\u548C\u53D1\u73B0\u4EE5\u53CA\u670D\u52A1\u72B6\u6001\u7684\u68C0\u67E5</p><h4 id="eureka"><a class="header-anchor" href="#eureka" aria-hidden="true">#</a> Eureka</h4><blockquote><p>\u5B98\u7F51\u5730\u5740\uFF1Ahttps://github.com/Netflix/eureka/wiki</p><p>Eureka\u662FNetflix\u5F00\u53D1\u7684\u670D\u52A1\u53D1\u73B0\u6846\u67B6\uFF0C\u672C\u8EAB\u662F\u4E00\u4E2A\u57FA\u4E8Erest\u7684\u670D\u52A1\uFF0CspringCloud\u5C06\u5B83\u7EE7\u627F\u5728\u5176\u5B50\u9879\u76EEspring-cloud-netflix\u4E2D\uFF0C\u4EE5\u5B9E\u73B0springcloud\u7684\u670D\u52A1\u6CE8\u518C\u548C\u53D1\u73B0\u529F\u80FD</p><p>Eureka\u5305\u542B\u4E24\u4E2A\u7EC4\u4EF6\uFF1AEureka Server\u548CEureka Client</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>\u5355\u4F53\u5E94\u7528--&gt;\u5206\u7C7B\u670D\u52A1\u3001\u5546\u54C1\u670D\u52A1\u3001\u8BA2\u5355\u670D\u52A1\u548C\u7528\u6237\u670D\u52A1\u7B49
Eureka Server\u7EC4\u4EF6\u5C31\u662F\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3\u7EC4\u4EF6 \u7BA1\u7406\u6240\u6709\u7684\u670D\u52A1 \u652F\u6301\u6240\u6709\u670D\u52A1\u6CE8\u518C
Eureka Client\u7EC4\u4EF6\u5C31\u662F\u4E00\u4E2A\u4E2A\u7684\u670D\u52A1\uFF1A\u5206\u7C7B\u670D\u52A1\u3001\u5546\u54C1\u670D\u52A1\u3001\u8BA2\u5355\u670D\u52A1\uFF08\u5FAE\u670D\u52A1\uFF09
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Eureka\u4EC5\u4EC5\u662F\u8FC7\u6E21\uFF0C\u4E4B\u540E\u57FA\u672C\u4F7F\u7528\u7684\u662Fconsul\u6216\u8005\u963F\u91CC\u5DF4\u5DF4\u7684nacos</strong></p></blockquote><h5 id="\u5F00\u53D1eureka-server"><a class="header-anchor" href="#\u5F00\u53D1eureka-server" aria-hidden="true">#</a> \u5F00\u53D1Eureka Server</h5><blockquote><p>\u5B98\u65B9\u7F51\u5740\uFF1Ahttps://docs.spring.io/spring-cloud-netflix/docs/2.2.9.RELEASE/reference/html/#spring-cloud-eureka-server</p></blockquote><ol><li>\u521B\u5EFA\u9879\u76EE\u5E76\u5F15\u5165eureka server\u4F9D\u8D56</li></ol><p>\u5148\u521B\u5EFAmaven\u6216\u8005springboot\u9879\u76EE<code>springcloud-demo-01</code>\uFF0C\u7136\u540E\u5728<code>springcloud-demo-01</code>\u4E0B\u521B\u5EFAmodule\uFF0C\u540D\u5B57<code>springcloud-erueka-server-demo-8761</code>\uFF0C\u5176\u4E2D<code>8761</code>\u662Feruaka\u7684\u7AEF\u53E3\u53F7</p><p>\u5C06\u7248\u672C\u4FEE\u6539\u62102.2.5.RELEASE\uFF0C\u5E76\u6DFB\u52A0springcloud\u7684\u73AF\u5883\u4F9D\u8D56\uFF08\u8FD9\u91CC\u5E94\u8BE5\u662F\u8BA9\u8FD9\u4E2Amodule\u7684\u7236\u7C7B\u662Fhelloworld\u9879\u76EE\uFF0C\u8FD9\u6837\u5C31\u53EF\u4EE5\u4E0D\u7528\u6DFB\u52A0\u8FD9\u4E9B\u91CD\u590D\u7684springcloud\u7684\u73AF\u5883\u4F9D\u8D56\u4E86\uFF0C\u4F46\u662F\u65E2\u7136\u8FD9\u4E48\u914D\u7F6E\uFF0C\u5C31\u5148\u8FD9\u4E48\u914D\u7F6E\u5427\uFF09</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring-cloud.version</span><span class="token punctuation">&gt;</span></span>Hoxton.SR6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring-cloud.version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- \u5168\u5C40\u7BA1\u7406springcloud\u7248\u672C\uFF0C \u5E76\u4E0D\u4F1A\u5F15\u5165\u5177\u4F53\u7684\u4F9D\u8D56\uFF0C\u53EA\u662F --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${spring-cloud.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F15\u5165eureka-server\u4F9D\u8D56</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5F15\u5165eureka\u4F9D\u8D56--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-server<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u7F16\u5199\u914D\u7F6Eapplication.yaml</li></ol><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8761</span>  <span class="token comment">## \u6267\u884C\u670D\u52A1\u7AEF\u53E3</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> springcloud<span class="token punctuation">-</span>helloworld<span class="token punctuation">-</span><span class="token number">01</span> <span class="token comment">## \u6307\u5B9A\u670D\u52A1\u540D\u79F0 \u552F\u4E00\u6807\u8BC6</span>
<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>8761/eureka <span class="token comment">## \u6307\u5B9A\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3\u7684\u5730\u5740\uFF0C\u9ED8\u8BA4\u5C31\u662F\u8FD9\u5730\u5740\uFF1Ahttp://localhost:8761/eureka/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u5F00\u542Feureka server\uFF0C\u5165\u53E3\u7C7B\u52A0\u5165\u6CE8\u89E3</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaServer</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringcloudEurekaServerDemo8761Application</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringcloudEurekaServerDemo8761Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u542F\u52A8\u5E76\u8BBF\u95EEeureka\u7684\u670D\u52A1\u6CE8\u518C\u9875\u9762</li></ol><div class="language-http ext-http line-numbers-mode"><pre class="language-http"><code><span class="token header"><span class="token header-name keyword">http</span><span class="token punctuation">:</span><span class="token header-value">//localhost:8761</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5728\u542F\u52A8\u7684\u8FC7\u7A0B\u4E2D\u4F1A\u51FA\u73B0<code>com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server</code>\u7684\u9519\u8BEF\uFF0C\u8FD9\u4E2A\u5148\u4E0D\u7528\u7BA1</p><p><img src="`+g+'" alt="image-20211216005102539"></p><p>\u80FD\u770B\u5230\u8FD9\u4E2A\u9875\u9762\u6807\u8BC6\u5DF2\u7ECF\u542F\u52A8\u6210\u529F\u4E86\uFF0C\u5176\u4E2D<code>SPRINGCLOUD-EUREKA-SERVER-DEMO-8761</code>\u5C31\u662F\u6211\u4EEC\u81EA\u5DF1\u5F53\u524D\u9879\u76EE</p><ol start="5"><li>\u867D\u7136\u80FD\u770B\u5230\u7BA1\u7406\u754C\u9762\uFF0C\u4F46\u662F\u4E3A\u4EC0\u4E48\u9879\u76EE\u542F\u52A8\u63A7\u5236\u53F0\u62A5\u9519\uFF1F</li></ol><p><img src="'+b+`" alt="image-20211216005548490"></p><p>\u51FA\u73B0\u4E0A\u8FF0\u7684\u95EE\u9898\uFF1Aeureka\u7EC4\u4EF6\u5305\u542Beurekaserver \u548C eurekaclient\uFF0Cserver \u662F\u4E00\u4E2A\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3\uFF0C\u7528\u6765\u63A5\u6536\u5BA2\u6237\u7AEF\u7684\u6CE8\u518C\u3002client\u7684\u7279\u6027\u4F1A\u8BA9\u5F53\u524D\u542F\u52A8\u7684\u670D\u52A1\u628A\u81EA\u5DF1\u4F5C\u4E3Aeureka\u7684\u5BA2\u6237\u7AEF\u8FDB\u884C\u670D\u52A1\u4E2D\u5FC3\u7684\u6CE8\u518C\uFF0C\u5F53\u9879\u76EE\u542F\u52A8\u65F6\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3\u8FD8\u6CA1\u6709\u521B\u5EFA\u597D\uFF0C\u6240\u6709\u627E\u4E0D\u5230\u670D\u52A1\u7684\u5BA2\u6237\u7AEF\u7EC4\u4EF6\u5C31\u76F4\u63A5\u62A5\u9519\u4E86\uFF0C\u5F53\u542F\u52A8\u6210\u529F\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3\u521B\u5EFA\u597D\u4E86\uFF0C\u65E5\u540Eclient\u4E5F\u80FD\u8FDB\u884C\u6CE8\u518C\uFF0C\u5C31\u4E0D\u518D\u62A5\u9519\u4E86</p><p><strong>\u65E2\u8BA4\u4E3A\u81EA\u5DF1\u662F\u670D\u52A1\u7AEF\uFF0C\u53C8\u8BA4\u4E3A\u81EA\u5DF1\u662F\u5BA2\u6237\u7AEF\uFF0C\u5F53\u5BA2\u6237\u7AEF\u542F\u52A8\u7684\u65F6\u5019\u627E\u4E0D\u5230\u670D\u52A1\u7AEF\uFF0C\u6240\u4EE5\u62A5\u9519\uFF0C\u4E0A\u9762\u7684<code>SPRINGCLOUD-EUREKA-SERVER-DEMO-8761</code>\u88AB\u6CE8\u518C\u663E\u793A\u5C31\u662F\u539F\u56E0</strong></p><ol start="6"><li>\u5173\u95EDeureka\u81EA\u5DF1\u6CE8\u518C\u81EA\u5DF1</li></ol><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>8761/eureka <span class="token comment">## \u6307\u5B9A\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3\u7684\u5730\u5740\uFF0C\u9ED8\u8BA4\u5C31\u662F\u8FD9\u5730\u5740\uFF1Ahttp://localhost:8761/eureka/</span>
    <span class="token key atrule">fetch-registry</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token comment">## \u5173\u95ED\u4F5C\u4E3A\u5BA2\u6237\u7AEF\u65F6\u4ECEeureka server\u83B7\u53D6\u670D\u52A1\u4FE1\u606F</span>
    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">## \u4E0D\u518D\u5C06\u81EA\u5DF1\u540C\u65F6\u4F5C\u4E3A\u5BA2\u6237\u7AEF\u8FDB\u884C\u6CE8\u518C</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u5F00\u53D1eureka-client"><a class="header-anchor" href="#\u5F00\u53D1eureka-client" aria-hidden="true">#</a> \u5F00\u53D1Eureka Client</h5><blockquote><p>\u5B98\u65B9\u7F51\u5740\uFF1Ahttps://docs.spring.io/spring-cloud-netflix/docs/2.2.9.RELEASE/reference/html/#service-discovery-eureka-clients</p></blockquote><p>\u9879\u76EE\u62C6\u5206\u51FA\u6765\u7684\u4E00\u4E2A\u4E2A\u5FAE\u670D\u52A1</p><ol><li>\u521B\u5EFA\u9879\u76EE\u5E76\u5F15\u5165eureka client\u4F9D\u8D56</li></ol><p>\u5728\u9879\u76EE<code>springcloud-demo-01</code>\u4E0B\u521B\u5EFAmodule\uFF0C\u540D\u5B57<code>springcloud-eureka-client-demo-8888</code>\uFF0C\u5176\u4E2D8888\u662F\u7AEF\u53E3</p><p>\u5F15\u5165springcloud\u7684\u73AF\u5883\u914D\u7F6E</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring-cloud.version</span><span class="token punctuation">&gt;</span></span>Hoxton.SR6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring-cloud.version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- \u5168\u5C40\u7BA1\u7406springcloud\u7248\u672C\uFF0C \u5E76\u4E0D\u4F1A\u5F15\u5165\u5177\u4F53\u7684\u4F9D\u8D56\uFF0C\u53EA\u662F --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${spring-cloud.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F15\u5165eureka-client\u4F9D\u8D56</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5F15\u5165eureka\u4F9D\u8D56--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u7F16\u5199\u914D\u7F6Eapplication.yaml</li></ol><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8888</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> springcloud<span class="token punctuation">-</span>eureka<span class="token punctuation">-</span>client<span class="token punctuation">-</span>demo<span class="token punctuation">-</span><span class="token number">8888</span>
<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>8761/eureka <span class="token comment">## \u5411\u8FD9\u4E2A\u5730\u5740\u8FDB\u884C\u6CE8\u518C</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u5F00\u542Feureka\u5BA2\u6237\u7AEF\u52A0\u5165\u6CE8\u89E3</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringcloudEurekaClientDemo018888Application</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringcloudEurekaClientDemo018888Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u542F\u52A8</li></ol><p>\u542F\u52A8eureka server\uFF0C\u518D\u542F\u52A8eureka client\uFF08\u6CA1\u6709\u5148\u540E\u987A\u5E8F\uFF0Cerueka\u4F1A\u6839\u636E\u5FC3\u8DF3\u670D\u52A1\u81EA\u52A8\u68C0\u6D4B\uFF09</p><p><img src="`+h+'" alt="image-20211216015238565"></p><p>\u5DF2\u7ECF\u6210\u529F\u6CE8\u518C\u5230eureka server</p><ol start="5"><li>idea(2020.2\u7248\u672C)\u4E3A\u4E86\u65B9\u4FBF\u6211\u4EEC\u542F\u52A8\u8FD9\u4E9B\u5FAE\u670D\u52A1\uFF0C\u63D0\u4F9B\u4E86dashboard</li></ol><p><img src="'+f+'" alt="image-20211216015455878"></p><p>\u7136\u540E\u9700\u8981\u8C03\u6574<code>Run Configeration Type -&gt; Spring Boot</code>\u624D\u80FD\u51FA\u73B0springboot\u542F\u52A8\u9879</p><p><img src="'+y+'" alt="image-20211216020203576"></p><h5 id="eureka\u81EA\u6211\u4FDD\u62A4\u673A\u5236"><a class="header-anchor" href="#eureka\u81EA\u6211\u4FDD\u62A4\u673A\u5236" aria-hidden="true">#</a> Eureka\u81EA\u6211\u4FDD\u62A4\u673A\u5236</h5><ol><li>\u670D\u52A1\u9891\u7E41\u542F\u52A8\u65F6\uFF0Ceureka server\u51FA\u73B0\u8B66\u544A</li></ol><p><img src="'+w+`" alt="image-20211216020734338"></p><ol start="2"><li>\u81EA\u6211\u4FDD\u62A4\u673A\u5236</li></ol><blockquote><p>\u5B98\u7F51\u5730\u5740\uFF1Ahttps://github.com/Netflix/eureka/wiki/Server-Self-Preservation-Mode</p><p><strong>\u4E3A\u9632\u6B62\u9519\u8BEF\u7684\u56E0\u4E3A\u7F51\u7EDC\u539F\u56E0\u5BFC\u81F4\u7684\u79FB\u9664\u9519\u8BEF\uFF0C\u800C\u5F15\u5165\u81EA\u6211\u4FDD\u62A4\u673A\u5236</strong></p><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5982\u679Ceureka server\u5728\u4E00\u5B9A\u65F6\u95F4\u5185\uFF08\u9ED8\u8BA490\u79D2\uFF09\u6CA1\u6709\u63A5\u6536\u5230\u67D0\u4E2A\u5FAE\u670D\u52A1\u5B9E\u4F8B\u7684\u5FC3\u8DF3\uFF0Ceureka server\u5C06\u4F1A\u79FB\u9664\u8BE5\u5B9E\u4F8B\u3002\u4F46\u662F\u5F53\u7F51\u7EDC\u5206\u533A\u53D1\u751F\u6545\u969C\u65F6\uFF0C\u5FAE\u670D\u52A1\u4E0Eeureka server\u4E4B\u95F4\u65E0\u6CD5\u6B63\u5E38\u901A\u4FE1\uFF0C\u800C\u5FAE\u670D\u52A1\u672C\u8EAB\u662F\u6B63\u5E38\u8FD0\u884C\u7684\uFF0C\u6B64\u65F6\u4E0D\u5E94\u8BE5\u79FB\u9664\u8FD9\u4E2A\u5FAE\u670D\u52A1\uFF0C\u6240\u4EE5\u5F15\u53D1\u4E86\u81EA\u6211\u4FDD\u62A4\u673A\u5236\u3002eureka server\u5728\u8FD0\u884C\u671F\u95F4\u4F1A\u53BB\u7EDF\u8BA1\u5FC3\u8DF3\u5931\u8D25\u6BD4\u4F8B\u572815\u5206\u949F\u4E4B\u5185\u662F\u5426\u4F4E\u4E8E85%\uFF0C\u5982\u679C\u4F4E\u4E8E85%\uFF0Ceureka server\u4F1A\u5C06\u8FD9\u4E9B\u5B9E\u4F8B\u4FDD\u62A4\u8D77\u6765\uFF0C\u8BA9\u8FD9\u4E9B\u5B9E\u4F8B\u4E0D\u4F1A\u8FC7\u671F\u3002\u8FD9\u79CD\u8BBE\u8BA1\u7684\u54F2\u5B66\u539F\u7406\u5C31\u662F\u201C\u5B81\u53EF\u4FE1\u5176\u6709\u4E0D\u53EF\u4FE1\u5176\u65E0\u201D\u3002\u81EA\u6211\u4FDD\u62A4\u6A21\u5F0F\u6B63\u662F\u4E00\u79CD\u9488\u5BF9\u7F51\u7EDC\u6CE2\u52A8\u7684\u5B89\u5168\u4FDD\u62A4\u63AA\u65BD\uFF0C\u4F7F\u7528\u81EA\u6211\u4FDD\u62A4\u6A21\u5F0F\u80FD\u4F7Feureka\u96C6\u7FA4\u66F4\u52A0\u5065\u58EE\u3001\u7A33\u5B9A\u7684\u8FD0\u884C</p></blockquote><ol start="3"><li>\u5728eureka server\u7AEF\u5173\u95ED\u81EA\u6211\u4FDD\u62A4\u673A\u5236</li></ol><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">eureka</span><span class="token punctuation">:</span>  
  <span class="token key atrule">server</span><span class="token punctuation">:</span>
    <span class="token key atrule">enable-self-preservation</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">## \u5173\u95ED\u81EA\u6211\u4FDD\u62A4</span>
    <span class="token key atrule">eviction-interval-timer-in-ms</span><span class="token punctuation">:</span> <span class="token number">3000</span> <span class="token comment">## \u8D85\u65F63s\u81EA\u52A8\u6E05\u9664</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u53EF\u4EE5\u5728\u5BA2\u6237\u7AEF\u4FEE\u6539\u5FAE\u670D\u52A1\u7F29\u77ED\u670D\u52A1\u5FC3\u8DF3\u7684\u65F6\u95F4</li></ol><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">eureka</span><span class="token punctuation">:</span> 
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
    <span class="token key atrule">lease-expiration-duration-in-seconds</span><span class="token punctuation">:</span> <span class="token number">10</span> <span class="token comment">## \u7528\u6765\u4FEE\u6539eureka server\u9ED8\u8BA4\u63A5\u6536\u5FC3\u8DF3\u7684\u6700\u5927\u65F6\u95F4 \u9ED8\u8BA4\u662F90s</span>
    <span class="token key atrule">lease-renewal-interval-in-seconds</span><span class="token punctuation">:</span> <span class="token number">5</span> <span class="token comment">## \u6307\u5B9A\u5BA2\u6237\u7AEF\u591A\u4E45\u5411eureka server\u53D1\u9001\u4E00\u6B21\u5FC3\u8DF3 \u9ED8\u8BA430s</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>\u4E00\u65E6\u5173\u95ED\u81EA\u6211\u4FDD\u62A4\u673A\u5236\uFF0C\u4E5F\u5C31\u51FA\u73B0\u63D0\u793Aeureka\u5E76\u4E0D\u5EFA\u8BAE\u6211\u4EEC\u5173\u95ED\u8FD9\u4E2A\u673A\u5236</li></ol><p><img src="`+_+'" alt="image-20211216022749890"></p><h5 id="eureka\u505C\u6B62\u66F4\u65B0"><a class="header-anchor" href="#eureka\u505C\u6B62\u66F4\u65B0" aria-hidden="true">#</a> Eureka\u505C\u6B62\u66F4\u65B0</h5><blockquote><p>\u5B98\u65B9\u505C\u6B62\u66F4\u65B0\u8BF4\u660E\uFF1Ahttps://github.com/Netflix/eureka/wiki</p><p>\u57281.x\u7248\u672C\u9879\u76EE\u8FD8\u662F\u6D3B\u8DC3\u7684\uFF0C\u4F46\u662F2.x\u7248\u672C\u505C\u6B62\u7EF4\u62A4</p><p><img src="'+q+`" alt="image-20211216024028126"></p><p>eureka 2.0 \u7684\u73B0\u6709\u5F00\u6E90\u5DE5\u4F5C\u5DF2\u505C\u6B62\u3002\u4F5C\u4E3A 2.x \u5206\u652F\u4E0A\u73B0\u6709\u5DE5\u4F5C\u5B58\u50A8\u5E93\u7684\u4E00\u90E8\u5206\u53D1\u5E03\u7684\u4EE3\u7801\u5E93\u548C\u5DE5\u4EF6\u88AB\u89C6\u4E3A\u4F7F\u7528\u98CE\u9669\u81EA\u8D1F\u3002Eureka 1.x \u662F Netflix \u670D\u52A1\u53D1\u73B0\u7CFB\u7EDF\u7684\u6838\u5FC3\u90E8\u5206\uFF0C\u4ECD\u7136\u662F\u4E00\u4E2A\u6D3B\u8DC3\u7684\u9879\u76EE</p></blockquote><h4 id="consul"><a class="header-anchor" href="#consul" aria-hidden="true">#</a> Consul</h4><blockquote><p>consul\u7B80\u4ECB\uFF1Ahttps://www.consul.io/</p></blockquote><p>consul\u662F\u4E00\u4E2A\u53EF\u4EE5\u63D0\u4F9B\u670D\u52A1\u53D1\u73B0\u3001\u5065\u5EB7\u68C0\u67E5\u3001\u591A\u6570\u636E\u4E2D\u5FC3\u3001key/value\u5B58\u50A8\u529F\u80FD\u7684\u5206\u5E03\u5F0F\u6846\u67B6\uFF0C\u7528\u4E8E\u5B9E\u73B0\u5206\u5E03\u5F0F\u7CFB\u7EDF\u7684\u670D\u52A1\u53D1\u73B0\u4E0E\u914D\u7F6E\u3002\u4E0E\u5176\u4ED6\u5206\u5E03\u5F0F\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0\u7684\u65B9\u6848\uFF0C\u4F7F\u7528\u8D77\u6765\u4E5F\u8F83\u4E3A\u7B80\u5355\u3002consul\u7528golang\u5B9E\u73B0\uFF0C\u56E0\u6B64\u5177\u6709\u5929\u7136\u7684\u53EF\u79FB\u690D\u6027\uFF08\u652F\u6301Linux\u3001window\u548CMac\uFF09\uFF0C\u5B89\u88C5\u5305\u4EC5\u5305\u542B\u4E00\u4E2A\u53EF\u6267\u884C\u6587\u4EF6\uFF0C\u65B9\u4FBF\u90E8\u7F72</p><p>consul\u542F\u52A8\u4E4B\u540E\u5C31\u662F\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3\uFF0C\u4ECE\u4EE3\u7801\u5C42\u9762\u6765\u8BF4\uFF0C\u5C31\u4E0D\u7528\u53BB\u5F00\u53D1\u4E86\uFF0C\u53EA\u9700\u8981\u5F00\u53D1\u5FAE\u670D\u52A1\u5BA2\u6237\u7AEF\u53BB\u6CE8\u518C\u5C31\u597D\u4E86</p><h5 id="\u5B89\u88C5consul"><a class="header-anchor" href="#\u5B89\u88C5consul" aria-hidden="true">#</a> \u5B89\u88C5Consul</h5><ol><li>\u4E0B\u8F7Dconsul</li></ol><blockquote><p>\u4E0B\u8F7D\u5730\u5740\uFF1Ahttps://www.consul.io/downloads</p></blockquote><p>mac\u7248\u672C\u7684\u89E3\u538B\u51FA\u6765\u4E4B\u540E\uFF0C\u53EA\u6709\u53EA\u4E00\u4E2A\u6587\u4EF6\uFF0C\uFF08\u5176\u4ED6\u7248\u672C\u4E5F\u662F\u7684\uFF09</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">(</span>base<span class="token punctuation">)</span> aldencarter@aldencarter springcloud-demo-01 % ll <span class="token operator">|</span> <span class="token function">grep</span> consul
-rwxr-xr-x@  <span class="token number">1</span> aldencarter  staff  <span class="token number">110521136</span> <span class="token number">11</span> <span class="token number">11</span> <span class="token number">23</span>:01 consul*
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u914D\u7F6E\u73AF\u5883\u53D8\u91CF</li></ol><p>\u914D\u4E0D\u914D\u7F6E\u73AF\u5883\u53D8\u91CF\u90FD\u65E0\u6240\u8C13\uFF0C\u53EA\u662F\u4E3A\u80FD\u5728\u4EFB\u4F55\u5730\u65B9\u8F93\u5165\u547D\u4EE4\u7684\u65F6\u5019\u7EC8\u7AEF\u80FD\u591F\u8BC6\u522B</p><p>\u5C06consul\u6240\u5728\u7684\u76EE\u5F55\u914D\u7F6E\u5230\u6362\u8FDB\u53D8\u91CF\u4E2D</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> ~/.bash_profile

<span class="token comment">## \u6DFB\u52A0</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">CONSUL_HOME</span><span class="token operator">=</span>consul\u7684\u5730\u5740
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$CONSUL_HOME</span>/

<span class="token comment">## \u8BA9\u914D\u7F6E\u751F\u6548</span>
<span class="token builtin class-name">source</span> ~/.bash_profile
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6D4B\u8BD5\u662F\u5426\u914D\u7F6E\u6210\u529F</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>consul -v
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>\u542F\u52A8</li></ol><p>\u5982\u679C\u4E0D\u914D\u7F6E\u73AF\u5883\u53D8\u91CF\uFF0C\u76F4\u63A5\u8FDB\u5165\u5B83\u7684\u76EE\u5F55\u542F\u52A8</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>./consul agent -dev <span class="token comment">## \u4EE5\u5F00\u53D1\u6D4B\u8BD5\u7684\u6A21\u5F0F\u542F\u52A8</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u7ED3\u679C</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">(</span>base<span class="token punctuation">)</span> aldencarter@aldencarter springcloud-demo-01 % ./consul agent -dev
<span class="token operator">==</span><span class="token operator">&gt;</span> Starting Consul agent<span class="token punctuation">..</span>.
           Version: <span class="token string">&#39;1.10.4&#39;</span>
           Node ID: <span class="token string">&#39;0e23df49-a3f3-f6a4-9f98-e31cf4b6bc6a&#39;</span>
         Node name: <span class="token string">&#39;aldencarter.local&#39;</span>
        Datacenter: <span class="token string">&#39;dc1&#39;</span> <span class="token punctuation">(</span>Segment: <span class="token string">&#39;&lt;all&gt;&#39;</span><span class="token punctuation">)</span>
            Server: <span class="token boolean">true</span> <span class="token punctuation">(</span>Bootstrap: <span class="token boolean">false</span><span class="token punctuation">)</span>
       Client Addr: <span class="token punctuation">[</span><span class="token number">127.0</span>.0.1<span class="token punctuation">]</span> <span class="token punctuation">(</span>HTTP: <span class="token number">8500</span>, HTTPS: -1, gRPC: <span class="token number">8502</span>, DNS: <span class="token number">8600</span><span class="token punctuation">)</span>
      Cluster Addr: <span class="token number">127.0</span>.0.1 <span class="token punctuation">(</span>LAN: <span class="token number">8301</span>, WAN: <span class="token number">8302</span><span class="token punctuation">)</span>
           Encrypt: Gossip: false, TLS-Outgoing: false, TLS-Incoming: false, Auto-Encrypt-TLS: <span class="token boolean">false</span>

<span class="token operator">==</span><span class="token operator">&gt;</span> Log data will now stream <span class="token keyword">in</span> as it occurs:

<span class="token number">2021</span>-12-16T03:36:27.246+0800 <span class="token punctuation">[</span>WARN<span class="token punctuation">]</span>  agent: Node name <span class="token string">&quot;aldencarter.local&quot;</span> will not be discoverable via DNS due to invalid characters. Valid characters include all alpha-numerics and dashes.
<span class="token number">2021</span>-12-16T03:36:27.251+0800 <span class="token punctuation">[</span>WARN<span class="token punctuation">]</span>  agent.auto_config: Node name <span class="token string">&quot;aldencarter.local&quot;</span> will not be discoverable via DNS due to invalid characters. Valid characters include all alpha-numerics and dashes.
<span class="token number">2021</span>-12-16T03:36:27.254+0800 <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>  agent.server.raft: initial configuration: <span class="token assign-left variable">index</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">servers</span><span class="token operator">=</span><span class="token string">&quot;[{Suffrage:Voter ID:0e23df49-a3f3-f6a4-9f98-e31cf4b6bc6a Address:127.0.0.1:8300}]&quot;</span>
<span class="token number">2021</span>-12-16T03:36:27.255+0800 <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>  agent.server.raft: entering follower state: <span class="token assign-left variable">follower</span><span class="token operator">=</span><span class="token string">&quot;Node at 127.0.0.1:8300 [Follower]&quot;</span> <span class="token assign-left variable">leader</span><span class="token operator">=</span>
<span class="token number">2021</span>-12-16T03:36:27.256+0800 <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>  agent.server.serf.wan: serf: EventMemberJoin: aldencarter.local.dc1 <span class="token number">127.0</span>.0.1
<span class="token number">2021</span>-12-16T03:36:27.256+0800 <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>  agent.server.serf.lan: serf: EventMemberJoin: aldencarter.local <span class="token number">127.0</span>.0.1
<span class="token number">2021</span>-12-16T03:36:27.256+0800 <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>  agent.router: Initializing LAN area manager
<span class="token number">2021</span>-12-16T03:36:27.257+0800 <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>  agent.server: Adding LAN server: <span class="token assign-left variable">server</span><span class="token operator">=</span><span class="token string">&quot;aldencarter.local (Addr: tcp/127.0.0.1:8300) (DC: dc1)&quot;</span>
<span class="token number">2021</span>-12-16T03:36:27.258+0800 <span class="token punctuation">[</span>WARN<span class="token punctuation">]</span>  agent: grpc: addrConn.createTransport failed to connect to <span class="token punctuation">{</span>dc1-127.0.0.1:8300 <span class="token number">0</span> aldencarter.local <span class="token operator">&lt;</span>nil<span class="token operator">&gt;</span><span class="token punctuation">}</span>. Err :connection error: desc <span class="token operator">=</span> <span class="token string">&quot;transport: Error while dialing dial tcp 127.0.0.1:0-&gt;127.0.0.1:8300: operation was canceled&quot;</span><span class="token builtin class-name">.</span> Reconnecting<span class="token punctuation">..</span>.
<span class="token number">2021</span>-12-16T03:36:27.258+0800 <span class="token punctuation">[</span>WARN<span class="token punctuation">]</span>  agent: grpc: addrConn.createTransport failed to connect to <span class="token punctuation">{</span>dc1-127.0.0.1:8300 <span class="token number">0</span> aldencarter.local.dc1 <span class="token operator">&lt;</span>nil<span class="token operator">&gt;</span><span class="token punctuation">}</span>. Err :connection error: desc <span class="token operator">=</span> <span class="token string">&quot;transport: Error while dialing dial tcp 127.0.0.1:0-&gt;127.0.0.1:8300: operation was canceled&quot;</span><span class="token builtin class-name">.</span> Reconnecting<span class="token punctuation">..</span>.
<span class="token number">2021</span>-12-16T03:36:27.258+0800 <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>  agent.server: Handled event <span class="token keyword">for</span> <span class="token for-or-select variable">server</span> <span class="token keyword">in</span> area: <span class="token assign-left variable">event</span><span class="token operator">=</span>member-join <span class="token assign-left variable">server</span><span class="token operator">=</span>aldencarter.local.dc1 <span class="token assign-left variable">area</span><span class="token operator">=</span>wan
<span class="token number">2021</span>-12-16T03:36:27.260+0800 <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>  agent: Started DNS server: <span class="token assign-left variable">address</span><span class="token operator">=</span><span class="token number">127.0</span>.0.1:8600 <span class="token assign-left variable">network</span><span class="token operator">=</span>tcp
<span class="token number">2021</span>-12-16T03:36:27.260+0800 <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>  agent: Started DNS server: <span class="token assign-left variable">address</span><span class="token operator">=</span><span class="token number">127.0</span>.0.1:8600 <span class="token assign-left variable">network</span><span class="token operator">=</span>udp
<span class="token number">2021</span>-12-16T03:36:27.260+0800 <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>  agent: Starting server: <span class="token assign-left variable">address</span><span class="token operator">=</span><span class="token number">127.0</span>.0.1:8500 <span class="token assign-left variable">network</span><span class="token operator">=</span>tcp <span class="token assign-left variable">protocol</span><span class="token operator">=</span>http
<span class="token number">2021</span>-12-16T03:36:27.261+0800 <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>  agent: Started gRPC server: <span class="token assign-left variable">address</span><span class="token operator">=</span><span class="token number">127.0</span>.0.1:8502 <span class="token assign-left variable">network</span><span class="token operator">=</span>tcp
<span class="token number">2021</span>-12-16T03:36:27.261+0800 <span class="token punctuation">[</span>WARN<span class="token punctuation">]</span>  agent: DEPRECATED Backwards compatibility with pre-1.9 metrics enabled. These metrics will be removed <span class="token keyword">in</span> a future version of Consul. Set <span class="token variable"><span class="token variable">\`</span>telemetry <span class="token punctuation">{</span> disable_compat_1.9 <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token variable">\`</span></span> to disable them.
<span class="token number">2021</span>-12-16T03:36:27.261+0800 <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>  agent: started state syncer
<span class="token number">2021</span>-12-16T03:36:27.261+0800 <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>  agent: Consul agent running<span class="token operator">!</span>
<span class="token number">2021</span>-12-16T03:36:27.304+0800 <span class="token punctuation">[</span>WARN<span class="token punctuation">]</span>  agent.server.raft: heartbeat <span class="token function">timeout</span> reached, starting election: last-leader<span class="token operator">=</span>
<span class="token number">2021</span>-12-16T03:36:27.304+0800 <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>  agent.server.raft: entering candidate state: <span class="token assign-left variable">node</span><span class="token operator">=</span><span class="token string">&quot;Node at 127.0.0.1:8300 [Candidate]&quot;</span> <span class="token assign-left variable">term</span><span class="token operator">=</span><span class="token number">2</span>
<span class="token number">2021</span>-12-16T03:36:27.305+0800 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> agent.server.raft: votes: <span class="token assign-left variable">needed</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token number">2021</span>-12-16T03:36:27.305+0800 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> agent.server.raft: vote granted: <span class="token assign-left variable">from</span><span class="token operator">=</span>0e23df49-a3f3-f6a4-9f98-e31cf4b6bc6a <span class="token assign-left variable">term</span><span class="token operator">=</span><span class="token number">2</span> <span class="token assign-left variable">tally</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token number">2021</span>-12-16T03:36:27.305+0800 <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>  agent.server.raft: election won: <span class="token assign-left variable">tally</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token number">2021</span>-12-16T03:36:27.305+0800 <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>  agent.server.raft: entering leader state: <span class="token assign-left variable">leader</span><span class="token operator">=</span><span class="token string">&quot;Node at 127.0.0.1:8300 [Leader]&quot;</span>
<span class="token number">2021</span>-12-16T03:36:27.305+0800 <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>  agent.server: cluster leadership acquired
<span class="token number">2021</span>-12-16T03:36:27.305+0800 <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>  agent.server: New leader elected: <span class="token assign-left variable">payload</span><span class="token operator">=</span>aldencarter.local
<span class="token number">2021</span>-12-16T03:36:27.305+0800 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> agent.server: Cannot upgrade to new ACLs: <span class="token assign-left variable">leaderMode</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">mode</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">found</span><span class="token operator">=</span>true <span class="token assign-left variable">leader</span><span class="token operator">=</span><span class="token number">127.0</span>.0.1:8300
<span class="token number">2021</span>-12-16T03:36:27.307+0800 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> agent.server.autopilot: autopilot is now running
<span class="token number">2021</span>-12-16T03:36:27.307+0800 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> agent.server.autopilot: state update routine is now running
<span class="token number">2021</span>-12-16T03:36:27.307+0800 <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>  agent.leader: started routine: <span class="token assign-left variable">routine</span><span class="token operator">=</span><span class="token string">&quot;federation state anti-entropy&quot;</span>
<span class="token number">2021</span>-12-16T03:36:27.307+0800 <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>  agent.leader: started routine: <span class="token assign-left variable">routine</span><span class="token operator">=</span><span class="token string">&quot;federation state pruning&quot;</span>
<span class="token number">2021</span>-12-16T03:36:27.308+0800 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> connect.ca.consul: consul CA provider configured: <span class="token assign-left variable">id</span><span class="token operator">=</span>07:80:c8:de:f6:41:86:29:8f:9c:b8:17:d6:48:c2:d5:c5:5c:7f:0c:03:f7:cf:97:5a:a7:c1:68:aa:23:ae:81 <span class="token assign-left variable">is_primary</span><span class="token operator">=</span>true
<span class="token number">2021</span>-12-16T03:36:27.317+0800 <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>  agent.server.connect: initialized primary datacenter CA with provider: <span class="token assign-left variable">provider</span><span class="token operator">=</span>consul
<span class="token number">2021</span>-12-16T03:36:27.317+0800 <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>  agent.leader: started routine: <span class="token assign-left variable">routine</span><span class="token operator">=</span><span class="token string">&quot;intermediate cert renew watch&quot;</span>
<span class="token number">2021</span>-12-16T03:36:27.317+0800 <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>  agent.leader: started routine: <span class="token assign-left variable">routine</span><span class="token operator">=</span><span class="token string">&quot;CA root pruning&quot;</span>
<span class="token number">2021</span>-12-16T03:36:27.317+0800 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> agent.server: successfully established leadership: <span class="token assign-left variable">duration</span><span class="token operator">=</span><span class="token number">11</span>.753063ms
<span class="token number">2021</span>-12-16T03:36:27.317+0800 <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>  agent.server: member joined, marking health alive: <span class="token assign-left variable">member</span><span class="token operator">=</span>aldencarter.local
<span class="token number">2021</span>-12-16T03:36:27.512+0800 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> agent: Skipping remote check since it is managed automatically: <span class="token assign-left variable">check</span><span class="token operator">=</span>serfHealth
<span class="token number">2021</span>-12-16T03:36:27.512+0800 <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>  agent: Synced <span class="token function">node</span> info
<span class="token number">2021</span>-12-16T03:36:27.512+0800 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> agent: Node info <span class="token keyword">in</span> <span class="token function">sync</span>
<span class="token number">2021</span>-12-16T03:36:27.628+0800 <span class="token punctuation">[</span>INFO<span class="token punctuation">]</span>  agent.server: federation state anti-entropy synced
<span class="token number">2021</span>-12-16T03:36:30.297+0800 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> agent: Skipping remote check since it is managed automatically: <span class="token assign-left variable">check</span><span class="token operator">=</span>serfHealth
<span class="token number">2021</span>-12-16T03:36:30.297+0800 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> agent: Node info <span class="token keyword">in</span> <span class="token function">sync</span>
<span class="token number">2021</span>-12-16T03:37:50.942+0800 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> agent: Skipping remote check since it is managed automatically: <span class="token assign-left variable">check</span><span class="token operator">=</span>serfHealth
<span class="token number">2021</span>-12-16T03:37:50.942+0800 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> agent: Node info <span class="token keyword">in</span> <span class="token function">sync</span>
<span class="token number">2021</span>-12-16T03:38:27.258+0800 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> agent.router.manager: Rebalanced servers, new active server: <span class="token assign-left variable">number_of_servers</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">active_server</span><span class="token operator">=</span><span class="token string">&quot;aldencarter.local.dc1 (Addr: tcp/127.0.0.1:8300) (DC: dc1)&quot;</span>
<span class="token number">2021</span>-12-16T03:38:27.258+0800 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> agent.router.manager: Rebalanced servers, new active server: <span class="token assign-left variable">number_of_servers</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">active_server</span><span class="token operator">=</span><span class="token string">&quot;aldencarter.local (Addr: tcp/127.0.0.1:8300) (DC: dc1)&quot;</span>
<span class="token number">2021</span>-12-16T03:39:45.864+0800 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> agent: Skipping remote check since it is managed automatically: <span class="token assign-left variable">check</span><span class="token operator">=</span>serfHealth
<span class="token number">2021</span>-12-16T03:39:45.864+0800 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> agent: Node info <span class="token keyword">in</span> <span class="token function">sync</span>
<span class="token number">2021</span>-12-16T03:41:01.856+0800 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> agent: Skipping remote check since it is managed automatically: <span class="token assign-left variable">check</span><span class="token operator">=</span>serfHealth
<span class="token number">2021</span>-12-16T03:41:01.856+0800 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> agent: Node info <span class="token keyword">in</span> <span class="token function">sync</span>
<span class="token number">2021</span>-12-16T03:41:11.747+0800 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> agent.router.manager: Rebalanced servers, new active server: <span class="token assign-left variable">number_of_servers</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">active_server</span><span class="token operator">=</span><span class="token string">&quot;aldencarter.local.dc1 (Addr: tcp/127.0.0.1:8300) (DC: dc1)&quot;</span>
<span class="token number">2021</span>-12-16T03:41:16.621+0800 <span class="token punctuation">[</span>DEBUG<span class="token punctuation">]</span> agent.router.manager: Rebalanced servers, new active server: <span class="token assign-left variable">number_of_servers</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">active_server</span><span class="token operator">=</span><span class="token string">&quot;aldencarter.local (Addr: tcp/127.0.0.1:8300) (DC: dc1)&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u8BBF\u95EEconsul\u7684web\u670D\u52A1\u5730\u5740</li></ol><div class="language-http ext-http line-numbers-mode"><pre class="language-http"><code><span class="token header"><span class="token header-name keyword">http</span><span class="token punctuation">:</span><span class="token header-value">//localhost:8500 ## consul \u7684\u9ED8\u8BA4\u7AEF\u53E3\u662F8500</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="`+x+`" alt="image-20211216034556804"></p><p>\u51FA\u73B0\u8FD9\u4E2A\u8868\u793A\u542F\u52A8\u6210\u529F</p><p>\u9ED8\u8BA4consul\u4E5F\u662F\u81EA\u5DF1\u6CE8\u518C\u81EA\u5DF1\u7684\uFF0C\u8FD9\u4E2A\u4E0D\u7528\u7BA1</p><h5 id="\u5F00\u53D1consul\u5BA2\u6237\u7AEF\u5373\u5FAE\u670D\u52A1"><a class="header-anchor" href="#\u5F00\u53D1consul\u5BA2\u6237\u7AEF\u5373\u5FAE\u670D\u52A1" aria-hidden="true">#</a> \u5F00\u53D1Consul\u5BA2\u6237\u7AEF\u5373\u5FAE\u670D\u52A1</h5><blockquote><p>\u5B98\u65B9\u7F51\u5740\uFF1Ahttps://spring.io/projects/spring-cloud-consul#overview</p></blockquote><ol><li>\u521B\u5EFA\u9879\u76EE\u5E76\u5F15\u5165consul\u5BA2\u6237\u7AEF\u4F9D\u8D56</li></ol><p>\u5728<code>springcloud-demo-01</code>\u9879\u76EE\u4E0B\u521B\u5EFAmodule\uFF0C\u540D\u5B57<code>springcloud-consul-client-demo-8889</code>\uFF0C\u5176\u4E2D8889\u662F\u8FD9\u4E2A\u5FAE\u670D\u52A1\u7684\u7AEF\u53E3</p><p>\u6DFB\u52A0springcloud\u73AF\u5883\u4F9D\u8D56\u914D\u7F6E</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring-cloud.version</span><span class="token punctuation">&gt;</span></span>Hoxton.SR6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring-cloud.version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- \u5168\u5C40\u7BA1\u7406springcloud\u7248\u672C\uFF0C \u5E76\u4E0D\u4F1A\u5F15\u5165\u5177\u4F53\u7684\u4F9D\u8D56\uFF0C\u53EA\u662F --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${spring-cloud.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6DFB\u52A0consul\u4F9D\u8D56</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5F15\u5165consul\u4F9D\u8D56--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-consul-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u7F16\u5199application.yaml\u914D\u7F6E</li></ol><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8889</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> springcloud<span class="token punctuation">-</span>consul<span class="token punctuation">-</span>client<span class="token punctuation">-</span>demo<span class="token punctuation">-</span><span class="token number">8889</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">consul</span><span class="token punctuation">:</span>
      <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8500</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">service-name</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.application.name<span class="token punctuation">}</span> <span class="token comment">## \u53EF\u4EE5\u4FEE\u6539\u5728consul\u7684\u6CE8\u518C\u540D\uFF0C\u4F46\u662F\u4E00\u822C\u4E0D\u5EFA\u8BAE\u4FEE\u6539\uFF0C\u6700\u597D\u548Capplication\u540D\u79F0\u4E00\u81F4</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u5165\u53E3\u7C7B\u6DFB\u52A0\u6CE8\u89E3</li></ol><p>\u5176\u5B9E\u5F15\u5165consul\u8FD9\u4E2A\u4F9D\u8D56\u4E4B\u540E\uFF0C\u8FD9\u4E2A\u6CE8\u89E3\u52A0\u4E0D\u52A0\u90FD\u884C</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringcloudConsulClientDemo8889Application</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringcloudConsulClientDemo8889Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u67E5\u770Bconsul\u7684web\u7BA1\u7406\u754C\u9762</li></ol><p>\u53EF\u4EE5\u770B\u5230\u5DF2\u7ECF\u6CE8\u518C\u5230consul\u670D\u52A1\u5668\u4E86</p><p><img src="`+S+`" alt="image-20211216040719937"></p><p>\u8FD9\u4E2A\u53C9\u53F7\u662Fconsul\u4E0E\u5BA2\u6237\u7AEF\u4E4B\u95F4\u7684\u5065\u5EB7\u68C0\u67E5\uFF0C\u5982\u679C\u60F3\u8981\u53EF\u4EE5\u5173\u95ED\u8FD9\u4E2A\u5065\u5EB7\u68C0\u67E5\uFF0C<strong>\u4F46\u662F\u4E0D\u63A8\u8350\u5173\u95ED</strong></p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">consul</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">register-health-check</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment">## \u5173\u95ED\u9ED8\u8BA4\u7684\u5065\u5EB7\u68C0\u67E5\uFF0C\u4E0D\u5173\u5FC3\u53EF\u4E0D\u53EF\u7528</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="consul\u5F00\u542F\u5065\u5EB7\u68C0\u67E5"><a class="header-anchor" href="#consul\u5F00\u542F\u5065\u5EB7\u68C0\u67E5" aria-hidden="true">#</a> consul\u5F00\u542F\u5065\u5EB7\u68C0\u67E5</h5><p>\u4E3A\u4EC0\u4E48\u5DF2\u7ECF\u5C06\u5FAE\u670D\u52A1\u542F\u52A8\u4E4B\u540E\uFF0Cconsul\u8FD8\u4F1A\u89C9\u5F97\u5BA2\u6237\u7AEF\u4E0D\u80FD\u7528\u5462\uFF1F\u6211\u4EEC\u5C11\u4E86\u4E00\u4E2A\u5065\u5EB7\u68C0\u67E5\u7684\u4F9D\u8D56</p><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0Cconsul\u76D1\u63A7\u5065\u5EB7\u662F\u5F00\u542F\u7684\uFF0C\u4F46\u662F\u5FC5\u987B\u4F9D\u8D56\u5065\u5EB7\u76D1\u63A7\u4F9D\u8D56\u624D\u80FD\u6B63\u786E\u76D1\u63A7\u5065\u5EB7\u72B6\u6001\uFF0C\u6240\u4EE5\u76F4\u63A5\u542F\u52A8\u4F1A\u663E\u793A\u9519\u8BEF\uFF0C\u5F15\u5165\u5065\u5EB7\u68C0\u67E5\u4F9D\u8D56\u4E4B\u540E\u670D\u52A1\u6B63\u5E38</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--consul \u5065\u5EB7\u68C0\u67E5\u7684\u4F9D\u8D56 \u5FC5\u987B\u8981\u5F15\u5165\uFF0C\u5982\u679C\u6CA1\u6709\u5F15\u5165\u8FD9\u4E2A\u4F9D\u8D56\uFF0C\u5373\u4F7F\u670D\u52A1\u53EF\u7528\uFF0C\u4F46\u662F\u5728\u670D\u52A1\u5728consul\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3\u83B7\u53D6\u4E0D\u5230\u670D\u52A1\u72B6\u6001--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F15\u5165\u4F9D\u8D56\u4E4B\u540E\u91CD\u65B0\u542F\u52A8\uFF0C\u5DF2\u7ECF\u6B63\u5E38\u4E86</p><p><img src="`+I+'" alt="image-20211216042510992"></p><h4 id="\u4E0D\u540C\u6CE8\u518C\u4E2D\u5FC3\u7684\u533A\u522B"><a class="header-anchor" href="#\u4E0D\u540C\u6CE8\u518C\u4E2D\u5FC3\u7684\u533A\u522B" aria-hidden="true">#</a> \u4E0D\u540C\u6CE8\u518C\u4E2D\u5FC3\u7684\u533A\u522B</h4><ol><li>CAP\u5B9A\u7406</li></ol><blockquote><p>CAP\u5B9A\u7406\uFF1ACAP\u5B9A\u7406\u53C8\u79F0\u4E3ACAP\u539F\u5219\uFF0C\u6307\u7684\u662F\u4E00\u4E2A\u5728\u5206\u5E03\u5F0F\u7CFB\u7EDF\u4E2D\uFF0C\u4E00\u81F4\u6027\uFF08Consistency\uFF09\u3001\u53EF\u7528\u6027\uFF08Availability\uFF09\u3001\u5206\u533A\u5BB9\u9519\u6027\uFF08Partition tolernace\uFF09\u3002CAP\u539F\u5219\u6307\u7684\u662F\uFF0C\u8FD9\u4E09\u4E2A\u8981\u7D20\u6700\u591A\u53EA\u80FD\u540C\u65F6\u5B9E\u73B0\u4E24\u4E2A\uFF0C\u4E0D\u80FD\u4E09\u8005\u517C\u987E</p><ul><li>\u4E00\u81F4\u6027C\uFF1A\u5728\u5206\u5E03\u5F0F\u7CFB\u7EDF\u4E2D\u7684\u6240\u6709\u6570\u636E\u5907\u4EFD\uFF0C\u5728\u540C\u4E00\u65F6\u523B\u662F\u5426\u662F\u540C\u6837\u7684\u503C\u3002\uFF08\u7B49\u540C\u4E8E\u6240\u6709\u8282\u70B9\u8BBF\u95EE\u540C\u4E00\u4EFD\u6700\u65B0\u7684\u6570\u636E\u526F\u672C\uFF09</li><li>\u53EF\u7528\u6027A\uFF1A\u5728\u96C6\u7FA4\u4E2D\u4E00\u90E8\u5206\u8282\u70B9\u6545\u969C\u540E\uFF0C\u96C6\u7FA4\u6574\u4F53\u662F\u5426\u8FD8\u80FD\u54CD\u5E94\u5BA2\u6237\u7AEF\u7684\u8BFB\u5199\u8BF7\u6C42\u3002\uFF08\u5BF9\u6570\u636E\u5177\u5907\u9AD8\u53EF\u7528\u6027\uFF09</li><li>\u5206\u533A\u5BB9\u9519\u6027P\uFF1A\u5C31\u662F\u9AD8\u53EF\u7528\u6027\uFF0C\u4E00\u4E2A\u8282\u70B9\u5D29\u4E86\uFF0C\u5E76\u4E0D\u5F71\u54CD\u5176\u4ED6\u8282\u70B9\u3002\uFF08100\u4E2A\u8282\u70B9\uFF0C\u6302\u4E86\u51E0\u4E2A\uFF0C\u4E0D\u5F71\u54CD\u670D\u52A1\uFF0C\u8D8A\u591A\u673A\u5668\u8D8A\u597D\uFF09</li></ul><p>\u6240\u4EE5\u9488\u5BF9C\u548CA\u6765\u8BF4\u6C38\u8FDC\u7684\u662F\u77DB\u76FE\u7684</p></blockquote><p>\u4E0B\u9762\u7684\u51E0\u4E2A\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3\u90FD\u4F1A\u6EE1\u8DB3\u5176\u4E2D\u4E00\u5230\u4E24\u4E2A\u8981\u7D20</p><ol start="2"><li>eureka\u7279\u70B9</li></ol><p>eureka\u4E2D\u6CA1\u6709\u4F7F\u7528\u4EFB\u4F55\u7684\u6570\u636E\u5F3A\u4E00\u81F4\u6027\u7B97\u6CD5\u4FDD\u8BC1\u4E0D\u540C\u96C6\u7FA4\u95F4\u7684server\u7684\u6570\u636E\u4FDD\u6301\u4E00\u81F4\uFF0C\u4EC5\u901A\u8FC7\u6570\u636E\u62F7\u8D1D\u7684\u65B9\u5F0F\u4E89\u53D6\u6CE8\u518C\u4E2D\u5FC3\u6570\u636E\u7684\u6700\u7EC8\u4E00\u81F4\u6027\uFF0C\u867D\u7136\u653E\u5F03\u6570\u636E\u5F3A\u4E00\u81F4\u6027\u4F46\u662F\u6362\u6765\u4E86server\u7684\u53EF\u7528\u6027\uFF0C\u964D\u4F4E\u4E86\u6CE8\u518C\u7684\u4EE3\u4EF7\uFF0C\u63D0\u9AD8\u4E86\u96C6\u7FA4\u7684\u5065\u58EE\u6027\uFF0Ceureka\u53EA\u8981\u4FDD\u8BC1\u4E00\u4E2A\u8282\u70B9\u4E0A\u6709\u9700\u8981\u7684\u7684\u6570\u636E\uFF0C\u90A3\u4E48\u5C31\u53EF\u4EE5\u5BF9\u5916\u63D0\u4F9B\u670D\u52A1</p><ol start="3"><li>consul\u7279\u70B9</li></ol><p>\u57FA\u4E8Eraft\u7B97\u6CD5\uFF0Cconsul\u63D0\u4F9B<strong>\u5F3A\u4E00\u81F4\u6027</strong>\u7684\u6CE8\u518C\u4E2D\u5FC3\u670D\u52A1\uFF0C\u4F46\u662F\u7531\u4E8Eleader\u8282\u70B9\u627F\u62C5\u4E86\u6240\u6709\u7684\u5904\u7406\u5DE5\u4F5C\uFF0C\u52BF\u5FC5\u52A0\u5927\u4E86\u6CE8\u518C\u548C\u53D1\u73B0\u7684\u4EE3\u4EF7\uFF0C\u964D\u4F4E\u4E86\u670D\u52A1\u7684\u53EF\u7528\u6027\u3002\u901A\u8FC7gossip\u534F\u8BAE\uFF0Cconsul\u53EF\u4EE5\u5F88\u597D\u7684\u76D1\u63A7consul\u96C6\u7FA4\u7684\u8FD0\u884C\uFF0C\u540C\u65F6\u53EF\u4EE5\u65B9\u4FBF\u901A\u77E5\u5404\u7C7B\u4E8B\u4EF6\uFF0C\u5982leader\u9009\u62E9\u53D1\u751F\u3001server\u5730\u5740\u53D8\u66F4\u7B49\uFF0C\u5373\u4F7F\u662F\u5927\u90E8\u5206\u7684\u8282\u70B9\u90FD\u6709\u8FD9\u4E2A\u6570\u636E\uFF0C\u53EA\u8981\u6709\u4E00\u4E2A\u8282\u70B9\u4E0D\u5B58\u5728\u5B8C\u6574\u7684\u6570\u636E\uFF0C\u90FD\u4E0D\u80FD\u5BF9\u5916\u63D0\u4F9B\u670D\u52A1</p><ol start="4"><li>zookeeper\u7279\u70B9</li></ol><p>\u57FA\u4E8Ezab\u534F\u8BAE\uFF0Czookeeper\u53EF\u4EE5\u7528\u4E8E\u6784\u5EFA\u5177\u5907<strong>\u6570\u636E\u5F3A\u4E00\u81F4\u6027</strong>\u7684\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0\u4E2D\u5FC3\uFF0C\u800C\u4E0E\u6B64\u76F8\u6BD4\u7684\u727A\u7272\u4E86\u670D\u52A1\u7684\u53EF\u7528\u6027\u548C\u63D0\u9AD8\u4E86\u6CE8\u518C\u9700\u8981\u7684\u65F6\u95F4\uFF0C\u5373\u4F7F\u662F\u5927\u90E8\u5206\u7684\u8282\u70B9\u90FD\u6709\u8FD9\u4E2A\u6570\u636E\uFF0C\u53EA\u8981\u6709\u4E00\u4E2A\u8282\u70B9\u4E0D\u5B58\u5728\u5B8C\u6574\u7684\u6570\u636E\uFF0C\u90FD\u4E0D\u80FD\u5BF9\u5916\u63D0\u4F9B\u670D\u52A1</p><p><img src="'+j+'" alt="image-20211216044251418"></p><h2 id="\u670D\u52A1\u95F4\u901A\u4FE1\u65B9\u5F0F"><a class="header-anchor" href="#\u670D\u52A1\u95F4\u901A\u4FE1\u65B9\u5F0F" aria-hidden="true">#</a> \u670D\u52A1\u95F4\u901A\u4FE1\u65B9\u5F0F</h2><p>\u63A5\u4E0B\u6765\u5728\u6574\u4E2A\u5FAE\u670D\u52A1\u67B6\u6784\u4E2D\uFF0C\u6211\u4EEC\u6BD4\u8F83\u5173\u5FC3\u7684\u5C31\u662F\u670D\u52A1\u95F4\u8BE5\u5982\u4F55\u8C03\u7528\uFF0C\u6709\u90A3\u4E9B\u8C03\u7528\u65B9\u5F0F\u5462</p><p><img src="'+C+`" alt="image-20211216063933708"></p><blockquote><p>\u603B\u7ED3\uFF1A\u5728springcloud\u4E2D\u670D\u52A1\u95F4\u8C03\u7528\u65B9\u5F0F\u4E3B\u8981\u662F\u4F7F\u7528http restful\u65B9\u5F0F\u8FDB\u884C\u670D\u52A1\u95F4\u7684\u8C03\u7528</p></blockquote><h3 id="\u57FA\u4E8Eresttemplate\u7684\u670D\u52A1\u8C03\u7528"><a class="header-anchor" href="#\u57FA\u4E8Eresttemplate\u7684\u670D\u52A1\u8C03\u7528" aria-hidden="true">#</a> \u57FA\u4E8ERestTemplate\u7684\u670D\u52A1\u8C03\u7528</h3><p>spring\u6846\u67B6\u63D0\u4F9B\u7684RestTemplate\u7C7B\u53EF\u7528\u4E8E\u5728\u5E94\u7528\u4E2D\u8C03\u7528rest\u670D\u52A1\uFF0C\u5B83\u7B80\u5316\u4E86\u4E0Ehttp\u670D\u52A1\u7684\u901A\u4FE1\u65B9\u5F0F\uFF0C\u7EDF\u4E00\u4E86restful\u7684\u6807\u51C6\uFF0C\u5C01\u88C5\u4E86http\u94FE\u63A5\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u4F20\u5165url\u53CA\u8FD4\u56DE\u503C\u7C7B\u578B\u5373\u53EF\uFF0C\u76F8\u8F83\u4E8E\u4E4B\u524D\u5E38\u7528\u7684httpClient\uFF0CRestTemplate\u662F\u4E00\u79CD\u66F4\u4F18\u96C5\u7684\u8C03\u7528restful\u670D\u52A1\u7684\u65B9\u5F0F</p><h4 id="resttemplate\u670D\u52A1\u8C03\u7528"><a class="header-anchor" href="#resttemplate\u670D\u52A1\u8C03\u7528" aria-hidden="true">#</a> RestTemplate\u670D\u52A1\u8C03\u7528</h4><ol><li>\u521B\u5EFA\u4E24\u4E2A\u670D\u52A1</li></ol><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">-</span> springcloud-consul-users-demo-9999 \u4EE3\u8868\u7528\u6237\u670D\u52A1 \u7AEF\u53E3\u53F7\u4E3A 9999
<span class="token list punctuation">-</span> springcloud-consul-product-demo-9998 \u4EE3\u8868\u5546\u54C1\u670D\u52A1 \u7AEF\u53E3\u53F7\u4E3A 9998
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u6CE8\u518C\u5230consul\u6CE8\u518C\u4E2D\u5FC3</li></ol><p>\u6DFB\u52A0\u4F9D\u8D56\u548Cspringcloud\u73AF\u5883\u4F9D\u8D56</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring-cloud.version</span><span class="token punctuation">&gt;</span></span>Hoxton.SR6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring-cloud.version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- \u5168\u5C40\u7BA1\u7406springcloud\u7248\u672C\uFF0C \u5E76\u4E0D\u4F1A\u5F15\u5165\u5177\u4F53\u7684\u4F9D\u8D56\uFF0C\u53EA\u662F --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${spring-cloud.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!--\u5F15\u5165consul\u4F9D\u8D56--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-consul-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!--consul \u5065\u5EB7\u68C0\u67E5\u7684\u4F9D\u8D56 \u5FC5\u987B\u8981\u5F15\u5165\uFF0C\u5982\u679C\u6CA1\u6709\u5F15\u5165\u8FD9\u4E2A\u4F9D\u8D56\uFF0C\u5373\u4F7F\u670D\u52A1\u53EF\u7528\uFF0C\u4F46\u662F\u5728\u670D\u52A1\u5728consul\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3\u83B7\u53D6\u4E0D\u5230\u670D\u52A1\u72B6\u6001--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u914D\u7F6Econsul\u670D\u52A1</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9998</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> springcloud<span class="token punctuation">-</span>consul<span class="token punctuation">-</span>product<span class="token punctuation">-</span>demo<span class="token punctuation">-</span><span class="token number">9998</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">consul</span><span class="token punctuation">:</span>
      <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8500</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u5728\u5546\u54C1\u670D\u52A1\u4E2D\u66B4\u9732\u670D\u52A1</li></ol><p>\u5176\u5B9E\u5C31\u662F\u7F16\u5199Controller\u548CController\u4E2D\u7684\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProductController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${server.port}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> port<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/product/showMsg&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">showMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\u8FDB\u5165\u5546\u54C1\u670D\u52A1\uFF0C\u5C55\u793A\u5546\u54C1\u4FE1\u606F\uFF1A&quot;</span> <span class="token operator">+</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;\u8FDB\u5165\u5546\u54C1\u670D\u52A1\uFF0C\u5C55\u793A\u5546\u54C1\u4FE1\u606F\uFF1A&quot;</span> <span class="token operator">+</span> port<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/product/findAll&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\u8FDB\u5165\u5546\u54C1\u670D\u52A1\uFF0C\u67E5\u8BE2\u6240\u6709\u5546\u54C1\u4FE1\u606F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u67E5\u8BE2\u6240\u6709\u5546\u54C1\u4FE1\u606F\u6210\u529F\uFF0C\u5F53\u524D\u670D\u52A1\u7AEF\u53E3&quot;</span> <span class="token operator">+</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u5728\u7528\u6237\u670D\u52A1\u4E2D\u8C03\u7528\u5546\u54C1\u670D\u52A1</li></ol><p>\u7F16\u5199Controller\u548CController\u4E2D\u7684\u65B9\u6CD5\uFF0C\u901A\u8FC7RestTemplate\u8C03\u7528\u670D\u52A1\uFF0C\u6839\u636E\u4E0D\u540C\u7684\u8BF7\u6C42\u65B9\u5F0F\uFF0C\u8C03\u7528\u4E0D\u540C\u7684\u65B9\u6CD5\uFF08get\u3001post...\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user/showProductMsg&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">showProductMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// 1. \u7B2C\u4E00\u79CD\u670D\u52A1\u7AEF\u8C03\u7528\u65B9\u5F0F \u670D\u52A1\u7684\u5730\u5740\uFF1Ahttp://localhost:9998/product/showMsg \u8FD4\u56DE\u503C String\u7C7B\u578B</span>
        <span class="token keyword">final</span> <span class="token class-name">RestTemplate</span> restTemplate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token doc-comment comment">/**
         * \u53C2\u65701 \u8BF7\u6C42\u8DEF\u5F84
         * \u53C2\u65702 \u8FD4\u56DE\u503C\u7C7B\u578B
         */</span>
        <span class="token keyword">final</span> <span class="token class-name">String</span> msg <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:9998/product/showMsg&quot;</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\u8C03\u7528\u6210\u529F\uFF0C\u8FD4\u56DE\u7684\u4FE1\u606F\uFF1A&quot;</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> msg<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user/findAllProduct&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">findAllProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\u8FDB\u5165\u7528\u6237\u670D\u52A1....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">RestTemplate</span> restTemplate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">String</span> forObject <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:9998/product/findAll&quot;</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>forObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> forObject<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>\u6B64\u65F6\u5982\u679C\u6211\u4EEC\u8C03\u7528\u7528\u6237\u670D\u52A1\u4E4B\u540E\u5C31\u4F1A\u6210\u529F\u8C03\u7528\u5546\u54C1\u670D\u52A1\u7684\u51FD\u6570</li></ol><p><img src="`+R+`" alt="image-20211216153033730"></p><ol start="6"><li><strong>\u95EE\u9898\uFF1A</strong></li></ol><p>\u8FD9\u79CD\u65B9\u5F0F\u76F4\u63A5\u8C03\u7528RestTemplate\u7684\u65B9\u5F0F\u7F3A\u70B9\uFF1A</p><ul><li>\u76F4\u63A5\u901A\u8FC7\u8FDE\u63A5\u7684\u65B9\u5F0F\u8C03\u7528\u670D\u52A1\uFF0C\u6CA1\u6709\u7ECF\u8FC7\u6CE8\u518C\u4E2D\u5FC3\uFF0C\u65E0\u6CD5\u505A\u5230\u89E3\u8026\uFF0C\u5404\u4E2A\u670D\u52A1\u4E4B\u95F4\u7684\u8026\u5408\u6027\u592A\u5F3A</li><li>\u5728\u591A\u4E2A\u96C6\u7FA4\u7684\u60C5\u51B5\u4E0B\uFF0C\u65E0\u6CD5\u505A\u5230\u8D1F\u8F7D\u5747\u8861\uFF0C\u5982\u679C\u6307\u5411\u6027\u7684\u901A\u8FC7\u8FDE\u63A5\u8C03\u7528\u67D0\u4E2A\uFF0C\u4E00\u65E6\u5F53\u8FD9\u4E2A\u670D\u52A1\u5B95\u673A\uFF0C\u4F46\u662F\u6B64\u670D\u52A1\u7684\u5176\u4ED6\u96C6\u7FA4\u8FD0\u884C\u6B63\u5E38\u7684\u60C5\u51B5\u4E0B\uFF0C\u8C03\u7528\u5931\u8D25</li></ul><p><strong>\u4E0D\u63A8\u8350\u4F46\u662F\u53EF\u4EE5\u5B9E\u73B0\u7684\u65B9\u6848</strong></p><p>\u5F53\u7136\uFF0C\u6211\u4EEC\u53EF\u4EE5\u81EA\u5DF1\u5728\u8C03\u7528\u8005\u7AEF\u7F16\u5199\u4E00\u4E2Arandom\u51FD\u6570\uFF0C\u968F\u673A\u8C03\u7528\u6211\u4EEC\u60F3\u8981\u8C03\u7528\u7684\u670D\u52A1\u8FDE\u63A5\uFF0C\u4F46\u662F\u8FD9\u79CD\u65B9\u5F0F\u65E0\u6CD5\u505A\u5230\u8D1F\u8F7D\u5747\u8861</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">randomHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;localhost:9997&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;localhost:9998&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>idea\u5355\u4EFD\u4EE3\u7801\u542F\u52A8\u591A\u4E2A\u670D\u52A1\u7684\u64CD\u4F5C\uFF1A\u8FD9\u91CC\u53EA\u662F\u4F7F\u7528user\u6D4B\u8BD5\uFF0C\u6211\u4EEC\u771F\u6B63\u8981\u590D\u5236\u7684\u5176\u5B9E\u662Fproduct</p><p>\u5F53\u6211\u4EEC\u60F3\u8981\u540C\u4E00\u4EFD\u4EE3\u7801\u542F\u52A8\u591A\u4E2A\u670D\u52A1\u6A21\u62DF\u96C6\u7FA4\u7684\u65F6\u5019\uFF0C\u6CA1\u6709\u5FC5\u8981\u540C\u6837\u4E00\u4EFD\u4EE3\u7801\u590D\u5236\u591A\u4E2A\u9879\u76EE\u51FA\u6765</p><ol><li>\u5728run dashboard\u4E2D\u53F3\u952E\u60F3\u8981\u542F\u52A8\u591A\u4E2A\u670D\u52A1\u7684\u9879\u76EE\uFF0C\u9009\u62E9<code>Copy Configuration</code></li></ol><p><img src="`+A+'" alt="image-20211216153955110"></p><ol start="2"><li>\u5728\u5F39\u51FA\u7684\u7A97\u53E3\u4E2D\u91CD\u547D\u540D\u548C\u901A\u8FC7\u4F20\u5165\u53C2\u6570\u7684\u65B9\u5F0F\u4FEE\u6539\u63A5\u53E3</li></ol><p><img src="'+E+'" alt="image-20211216154201843"></p><ol start="3"><li>\u6B64\u65F6\u5C31\u4F1A\u590D\u5236\u51FA\u4E00\u4E2A\u5E26\u7740\u540C\u6837\u7684\u4EE3\u7801\u7684\u670D\u52A1</li></ol><p><img src="'+O+'" alt="image-20211216154252534"></p><ol start="4"><li>\u4E24\u4E2A\u90FD\u542F\u52A8\u4E4B\u540E\uFF0C\u5728consul web\u7BA1\u7406\u754C\u9762\u70B9\u51FB\u5BF9\u5E94\u7684\u9879\u76EE\u540D\u79F0\u8FDB\u5165\uFF0C\u5C31\u53EF\u4EE5\u770B\u5230\u4E24\u4E2A\u670D\u52A1</li></ol><p><img src="'+M+'" alt="image-20211216154701410"></p><p><img src="'+T+`" alt="image-20211216154644930"></p></blockquote><h3 id="\u57FA\u4E8Eribbon\u7684\u670D\u52A1\u8C03\u7528"><a class="header-anchor" href="#\u57FA\u4E8Eribbon\u7684\u670D\u52A1\u8C03\u7528" aria-hidden="true">#</a> \u57FA\u4E8ERibbon\u7684\u670D\u52A1\u8C03\u7528</h3><blockquote><p>\u5B98\u65B9\u7F51\u5740\uFF1Ahttps://github.com/Netflix/ribbon/wiki</p><p>springcloud ribbon\u662F\u4E00\u4E2A\u57FA\u4E8Ehttp\u548CTCP\u7684<strong>\u5BA2\u6237\u7AEF</strong>\u8D1F\u503A\u5747\u8861\u5DE5\u5177\uFF0C\u5B83\u57FA\u4E8ENetflix Ribbon\u5B9E\u73B0\u3002\u901A\u8FC7springcloud\u7684\u5C01\u88C5\uFF0C\u53EF\u4EE5\u8BA9\u6211\u4EEC\u8F7B\u8F7B\u677E\u677E\u7684\u5C06\u9762\u5411\u670D\u52A1\u7684rest\u6A21\u677F\u8BF7\u6C42\u81EA\u52A8\u8F6C\u6362\u6210\u5BA2\u6237\u7AEF\u8D1F\u503A\u5747\u8861\u7684\u670D\u52A1\u8C03\u7528</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>\u5E2E\u6211\u4EEC\u4ECE\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3\u62FF\u5230\u670D\u52A1\u7684\u5217\u8868\uFF0C\u901A\u8FC7\u4E00\u5B9A\u7684\u8D1F\u503A\u5747\u8861\u7684\u7B97\u6CD5\u627E\u51FA\u6700\u5408\u9002\u7684\u8C03\u7528\u670D\u52A1\u7684\u8FDE\u63A5\uFF0C\u4E5F\u5C31\u662FrestTemplate+Ribbon\u5B9E\u73B0\u8D1F\u8F7D\u5747\u8861
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></blockquote><h4 id="ribbon\u670D\u52A1\u8C03\u7528"><a class="header-anchor" href="#ribbon\u670D\u52A1\u8C03\u7528" aria-hidden="true">#</a> Ribbon\u670D\u52A1\u8C03\u7528</h4><h5 id="\u9879\u76EE\u4E2D\u5F15\u5165\u4F9D\u8D56"><a class="header-anchor" href="#\u9879\u76EE\u4E2D\u5F15\u5165\u4F9D\u8D56" aria-hidden="true">#</a> \u9879\u76EE\u4E2D\u5F15\u5165\u4F9D\u8D56</h5><ol><li>\u8BF4\u660E\uFF1A</li></ol><blockquote><p>\u5B98\u7F51\uFF1Ahttps://spring.io/projects/spring-cloud-consul#overview</p><p>Spring Cloud Consul features:</p><ul><li>Service Discovery: instances can be registered with the Consul agent and clients can discover the instances using Spring-managed beans</li><li>Supports Ribbon, the client side load-balancer via Spring Cloud Netflix \u9ED8\u8BA4\u96C6\u6210\u4E86Ribbon</li><li>Supports Spring Cloud LoadBalancer - a client side load-balancer provided by the Spring Cloud project</li><li>Supports Zuul, a dynamic router and filter via Spring Cloud Netflix</li><li>Distributed Configuration: using the Consul Key/Value store</li><li>Control Bus: Distributed control events using Consul Events</li></ul></blockquote><ul><li>\u5982\u679C\u4F7F\u7528\u7684eureka client \u548C consul client\uFF0C\u65E0\u987B\u5F15\u5165\u4F9D\u8D56\uFF0C\u56E0\u4E3A\u5728eureka\u3001consul\u4E2D\u9ED8\u8BA4\u96C6\u6210\u4E86Ribbon\u7EC4\u4EF6</li><li>\u5982\u679C\u4F7F\u7528\u7684client\u4E2D\u6CA1\u6709Ribbon\u4F9D\u8D56\u9700\u8981\u663E\u5F0F\u5F15\u5165\u5982\u4E0B\u4F9D\u8D56</li></ul><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5F15\u5165Ribbon--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-ribbon<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u67E5\u770Bconsul client\u4E2D\u7684\u4F9D\u8D56Ribbon</li></ol><p><img src="`+P+`" alt="image-20211216162359221"></p><h5 id="\u4F7F\u7528resttemplate-ribbon\u8FDB\u884C\u670D\u52A1\u8C03\u7528"><a class="header-anchor" href="#\u4F7F\u7528resttemplate-ribbon\u8FDB\u884C\u670D\u52A1\u8C03\u7528" aria-hidden="true">#</a> \u4F7F\u7528restTemplate + Ribbon\u8FDB\u884C\u670D\u52A1\u8C03\u7528</h5><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">-</span> \u4F7F\u7528discovery client 		\u8FDB\u884C\u5BA2\u6237\u7AEF\u8C03\u7528
<span class="token list punctuation">-</span> \u4F7F\u7528loadBalancerClient	\u8FDB\u884C\u5BA2\u6237\u7AEF\u8C03\u7528
<span class="token list punctuation">-</span> \u4F7F\u7528@LoadBalance				\u8FDB\u884C\u5BA2\u6237\u7AEF\u8C03\u7528
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="\u4F7F\u7528discovery-client"><a class="header-anchor" href="#\u4F7F\u7528discovery-client" aria-hidden="true">#</a> \u4F7F\u7528discovery client</h6><p>\u8FDB\u884C\u5BA2\u6237\u7AEF\u8C03\u7528\uFF0C\u8FD9\u79CD\u65B9\u5F0F\u6CA1\u6709\u5B9E\u73B0\u8D1F\u8F7D\u5747\u8861</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">DiscoveryClient</span> discoveryClient<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">randomHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 2. Ribbon\u7684\u8C03\u7528\u65B9\u5F0F\u53C8\u6709\u4E09\u79CD\uFF1Adiscovery client;loadBalanceclient;@LoadBalance</span>
  <span class="token doc-comment comment">/**
         * \u53C2\u6570\uFF1A\u670D\u52A1\u540D\u79F0
         * \u8FD4\u56DE\u670D\u52A1\u5728\u6CE8\u518C\u4E2D\u5FC3\u4E0A\u7684\u6240\u6709\u4E3B\u673A\u5217\u8868
         * \u6CA1\u6709\u63D0\u4F9B\u8D1F\u8F7D\u5747\u8861
         */</span>
  <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServiceInstance</span><span class="token punctuation">&gt;</span></span> instances <span class="token operator">=</span> discoveryClient<span class="token punctuation">.</span><span class="token function">getInstances</span><span class="token punctuation">(</span><span class="token string">&quot;springcloud-consul-product-demo-9998&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ServiceInstance</span> instance <span class="token operator">:</span> instances<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span><span class="token function">getHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span><span class="token function">getPort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">final</span> <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>instances<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> instances<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;:&quot;</span> <span class="token operator">+</span> instances<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user/findAllProduct&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">findAllProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\u8FDB\u5165\u7528\u6237\u670D\u52A1....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">String</span> host <span class="token operator">=</span> <span class="token function">randomHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">RestTemplate</span> restTemplate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">String</span> forObject <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span><span class="token string">&quot;http://&quot;</span> <span class="token operator">+</span> host <span class="token operator">+</span> <span class="token string">&quot;/product/findAll&quot;</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>forObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> forObject<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="\u4F7F\u7528loadbalancerclient"><a class="header-anchor" href="#\u4F7F\u7528loadbalancerclient" aria-hidden="true">#</a> \u4F7F\u7528loadBalancerClient</h6><p>\u8FDB\u884C\u5BA2\u6237\u7AEF\u8C03\u7528\uFF0C\u5B9E\u73B0\u4E86\u8D1F\u8F7D\u5747\u8861</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">LoadBalancerClient</span> loadBalancerClient<span class="token punctuation">;</span>

<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user/showProductMsg&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">showProductMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token comment">// 3. \u4F7F\u7528loadBalance client</span>
  <span class="token doc-comment comment">/**
    * \u53EF\u4EE5\u62C9\u53D6\u5217\u8868\uFF0C\u8FD8\u53EF\u4EE5\u8FD4\u56DE\u4E00\u4E2A\u8D1F\u8F7D\u5747\u8861\u540E\u7684\u673A\u5668
    */</span>
  <span class="token keyword">final</span> <span class="token class-name">ServiceInstance</span> instance <span class="token operator">=</span> loadBalancerClient<span class="token punctuation">.</span><span class="token function">choose</span><span class="token punctuation">(</span><span class="token string">&quot;springcloud-consul-product-demo-9998&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u9ED8\u8BA4\u4F7F\u7528\u8F6E\u8BE2\u7B56\u7565\u9009\u62E9\u4E00\u4E2A\u670D\u52A1</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span><span class="token function">getHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span><span class="token function">getPort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">final</span> <span class="token class-name">RestTemplate</span> restTemplate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;http://&quot;</span> <span class="token operator">+</span> instance<span class="token punctuation">.</span><span class="token function">getHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;:&quot;</span> <span class="token operator">+</span> instance<span class="token punctuation">.</span><span class="token function">getPort</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;/product/showMsg&quot;</span><span class="token punctuation">;</span>
  <span class="token doc-comment comment">/**
    * \u53C2\u65701 \u8BF7\u6C42\u8DEF\u5F84
    * \u53C2\u65702 \u8FD4\u56DE\u503C\u7C7B\u578B
    */</span>
  <span class="token keyword">final</span> <span class="token class-name">String</span> msg <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\u8C03\u7528\u6210\u529F\uFF0C\u8FD4\u56DE\u7684\u4FE1\u606F\uFF1A&quot;</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> msg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="\u4F7F\u7528-loadbalance"><a class="header-anchor" href="#\u4F7F\u7528-loadbalance" aria-hidden="true">#</a> \u4F7F\u7528@LoadBalance</h6><p>\u8FDB\u884C\u5BA2\u6237\u7AEF\u8C03\u7528\uFF0C\u5B9E\u73B0\u4E86\u8D1F\u8F7D\u5747\u8861</p><ol><li>\u521B\u5EFAConfiguration\uFF0C\u5C06\u5B9E\u73B0\u4E86\u8D1F\u8F7D\u5747\u8861\u7684RestTemplate\u6CE8\u5165\u5230spring\u5BB9\u5668\u4E2D</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RestTemplateConfig</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * \u5728\u5DE5\u5382\u4E2D\u521B\u5EFA\u4E00\u4E2ArestTemplate\u5BF9\u8C61
     *
     * <span class="token keyword">@return</span>
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@LoadBalanced</span>  <span class="token comment">// \u5B9E\u73B0\u8D1F\u8F7D\u5747\u8861</span>
    <span class="token keyword">public</span> <span class="token class-name">RestTemplate</span> <span class="token function">getRestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u4F7F\u7528</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">RestTemplate</span> restTemplate<span class="token punctuation">;</span> <span class="token comment">// \u5177\u6709\u8D1F\u8F7D\u5747\u8861\u529F\u80FD\u7684restTemplate</span>

<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user/showProductMsg&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">showProductMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 4. @loadBalance + restTemplate</span>
  <span class="token comment">// \u5C06\u672C\u6765\u5E94\u8BE5\u5199url\u7684\u5730\u65B9\u6539\u6210\u9879\u76EE\u540D\uFF0C\u4E5F\u5C31\u662F\u6CE8\u5165\u5230consul\u4E2D\u7684\u540D\u5B57</span>
  <span class="token keyword">final</span> <span class="token class-name">String</span> msg <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span><span class="token string">&quot;http://springcloud-consul-product-demo-9998/product/showMsg&quot;</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u9ED8\u8BA4\u4F7F\u7528\u8F6E\u8BE2\u7B56\u7565\u9009\u62E9\u4E00\u4E2A\u670D\u52A1</span>

  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\u8C03\u7528\u6210\u529F\uFF0C\u8FD4\u56DE\u7684\u4FE1\u606F\uFF1A&quot;</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> msg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u8FD9\u79CD\u65B9\u5F0F\u7684\u8D1F\u8F7D\u5747\u8861\u5E76\u4E0D\u662F\u6BCF\u6B21\u90FD\u53BB\u8BF7\u6C42consul\u83B7\u53D6\u5230\u8FDE\u63A5</li></ol><p>\u4F1A\u5728\u5BA2\u6237\u7AEF\u5B58\u5728\u7F13\u5B58\uFF0C\u6240\u4EE5\u4E00\u65E6\u8BF7\u6C42\u7684\u670D\u52A1\u5B95\u673A\u4E86\uFF0C\u8C03\u7528\u8005\u8FD9\u8FB9\u7684\u7F13\u5B58\u8FD8\u5B58\u5728\u8FD9\u4E2A\u673A\u5668\uFF0C\u4F1A\u5BFC\u81F4\u8C03\u7528\u5931\u8D25\uFF0C\u53EA\u6709\u7B49\u5230\u4E0B\u6B21\u5FC3\u8DF3\u68C0\u6D4B\u5254\u9664\u4E4B\u540E\uFF0C\u7F13\u5B58\u624D\u4F1A\u91CD\u65B0\u62C9\u53D6\uFF1B\u670D\u52A1\u91CD\u65B0\u542F\u52A8\u6062\u590D\u4E5F\u662F\u540C\u7406</p><h4 id="ribbon\u8D1F\u8F7D\u5747\u8861\u7B56\u7565"><a class="header-anchor" href="#ribbon\u8D1F\u8F7D\u5747\u8861\u7B56\u7565" aria-hidden="true">#</a> Ribbon\u8D1F\u8F7D\u5747\u8861\u7B56\u7565</h4><p>\u4E00\u822C\u7528\u8F6E\u8BE2\u7684\u5C31\u591F\u4E86\uFF0C\u5982\u679C\u771F\u7684\u60F3\u8981\u4FEE\u6539\u7684\u8BDD\uFF1AAvailablityFilteringRule\u3001WeightedResponseTimeRule\u8FD9\u4E24\u4E2A\u662F\u5728\u5FAE\u670D\u52A1\u4E2D\u7528\u7684\u6BD4\u8F83\u591A\u7684d</p><p>\u8D1F\u8F7D\u5747\u8861\u7B97\u6CD5\uFF1A</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">-</span> RoundRobinRule							\u8F6E\u8BE2\u7B56\u7565 \u6309\u7167\u987A\u5E8F\u5FAA\u73AF\u9009\u62E9Server
<span class="token list punctuation">-</span> RandomRule									\u968F\u673A\u7B56\u7565 \u968F\u673A\u9009\u62E9Server
<span class="token list punctuation">-</span> AvailablityFilteringRule 		\u53EF\u7528\u8FC7\u6EE4\u7B56\u7565\uFF0C\u4F1A\u5148\u8FC7\u6EE4\u7531\u4E8E\u591A\u6B21\u8BBF\u95EE\u6545\u969C\u800C\u5904\u4E8E\u65AD\u8DEF\u5668\u8DF3\u95F8\u72B6\u6001\u7684\u670D\u52A1\uFF0C\u8FD8\u6709\u5E76\u53D1\u7684\u8FDE\u63A5\u6570\u91CF\u8D85\u8FC7\u9608\u503C\u7684\u670D\u52A1\uFF0C\u7136\u540E\u5BF9\u5269\u4F59\u7684\u670D\u52A1\u5217\u8868\u6309\u7167\u8F6E\u8BE2\u7B56\u7565\u8FDB\u884C\u8BBF\u95EE
<span class="token list punctuation">-</span> WeightedResponseTimeRule		\u54CD\u5E94\u65F6\u95F4\u52A0\u6743\u7B56\u7565\uFF0C\u6839\u636E\u5E73\u5747\u54CD\u5E94\u4E8B\u4EF6\u8BA1\u7B97\u6240\u6709\u670D\u52A1\u7684\u6743\u91CD\uFF0C\u54CD\u5E94\u65F6\u95F4\u8D8A\u5FEB\u670D\u52A1\u6743\u91CD\u8D8A\u5927\u88AB\u9009\u4E2D\u7684\u6982\u7387\u5C31\u8D8A\u9AD8\uFF0C\u521A\u542F\u52A8\u65F6\u5982\u679C\u7EDF\u8BA1\u4FE1\u606F\u4E0D\u8DB3\uFF0C\u5219\u4F7F\u7528RoundRobinRule\u7B56\u7565\uFF0C\u7B49\u7EDF\u8BA1\u4FE1\u606F\u8DB3\u591F\u4F1A\u5207\u82B1\u5230
<span class="token list punctuation">-</span> RetryRule										\u91CD\u8BD5\u7B56\u7565\uFF0C\u5148\u6309\u7167RoundRobinRule\u7684\u7B56\u7565\u83B7\u53D6\u670D\u52A1\uFF0C\u5982\u679C\u83B7\u53D6\u5931\u8D25\u5219\u5728\u6307\u5B9A\u65F6\u95F4\u5185\u8FDB\u884C\u91CD\u8BD5\uFF0C\u83B7\u53D6\u53EF\u7528\u7684\u670D\u52A1
<span class="token list punctuation">-</span> BastAviableRule							\u6700\u4F4E\u5E76\u53D1\u7B56\u7565\uFF0C\u4F1A\u5148\u8FC7\u6EE4\u6389\u7531\u4E8E\u591A\u6B21\u8BBF\u95EE\u6545\u969C\u800C\u5904\u4E8E\u65AD\u8DEF\u5668\u8DF3\u95F8\u72B6\u6001\u7684\u670D\u52A1\uFF0C\u7136\u540E\u9009\u62E9\u4E00\u4E2A\u5E76\u53D1\u91CF\u6700\u5C0F\u7684\u670D\u52A1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+B+`" alt="image-20211216180011193"></p><h4 id="\u4FEE\u6539\u670D\u52A1\u7684\u9ED8\u8BA4\u8D1F\u8F7D\u5747\u8861\u7B56\u7565"><a class="header-anchor" href="#\u4FEE\u6539\u670D\u52A1\u7684\u9ED8\u8BA4\u8D1F\u8F7D\u5747\u8861\u7B56\u7565" aria-hidden="true">#</a> \u4FEE\u6539\u670D\u52A1\u7684\u9ED8\u8BA4\u8D1F\u8F7D\u5747\u8861\u7B56\u7565</h4><p>\u8D1F\u8F7D\u5747\u8861\u662F\u5728\u5BA2\u6237\u7AEF\u7684\uFF0C\u6240\u4EE5\u6211\u4EEC\u8981\u4FEE\u6539\u8D1F\u8F7D\u5747\u8861\u7B56\u7565\uFF0C\u5E94\u8BE5\u5728\u5BA2\u6237\u7AEF\u4FEE\u6539</p><p>\u4FEE\u6539\u65B9\u5F0F\uFF1A</p><div class="language-yam ext-yam line-numbers-mode"><pre class="language-yam"><code>\u670D\u52A1id: 
	ribbon:
		NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RandomRule
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6BD4\u5982\u5728\u7528\u6237\u670D\u52A1\u4E2D\u4FEE\u6539\u8C03\u7528\u5546\u54C1\u670D\u52A1\u7684\u8D1F\u8F7D\u5747\u8861\u7B56\u7565</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">springcloud-consul-product-demo-9998</span><span class="token punctuation">:</span>
  <span class="token key atrule">ribbon</span><span class="token punctuation">:</span>
    <span class="token key atrule">NFLoadbalancerRuleClassName</span><span class="token punctuation">:</span> com.netflix.loadbalancer.RandomRule
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ribbon\u505C\u6B62\u7EF4\u62A4"><a class="header-anchor" href="#ribbon\u505C\u6B62\u7EF4\u62A4" aria-hidden="true">#</a> Ribbon\u505C\u6B62\u7EF4\u62A4</h4><blockquote><p>\u5B98\u7F51\uFF1Ahttps://github.com/Netflix/ribbon</p><p><img src="`+D+`" alt="image-20211216181726127"></p></blockquote><h3 id="openfeign\u7EC4\u4EF6\u7684\u4F7F\u7528"><a class="header-anchor" href="#openfeign\u7EC4\u4EF6\u7684\u4F7F\u7528" aria-hidden="true">#</a> OpenFeign\u7EC4\u4EF6\u7684\u4F7F\u7528</h3><blockquote><p>\u601D\u8003\uFF1A\u4F7F\u7528RestTemplate+Ribbon\u5DF2\u7ECF\u53EF\u4EE5\u5B8C\u6210\u5BF9\u7AEF\u7684\u8C03\u7528\uFF0C\u4E3A\u4EC0\u4E48\u8FD8\u8981\u4F7F\u7528feign\u5462\uFF1F</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">String</span> restTemplateForObject <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span><span class="token string">&quot;httP://\u670D\u52A1\u540D/url?\u53C2\u6570&quot;</span><span class="token operator">+</span>name<span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5B58\u5728\u7684\u95EE\u9898\uFF1A</p><ul><li>\u6BCF\u6B21\u8C03\u7528\u670D\u52A1\u90FD\u9700\u8981\u5199\u8FD9\u4E9B\u4EE3\u7801\uFF0C\u5B58\u5728\u5927\u91CF\u7684\u4EE3\u7801\u5197\u4F59</li><li>\u670D\u52A1\u5730\u5740\u5982\u679C\u4FEE\u6539\uFF0C\u7EF4\u62A4\u6210\u672C\u589E\u9AD8</li><li>\u4F7F\u7528\u65F6\u4E0D\u591F\u7075\u6D3B</li></ul></blockquote><h4 id="openfeign\u7EC4\u4EF6"><a class="header-anchor" href="#openfeign\u7EC4\u4EF6" aria-hidden="true">#</a> OpenFeign\u7EC4\u4EF6</h4><blockquote><p>\u5B98\u7F51\u5730\u5740\uFF1Ahttps://spring.io/projects/spring-cloud-openfeign</p><p>feign\u662F\u4E00\u4E2A\u58F0\u660E\u5F0F\u7684\u4F2Ahttp\u5BA2\u6237\u7AEF\uFF0C\u5B83\u4F7F\u5F97\u5199http\u5BA2\u6237\u7AEF\u53D8\u5F97\u66F4\u52A0\u7B80\u5355\uFF0C\u4F7F\u7528feign\uFF0C\u53EA\u9700\u8981\u521B\u5EFA\u4E00\u4E2A\u63A5\u53E3\u5E76\u6CE8\u89E3\u3002\u5B83\u5177\u6709\u53EF\u63D2\u62D4\u7684\u6CE8\u89E3\u7279\u6027\uFF08\u53EF\u4EE5\u4F7F\u7528springmvc\u7684\u6CE8\u89E3\uFF09\uFF0C\u53EF\u4EE5\u4F7F\u7528feign\u6CE8\u89E3\u548CJAX-RS\u6CE8\u89E3\u3002feign\u652F\u6301\u53EF\u63D2\u62D4\u7684\u7F16\u7801\u5668\u548C\u89E3\u7801\u5668\u3002feign\u9ED8\u8BA4\u7EE7\u627F\u4E86Ribbon\uFF0C\u9ED8\u8BA4\u5B9E\u73B0\u4E86\u8D1F\u8F7D\u5747\u8861\u7684\u6548\u679C\uFF0C\u5E76\u4E14springcloud\u4E3Afeign\u6DFB\u52A0springmvc\u6CE8\u89E3\u7684\u652F\u6301</p></blockquote><h5 id="openfeign\u670D\u52A1\u8C03\u7528"><a class="header-anchor" href="#openfeign\u670D\u52A1\u8C03\u7528" aria-hidden="true">#</a> OpenFeign\u670D\u52A1\u8C03\u7528</h5><ol><li>\u670D\u52A1\u8C03\u7528\u65B9\u6CD5\u5F15\u5165\u4F9D\u8D56OpenFeign\u4F9D\u8D56</li></ol><p>\u7528\u6237\u670D\u52A1\u8C03\u7528\u5546\u54C1\u670D\u52A1\uFF0Copenfeign\u4F5C\u4E3A\u5BA2\u6237\u7AEF\u7EC4\u4EF6\uFF0C\u53EA\u9700\u8981\u5728\u7528\u6237\u7EC4\u4EF6\u4E2D\u5F15\u5165</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5F15\u5165openFeign\u4F9D\u8D56--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-openfeign<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u5165\u53E3\u7C7B\u52A0\u5165\u6CE8\u89E3\u5F00\u542FOpenFeign</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span> <span class="token comment">//\u52A0\u4E0D\u52A0\u90FD\u65E0\u6240\u8C13\uFF0C\u542F\u52A8\u670D\u52A1\u7684\u6CE8\u518C\u548C\u670D\u52A1\u7684\u53D1\u73B0\u529F\u80FD\uFF0C\u65B0\u7248\u672C\u5728\u5F15\u5165\u4F9D\u8D56\u4E4B\u540E\u9ED8\u8BA4\u5F00\u542F</span>
<span class="token annotation punctuation">@EnableFeignClients</span> <span class="token comment">// \u5F00\u542FopenFeign\u652F\u6301</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringcloudConsulUsersDemo9999Application</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringcloudConsulUsersDemo9999Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u521B\u5EFA\u4E00\u4E2A\u5BA2\u6237\u7AEF\u8C03\u7528\u63A5\u53E3</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>users<span class="token punctuation">.</span>clients</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>openfeign<span class="token punctuation">.</span></span><span class="token class-name">FeignClient</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * \u8C03\u7528\u5546\u54C1\u670D\u52A1\u7684openFeign\u670D\u52A1
 */</span>
<span class="token comment">// @FeignClient \u7528\u6765\u6807\u8BC6\u5F53\u524D\u63A5\u53E3\u662F\u4E00\u4E2A feign \u5BA2\u6237\u7AEF\u7EC4\u4EF6</span>
<span class="token comment">// value\u503C\u5C31\u662F\u670D\u52A1\u7684id\uFF0C\u4E5F\u5C31\u662F\u6CE8\u518C\u5728consul\u6CE8\u518C\u4E2D\u5FC3\u7684id</span>
<span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span><span class="token string">&quot;springcloud-consul-product-demo-9998&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ProductClient</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/product/showMsg&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">String</span> <span class="token function">showMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u4F7F\u7528</li></ol><p>\u76F4\u63A5\u8C03\u7528\u8FD9\u4E2A\u63A5\u53E3\u7684\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">ProductClient</span> productClient<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/prduct/showMsg&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">showMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token class-name">String</span> msg <span class="token operator">=</span> productClient<span class="token punctuation">.</span><span class="token function">showMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> msg<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>\u8BBF\u95EE</li></ol><p><img src="`+F+`" alt="image-20211216191823494"></p><h5 id="\u8C03\u7528\u670D\u52A1\u5E76\u4F20\u53C2"><a class="header-anchor" href="#\u8C03\u7528\u670D\u52A1\u5E76\u4F20\u53C2" aria-hidden="true">#</a> \u8C03\u7528\u670D\u52A1\u5E76\u4F20\u53C2</h5><p>\u8BF4\u660E\uFF1A\u670D\u52A1\u548C\u670D\u52A1\u4E4B\u95F4\u901A\u4FE1\uFF0C\u4E0D\u4EC5\u4EC5\u662F\u8C03\u7528\uFF0C\u5F80\u5F80\u5728\u8C03\u7528\u7684\u8FC7\u7A0B\u4E2D\u8FD8\u4F34\u968F\u7740\u53C2\u6570\u4F20\u9012\uFF0C\u63A5\u4E0B\u6765\u4E2D\u90FD\u7231\u4F60\u770B\u770BOpenFeign\u5728\u8C03\u7528\u670D\u52A1\u65F6\u5982\u4F55\u4F20\u9012\u53C2\u6570</p><h6 id="get\u65B9\u5F0F\u8C03\u7528\u670D\u52A1\u4F20\u9012\u53C2\u6570"><a class="header-anchor" href="#get\u65B9\u5F0F\u8C03\u7528\u670D\u52A1\u4F20\u9012\u53C2\u6570" aria-hidden="true">#</a> GET\u65B9\u5F0F\u8C03\u7528\u670D\u52A1\u4F20\u9012\u53C2\u6570</h6><p>GET\u65B9\u5F0F\u8C03\u7528\u670D\u52A1\u4F20\u9012\u53C2\u6570</p><ul><li>\u5728\u5546\u54C1\u670D\u52A1\u4E2D\u52A0\u5165\u9700\u8981\u4F20\u9012\u53C2\u6570\u7684\u670D\u52A1\u65B9\u6CD5\u6765\u8FDB\u884C\u6D4B\u8BD5</li><li>\u5728\u7528\u6237\u670D\u52A1\u4E2D\u8FDB\u884C\u8C03\u7528\u5546\u54C1\u670D\u52A1\u4E2D\u9700\u8981\u4F20\u9012\u53C2\u6570\u7684\u670D\u52A1\u65B9\u6CD5\u8FDB\u884C\u6D4B\u8BD5</li></ul><ol><li>\u5546\u54C1\u670D\u52A1\u4E2D\u6DFB\u52A0\u5982\u4E0B\u65B9\u6CD5</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/product/findOne&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">findOne</span><span class="token punctuation">(</span><span class="token class-name">String</span> productId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\u5546\u54C1\u670D\u52A1\u67E5\u8BE2\u5546\u54C1\u4FE1\u606F\u8C03\u7528\u6210\u529F\uFF0C\u5F53\u524D\u670D\u52A1\u7AEF\u53E3\uFF1A[{}]&quot;</span><span class="token punctuation">,</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F53\u524D\u63A5\u6536\u5546\u54C1\u4FE1\u606F\u7684ID\uFF1A&quot;</span> <span class="token operator">+</span> productId<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u5546\u54C1\u670D\u52A1\u67E5\u8BE2\u5546\u54C1\u4FE1\u606F\u8C03\u7528\u6210\u529F\uFF0C\u5F53\u524D\u670D\u52A1\u7AEF\u53E3\uFF1A&quot;</span> <span class="token operator">+</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;productId&quot;</span><span class="token punctuation">,</span> productId<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> map<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u7528\u6237\u670D\u52A1\u4E2D\u7F16\u5199\u8C03\u7528\u7684\u63A5\u53E3\u51FD\u6570</li></ol><p>\u53C2\u6570\u53D8\u91CF\u5FC5\u987B\u901A\u8FC7@RequestParam\u6CE8\u89E3\u8FDB\u884C\u4FEE\u9970\uFF0C\u5982\u679C\u4E0D\u52A0\u6CE8\u89E3\u5C31\u4F1A\u51FA\u73B0\u9519\u8BEF</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u6CE8\u610F\uFF1A\u4F7F\u7528openfeign \u7684get\u65B9\u5F0Fch\u4F20\u9012\u53C2\u6570\uFF0C\u53C2\u6570\u53D8\u91CF\u5FC5\u987B\u901A\u8FC7@RequestParam\u6CE8\u89E3\u8FDB\u884C\u4FEE\u9970
 * <span class="token keyword">@param</span> <span class="token parameter">productId</span>
 * <span class="token keyword">@return</span>
 */</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/product/findOne&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">findOne</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;productId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> productId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u7F16\u5199\u7528\u6237\u670D\u52A1Controller\u4E2D\u51FD\u6570</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user/findOneProduct&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">findOneProduct</span><span class="token punctuation">(</span><span class="token class-name">String</span> productId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> one <span class="token operator">=</span> productClient<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span>productId<span class="token punctuation">)</span><span class="token punctuation">;</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>one<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> one<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>\u8C03\u7528\u6D4B\u8BD5</li></ol><p><img src="`+H+`" alt="image-20211216203353758"></p><h6 id="post\u65B9\u5F0F\u8C03\u7528\u670D\u52A1\u4F20\u9012\u53C2\u6570"><a class="header-anchor" href="#post\u65B9\u5F0F\u8C03\u7528\u670D\u52A1\u4F20\u9012\u53C2\u6570" aria-hidden="true">#</a> POST\u65B9\u5F0F\u8C03\u7528\u670D\u52A1\u4F20\u9012\u53C2\u6570</h6><p>POST\u65B9\u5F0F\u8C03\u7528\u670D\u52A1\u4F20\u9012\u53C2\u6570</p><ul><li>\u5728\u5546\u54C1\u670D\u52A1\u4E2D\u52A0\u5165\u9700\u8981\u4F20\u9012\u53C2\u6570\u7684\u670D\u52A1\u65B9\u6CD5\u6765\u8FDB\u884C\u6D4B\u8BD5</li><li>\u5728\u7528\u6237\u670D\u52A1\u4E2D\u8FDB\u884C\u8C03\u7528\u5546\u54C1\u670D\u52A1\u4E2D\u9700\u8981\u4F20\u9012\u53C2\u6570\u7684\u670D\u52A1\u65B9\u6CD5\u8FDB\u884C\u6D4B\u8BD5</li></ul><p><strong>\u4F20\u9012\u7B80\u5355\u53C2\u6570\uFF1A</strong></p><ol><li>\u5546\u54C1\u670D\u52A1\u4E2D\u6DFB\u52A0\u5982\u4E0B\u65B9\u6CD5</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/product/save&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\u5546\u54C1\u670D\u52A1\u67E5\u8BE2\u5546\u54C1\u4FE1\u606F\u8C03\u7528\u6210\u529F\uFF0C\u5F53\u524D\u670D\u52A1\u7AEF\u53E3\uFF1A[{}]&quot;</span><span class="token punctuation">,</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F53\u524D\u63A5\u6536\u5546\u54C1\u4FE1\u606F\u7684\u540D\u79F0\u4E3A\uFF1A&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u5546\u54C1\u670D\u52A1\u67E5\u8BE2\u5546\u54C1\u4FE1\u606F\u8C03\u7528\u6210\u529F\uFF0C\u5F53\u524D\u670D\u52A1\u7AEF\u53E3\uFF1A&quot;</span> <span class="token operator">+</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;productId&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> map<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u7528\u6237\u670D\u52A1\u4E2D\u7F16\u5199\u8C03\u7528\u7684\u63A5\u53E3\u51FD\u6570</li></ol><p>\u53C2\u6570\u53D8\u91CF\u5FC5\u987B\u901A\u8FC7@RequestParam\u6CE8\u89E3\u8FDB\u884C\u4FEE\u9970\uFF0C\u5982\u679C\u4E0D\u52A0\u6CE8\u89E3\u5C31\u4F1A\u51FA\u73B0\u9519\u8BEF</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u6D4B\u8BD5post\u4F20\u9012\u53C2\u6570
 * \u540C\u6837\u9700\u8981\u4F7F\u7528@RequestParam\u4FEE\u9970
 *
 * <span class="token keyword">@param</span> <span class="token parameter">name</span>
 * <span class="token keyword">@return</span>
 */</span>
<span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/product/save&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u7F16\u5199\u7528\u6237\u670D\u52A1Controller\u4E2D\u51FD\u6570</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u6D4B\u8BD5post\u8C03\u7528\u670D\u52A1
 * <span class="token keyword">@param</span> <span class="token parameter">name</span>
 * <span class="token keyword">@return</span>
 */</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user/saveProduct&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">saveProduct</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> one <span class="token operator">=</span> productClient<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>one<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> one<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>\u8C03\u7528\u6D4B\u8BD5</li></ol><p><img src="`+N+`" alt="image-20211216205012250"></p><p><strong>\u4F20\u9012\u590D\u6742\u53C2\u6570\uFF08\u5BF9\u8C61\uFF09\uFF1A</strong></p><ol><li>\u5546\u54C1\u670D\u52A1\u4E2D\u6DFB\u52A0\u5982\u4E0B\u65B9\u6CD5</li></ol><p><code>@RequestBody</code>\u7684\u4F5C\u7528\u662F\u5C06json\u683C\u5F0F\u5B57\u7B26\u4E32\u8F6C\u4E3A\u5BF9\u5E94\u7684\u5BF9\u8C61\u4FE1\u606F</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u63A5\u6536\u65B9\u4F7F\u7528@RequestBody\u58F0\u660E
 * \\@RequestBody\u7684\u4F5C\u7528\u662F\u5C06json\u683C\u5F0F\u5B57\u7B26\u4E32\u8F6C\u4E3A\u5BF9\u5E94\u7684\u5BF9\u8C61\u4FE1\u606F
 *
 * <span class="token keyword">@param</span> <span class="token parameter">product</span>
 * <span class="token keyword">@return</span>
 */</span>
<span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/product/update&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Product</span> product<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\u5546\u54C1\u670D\u52A1\u67E5\u8BE2\u5546\u54C1\u4FE1\u606F\u8C03\u7528\u6210\u529F\uFF0C\u5F53\u524D\u670D\u52A1\u7AEF\u53E3\uFF1A[{}]&quot;</span><span class="token punctuation">,</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F53\u524D\u63A5\u6536\u5546\u54C1\u4FE1\u606F\u4E3A\uFF1A&quot;</span> <span class="token operator">+</span> product<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u5546\u54C1\u670D\u52A1\u67E5\u8BE2\u5546\u54C1\u4FE1\u606F\u8C03\u7528\u6210\u529F\uFF0C\u5F53\u524D\u670D\u52A1\u7AEF\u53E3\uFF1A&quot;</span> <span class="token operator">+</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;product&quot;</span><span class="token punctuation">,</span> product<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> map<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u7528\u6237\u670D\u52A1\u4E2D\u7F16\u5199\u8C03\u7528\u7684\u63A5\u53E3\u51FD\u6570</li></ol><p>\u8981\u6C42\u670D\u52A1\u63D0\u4F9B\u65B9\u548C\u670D\u52A1\u8C03\u7528\u65B9\u4F7F\u7528<code>@RequestBody</code>\u8FDB\u884C\u53C2\u6570\u58F0\u660E</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u8981\u6C42\u670D\u52A1\u63D0\u4F9B\u65B9\u548C\u670D\u52A1\u8C03\u7528\u65B9\u4F7F\u7528@RequestBody\u8FDB\u884C\u53C2\u6570\u58F0\u660E
 *
 * <span class="token keyword">@param</span> <span class="token parameter">product</span>
 * <span class="token keyword">@return</span>
 */</span>
<span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/product/update&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Product</span> product<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u7F16\u5199\u7528\u6237\u670D\u52A1Controller\u4E2D\u51FD\u6570</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u6D4B\u8BD5post\u8C03\u7528\u670D\u52A1
 *
 * <span class="token keyword">@return</span>
 */</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user/updateProduct&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">updateProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">final</span> <span class="token class-name">Product</span> product <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Product</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u5F20\u4E09&quot;</span><span class="token punctuation">,</span> <span class="token number">12.0</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> one <span class="token operator">=</span> productClient<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span><span class="token punctuation">;</span>
  log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>one<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> one<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>\u8C03\u7528\u6D4B\u8BD5</li></ol><p><img src="`+G+'" alt="image-20211216210624035"></p><h5 id="openfeign\u8D85\u65F6\u8BBE\u7F6E"><a class="header-anchor" href="#openfeign\u8D85\u65F6\u8BBE\u7F6E" aria-hidden="true">#</a> OpenFeign\u8D85\u65F6\u8BBE\u7F6E</h5><blockquote><p>\u8D85\u65F6\u8BF4\u660E\uFF1AopenFeign\u5728\u8FDB\u884C\u670D\u52A1\u8C03\u7528\u65F6\uFF0C\u8981\u6C42\u670D\u52A1\u63D0\u4F9B\u65B9\u5904\u7406\u4E1A\u52A1\u903B\u8F91\u65F6\u95F4\u5FC5\u987B\u57281s\u5185\u8FD4\u56DE\uFF0C\u5982\u679C\u8D85\u8FC71S\u6CA1\u6709\u8FD4\u56DE\u5219OpenFeign\u4F1A\u76F4\u63A5\u62A5\u9519\uFF0C\u4E0D\u4F1A\u7B49\u5F85\u670D\u52A1\u6267\u884C\uFF0C\u4F46\u662F\u5F80\u5F80\u5728\u5904\u7406\u4E1A\u52A1\u903B\u8F91\u662F\u53EF\u80FD\u4F1A\u8D85\u8FC71S\uFF0C\u56E0\u6B64\u9700\u8981\u4FEE\u6539OpenFeign\u7684\u9ED8\u8BA4\u670D\u52A1\u8C03\u7528\u8D85\u65F6\u65F6\u95F4</p><p>\u8D85\u8FC71S\u5219\u4F1A\u62A5\u9519</p><p><img src="'+U+`" alt="image-20211216214528768"></p></blockquote><p>\u4FEE\u6539OpenFeign\u9ED8\u8BA4\u8D85\u65F6\u65F6\u95F4</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">feign</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">config</span><span class="token punctuation">:</span>
      <span class="token key atrule">springcloud-consul-product-demo-9998</span><span class="token punctuation">:</span>
        <span class="token key atrule">connectTimeout</span><span class="token punctuation">:</span> <span class="token number">5000</span>                <span class="token comment">## \u914D\u7F6E\u6307\u5B9A\u670D\u52A1\u8FDE\u63A5\u8D85\u65F6</span>
        <span class="token key atrule">readTimeout</span><span class="token punctuation">:</span> <span class="token number">5000</span>                   <span class="token comment">## \u914D\u7F6E\u6307\u5B9A\u670D\u52A1\u7B49\u5F85\u8D85\u65F6</span>
<span class="token comment">##     default:</span>
<span class="token comment">##       connectTimeout: 5000                ## \u914D\u7F6E\u6240\u6709\u670D\u52A1\u8FDE\u63A5\u8D85\u65F6</span>
<span class="token comment">##       readTimeout: 5000                   ## \u914D\u7F6E\u6240\u6709\u670D\u52A1\u7B49\u5F85\u8D85\u65F6</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="openfeign\u8C03\u7528\u8BE6\u7EC6\u65E5\u5FD7\u5C55\u793A"><a class="header-anchor" href="#openfeign\u8C03\u7528\u8BE6\u7EC6\u65E5\u5FD7\u5C55\u793A" aria-hidden="true">#</a> OpenFeign\u8C03\u7528\u8BE6\u7EC6\u65E5\u5FD7\u5C55\u793A</h5><blockquote><p>\u8BF4\u660E\uFF1A\u5F80\u5F80\u5728\u670D\u52A1\u8C03\u7528\u65F6\u6211\u4EEC\u9700\u8981\u8BE6\u7EC6\u5C55\u793Afeign\u7684\u65E5\u5FD7\uFF0C\u9ED8\u8BA4feign\u5728\u8C03\u7528\u65F6\u5E76\u4E0D\u662F\u6700\u8BE6\u7EC6\u65E5\u5FD7\u8F93\u51FA\uFF0C\u56E0\u6B64\u5728\u8C03\u7528\u7A0B\u5E8F\u65F6\u5E94\u8BE5\u5F00\u542Ffeign\u7684\u8BE6\u7EC6\u65E5\u5FD7\u5C55\u793A\u3002feign\u5BF9\u65E5\u5FD7\u7684\u5904\u7406\u975E\u5E38\u7075\u6D3B\uFF0C\u53EF\u4E3A\u6BCF\u4E2Afeign\u5BA2\u6237\u7AEF\u6307\u5B9A\u65E5\u5FD7\u8BB0\u5F55\u7B56\u7565\uFF0C\u6BCF\u4E2A\u5BA2\u6237\u90FD\u4F1A\u521B\u5EFA\u4E00\u4E2Alogger\uFF0C\u9ED8\u8BA4\u60C5\u51B5\u4E0Blogger\u7684\u540D\u79F0\u662Ffeign\u7684\u5168\u9650\u5B9A\u540D\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0Cfeign\u65E5\u5FD7\u6253\u5370\u53EA\u4F1A\u5728DEBUG\u7EA7\u522B\u505A\u51FA\u54CD\u5E94</p><p>\u6211\u4EEC\u53EF\u4EE5\u4E3Afeign\u5BA2\u6237\u7AEF\u914D\u7F6E\u5404\u81EA\u7684logger.level\u5BF9\u8C61\uFF0C\u544A\u8BC9feign\u8BB0\u5F55\u90A3\u4E9B\u65E5\u5FD7logger.level\u6709\u4EE5\u4E0B\u51E0\u79CD\u503C</p><ul><li><code>NONE</code> \u4E0D\u8BB0\u5F55\u4EFB\u4F55\u65E5\u5FD7</li><li><code>BASIC</code> \u4E0D\u4EC5\u4EC5\u8BB0\u5F55\u8BF7\u6C42\u65B9\u6CD5\uFF0Curl\uFF0C\u54CD\u5E94\u72B6\u6001\u4EE3\u7801\u4EE5\u53CA\u6267\u884C\u65F6\u95F4</li><li><code>HEADERS</code> \u8BB0\u5F55Basic\u7EA7\u522B\u7684\u57FA\u7840\u4E0A\uFF0C\u8BB0\u5F55\u8BF7\u6C42\u548C\u54CD\u5E94\u7684header</li><li><code>FULL</code> \u8BB0\u5F55\u8BF7\u6C42\u548C\u54CD\u5E94\u7684header\uFF0Cbody\u548C\u5143\u6570\u636E</li></ul></blockquote><ol><li>\u5F00\u542F\u65E5\u5FD7\u5C55\u793A</li></ol><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">feign</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">config</span><span class="token punctuation">:</span>
      <span class="token key atrule">springcloud-consul-product-demo-9998</span><span class="token punctuation">:</span>
        <span class="token key atrule">loggerLevel</span><span class="token punctuation">:</span> full                   <span class="token comment">## \u5F00\u542F\u6307\u5B9A\u670D\u52A1\u65E5\u5FD7\u5C55\u793A</span>
<span class="token comment">##     default:</span>
<span class="token comment">##       loggerLevel: full                   ## \u5168\u5C40\u5F00\u542F\u670D\u52A1\u65E5\u5FD7\u5C55\u793A</span>

<span class="token key atrule">logging</span><span class="token punctuation">:</span>
  <span class="token key atrule">level</span><span class="token punctuation">:</span>
    <span class="token key atrule">com.example.users.clients</span><span class="token punctuation">:</span> debug         <span class="token comment">## \u6307\u5B9Afeign\u8C03\u7528\u5BA2\u6237\u7AEF\u5BF9\u8C61\u6240\u5728\u5305\uFF0C\u5FC5\u987B\u662Fdebug\u7EA7\u522B</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u6D4B\u8BD5\u670D\u52A1\u8C03\u7528\u67E5\u770B\u65E5\u5FD7</li></ol><p><img src="`+L+'" alt="image-20211216223836509"></p><h2 id="hystrix\u7EC4\u4EF6\u4F7F\u7528"><a class="header-anchor" href="#hystrix\u7EC4\u4EF6\u4F7F\u7528" aria-hidden="true">#</a> Hystrix\u7EC4\u4EF6\u4F7F\u7528</h2><h3 id="hystrix\u7EC4\u4EF6"><a class="header-anchor" href="#hystrix\u7EC4\u4EF6" aria-hidden="true">#</a> Hystrix\u7EC4\u4EF6</h3><blockquote><p>\u5B98\u7F51\uFF1Ahttps://github.com/Netflix/Hystrix/wiki</p><p><img src="'+$+'" alt="img"></p><p>In a distributed environment, inevitably some of the many service dependencies will fail. Hystrix is a library that helps you control the interactions between these distributed services by adding latency tolerance and fault tolerance logic. Hystrix does this by isolating points of access between the services, stopping cascading failures across them, and providing fallback options, all of which improve your system\u2019s overall resiliency.</p><p>\u7FFB\u8BD1\uFF1A</p><p>\u5728\u5206\u5E03\u5F0F\u73AF\u5883\u4E2D\uFF0C\u8BB8\u591A\u670D\u52A1\u4F9D\u8D56\u4E2D\u7684\u4E00\u4E9B\u4E0D\u53EF\u907F\u514D\u5730\u4F1A\u5931\u8D25\u3002 Hystrix \u662F\u4E00\u4E2A\u5E93\uFF0C\u5B83\u901A\u8FC7\u6DFB\u52A0\u5EF6\u8FDF\u5BB9\u9519\u548C\u5BB9\u9519\u903B\u8F91\u6765\u5E2E\u52A9\u60A8\u63A7\u5236\u8FD9\u4E9B\u5206\u5E03\u5F0F\u670D\u52A1\u4E4B\u95F4\u7684\u4EA4\u4E92\u3002 Hystrix \u901A\u8FC7\u9694\u79BB\u670D\u52A1\u4E4B\u95F4\u7684\u8BBF\u95EE\u70B9\u3001\u963B\u6B62\u5B83\u4EEC\u4E4B\u95F4\u7684\u7EA7\u8054\u6545\u969C\u5E76\u63D0\u4F9B\u56DE\u9000\u9009\u9879\u6765\u5B9E\u73B0\u8FD9\u4E00\u70B9\uFF0C\u6240\u6709\u8FD9\u4E9B\u90FD\u63D0\u9AD8\u4E86\u7CFB\u7EDF\u7684\u6574\u4F53\u5F39\u6027</p><p>\u901A\u4FD7\u5B9A\u4E49\uFF1AHystrix\u662F\u4E00\u4E2A\u7528\u4E8E\u5904\u7406\u5206\u5E03\u5F0F\u7CFB\u7EDF\u7684\u5EF6\u8FDF\u548C\u5BB9\u9519\u7684\u5F00\u6E90\u5E93\uFF0C\u5728\u5206\u5E03\u5F0F\u7CFB\u7EDF\u4E2D\uFF0C\u8BB8\u591A\u7684\u4F9D\u8D56\u4E0D\u53EF\u907F\u514D\u7684\u4F1A\u8C03\u7528\u5931\u8D25\u3001\u8D85\u65F6\u3001\u5F02\u5E38\u7B49\uFF0CHystrix\u80FD\u591F\u4FDD\u8BC1\u5728\u4E00\u4E2A\u4F9D\u8D56\u51FA\u73B0\u95EE\u9898\u7684\u60C5\u51B5\u4E0B\uFF0C\u4E0D\u4F1A\u5BFC\u81F4\u6574\u4F53\u670D\u52A1\u5931\u8D25\uFF0C\u907F\u514D\u7EA7\u8054\u6545\u969C\uFF08\u670D\u52A1\u96EA\u5D29\u73B0\u8C61\uFF09\uFF0C\u63D0\u9AD8\u4E86\u5206\u5E03\u5F0F\u7CFB\u7EDF\u7684\u5F39\u6027</p></blockquote><h4 id="\u670D\u52A1\u96EA\u5D29"><a class="header-anchor" href="#\u670D\u52A1\u96EA\u5D29" aria-hidden="true">#</a> \u670D\u52A1\u96EA\u5D29</h4><blockquote><p>\u7531\u4E8E\u67D0\u4E2A\u670D\u52A1\u6545\u969C\uFF0C\u5BFC\u81F4\u7EA7\u8054\u670D\u52A1\u6545\u969C</p></blockquote><h5 id="\u6982\u5FF5"><a class="header-anchor" href="#\u6982\u5FF5" aria-hidden="true">#</a> \u6982\u5FF5</h5><p>\u5728\u5FAE\u670D\u52A1\u4E4B\u95F4\u8FDB\u884C\u670D\u52A1\u8C03\u7528\u662F\u7531\u4E8E\u67D0\u4E2A\u670D\u52A1\u6545\u969C\uFF0C\u5BFC\u81F4\u7EA7\u8054\u670D\u52A1\u6545\u969C\u7684\u73B0\u8C61\uFF0C\u79F0\u4E3A\u96EA\u5D29\u6548\u5E94\u3002\u96EA\u5D29\u6548\u5E94\u63CF\u8FF0\u7684\u662F\u63D0\u4F9B\u65B9\u4E0D\u53EF\u7528\uFF0C\u5BFC\u81F4\u6D88\u8D39\u65B9\u4E0D\u53EF\u7528\u5E76\u5C06\u4E0D\u53EF\u7528\u9010\u6E10\u653E\u5927\u7684\u8FC7\u7A0B</p><h5 id="\u56FE\u89E3"><a class="header-anchor" href="#\u56FE\u89E3" aria-hidden="true">#</a> \u56FE\u89E3</h5><p>\u5982\u5B58\u5728\u5982\u4E0B\u7684\u8C03\u7528\u94FE\u8DEF</p><p><img src="'+z+'" alt="image-20211216234807370"></p><p>\u800C\u6B64\u65F6\uFF0CService A\u7684\u6D41\u91CF\u6CE2\u52A8\u5F88\u5927\uFF0C\u6D41\u91CF\u7ECF\u5E38\u4F1A\u7A81\u7136\u6027\u589E\u52A0\uFF0C\u90A3\u4E48\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u5C31\u7B97Service A\u80FD\u625B\u5F97\u4F4F\u8BF7\u6C42\uFF0CService B\u548CService C\u672A\u5FC5\u80FD\u625B\u5F97\u4F4F\u8FD9\u7A81\u53D1\u7684\u8BF7\u6C42\u3002\u6B64\u65F6\uFF0C\u5982\u679CService C\u56E0\u4E3A\u625B\u4E0D\u4F4F\u8BF7\u6C42\uFF0C\u53D8\u5F97\u4E0D\u53EF\u7528\u3002\u90A3\u4E48Service B\u7684\u8BF7\u6C42\u4E5F\u4F1A\u963B\u585E\uFF0C\u6162\u6162\u8017\u5C3DService B\u7684\u7EBF\u7A0B\u8D44\u6E90\uFF0CService B\u5C31\u4F1A\u53D8\u5F97\u4E0D\u53EF\u7528\u3002\u7D27\u63A5\u7740\uFF0CService A\u4E5F\u4F1A\u4E0D\u53EF\u7528\uFF0C\u8FD9\u4E00\u8FC7\u7A0B\u5982\u4E0B\u56FE\u6240\u793A</p><p><img src="'+V+'" alt="image-20211216235142728"></p><blockquote><p>\u5E76\u53D1\u6D4B\u8BD5\u5DE5\u5177\uFF1Ajmeter</p><p>\u5B98\u7F51\u7F51\u5740\uFF1Ahttps://jmeter.apache.org/</p><p><strong>\u5E76\u53D1\u6D4B\u8BD5</strong></p><ol><li>\u4E0B\u8F7D</li></ol><p><img src="'+W+`" alt="image-20211217000753519"></p><ol start="2"><li>\u542F\u52A8\u5E76\u4FEE\u6539\u754C\u9762\u8BED\u8A00\u4E3A\u4E2D\u6587</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">(</span>base<span class="token punctuation">)</span> aldencarter@aldencarter bin % <span class="token builtin class-name">pwd</span>
/Users/aldencarter/opt/codes/softwares/apache-jmeter-5.4.1/bin
<span class="token punctuation">(</span>base<span class="token punctuation">)</span> aldencarter@aldencarter bin % ./jmeter
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
Don&#39;t use GUI mode <span class="token keyword">for</span> load testing <span class="token operator">!</span>, only <span class="token keyword">for</span> Test creation and Test debugging.
For load testing, use CLI Mode <span class="token punctuation">(</span>was NON GUI<span class="token punctuation">)</span>:
   jmeter -n -t <span class="token punctuation">[</span>jmx file<span class="token punctuation">]</span> -l <span class="token punctuation">[</span>results file<span class="token punctuation">]</span> -e -o <span class="token punctuation">[</span>Path to web report folder<span class="token punctuation">]</span>
<span class="token operator">&amp;</span> increase Java Heap to meet your <span class="token builtin class-name">test</span> requirements:
   Modify current <span class="token function">env</span> variable <span class="token assign-left variable">HEAP</span><span class="token operator">=</span><span class="token string">&quot;-Xms1g -Xmx1g -XX:MaxMetaspaceSize=256m&quot;</span> <span class="token keyword">in</span> the jmeter batch <span class="token function">file</span>
Check <span class="token builtin class-name">:</span> https://jmeter.apache.org/usermanual/best-practices.html
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5C06\u8BED\u8A00\u4FEE\u6539\u6210\u4E2D\u6587</p><p><img src="`+X+'" alt="image-20211217001126800"></p><ol start="3"><li>\u5148\u521B\u5EFA\u4E00\u4E2A\u8BA1\u5212\uFF0C\u5E76\u53F3\u952E\u8BA1\u5212\u521B\u5EFA\u4E00\u4E2A\u7EBF\u7A0B\u7EC4</li></ol><p><img src="'+J+'" alt="image-20211217001755366"></p><p>\u4FEE\u6539\u7EBF\u7A0B\u7EC4\u4E2D\u7EBF\u7A0B\u6570\u3001\u95F4\u9694\u65F6\u95F4\u548C\u5FAA\u73AF\u6B21\u6570</p><p><img src="'+Q+'" alt="image-20211217001728314"></p><ol start="4"><li>\u521B\u5EFAhttp\u8BF7\u6C42</li></ol><p>\u53F3\u952E\u7EBF\u7A0B\u6C60\uFF0C\u53D6\u6837\u5668\u4E2D\u521B\u5EFAhttp\u8BF7\u6C42</p><p><img src="'+Z+`" alt="image-20211217002055371"></p><ol start="5"><li>\u70B9\u51FB\u6267\u884C</li></ol><p>\u5728\u53F3\u4E0A\u89D2\u53EF\u4EE5\u770B\u5230\u6267\u884C\u7684\u7EBF\u7A0B\u6570\u91CF</p></blockquote><h4 id="\u670D\u52A1\u7194\u65AD"><a class="header-anchor" href="#\u670D\u52A1\u7194\u65AD" aria-hidden="true">#</a> \u670D\u52A1\u7194\u65AD</h4><blockquote><p>\u662F\u5BF9\u8C03\u7528\u94FE\u8DEF\u7684\u4E00\u79CD\u4FDD\u62A4\uFF0C\u5728\u670D\u52A1\u7AEF\uFF0C\u4E5F\u5C31\u662F\u88AB\u8C03\u7528\u7AEF\u5F15\u5165\u5E76\u5B9E\u73B0</p></blockquote><h5 id="\u6982\u5FF5-1"><a class="header-anchor" href="#\u6982\u5FF5-1" aria-hidden="true">#</a> \u6982\u5FF5</h5><p>&quot;\u7194\u65AD\u5668&quot;\u672C\u8EAB\u662F\u4E00\u79CD\u5F00\u5173\u88C5\u7F6E\uFF0C\u5F53\u67D0\u4E2A\u670D\u52A1\u5355\u5143\u53D1\u751F\u6545\u969C\u4E4B\u540E\uFF0C\u901A\u8FC7\u65AD\u8DEF\u5668\u7684\u6545\u969C\u76D1\u63A7\uFF0C\u67D0\u4E2A\u5F02\u5E38\u6761\u4EF6\u88AB\u89E6\u53D1\uFF0C\u76F4\u63A5\u7194\u65AD\u6574\u4E2A\u670D\u52A1\u3002\u5411\u8C03\u7528\u65B9\u6CD5\u8FD4\u56DE\u4E00\u4E2A\u7B26\u5408\u9884\u671F\u7684\u3001\u53EF\u5904\u7406\u7684\u5907\u9009\u54CD\u5E94(Fallback)\uFF0C\u800C\u4E0D\u662F\u957F\u65F6\u95F4\u7684\u7B49\u5F85\u6216\u8005\u629B\u51FA\u8C03\u7528\u65B9\u6CD5\u65E0\u6CD5\u5904\u7406\u7684\u5F02\u5E38\u3002\u5C31\u4FDD\u8BC1\u4E86\u670D\u52A1\u8C03\u7528\u65B9\u7684\u7EBF\u7A0B\u4E0D\u4F1A\u88AB\u957F\u65F6\u95F4\u5360\u7528\uFF0C\u907F\u514D\u6545\u969C\u5728\u5206\u5E03\u5F0F\u7CFB\u7EDF\u4E2D\u8513\u5EF6\uFF0C\u4E43\u81F3\u96EA\u5D29\u3002\u5982\u679C\u76EE\u6807\u670D\u52A1\u60C5\u51B5\u597D\u8F6C\u5219\u6062\u590D\u8C03\u7528\u3002\u670D\u52A1\u7194\u65AD\u662F\u89E3\u51B3\u670D\u52A1\u96EA\u5D29\u7684\u91CD\u8981\u624B\u6BB5</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>\u8FD9\u4E2A\u5FEB\u901F\u8FD4\u56DE\u662F\u7531\u5F00\u53D1\u4EBA\u5458\u53BB\u6307\u5B9A\u7684
\u5F53\u7194\u65AD\u5230\u4E00\u5B9A\u7684\u7A0B\u5EA6\uFF08\u4E5F\u5C31\u662F\u5728\u8C03\u7528\u8BF7\u6C42\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u8C03\u7528\u5931\u8D25\u7684\u65F6\u5019\uFF09\uFF0C\u65AD\u8DEF\u5668\u5C31\u4F1A\u5F7B\u5E95\u6253\u5F00\uFF0C\u5728\u6307\u5B9A\u7684\u5355\u4F4D\u65F6\u95F4\u5185\u90FD\u4E0D\u5141\u8BB8\u8C03\u7528\u8FD9\u4E2A\u670D\u52A1\uFF0C\u5373\u4F7F\u4F60\u662F\u4E00\u4E2A\u6B63\u5E38\u7684\u53C2\u6570\uFF1B\u8FC7\u4E86\u4E00\u6BB5\u65F6\u95F4\uFF0C\u65AD\u8DEF\u5668\u4F1A\u653E\u884C\u4E00\u5B9A\u7684\u8BF7\u6C42\u6765\u6D4B\u8BD5\u5F53\u524D\u670D\u52A1\u662F\u5426\u5DF2\u7ECF\u53EF\u7528\uFF0C\u5982\u679C\u6D4B\u8BD5\u901A\u8FC7\uFF0C\u5C31\u4F1A\u653E\u884C\u6240\u6709\u8BF7\u6C42\u5E76\u5141\u8BB8\u8C03\u7528
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u670D\u52A1\u7194\u65AD\u56FE\u793A"><a class="header-anchor" href="#\u670D\u52A1\u7194\u65AD\u56FE\u793A" aria-hidden="true">#</a> \u670D\u52A1\u7194\u65AD\u56FE\u793A</h5><p><img src="`+K+'" alt="image-20211217003741810"></p><h4 id="\u670D\u52A1\u964D\u7EA7"><a class="header-anchor" href="#\u670D\u52A1\u964D\u7EA7" aria-hidden="true">#</a> \u670D\u52A1\u964D\u7EA7</h4><blockquote><p>\u662F\u5BF9\u7CFB\u7EDF\u7684\u4E00\u79CD\u4FDD\u62A4\uFF0C\u5728\u5BA2\u6237\u7AEF\uFF0C\u4E5F\u5C31\u662F\u8C03\u7528\u7AEF\u5F15\u5165\u5E76\u5B9E\u73B0</p></blockquote><h5 id="\u6982\u5FF5-2"><a class="header-anchor" href="#\u6982\u5FF5-2" aria-hidden="true">#</a> \u6982\u5FF5</h5><p>\u670D\u52A1\u538B\u529B\u5267\u589E\u7684\u65F6\u5019\u6839\u636E\u5F53\u524D\u7684\u4E1A\u52A1\u60C5\u51B5\u53CA\u6D41\u91CF\u5BF9\u4E00\u4E9B\u670D\u52A1\u548C\u9875\u9762\u6709\u7B56\u7565\u7684\u964D\u7EA7\uFF0C\u4EE5\u6B64\u7F13\u89E3\u670D\u52A1\u5668\u7684\u538B\u529B\uFF0C\u4EE5\u4FDD\u8BC1\u6838\u5FC3\u4EFB\u52A1\u7684\u8FDB\u884C\u3002\u540C\u65F6\u4FDD\u8BC1\u90E8\u5206\u751A\u81F3\u5927\u90E8\u5206\u4EFB\u52A1\u5BA2\u6237\u80FD\u591F\u5F97\u5230\u6B63\u786E\u7684\u54CD\u5E94\uFF0C\u4E5F\u5C31\u662F\u5F53\u524D\u7684\u8BF7\u6C42\u5904\u7406\u4E0D\u4E86\u6216\u8005\u51FA\u9519\u4E86\uFF0C\u7ED9\u4E00\u4E2A\u9ED8\u8BA4\u7684\u8FD4\u56DE</p><p>\u901A\u4FD7\u7684\u8BF4\uFF1A\u5173\u95ED\u7CFB\u7EDF\u7684\u4E2D\u8FB9\u7F18\u670D\u52A1\uFF0C\u4FDD\u8BC1\u7CFB\u7EDF\u6838\u5FC3\u670D\u52A1\u7684\u6B63\u5E38\u8FD0\u884C\uFF0C\u79F0\u4E4B\u4E3A\u670D\u52A1\u964D\u7EA7\u3002\u6BD4\u5982\uFF1A\u53CC\u5341\u4E00\uFF0C\u4E3A\u4E86\u4FDD\u8BC1\u8BA2\u5355\u548C\u5E93\u5B58\u670D\u52A1\u8FD9\u4E9B\u91CD\u70B9\u670D\u52A1\u8FD0\u884C\uFF0C\u4E00\u4E9B\u8FB9\u7F18\u7684\u670D\u52A1\uFF08\u5220\u9664\u5730\u5740\u3001\u786E\u8BA4\u6536\u8D27\u3001\u5220\u9664\u8BA2\u5355\u3001\u53D6\u6D88\u652F\u4ED8\u7B49\uFF09\u662F\u4E0D\u80FD\u7528\u7684\uFF0C\u8282\u7701\u4E86CPU\u3001\u5185\u5B58</p><h5 id="\u670D\u52A1\u964D\u7EA7\u56FE\u793A"><a class="header-anchor" href="#\u670D\u52A1\u964D\u7EA7\u56FE\u793A" aria-hidden="true">#</a> \u670D\u52A1\u964D\u7EA7\u56FE\u793A</h5><p><img src="'+Y+`" alt="image-20211217004459999"></p><h4 id="\u964D\u7EA7\u548C\u7194\u65AD\u603B\u7ED3"><a class="header-anchor" href="#\u964D\u7EA7\u548C\u7194\u65AD\u603B\u7ED3" aria-hidden="true">#</a> \u964D\u7EA7\u548C\u7194\u65AD\u603B\u7ED3</h4><h5 id="\u5171\u540C\u70B9"><a class="header-anchor" href="#\u5171\u540C\u70B9" aria-hidden="true">#</a> \u5171\u540C\u70B9</h5><ul><li>\u76EE\u7684\u5F88\u4E00\u81F4\uFF0C\u90FD\u662F\u4ECE\u53EF\u7528\u6027\u53EF\u9760\u6027\u7740\u60F3\uFF0C\u4E3A\u9632\u6B62\u7CFB\u7EDF\u7684\u6574\u4F53\u7F13\u6162\u751A\u81F3\u5D29\u6E83\uFF0C\u91C7\u7528\u7684\u6280\u672F\u624B\u6BB5</li><li>\u6700\u7EC8\u8868\u73B0\u7C7B\u4F3C\uFF0C\u5BF9\u4E8E\u4E24\u8005\u6765\u8BF4\uFF0C\u6700\u7EC8\u8BA9\u7528\u6237\u4F53\u9A8C\u5230\u7684\u67D0\u4E9B\u529F\u80FD\u6682\u65F6\u4E0D\u53EF\u8FBE\u6216\u8005\u4E0D\u53EF\u7528</li><li>\u7C92\u5EA6\u4E00\u822C\u662F\u670D\u52A1\u7EA7\u522B\u7684\uFF0C\u5F53\u7136\uFF0C\u4E1A\u754C\u4E5F\u6709\u4E0D\u5C11\u66F4\u7EC6\u7C92\u5EA6\u7684\u505A\u6CD5\uFF0C\u6BD4\u5982\u505A\u5230\u6570\u636E\u6301\u4E45\u5C42\uFF08\u5141\u8BB8\u67E5\u8BE2\u3001\u4E0D\u5141\u8BB8\u4FEE\u6539\uFF09</li><li>\u81EA\u6CBB\u6027\u8981\u6C42\u5F88\u9AD8\uFF0C\u7194\u65AD\u6A21\u5F0F\u4E00\u822C\u90FD\u662F\u670D\u52A1\u57FA\u4E8E\u7B56\u7565\u7684\u81EA\u52A8\u89E6\u53D1\uFF0C\u964D\u7EA7\u867D\u8BF4\u53EF\u4EBA\u5DE5\u5E72\u9884\uFF0C\u4F46\u5728\u5FAE\u670D\u52A1\u67B6\u6784\u4E0B\uFF0C\u5B8C\u5168\u9760\u4EBA\u663E\u7136\u662F\u4E0D\u53EF\u80FD\u7684\uFF0C\u5F00\u5173\u9884\u7F6E\u3001\u914D\u7F6E\u4E2D\u5FC3\u90FD\u662F\u5FC5\u8981\u624B\u6BB5</li></ul><h5 id="\u5F02\u540C\u70B9"><a class="header-anchor" href="#\u5F02\u540C\u70B9" aria-hidden="true">#</a> \u5F02\u540C\u70B9</h5><ul><li>\u89E6\u53D1\u539F\u56E0\u4E0D\u592A\u4E00\u6837\uFF0C\u670D\u52A1\u7194\u65AD\u4E00\u822C\u662F\u67D0\u4E2A\u670D\u52A1\uFF08\u4E0B\u6E38\u670D\u52A1\uFF09\u6545\u969C\u5F15\u8D77\u7684\uFF0C\u800C\u670D\u52A1\u964D\u7EA7\u4E00\u822C\u662F\u4ECE\u6574\u4F53\u8D1F\u8377\u8003\u8651</li><li>\u7BA1\u7406\u76EE\u6807\u7684\u5C42\u6B21\u4E0D\u592A\u4E00\u6837\uFF0C\u7194\u65AD\u5176\u5B9E\u662F\u4E00\u4E2A\u6846\u67B6\u7EA7\u7684\u5904\u7406\uFF0C\u6BCF\u4E2A\u5FAE\u670D\u52A1\u90FD\u9700\u8981\uFF08\u65E0\u5C42\u7EA7\u4E4B\u5206\uFF09\uFF0C\u800C\u964D\u7EA7\u4E00\u822C\u9700\u8981\u5BF9\u4E1A\u52A1\u6709\u5C42\u7EA7\u4E4B\u5206\uFF08\u6BD4\u5982\u964D\u7EA7\u4E00\u822C\u662F\u4ECE\u6700\u5916\u56F4\u670D\u52A1\u5F00\u59CB\uFF09</li></ul><h5 id="\u603B\u7ED3"><a class="header-anchor" href="#\u603B\u7ED3" aria-hidden="true">#</a> \u603B\u7ED3</h5><p>\u7194\u65AD\u5FC5\u4F1A\u89E6\u53D1\u964D\u7EA7\uFF0C\u6240\u4EE5\u7194\u65AD\u4E5F\u662F\u964D\u7EA7\u7684\u4E00\u79CD\uFF0C\u533A\u522B\u5728\u4E8E\u7194\u65AD\u662F\u5BF9\u8C03\u7528\u94FE\u8DEF\u7684\u4E00\u79CD\u4FDD\u62A4\uFF0C\u800C\u964D\u7EA7\u662F\u5BF9\u7CFB\u7EDF\u8FC7\u8F7D\u7684\u4E00\u79CD\u4FDD\u62A4\u5904\u7406</p><h4 id="\u670D\u52A1\u7194\u65AD\u7684\u5B9E\u73B0"><a class="header-anchor" href="#\u670D\u52A1\u7194\u65AD\u7684\u5B9E\u73B0" aria-hidden="true">#</a> \u670D\u52A1\u7194\u65AD\u7684\u5B9E\u73B0</h4><h5 id="\u5B9E\u73B0\u601D\u8DEF"><a class="header-anchor" href="#\u5B9E\u73B0\u601D\u8DEF" aria-hidden="true">#</a> \u5B9E\u73B0\u601D\u8DEF</h5><p>\u5B9E\u73B0\u601D\u8DEF\uFF1A</p><ul><li>\u5F15\u5165hystrix\u4F9D\u8D56\uFF0C\u5E76\u5F00\u542F\u7194\u65AD\u5668\uFF08\u65AD\u8DEF\u5668\uFF09</li><li>\u6A21\u62DF\u964D\u7EA7\u65B9\u6CD5</li><li>\u8FDB\u884C\u8C03\u7528\u6D4B\u8BD5</li></ul><h5 id="\u5F15\u5165\u4F9D\u8D56"><a class="header-anchor" href="#\u5F15\u5165\u4F9D\u8D56" aria-hidden="true">#</a> \u5F15\u5165\u4F9D\u8D56</h5><p>\u5728\u5546\u54C1\u670D\u52A1\u4E2D\u5F15\u5165\u4F9D\u8D56\uFF0C\u5F53\u524D\u6709\u51FA\u73B0\u5F02\u5E38\u7684\u65F6\u5019\uFF0C\u5FEB\u901F\u8FD4\u56DE</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5F15\u5165hystrix\u7194\u65AD--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-hystrix<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u5F00\u542F\u65AD\u8DEF\u5668"><a class="header-anchor" href="#\u5F00\u542F\u65AD\u8DEF\u5668" aria-hidden="true">#</a> \u5F00\u542F\u65AD\u8DEF\u5668</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token annotation punctuation">@EnableCircuitBreaker</span> <span class="token comment">//\u5F00\u542F\u65AD\u8DEF\u5668</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringcloudConsulProductDemo9998Application</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringcloudConsulProductDemo9998Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u4F7F\u7528hystrixcommand\u6CE8\u89E3\u5B9E\u73B0\u65AD\u8DEF"><a class="header-anchor" href="#\u4F7F\u7528hystrixcommand\u6CE8\u89E3\u5B9E\u73B0\u65AD\u8DEF" aria-hidden="true">#</a> \u4F7F\u7528HystrixCommand\u6CE8\u89E3\u5B9E\u73B0\u65AD\u8DEF</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 	* \u6D4B\u8BD5\u7194\u65AD
  *
  * <span class="token keyword">@return</span>
  */</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/product/break&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@HystrixCommand</span><span class="token punctuation">(</span>fallbackMethod <span class="token operator">=</span> <span class="token string">&quot;testBreakFall&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testBreak</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u6A21\u62DF\u7194\u65AD\uFF0C\u4E5F\u5C31\u662F\u8FD9\u4E2A\u670D\u52A1\u8C03\u7528\u5D29\u6E83\u4E86</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;\u975E\u6CD5\u53C2\u6570\uFF0Cid\u4E0D\u80FD\u5C0F\u4E8E0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token string">&quot;\u8BBF\u95EE\u6210\u529F\uFF0C\u5F53\u524D\u67E5\u8BE2\u7684id\u4E3A\uFF1A&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u7194\u65AD\u5FEB\u901F\u56DE\u8C03 \u548C\u76EE\u6807\u65B9\u6CD5testBreak\u7684\u53C2\u6570\u548C\u8FD4\u56DE\u503C\u4FDD\u6301\u4E00\u81F4</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testBreakFall</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&quot;\u5F53\u524D\u6570\u636E\u4E0D\u5408\u6CD5&quot;</span> <span class="token operator">+</span> id <span class="token operator">+</span><span class="token string">&quot;\u89E6\u53D1\u7194\u65AD\uFF0C\u5FEB\u901F\u8FD4\u56DE&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u8C03\u7528\u6D4B\u8BD5"><a class="header-anchor" href="#\u8C03\u7528\u6D4B\u8BD5" aria-hidden="true">#</a> \u8C03\u7528\u6D4B\u8BD5</h5><p><img src="`+nn+'" alt="image-20211217021235912"></p><h5 id="\u603B\u7ED3-1"><a class="header-anchor" href="#\u603B\u7ED3-1" aria-hidden="true">#</a> \u603B\u7ED3</h5><p>\u4ECE\u4E0A\u9762\u6F14\u793A\u8FC7\u7A0B\u4E2D\u4F1A\u53D1\u73B0\u5982\u679C\u89E6\u53D1\u4E00\u5B9A\u6761\u4EF6\u65AD\u8DEF\u5668\u4F1A\u81EA\u52A8\u6253\u5F00\uFF0C\u8FC7\u4E86\u4E00\u6BB5\u65F6\u95F4\u6B63\u5E38\u4E4B\u540E\u53C8\u4F1A\u5173\u95ED\u3002\u90A3\u4E48\u65AD\u8DEF\u5668\u6253\u5F00\u7684\u6761\u4EF6\u662F\u4EC0\u4E48\u5462\uFF1F</p><blockquote><p>\u5F53\u7194\u65AD\u5230\u4E00\u5B9A\u7684\u7A0B\u5EA6\uFF08\u4E5F\u5C31\u662F\u5728\u8C03\u7528\u8BF7\u6C42\u5728\u4E00\u5B9A\u7A0B\u5EA6\u4E0A\u8C03\u7528\u5931\u8D25\u7684\u65F6\u5019\uFF09\uFF0C\u65AD\u8DEF\u5668\u5C31\u4F1A\u5F7B\u5E95\u6253\u5F00\uFF0C\u5728\u6307\u5B9A\u7684\u5355\u4F4D\u65F6\u95F4\u5185\u90FD\u4E0D\u5141\u8BB8\u8C03\u7528\u8FD9\u4E2A\u670D\u52A1\uFF0C\u5373\u4F7F\u4F60\u662F\u4E00\u4E2A\u6B63\u5E38\u7684\u53C2\u6570\uFF1B\u8FC7\u4E86\u4E00\u6BB5\u65F6\u95F4\uFF0C\u65AD\u8DEF\u5668\u4F1A\u653E\u884C\u4E00\u5B9A\u7684\u8BF7\u6C42\u6765\u6D4B\u8BD5\u5F53\u524D\u670D\u52A1\u662F\u5426\u5DF2\u7ECF\u53EF\u7528\uFF0C\u5982\u679C\u6D4B\u8BD5\u901A\u8FC7\uFF0C\u5C31\u4F1A\u653E\u884C\u6240\u6709\u8BF7\u6C42\u5E76\u5141\u8BB8\u8C03\u7528</p><p><strong>\u6D4B\u8BD5\uFF1A</strong></p><ol><li>\u6BCF\u79D2\u591A\u6B21\u7684\u5E76\u53D1\u8BBF\u95EE\u63D0\u4EA4\u9519\u8BEF\u7684\u53C2\u6570\uFF0C\u53EF\u4EE5\u901A\u8FC7\u6D4F\u89C8\u5668\u591A\u6B21\u8BF7\u6C42\uFF0C\u4E5F\u53EF\u4EE5\u901A\u8FC7jmeter\u8BF7\u6C42</li></ol><p><img src="'+sn+'" alt="image-20211217022306337"></p><ol start="2"><li>\u5728\u4F7F\u7528\u9519\u8BEF\u7684\u8BF7\u6C42\u53C2\u6570\u8BF7\u6C42\u670D\u52A1\u540E\uFF0C\u89E6\u53D1\u4E86\u670D\u52A1\u7194\u65AD\uFF0C\u5373\u4F7F\u6211\u4EEC\u4F20\u9012\u7684\u662F\u6B63\u786E\u7684\u53C2\u6570\uFF0C\u6B64\u65F6\u4E5F\u4F1A\u88AB\u65AD\u8DEF\u5668\u7194\u65AD</li></ol><p><img src="'+an+'" alt="image-20211217022251704"></p><p>\u5F53\u7136\u8FD9\u4E9B\u53EA\u662F\u6211\u4EEC\u6D4B\u8BD5\u51FA\u6765\u7684\uFF0C\u73B0\u5728\u6211\u4EEC\u6765\u770B\u5B98\u7F51\u662F\u600E\u4E48\u5B9A\u4E49\u7684</p></blockquote><h5 id="\u65AD\u8DEF\u5668\u6253\u5F00\u6761\u4EF6"><a class="header-anchor" href="#\u65AD\u8DEF\u5668\u6253\u5F00\u6761\u4EF6" aria-hidden="true">#</a> \u65AD\u8DEF\u5668\u6253\u5F00\u6761\u4EF6</h5><blockquote><p>\u5B98\u7F51\uFF1Ahttps://docs.spring.io/spring-cloud-netflix/docs/2.2.10.RELEASE/reference/html/#circuit-breaker-hystrix-clients</p><p>A service failure in the lower level of services can cause cascading failure all the way up to the user. When calls to a particular service exceed <code>circuitBreaker.requestVolumeThreshold</code> (default: 20 requests) and the failure percentage is greater than <code>circuitBreaker.errorThresholdPercentage</code> (default: &gt;50%) in a rolling window defined by <code>metrics.rollingStats.timeInMilliseconds</code> (default: 10 seconds), the circuit opens and the call is not made. In cases of error and an open circuit, a fallback can be provided by the developer.</p><p>\u539F\u6587\u7FFB\u8BD1\u4E4B\u540E\uFF0C\u603B\u7ED3\u6253\u5F00\u5173\u95ED\u7684\u6761\u4EF6\uFF1A</p><ol><li><p>\u5F53\u6EE1\u8DB3\u4E00\u5B9A\u7684\u9608\u503C\u7684\u65F6\u5019\uFF08\u9ED8\u8BA4\u662F10\u79D2\u5185\u8D85\u8FC720\u4E2A\u8BF7\u6C42\uFF09</p></li><li><p>\u5F53\u5931\u8D25\u7387\u8FBE\u5230\u4E00\u5B9A\u7684\u65F6\u5019\uFF08\u9ED8\u8BA4\u662F10\u79D2\u5185\u8D85\u8FC750%\u7684\u8BF7\u6C42\u5931\u8D25\uFF09</p></li><li><p>\u5230\u8FBE\u4EE5\u4E0A\u9608\u503C\uFF0C\u65AD\u8DEF\u5668\u5C06\u4F1A\u5F00\u542F</p></li><li><p>\u5F53\u5F00\u542F\u7684\u65F6\u5019\uFF0C\u6240\u6709\u7684\u8BF7\u6C42\u90FD\u4E0D\u4F1A\u8FDB\u884C\u8F6C\u53D1</p></li><li><p>\u4E00\u6BB5\u65F6\u95F4\u4E4B\u540E\uFF08\u9ED8\u8BA4\u662F5\u79D2\uFF09\uFF0C\u8FD9\u4E2A\u65F6\u5019\u65AD\u8DEF\u5668\u662F\u534A\u5F00\u72B6\u6001\uFF0C\u4F1A\u8BA9\u5176\u4E2D\u4E00\u4E2A\u8BF7\u6C42\u8FDB\u884C\u8F6C\u53D1\uFF0C\u5982\u679C\u8F6C\u53D1\u6210\u529F\uFF0C\u65AD\u8DEF\u5668\u4F1A\u5173\u95ED\uFF0C\u82E5\u5931\u8D25\uFF0C\u7EE7\u7EED\u5F00\u542F\uFF0C\u91CD\u590D4\u548C5</p></li></ol><p><img src="'+tn+`" alt="image-20211217024148826"></p></blockquote><h5 id="\u9ED8\u8BA4\u7684\u670D\u52A1fallback\u5904\u7406\u65B9\u6CD5"><a class="header-anchor" href="#\u9ED8\u8BA4\u7684\u670D\u52A1fallback\u5904\u7406\u65B9\u6CD5" aria-hidden="true">#</a> \u9ED8\u8BA4\u7684\u670D\u52A1FallBack\u5904\u7406\u65B9\u6CD5</h5><p>\u5982\u679C\u4E3A\u6BCF\u4E00\u4E2A\u670D\u52A1\u65B9\u6CD5\u5F00\u53D1\u4E00\u4E2A\u964D\u7EA7\uFF0C\u5BF9\u4E8E\u6211\u4EEC\u6765\u8BF4\uFF0C\u53EF\u80FD\u4F1A\u51FA\u73B0\u5927\u91CF\u7684\u4EE3\u7801\u5197\u4F59\uFF0C\u800C\u4E14\u5BF9\u8FD9\u4E9B\u975E\u4E1A\u52A1\u4EE3\u7801\u76F4\u63A5\u8026\u5408\u5230\u4E1A\u52A1\u4EE3\u7801\u4E2D\uFF0C\u8026\u5408\u4E86\u8FC7\u591A\u7684\u975E\u4E1A\u52A1\u65B9\u6CD5\uFF0C\u4E0D\u5229\u4E8E\u7EF4\u62A4\uFF0C\u8FD9\u4E2A\u65F6\u5019\u5C31\u9700\u8981\u52A0\u5165\u9ED8\u8BA4\u670D\u52A1\u964D\u7EA7\u5904\u7406\u65B9\u6CD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u6D4B\u8BD5\u7194\u65AD
 * defaultFallback \u8868\u793A\u9ED8\u8BA4\u7684\u7194\u65AD
 * <span class="token keyword">@return</span>
 */</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/product/break&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@HystrixCommand</span><span class="token punctuation">(</span>defaultFallback <span class="token operator">=</span> <span class="token string">&quot;defaultFallBack&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testBreak</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u6A21\u62DF\u7194\u65AD\uFF0C\u4E5F\u5C31\u662F\u8FD9\u4E2A\u670D\u52A1\u8C03\u7528\u5D29\u6E83\u4E86</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;\u975E\u6CD5\u53C2\u6570\uFF0Cid\u4E0D\u80FD\u5C0F\u4E8E0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token string">&quot;\u8BBF\u95EE\u6210\u529F\uFF0C\u5F53\u524D\u67E5\u8BE2\u7684id\u4E3A\uFF1A&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">defaultFallBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&quot;\u5F53\u524D\u6570\u636E\u4E0D\u5408\u6CD5\uFF0C\u89E6\u53D1\u7194\u65AD\uFF0C\u5FEB\u901F\u8FD4\u56DE&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u670D\u52A1\u964D\u7EA7\u7684\u5B9E\u73B0"><a class="header-anchor" href="#\u670D\u52A1\u964D\u7EA7\u7684\u5B9E\u73B0" aria-hidden="true">#</a> \u670D\u52A1\u964D\u7EA7\u7684\u5B9E\u73B0</h4><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>\u6BD4\u5982\u8BF4\uFF1A\u5728\u88AB\u8C03\u7528\u8005\u5546\u54C1\u670D\u52A1\u5173\u95ED\u7684\u60C5\u51B5\u4E0B\uFF0C\u4FDD\u8BC1\u8C03\u7528\u8005\u7528\u6237\u670D\u52A1\u7684\u6B63\u5E38\u8FD0\u884C
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5 id="\u5B9E\u73B0\u601D\u8DEF-1"><a class="header-anchor" href="#\u5B9E\u73B0\u601D\u8DEF-1" aria-hidden="true">#</a> \u5B9E\u73B0\u601D\u8DEF</h5><p>\u5BA2\u6237\u7AEFopenFeign+Hystrix\u5B9E\u73B0\u670D\u52A1\u964D\u7EA7</p><ul><li>\u5F15\u5165Hystrix\u4F9D\u8D56</li><li>\u914D\u7F6E\u6587\u4EF6\u5F00\u542FFeign\u652F\u6301Hystrix</li><li>\u5728Feign\u5BA2\u6237\u7AEF\u8C03\u7528\u52A0\u5165fallback\u6307\u5B9A\u964D\u7EA7\u5904\u7406</li><li>\u5F00\u53D1\u964D\u7EA7\u5904\u7406\u65B9\u6CD5</li></ul><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">##</span> \u4E3A\u4EC0\u4E48\u662F\u5BA2\u6237\u7AEF\u5B8C\u6210\u670D\u52A1\u964D\u7EA7\u5462\uFF1F</span>
\u6BD4\u5982\uFF0C\u7528\u6237\u670D\u52A1\u5728\u8C03\u7528\u5546\u54C1\u670D\u52A1\u7684\u65F6\u5019\uFF0C\u6B63\u5E38\u6765\u8BB2\u7684\u662F\u53EF\u4EE5\u6B63\u4EA7\u8C03\u7528\u7684\uFF0C\u4F46\u65F6\u5019\u7531\u4E8E\u6574\u4E2A\u67D0\u4E00\u4E2A\u4E1A\u52A1\u65F6\u95F4\u8282\u70B9\uFF0C\u7528\u6237\u670D\u52A1\u662F\u4E00\u4E2A\u4E2D\u5FC3\u8282\u70B9\uFF0C\u6709\u5F88\u591A\u901A\u8FC7\u7528\u6237\u670D\u52A1\u53BB\u8C03\u7528\u5176\u4ED6\u7684\u91CD\u70B9\u670D\u52A1\uFF0C\u5546\u54C1\u670D\u52A1\u662F\u4E00\u4E2A\u8FB9\u7F18\u670D\u52A1\uFF0C\u6B64\u65F6\uFF0C\u5F53\u7528\u6237\u901A\u8FC7\u6D4F\u89C8\u5668\u8C03\u7528\u7528\u6237\u670D\u52A1\u4E2D\u7684\u8BF7\u6C42\uFF0C\u7528\u6237\u670D\u52A1\u5728\u8C03\u7528\u5546\u54C1\u670D\u52A1\u7684\u65F6\u5019\uFF0C\u4E3A\u4E86\u4FDD\u8BC1\u7528\u6237\u670D\u52A1\u8FD9\u4E2A\u4E2D\u5FC3\u8282\u70B9\u80FD\u5904\u7406\u66F4\u591A\u7684\u5176\u4ED6\u7684\u91CD\u70B9\u8BF7\u6C42\uFF0C\u5148\u5728\u7528\u6237\u670D\u52A1\u4E2D\u622A\u65AD\u5411\u5546\u54C1\u670D\u52A1\u8FD9\u4E2A\u8FB9\u7F18\u670D\u52A1\u7684\u8BF7\u6C42\uFF0C\u4E5F\u5C31\u662F\u8BF4\u628A\u5546\u54C1\u670D\u52A1\u7684\u7B49\u7EA7\u964D\u4F4E\u4E86\uFF0C\u7B49\u5230\u5176\u4ED6\u91CD\u70B9\u4E1A\u52A1\u4E0D\u90A3\u4E48\u7E41\u5FD9\u7684\u65F6\u5019\uFF0C\u518D\u53D6\u6D88\u964D\u7EA7
\u6216\u8005\u4E5F\u53EF\u4EE5\u8FD9\u4E48\u8BF4\uFF1A\u5F53\u6211\u4EEC\u628A\u7528\u6237\u670D\u52A1\u548C\u5546\u54C1\u670D\u52A1\u90E8\u7F72\u5230\u673A\u5668\u4E0A\u7684\u65F6\u5019\uFF0C\u53EF\u80FD\u4E00\u53F0\u673A\u5668\u4E0A\u90E8\u7F72\u591A\u4E2A\u5FAE\u670D\u52A1\uFF0C\u5728docker\u4E2D\u5C31\u53EF\u4EE5\u5B9E\u73B0\uFF0C\u6B64\u65F6\u5982\u679C\u6211\u4EEC\u5173\u95ED\u8FB9\u7F18\u670D\u52A1\uFF0C\u53EF\u4EE5\u7A7A\u51FA\u7F51\u7EDC\u3001\u786C\u4EF6\u3001CPU\u7B49\u7CFB\u7EDF\u8D44\u6E90\u7ED9\u91CD\u70B9\u670D\u52A1\u4F7F\u7528
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u5F15\u5165hystrix\u4F9D\u8D56"><a class="header-anchor" href="#\u5F15\u5165hystrix\u4F9D\u8D56" aria-hidden="true">#</a> \u5F15\u5165Hystrix\u4F9D\u8D56</h5><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5F15\u5165hystrix--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-hystrix<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u5F00\u542Fopenfeign\u652F\u6301\u670D\u52A1\u964D\u7EA7"><a class="header-anchor" href="#\u5F00\u542Fopenfeign\u652F\u6301\u670D\u52A1\u964D\u7EA7" aria-hidden="true">#</a> \u5F00\u542FopenFeign\u652F\u6301\u670D\u52A1\u964D\u7EA7</h5><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">feign</span><span class="token punctuation">:</span> 
	<span class="token key atrule">hystrix</span><span class="token punctuation">:</span> 
		<span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">## \u5F00\u542FopenFeign\u652F\u6301\u964D\u7EA7</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u5728openfeign\u5BA2\u6237\u7AEF\u4E2D\u52A0\u5165hystrix"><a class="header-anchor" href="#\u5728openfeign\u5BA2\u6237\u7AEF\u4E2D\u52A0\u5165hystrix" aria-hidden="true">#</a> \u5728openFeign\u5BA2\u6237\u7AEF\u4E2D\u52A0\u5165Hystrix</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u8C03\u7528\u5546\u54C1\u670D\u52A1\u7684openFeign\u670D\u52A1
 */</span>
<span class="token comment">// @FeignClient \u7528\u6765\u6807\u8BC6\u5F53\u524D\u63A5\u53E3\u662F\u4E00\u4E2A feign \u5BA2\u6237\u7AEF\u7EC4\u4EF6</span>
<span class="token comment">// value\u503C\u5C31\u662F\u670D\u52A1\u7684id\uFF0C\u4E5F\u5C31\u662F\u6CE8\u518C\u5728consul\u6CE8\u518C\u4E2D\u5FC3\u7684id</span>
<span class="token comment">// fallback = ProductFallBack.class \u914D\u7F6E\u51FA\u73B0\u670D\u52A1\u964D\u7EA7\u7684\u5904\u7406\u7C7B</span>
<span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;springcloud-consul-product-demo-9998&quot;</span><span class="token punctuation">,</span>fallback <span class="token operator">=</span> <span class="token class-name">ProductClientFallBack</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ProductClient</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/product/showMsg&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">String</span> <span class="token function">showMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// \u6839\u636E\u5546\u54C1\u7684id\u67E5\u8BE2\u5546\u54C1\u4FE1\u606F</span>

    <span class="token doc-comment comment">/**
     * \u6CE8\u610F\uFF1A\u4F7F\u7528openfeign \u7684get\u65B9\u5F0Fch\u4F20\u9012\u53C2\u6570\uFF0C\u53C2\u6570\u53D8\u91CF\u5FC5\u987B\u901A\u8FC7@RequestParam\u6CE8\u89E3\u8FDB\u884C\u4FEE\u9970
     *
     * <span class="token keyword">@param</span> <span class="token parameter">productId</span>
     * <span class="token keyword">@return</span>
     */</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/product/findOne&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">findOne</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;productId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> productId<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * \u6D4B\u8BD5post\u4F20\u9012\u53C2\u6570
     * \u540C\u6837\u9700\u8981\u4F7F\u7528@RequestParam\u4FEE\u9970
     *
     * <span class="token keyword">@param</span> <span class="token parameter">name</span>
     * <span class="token keyword">@return</span>
     */</span>
    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/product/save&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * \u8981\u6C42\u670D\u52A1\u63D0\u4F9B\u65B9\u548C\u670D\u52A1\u8C03\u7528\u65B9\u4F7F\u7528@RequestBody\u8FDB\u884C\u53C2\u6570\u58F0\u660E
     *
     * <span class="token keyword">@param</span> <span class="token parameter">product</span>
     * <span class="token keyword">@return</span>
     */</span>
    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/product/update&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Product</span> product<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u5F00\u53D1fallback\u5904\u7406\u7C7B"><a class="header-anchor" href="#\u5F00\u53D1fallback\u5904\u7406\u7C7B" aria-hidden="true">#</a> \u5F00\u53D1FallBack\u5904\u7406\u7C7B</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u5BF9\u91CC\u9762\u7684\u6240\u6709\u65B9\u6CD5\u505A\u4E0D\u540C\u964D\u7EA7\u5904\u7406\u7B56\u7565
 */</span>
<span class="token annotation punctuation">@Component</span> <span class="token comment">// \u52A0\u5165\u5230spring\u5BB9\u5668</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProductClientFallBack</span> <span class="token keyword">implements</span> <span class="token class-name">ProductClient</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">showMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;\u5F53\u524D\u670D\u52A1\u5DF2\u7ECF\u88AB\u964D\u7EA7&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">findOne</span><span class="token punctuation">(</span><span class="token class-name">String</span> productId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;findOne\uFF1A\u5F53\u524D\u670D\u52A1\u4E0D\u53EF\u7528\uFF0C\u670D\u52A1\u5DF2\u88AB\u964D\u7EA7&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;save\uFF1A\u5F53\u524D\u670D\u52A1\u4E0D\u53EF\u7528\uFF0C\u670D\u52A1\u5DF2\u88AB\u964D\u7EA7&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Product</span> product<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;update\uFF1A\u5F53\u524D\u670D\u52A1\u4E0D\u53EF\u7528\uFF0C\u670D\u52A1\u5DF2\u88AB\u964D\u7EA7&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u6D4B\u8BD5"><a class="header-anchor" href="#\u6D4B\u8BD5" aria-hidden="true">#</a> \u6D4B\u8BD5</h5><p>\u5F53\u6211\u4EEC\u628A\u7528\u6237\u548C\u5546\u54C1\u90FD\u542F\u52A8\u7684\u4E4B\u540E\uFF0C\u670D\u52A1\u662F\u6B63\u5E38\u7684</p><p><img src="`+en+'" alt="image-20211217033014732"></p><p>\u7136\u540E\u6211\u4EEC\u5173\u95ED\u5546\u54C1\u670D\u52A1\u8FD9\u4E2A\u8FB9\u7F18\u670D\u52A1\uFF0C\u5728\u8BBF\u95EE</p><p><img src="'+pn+'" alt="image-20211217033147482"></p><p><strong>\u6CE8\u610F\uFF1A\u5982\u679C\u670D\u52A1\u7AEF\u964D\u7EA7\u548C\u5BA2\u6237\u7AEF\u964D\u7EA7\u540C\u65F6\u5F00\u542F\uFF0C\u8981\u6C42\u670D\u52A1\u7AEF\u964D\u7EA7\u65B9\u6CD5\u7684\u8FD4\u56DE\u503C\u5FC5\u987B\u4E0E\u5BA2\u6237\u7AEF\u65B9\u6CD5\u964D\u7EA7\u7684\u8FD4\u56DE\u503C\u4E00\u81F4</strong></p><h4 id="hystrix-dashboard"><a class="header-anchor" href="#hystrix-dashboard" aria-hidden="true">#</a> Hystrix Dashboard</h4><h5 id="\u8BF4\u660E"><a class="header-anchor" href="#\u8BF4\u660E" aria-hidden="true">#</a> \u8BF4\u660E</h5><p>Hystrix Dashboard\u7684\u4E00\u4E2A\u4E3B\u8981\u4F18\u70B9\u662F\u5B83\u6536\u96C6\u4E86\u5173\u4E8E\u6BCF\u4E2AHystrixCommand\u7684\u4E00\u7EC4\u5EA6\u91CF\u3002Hystrix\u4EEA\u8868\u76D8\u4EE5\u9AD8\u6548\u7684\u65B9\u5F0F\u663E\u793A\u6BCF\u4E2A\u65AD\u8DEF\u5668\u7684\u8FD0\u884C\u72B6\u51B5</p><p><img src="'+on+`" alt="Hystrix"></p><h5 id="\u9879\u76EE\u4E2D\u5F15\u5165\u4F9D\u8D56-1"><a class="header-anchor" href="#\u9879\u76EE\u4E2D\u5F15\u5165\u4F9D\u8D56-1" aria-hidden="true">#</a> \u9879\u76EE\u4E2D\u5F15\u5165\u4F9D\u8D56</h5><p>\u53EF\u4EE5\u65B0\u5EFA\u4E00\u4E2A\u9879\u76EE\u53BB\u4F7F\u7528\u4EEA\u8868\u76D8\uFF0C\u6216\u8005\u5728\u8001\u9879\u76EE\u4E0A\u6784\u5EFA\u4EEA\u8868\u76D8\u3002</p><ol><li>\u521B\u5EFA\u65B0\u9879\u76EE\uFF0C\u5148\u5F15\u5165springcloud\u76F8\u5173\u7684\u4F9D\u8D56</li></ol><p>\u521B\u5EFA\u65B0\u9879\u76EE<code>springcloud-hystrix-dashboard-9990</code>\uFF0C\u6DFB\u52A0web\u4F9D\u8D56</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring-cloud.version</span><span class="token punctuation">&gt;</span></span>Hoxton.SR6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring-cloud.version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- \u5168\u5C40\u7BA1\u7406springcloud\u7248\u672C\uFF0C \u5E76\u4E0D\u4F1A\u5F15\u5165\u5177\u4F53\u7684\u4F9D\u8D56\uFF0C\u53EA\u662F --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${spring-cloud.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5176\u4E2D9990\u662F\u7AEF\u53E3\uFF0C\u9700\u8981\u4FEE\u6539</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9990</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u5F15\u5165Hystrix Dashboard\u4F9D\u8D56</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5F15\u5165Hystrix dashboard--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-hystrix-dashboard<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B83\u4F5C\u4E3A\u4E00\u4E2A\u76D1\u6D4B\u670D\u52A1\uFF0C\u53EA\u662F\u63D0\u4F9B\u4E86\u4E00\u4E2AUI\u754C\u9762\u8BA9\u6211\u4EEC\u80FD\u77E5\u9053\u65AD\u8DEF\u5668\u7684\u8FD0\u884C\u72B6\u51B5\uFF0C\u6240\u4EE5\u6CA1\u6709\u5FC5\u8981\u5F15\u5165\u5176\u4ED6\u9700\u8981\u6CE8\u518C\u5230\u6CE8\u518C\u4E2D\u5FC3\u7684\u4F9D\u8D56</p><h5 id="\u5165\u53E3\u7C7B\u4E2D\u6DFB\u52A0\u6CE8\u89E3\u5F00\u542Fhystrix-dashboard"><a class="header-anchor" href="#\u5165\u53E3\u7C7B\u4E2D\u6DFB\u52A0\u6CE8\u89E3\u5F00\u542Fhystrix-dashboard" aria-hidden="true">#</a> \u5165\u53E3\u7C7B\u4E2D\u6DFB\u52A0\u6CE8\u89E3\u5F00\u542FHystrix Dashboard</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableHystrixDashboard</span> <span class="token comment">//\u5F00\u542F\u76D1\u63A7\u9762\u677F</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringcloudHystrixDashboard9990Application</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringcloudHystrixDashboard9990Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u542F\u52A8hystrix-dashboard\u5E94\u7528"><a class="header-anchor" href="#\u542F\u52A8hystrix-dashboard\u5E94\u7528" aria-hidden="true">#</a> \u542F\u52A8hystrix dashboard\u5E94\u7528</h5><div class="language-http ext-http line-numbers-mode"><pre class="language-http"><code><span class="token header"><span class="token header-name keyword">http</span><span class="token punctuation">:</span><span class="token header-value">//localhost:9990/hystrix</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="`+ln+'" alt="image-20211217043428882"></p><h5 id="\u76D1\u542C\u670D\u52A1"><a class="header-anchor" href="#\u76D1\u542C\u670D\u52A1" aria-hidden="true">#</a> \u76D1\u542C\u670D\u52A1</h5><p>\u6211\u4EEC\u53EA\u9700\u8981\u5728\u5F00\u59CB\u754C\u9762\u4E0A\u8F93\u5165\u8981\u76D1\u542C\u7684\u670D\u52A1\u7684\u4FE1\u606F</p><p><img src="'+cn+'" alt="image-20211217044244593"></p><p>\u4F46\u662F\uFF0C\u4E00\u65E6\u6211\u4EEC\u70B9\u51FB\u4E86\u5F00\u59CB\u76D1\u542C\uFF0C\u8FDB\u5165\u4E3B\u9875\u9762\uFF0C\u5C31\u4F1A\u51FA\u73B0</p><p><img src="'+un+'" alt="image-20211217044039587"></p><p>\u6216\u8005\u51FA\u73B0\uFF0C\u4E00\u76F4\u52A0\u8F7D\u4E2D\u7684\u60C5\u51B5</p><p><img src="'+rn+`" alt="image-20211217044415598"></p><h5 id="\u76D1\u63A7\u7684\u9879\u76EE\u4E2D\u5165\u53E3\u7C7B\u4E2D\u52A0\u5165\u76D1\u63A7\u8DEF\u5F84\u914D\u7F6E-\u65B0\u7248\u672C\u5751-\u5E76\u542F\u52A8\u76D1\u63A7\u9879\u76EE"><a class="header-anchor" href="#\u76D1\u63A7\u7684\u9879\u76EE\u4E2D\u5165\u53E3\u7C7B\u4E2D\u52A0\u5165\u76D1\u63A7\u8DEF\u5F84\u914D\u7F6E-\u65B0\u7248\u672C\u5751-\u5E76\u542F\u52A8\u76D1\u63A7\u9879\u76EE" aria-hidden="true">#</a> \u76D1\u63A7\u7684\u9879\u76EE\u4E2D\u5165\u53E3\u7C7B\u4E2D\u52A0\u5165\u76D1\u63A7\u8DEF\u5F84\u914D\u7F6E(\u65B0\u7248\u672C\u5751)\u5E76\u542F\u52A8\u76D1\u63A7\u9879\u76EE</h5><p>\u5728\u8001\u7248\u672C\u4E2D\u53EA\u9700\u8981\u8F93\u5165\u670D\u52A1\u7684\u7F51\u5740\u5C31\u53EF\u4EE5\u76D1\u542C\u670D\u52A1\u65AD\u8DEF\u5668\u4FE1\u606F\uFF0C\u4F46\u662F\u5728\u65B0\u7248\u672C\u4E2D\u9700\u8981\u5728\u88AB\u76D1\u542C\u7684\u9879\u76EE\u4E2D\u6DFB\u52A0\u5BF9\u5E94\u7F51\u5740\u7684\u8BF7\u6C42\u54CD\u5E94</p><p>\u5728\u542F\u52A8\u7C7B\u6216\u8005\u4EFB\u4F55\u5E26\u7740@Configuration\u6CE8\u89E3\u7684\u7C7B\u4E2D\u6DFB\u52A0\u4EE5\u4E0B\u65B9\u6CD5\uFF0C\u628AHystrix Dashboard Servlet\u6CE8\u518C\u5230spring\u5BB9\u5668</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">ServletRegistrationBean</span> <span class="token function">getServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">final</span> <span class="token class-name">HystrixMetricsStreamServlet</span> streamServlet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HystrixMetricsStreamServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">ServletRegistrationBean</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">HystrixMetricsStreamServlet</span><span class="token punctuation">&gt;</span></span> registrationBean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServletRegistrationBean</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>streamServlet<span class="token punctuation">)</span><span class="token punctuation">;</span>

  registrationBean<span class="token punctuation">.</span><span class="token function">setLoadOnStartup</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  registrationBean<span class="token punctuation">.</span><span class="token function">addUrlMappings</span><span class="token punctuation">(</span><span class="token string">&quot;/hystrix.stream&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  registrationBean<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;HystrixMetricsStreamServlet&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> registrationBean<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u70B9\u51FB\u76D1\u63A7\u4E4B\u540E\u4E00\u76F4loading"><a class="header-anchor" href="#\u70B9\u51FB\u76D1\u63A7\u4E4B\u540E\u4E00\u76F4loading" aria-hidden="true">#</a> \u70B9\u51FB\u76D1\u63A7\u4E4B\u540E\u4E00\u76F4loading</h5><p>\u6253\u5F00\u63A7\u5236\u53F0\u53D1\u73B0\u62A5\u9519</p><p><img src="`+dn+'" alt="image-20211217050342171"></p><p>\u8FD9\u662F\u56E0\u4E3Ahystrix dashboard\u7528\u4E86\u6700\u65B0\u7684jquery\u7248\u672C\uFF0C\u5DF2\u7ECF\u4E0D\u518D\u652F\u6301\u8FD9\u79CD\u5199\u6CD5\u4E86</p><p><strong>\u9519\u8BEF\u5B9A\u4F4D\uFF1A</strong></p><p>\u65B0\u7248\u672C\u4E2Dspringcloud\u5C06jquery\u7248\u672C\u5347\u7EA7\u4E3A3.4.1\uFF0C\u5B9A\u4F4D\u5230monitor.ftlh\u6587\u4EF6\u4E2D\uFF0Cjs\u7684\u5199\u6CD5\u5982\u4E0B\uFF1A</p><p><code>$(window).load(function())</code>\uFF0Cjquery3.4.1\u5DF2\u7ECF\u5E9F\u5F03\u4E86\u8FD9\u4E2A\u5199\u6CD5</p><p><img src="'+kn+'" alt="image-20211217051025657"></p><p><strong>\u89E3\u51B3\u65B9\u6848\uFF1A</strong></p><p>\u4FEE\u6539monitor.flth\u4E3A\u5982\u4E0B\u8C03\u7528\u65B9\u5F0F\uFF1A</p><p><img src="'+vn+'" alt="image-20211217051316053"></p><p><code>$(window).on(&quot;load&quot;,function())</code>\uFF0C\u6709\u4E24\u4E2A\u4F4D\u7F6E</p><p>\u4FEE\u6539\u540E\uFF0C\u5C06\u4FEE\u6539\u7684monitor.ftlh\u66FF\u6362jar\u5305\u4E2D\u7684\u6E90\u6587\u4EF6</p><p>\u7F16\u8BD1jar\u6E90\u6587\u4EF6\uFF0C\u91CD\u65B0\u6253\u5305\u5F15\u5165\u540E\uFF0C\u754C\u9762\u6B63\u5E38\u54CD\u5E94</p><p><img src="'+mn+'" alt="image-20211217054323502"></p><h5 id="\u91CD\u65B0\u542F\u52A8\u9879\u76EE"><a class="header-anchor" href="#\u91CD\u65B0\u542F\u52A8\u9879\u76EE" aria-hidden="true">#</a> \u91CD\u65B0\u542F\u52A8\u9879\u76EE</h5><p>\u6B63\u5E38\u8BBF\u95EE\u5546\u54C1\u670D\u52A1</p><p><code>http://localhost:9998/product/break?id=1</code></p><p><img src="'+gn+'" alt="image-20211217055034167"></p><p>\u6211\u4EEC\u7528\u5E76\u53D1\u8BBF\u95EE<code>http://localhost:9998/product/break?id=-1</code>\u6D4B\u8BD5\uFF0C\u6D4B\u8BD5\u5F53\u51FA\u73B0\u5F02\u5E38\u7684\u65F6\u5019\uFF0C\u65AD\u8DEF\u5668\u7684\u72B6\u6001</p><p><img src="'+bn+'" alt="image-20211217055646451"></p><p>\u5F53\u572810s\u4E4B\u5185\u51FA\u73B020\u4E2A\u8BF7\u6C42\u5931\u8D25\uFF0C\u5C31\u4F1A\u6253\u5F00\u65AD\u8DEF\u5668</p><p>\u6BCF5\u79D2\u653E\u884C\u4E00\u4E2A\u8BF7\u6C42\uFF0C\u53EA\u8981\u6210\u529F\uFF0C\u5C31\u4F1A\u5173\u95ED\u65AD\u8DEF\u5668</p><p><img src="'+hn+'" alt="image-20211217055906628"></p><h4 id="hystrix\u505C\u6B62\u7EF4\u62A4"><a class="header-anchor" href="#hystrix\u505C\u6B62\u7EF4\u62A4" aria-hidden="true">#</a> Hystrix\u505C\u6B62\u7EF4\u62A4</h4>',402),ce=n("p",null,"\u5B98\u65B9\u7F51\u7AD9\uFF1Ahttps://github.com/Netflix/Hystrix",-1),ie=n("p",null,"Hystrix is no longer in active development, and is currently in maintenance mode.",-1),ue=n("p",null,"Hystrix \u4E0D\u518D\u5904\u4E8E\u79EF\u6781\u5F00\u53D1\u9636\u6BB5\uFF0C\u76EE\u524D\u5904\u4E8E\u7EF4\u62A4\u6A21\u5F0F",-1),re=s("Hystrix (at version 1.5.18) is stable enough to meet the needs of Netflix for our existing applications. Meanwhile, our focus has shifted towards more adaptive implementations that react to an application\u2019s real time performance rather than pre-configured settings (for example, through "),de={href:"https://medium.com/@NetflixTechBlog/performance-under-load-3e6fa9a60581",target:"_blank",rel:"noopener noreferrer"},ke=s("adaptive concurrency limits"),ve=s("). For the cases where something like Hystrix makes sense, we intend to continue using Hystrix for existing applications, and to leverage open and active projects like "),me={href:"https://github.com/resilience4j/resilience4j",target:"_blank",rel:"noopener noreferrer"},ge=s("resilience4j"),be=s(" for new internal projects. We are beginning to recommend others do the same."),he=n("p",null,"Hystrix\uFF08\u7248\u672C 1.5.18\uFF09\u8DB3\u591F\u7A33\u5B9A\uFF0C\u53EF\u4EE5\u6EE1\u8DB3 Netflix \u5BF9\u6211\u4EEC\u73B0\u6709\u5E94\u7528\u7A0B\u5E8F\u7684\u9700\u6C42\u3002\u540C\u65F6\uFF0C\u6211\u4EEC\u7684\u91CD\u70B9\u5DF2\u8F6C\u5411\u66F4\u5177\u9002\u5E94\u6027\u7684\u5B9E\u73B0\uFF0C\u8FD9\u4E9B\u5B9E\u73B0\u5BF9\u5E94\u7528\u7A0B\u5E8F\u7684\u5B9E\u65F6\u6027\u80FD\u505A\u51FA\u53CD\u5E94\uFF0C\u800C\u4E0D\u662F\u9884\u5148\u914D\u7F6E\u7684\u8BBE\u7F6E\uFF08\u4F8B\u5982\uFF0C\u901A\u8FC7\u81EA\u9002\u5E94\u5E76\u53D1\u9650\u5236\uFF09\u3002\u5BF9\u4E8E\u50CF Hystrix \u4E4B\u7C7B\u7684\u4E1C\u897F\u6709\u610F\u4E49\u7684\u60C5\u51B5\uFF0C\u6211\u4EEC\u6253\u7B97\u7EE7\u7EED\u5C06 Hystrix \u7528\u4E8E\u73B0\u6709\u5E94\u7528\u7A0B\u5E8F\uFF0C\u5E76\u5728\u65B0\u7684\u5185\u90E8\u9879\u76EE\u4E2D\u5229\u7528\u8BF8\u5982 resilience4j \u4E4B\u7C7B\u7684\u5F00\u653E\u548C\u6D3B\u8DC3\u9879\u76EE\u3002\u6211\u4EEC\u5F00\u59CB\u5EFA\u8BAE\u5176\u4ED6\u4EBA\u4E5F\u8FD9\u6837\u505A",-1),fe=n("p",null,"resilience4j\u662Fspringcloud\u5F00\u53D1\u7684\u66FF\u4EE3Hystrix\u7684\u66FF\u4EE3\u54C1",-1),ye=e(`<h2 id="gateway\u7EC4\u4EF6\u4F7F\u7528"><a class="header-anchor" href="#gateway\u7EC4\u4EF6\u4F7F\u7528" aria-hidden="true">#</a> Gateway\u7EC4\u4EF6\u4F7F\u7528</h2><h3 id="\u4EC0\u4E48\u662F\u670D\u52A1\u7F51\u5173"><a class="header-anchor" href="#\u4EC0\u4E48\u662F\u670D\u52A1\u7F51\u5173" aria-hidden="true">#</a> \u4EC0\u4E48\u662F\u670D\u52A1\u7F51\u5173</h3><h4 id="\u8BF4\u660E-1"><a class="header-anchor" href="#\u8BF4\u660E-1" aria-hidden="true">#</a> \u8BF4\u660E</h4><p>\u7F51\u5173\u7EDF\u4E00\u670D\u52A1\u5165\u53E3\uFF0C\u53EF\u65B9\u4FBF\u5B9E\u73B0\u5BF9\u5E73\u53F0\u4F17\u591A\u670D\u52A1\u5E73\u53F0\u63A5\u53E3\u8FDB\u884C\u7BA1\u63A7\uFF0C\u5BF9\u8BBF\u95EE\u670D\u52A1\u7684\u8EAB\u4EFD\u8BA4\u8BC1\u3001\u9632\u62A5\u6587\u91CD\u653E\u4E0E\u9632\u6570\u636E\u7BE1\u6539\u3001\u529F\u80FD\u8C03\u7528\u7684\u4E1A\u52A1\u9274\u6743\u3001\u54CD\u5E94\u6570\u636E\u7684\u8131\u654F\u3001\u6D41\u91CF\u4E0E\u5E76\u53D1\u63A7\u5236\uFF0C\u751A\u81F3\u57FA\u4E8EAPI\u8C03\u7528\u7684\u8BA1\u91CF\u6216\u8005\u8BA1\u8D39\u7B49\u7B49</p><p>\u7F51\u5173=\u8DEF\u7531\u8F6C\u53D1+\u8FC7\u6EE4\u5668</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>\u8DEF\u7531\u8F6C\u53D1\uFF1A\u63A5\u6536\u4E00\u5207\u5916\u754C\u8BF7\u6C42\uFF0C\u8F6C\u53D1\u5230\u540E\u7AEF\u7684\u5FAE\u670D\u52A1\u4E0A\u53BB
\u5728\u670D\u52A1\u7F51\u5173\u4E2D\u53EF\u4EE5\u5B8C\u6210\u4E00\u7CFB\u5217\u7684\u6A2A\u5207\u529F\u80FD\uFF0C\u4F8B\u5982\u6743\u9650\u6821\u9A8C\u3001\u9650\u6D41\u4EE5\u53CA\u76D1\u63A7\u7B49\uFF0C\u8FD9\u4E9B\u90FD\u53EF\u4EE5\u901A\u8FC7\u8FC7\u6EE4\u5668\u5B8C\u6210
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u4E3A\u4EC0\u4E48\u9700\u8981\u7F51\u5173"><a class="header-anchor" href="#\u4E3A\u4EC0\u4E48\u9700\u8981\u7F51\u5173" aria-hidden="true">#</a> \u4E3A\u4EC0\u4E48\u9700\u8981\u7F51\u5173</h4><ul><li>\u7F51\u5173\u53EF\u4EE5\u5B9E\u73B0\u670D\u52A1\u7684\u7EDF\u4E00\u7BA1\u7406</li><li>\u7F51\u5173\u53EF\u4EE5\u89E3\u51B3\u5FAE\u670D\u52A1\u4E2D\u901A\u7528\u4EE3\u7801\u7684\u5197\u4F59\u95EE\u9898\uFF08\u5982\u6743\u9650\u63A7\u5236\u3001\u6D41\u91CF\u63A7\u5236\u3001\u9650\u6D41\u7B49\uFF09</li></ul><h4 id="\u7F51\u5173\u7EC4\u4EF7\u5728\u5FAE\u670D\u52A1\u4E2D\u67B6\u6784"><a class="header-anchor" href="#\u7F51\u5173\u7EC4\u4EF7\u5728\u5FAE\u670D\u52A1\u4E2D\u67B6\u6784" aria-hidden="true">#</a> \u7F51\u5173\u7EC4\u4EF7\u5728\u5FAE\u670D\u52A1\u4E2D\u67B6\u6784</h4><p><img src="`+fn+'" alt="image-20211217062035537"></p><h3 id="\u670D\u52A1\u7F51\u5173\u7EC4\u4EF6"><a class="header-anchor" href="#\u670D\u52A1\u7F51\u5173\u7EC4\u4EF6" aria-hidden="true">#</a> \u670D\u52A1\u7F51\u5173\u7EC4\u4EF6</h3><h4 id="zuul"><a class="header-anchor" href="#zuul" aria-hidden="true">#</a> zuul</h4><h5 id="\u5B98\u65B9\u5730\u5740"><a class="header-anchor" href="#\u5B98\u65B9\u5730\u5740" aria-hidden="true">#</a> \u5B98\u65B9\u5730\u5740</h5><blockquote><p>\u5B98\u65B9\u7F51\u5740\uFF1Ahttps://github.com/Netflix/zuul/wiki</p><p>Zuul is the front door for all requests from devices and web sites to the backend of the Netflix streaming application. As an edge service application, Zuul is built to enable dynamic routing, monitoring, resiliency and security. It also has the ability to route requests to multiple Amazon Auto Scaling Groups as appropriate.</p><p>\u7FFB\u8BD1\uFF1A</p><p>Zuul \u662F\u4ECE\u8BBE\u5907\u548C\u7F51\u7AD9\u5230 Netflix \u6D41\u5A92\u4F53\u5E94\u7528\u7A0B\u5E8F\u540E\u7AEF\u7684\u6240\u6709\u8BF7\u6C42\u7684\u524D\u95E8\u3002\u4F5C\u4E3A\u8FB9\u7F18\u670D\u52A1\u5E94\u7528\u7A0B\u5E8F\uFF0CZuul \u65E8\u5728\u5B9E\u73B0\u52A8\u6001\u8DEF\u7531\u3001\u76D1\u63A7\u3001\u5F39\u6027\u548C\u5B89\u5168\u6027\u3002\u5B83\u8FD8\u80FD\u591F\u6839\u636E\u9700\u8981\u5C06\u8BF7\u6C42\u8DEF\u7531\u5230\u591A\u4E2A Amazon Auto Scaling \u7EC4</p></blockquote><h5 id="\u7248\u672C\u8BF4\u660E"><a class="header-anchor" href="#\u7248\u672C\u8BF4\u660E" aria-hidden="true">#</a> \u7248\u672C\u8BF4\u660E</h5><p>\u76EE\u524Dzuul\u7EC4\u4EF6\u5DF2\u7ECF\u4ECE1.0\u66F4\u65B0\u52302.0\uFF0C\u4F46\u662F\u4F5C\u4E3Aspringcloud\u5B98\u65B9\u4E0D\u518D\u63A8\u8350\u4F7F\u7528zull2.0\uFF0C\u4F46\u662F\u4F9D\u7136\u652F\u6301zuul1.2</p><h5 id="springcloud\u5B98\u65B9\u96C6\u6210zuul\u6587\u6863"><a class="header-anchor" href="#springcloud\u5B98\u65B9\u96C6\u6210zuul\u6587\u6863" aria-hidden="true">#</a> springcloud\u5B98\u65B9\u96C6\u6210zuul\u6587\u6863</h5><blockquote><p>\u5B98\u65B9\u5730\u5740\uFF1Ahttps://docs.spring.io/spring-cloud-netflix/docs/2.2.10.RELEASE/reference/html/#router-and-filter-zuul</p></blockquote><h4 id="gateway"><a class="header-anchor" href="#gateway" aria-hidden="true">#</a> gateway</h4><blockquote><p>\u5B98\u65B9\u7F51\u5740\uFF1Ahttps://spring.io/projects/spring-cloud-gateway</p><p>This project provides a library for building an API Gateway on top of Spring WebFlux. Spring Cloud Gateway aims to provide a simple, yet effective way to route to APIs and provide cross cutting concerns to them such as: security, monitoring/metrics, and resiliency.</p><p>\u7FFB\u8BD1\uFF1A</p><p>\u8BE5\u9879\u76EE\u63D0\u4F9B\u4E86\u4E00\u4E2A\u7528\u4E8E\u5728 Spring WebFlux \u4E4B\u4E0A\u6784\u5EFA API \u7F51\u5173\u7684\u5E93\u3002 Spring Cloud Gateway \u65E8\u5728\u63D0\u4F9B\u4E00\u79CD\u7B80\u5355\u800C\u6709\u6548\u7684\u65B9\u5F0F\u6765\u8DEF\u7531\u5230 API \u5E76\u4E3A\u5B83\u4EEC\u63D0\u4F9B\u4EA4\u53C9\u5173\u6CE8\u70B9\uFF0C\u4F8B\u5982\uFF1A\u5B89\u5168\u6027\u3001\u76D1\u63A7/\u6307\u6807\u548C\u5F39\u6027</p></blockquote><p><strong>\u7279\u6027</strong></p><ul><li>\u57FA\u4E8Espringboot2.x\u548Cspring webFlux \u548CReactor\u6784\u5EFA \u54CD\u5E94\u5F0F\u5F02\u6B65\u975E\u963B\u585EIO\u6A21\u578B</li><li>\u52A8\u6001\u8DEF\u7531</li><li>\u8BF7\u6C42\u8FC7\u6EE4</li></ul><p><strong>Spring Cloud Gateway \u5E95\u5C42\u4F7F\u7528\u4E86\u9AD8\u6027\u80FD\u7684\u901A\u4FE1\u6846\u67B6Netty</strong></p><h5 id="\u8DEF\u7531\u5339\u914D\u89C4\u5219"><a class="header-anchor" href="#\u8DEF\u7531\u5339\u914D\u89C4\u5219" aria-hidden="true">#</a> \u8DEF\u7531\u5339\u914D\u89C4\u5219</h5><p>Spring Cloud Gateway \u662F\u901A\u8FC7 Spring WebFlux \u7684 HandlerMapping \u505A\u4E3A\u5E95\u5C42\u652F\u6301\u6765\u5339\u914D\u5230\u8F6C\u53D1\u8DEF\u7531\uFF0CSpring Cloud Gateway \u5185\u7F6E\u4E86\u5F88\u591A Predicates \u5DE5\u5382\uFF0C\u8FD9\u4E9B Predicates \u5DE5\u5382\u901A\u8FC7\u4E0D\u540C\u7684 HTTP \u8BF7\u6C42\u53C2\u6570\u6765\u5339\u914D\uFF0C\u591A\u4E2A Predicates \u5DE5\u5382\u53EF\u4EE5\u7EC4\u5408\u4F7F\u7528</p><p><img src="'+yn+`" alt="\u5728\u8FD9\u91CC\u63D2\u5165\u56FE\u7247\u63CF\u8FF0"></p><p>gateway\u7684\u4E3B\u8981\u529F\u80FD\u4E4B\u4E00\u662F\u8F6C\u53D1\u8BF7\u6C42\uFF0C\u8F6C\u53D1\u89C4\u5219\u7684\u5B9A\u4E49\u4E3B\u8981\u5305\u542B\u4E09\u4E2A\u90E8\u5206</p><table><thead><tr><th style="text-align:left;"></th><th style="text-align:left;"></th></tr></thead><tbody><tr><td style="text-align:left;">Route\uFF08\u8DEF\u7531\uFF09</td><td style="text-align:left;">\u8DEF\u7531\u662F\u7F51\u5173\u7684\u57FA\u672C\u5355\u5143\uFF0C\u7531ID\u3001URI\u3001\u4E00\u7EC4Predicate\u3001\u4E00\u7EC4Filter\u7EC4\u6210\uFF0C\u6839\u636EPredicate\u8FDB\u884C\u5339\u914D\u8F6C\u53D1\u3002</td></tr><tr><td style="text-align:left;">Predicate\uFF08\u8C13\u8BED\u3001\u65AD\u8A00\uFF09</td><td style="text-align:left;">\u8DEF\u7531\u8F6C\u53D1\u7684\u5224\u65AD\u6761\u4EF6\uFF0C\u76EE\u524DSpringCloud Gateway\u652F\u6301\u591A\u79CD\u65B9\u5F0F\uFF0C\u5E38\u89C1\u5982\uFF1APath\u3001Query\u3001Method\u3001Header\u7B49\uFF0C\u5199\u6CD5\u5FC5\u987B\u9075\u5FAA key=vlue\u7684\u5F62\u5F0F</td></tr><tr><td style="text-align:left;">Filter\uFF08\u8FC7\u6EE4\u5668\uFF09</td><td style="text-align:left;">\u8FC7\u6EE4\u5668\u662F\u8DEF\u7531\u8F6C\u53D1\u8BF7\u6C42\u65F6\u6240\u7ECF\u8FC7\u7684\u8FC7\u6EE4\u903B\u8F91\uFF0C\u53EF\u7528\u4E8E\u4FEE\u6539\u8BF7\u6C42\u3001\u54CD\u5E94\u5185\u5BB9</td></tr></tbody></table><p>\u5176\u4E2DRoute\u548CPredicate\u5FC5\u987B\u540C\u65F6\u7533\u660E</p><h5 id="\u5F00\u53D1\u7F51\u5173\u52A8\u6001\u8DEF\u7531"><a class="header-anchor" href="#\u5F00\u53D1\u7F51\u5173\u52A8\u6001\u8DEF\u7531" aria-hidden="true">#</a> \u5F00\u53D1\u7F51\u5173\u52A8\u6001\u8DEF\u7531</h5><p>\u65E0\u8BBA\u662F\u8BBF\u95EE\u4EC0\u4E48\u670D\u52A1\uFF0C\u90FD\u662F\u901A\u8FC7\u7F51\u5173\u8BBF\u95EE\uFF0C\u7F51\u5173\u5E2E\u6211\u4EEC\u8DEF\u7531\u5230\u5BF9\u5E94\u5FAE\u670D\u52A1</p><p>\u7F51\u5173\u914D\u7F6E\u6709\u4E24\u79CD\u65B9\u5F0F\uFF1A</p><ul><li>\u4E00\u79CD\u662F\u5FEB\u6377\u65B9\u5F0F</li><li>\u4E00\u79CD\u662F\u5B8C\u5168\u5C55\u5F00\u65B9\u5F0F</li></ul><h6 id="\u5FEB\u6377\u65B9\u5F0F\u914D\u7F6E"><a class="header-anchor" href="#\u5FEB\u6377\u65B9\u5F0F\u914D\u7F6E" aria-hidden="true">#</a> \u5FEB\u6377\u65B9\u5F0F\u914D\u7F6E</h6><ol><li>\u521B\u5EFA\u9879\u76EE\u5F15\u5165\u4F9D\u8D56</li></ol><p>\u521B\u5EFAspringboot module\uFF0C\u540D\u5B57<code>springcloud-gateway-8989</code>\uFF0C\u5176\u4E2D8989\u662F\u7AEF\u53E3</p><p>\u5F15\u5165springcloud\u7684\u76F8\u5173\u4F9D\u8D56\uFF0C\u5E76\u4FEE\u6539module\u7684springboot\u7248\u672C\u4E3A2.2.5</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring-cloud.version</span><span class="token punctuation">&gt;</span></span>Hoxton.SR6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring-cloud.version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- \u5168\u5C40\u7BA1\u7406springcloud\u7248\u672C\uFF0C \u5E76\u4E0D\u4F1A\u5F15\u5165\u5177\u4F53\u7684\u4F9D\u8D56\uFF0C\u53EA\u662F --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${spring-cloud.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6DFB\u52A0gateway\u4F9D\u8D56</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5F15\u5165gateway--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-gateway<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6DFB\u52A0consul\u7684\u76F8\u5173\u4F9D\u8D56</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5F15\u5165consul\u4F9D\u8D56--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-consul-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--consul \u5065\u5EB7\u68C0\u67E5\u7684\u4F9D\u8D56 \u5FC5\u987B\u8981\u5F15\u5165\uFF0C\u5982\u679C\u6CA1\u6709\u5F15\u5165\u8FD9\u4E2A\u4F9D\u8D56\uFF0C\u5373\u4F7F\u670D\u52A1\u53EF\u7528\uFF0C\u4F46\u662F\u5728\u670D\u52A1\u5728consul\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3\u83B7\u53D6\u4E0D\u5230\u670D\u52A1\u72B6\u6001--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u4F7F\u7528\u7F51\u5173\u4E0D\u80FD\u4F7F\u7528web\u5305</strong></p><ol start="2"><li>\u5FEB\u6377\u65B9\u5F0F\u914D\u7F6E\u8DEF\u7531</li></ol><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8989</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> springcloud<span class="token punctuation">-</span>gateway<span class="token punctuation">-</span><span class="token number">8989</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">consul</span><span class="token punctuation">:</span>
      <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8500</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">service-name</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.application.name<span class="token punctuation">}</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> user_route              <span class="token comment">## \u6307\u5B9A\u8DEF\u7531\u552F\u4E00\u6807\u8BC6</span>
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">9999</span>  <span class="token comment">## \u6307\u5B9A\u8DEF\u7531\u670D\u52A1\u7684\u5730\u5740</span>
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/user/<span class="token important">**</span>           <span class="token comment">## \u6307\u5B9A\u8DEF\u7531\u89C4\u5219</span>

        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> product_route           <span class="token comment">## \u6307\u5B9A\u8DEF\u7531\u552F\u4E00\u6807\u8BC6</span>
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">9998</span>  <span class="token comment">## \u6307\u5B9A\u8DEF\u7531\u670D\u52A1\u7684\u5730\u5740</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6DFB\u52A0\u542F\u52A8\u7C7B</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringcloudGateway8989Application</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringcloudGateway8989Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u6D4B\u8BD5\u7F51\u5173\u8DEF\u7531\u8F6C\u53D1</li></ol><p>\u6D4B\u8BD5\u901A\u8FC7\u7F51\u5173\u8BBF\u95EE\u7528\u6237\u670D\u52A1\uFF1A<code>http://localhost:8989/user/saveProduct?name=%E5%BC%A0%E4%B8%89</code></p><p><img src="`+wn+'" alt="image-20211217080245773"></p><p>\u6D4B\u8BD5\u901A\u8FC7\u7F51\u5173\u8BBF\u95EE\u5546\u54C1\u670D\u52A1\uFF1A<code>http://localhost:8989/product/break?id=1</code></p><p><img src="'+_n+`" alt="image-20211217080409622"></p><h6 id="java\u65B9\u5F0F\u914D\u7F6E"><a class="header-anchor" href="#java\u65B9\u5F0F\u914D\u7F6E" aria-hidden="true">#</a> Java\u65B9\u5F0F\u914D\u7F6E</h6><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GatewayConfig</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">RouteLocator</span> <span class="token function">customRouteLocator</span><span class="token punctuation">(</span><span class="token class-name">RouteLocatorBuilder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> builder<span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">&quot;user_route&quot;</span><span class="token punctuation">,</span> r <span class="token operator">-&gt;</span> r<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">&quot;/user/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">uri</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:9999&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">&quot;test_route&quot;</span><span class="token punctuation">,</span> r <span class="token operator">-&gt;</span> r<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">&quot;/test/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">uri</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:9999&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u67E5\u770B\u7F51\u5173\u8DEF\u7531\u89C4\u5219\u5217\u8868"><a class="header-anchor" href="#\u67E5\u770B\u7F51\u5173\u8DEF\u7531\u89C4\u5219\u5217\u8868" aria-hidden="true">#</a> \u67E5\u770B\u7F51\u5173\u8DEF\u7531\u89C4\u5219\u5217\u8868</h5><p>gateway\u63D0\u4F9B\u8DEF\u7531\u8BBF\u95EE\u89C4\u5219\u5217\u8868\u7684web\u754C\u9762\uFF0C\u4F46\u662F\u9ED8\u8BA4\u662F\u5173\u95ED\u7684\uFF0C\u5982\u679C\u60F3\u8981\u67E5\u770B\u670D\u52A1\u5668\u8DEF\u7531\u89C4\u5219\u53EF\u4EE5\u914D\u7F6E\u6587\u4EF6\u4E2D\u5F00\u542F</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">management</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpoints</span><span class="token punctuation">:</span>
    <span class="token key atrule">web</span><span class="token punctuation">:</span>
      <span class="token key atrule">exposure</span><span class="token punctuation">:</span>
        <span class="token key atrule">include</span><span class="token punctuation">:</span> <span class="token string">&quot;*&quot;</span>      <span class="token comment">## \u5F00\u542F\u6240\u6709web\u7AEF\u70B9\u66B4\u9732</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8BBF\u95EE\u8DEF\u7531\u7BA1\u7406\u5217\u8868\u5730\u5740\uFF1A<code>http://localhost:8989/actuator/gateway/routes</code></p><p><img src="`+qn+`" alt="image-20211217165445068"></p><h5 id="\u914D\u7F6E\u8DEF\u7531\u670D\u52A1\u8D1F\u8F7D\u5747\u8861"><a class="header-anchor" href="#\u914D\u7F6E\u8DEF\u7531\u670D\u52A1\u8D1F\u8F7D\u5747\u8861" aria-hidden="true">#</a> \u914D\u7F6E\u8DEF\u7531\u670D\u52A1\u8D1F\u8F7D\u5747\u8861</h5><p>\u73B0\u6709\u7684\u8DEF\u7531\u914D\u7F6E\u65B9\u5F0F\uFF0C\u90FD\u662F\u57FA\u4E8E\u670D\u52A1\u5730\u5740\u5199\u6B7B\u7684\u8DEF\u7531\u8F6C\u53D1\uFF0C\u80FD\u4E0D\u80FD\u6839\u636E\u670D\u52A1\u540D\u81E3\u8FDB\u884C\u8DEF\u7531\u8F6C\u53D1\u7684\u540C\u65F6\u5B9E\u73B0\u8D1F\u8F7D\u5747\u8861\u5462\uFF1F</p><p>\u52A8\u6001\u8DEF\u7531\u57FA\u4E8E\u8D1F\u8F7D\u5747\u8861\u8F6C\u53D1\u914D\u7F6E</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> springcloud<span class="token punctuation">-</span>gateway<span class="token punctuation">-</span><span class="token number">8989</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">consul</span><span class="token punctuation">:</span>
      <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8500</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">service-name</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.application.name<span class="token punctuation">}</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> user_route              <span class="token comment">## \u6307\u5B9A\u8DEF\u7531\u552F\u4E00\u6807\u8BC6</span>
<span class="token comment">##          uri: http://localhost:9999  ## \u6307\u5B9A\u8DEF\u7531\u670D\u52A1\u7684\u5730\u5740</span>
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//springcloud<span class="token punctuation">-</span>consul<span class="token punctuation">-</span>users<span class="token punctuation">-</span>demo<span class="token punctuation">-</span><span class="token number">9999</span> <span class="token comment">## lb:load balance</span>
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/user/<span class="token important">**</span>           <span class="token comment">## \u6307\u5B9A\u8DEF\u7531\u89C4\u5219</span>

        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> product_route           <span class="token comment">## \u6307\u5B9A\u8DEF\u7531\u552F\u4E00\u6807\u8BC6</span>
<span class="token comment">##          uri: http://localhost:9998  ## \u6307\u5B9A\u8DEF\u7531\u670D\u52A1\u7684\u5730\u5740</span>
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//springcloud<span class="token punctuation">-</span>consul<span class="token punctuation">-</span>product<span class="token punctuation">-</span>demo<span class="token punctuation">-</span><span class="token number">9998</span>
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/product/<span class="token important">**</span>        <span class="token comment">## \u6307\u5B9A\u8DEF\u7531\u89C4\u5219</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>											<span class="token comment">## \u548Clb\u914D\u5408\u5F00\u542F\u8D1F\u8F7D\u5747\u8861</span>
        <span class="token key atrule">locator</span><span class="token punctuation">:</span>
          <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>               <span class="token comment">## \u5F00\u542F\u6839\u636E\u670D\u52A1\u540D\u52A8\u6001\u83B7\u53D6\u8DEF\u7531</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u5E38\u7528\u8DEF\u7531predicate-\u65AD\u8A00-\u9A8C\u8BC1"><a class="header-anchor" href="#\u5E38\u7528\u8DEF\u7531predicate-\u65AD\u8A00-\u9A8C\u8BC1" aria-hidden="true">#</a> \u5E38\u7528\u8DEF\u7531predicate(\u65AD\u8A00\uFF0C\u9A8C\u8BC1)</h5>`,64),we=n("p",null,"\u5B98\u65B9\u7F51\u5740\uFF1Ahttps://docs.spring.io/spring-cloud-gateway/docs/2.2.10.BUILD-SNAPSHOT/reference/html/#gateway-request-predicates-factories",-1),_e=n("p",null,"\u53C2\u7167\u7F51\u5740\uFF1Ahttps://www.cnblogs.com/crazymakercircle/p/11704077.html",-1),qe=n("p",null,"Predicate \u6765\u6E90\u4E8E Java 8\uFF0C\u662F Java 8 \u4E2D\u5F15\u5165\u7684\u4E00\u4E2A\u51FD\u6570\uFF0CPredicate \u63A5\u53D7\u4E00\u4E2A\u8F93\u5165\u53C2\u6570\uFF0C\u8FD4\u56DE\u4E00\u4E2A\u5E03\u5C14\u503C\u7ED3\u679C\u3002\u8BE5\u63A5\u53E3\u5305\u542B\u591A\u79CD\u9ED8\u8BA4\u65B9\u6CD5\u6765\u5C06 Predicate \u7EC4\u5408\u6210\u5176\u4ED6\u590D\u6742\u7684\u903B\u8F91\uFF08\u6BD4\u5982\uFF1A\u4E0E\uFF0C\u6216\uFF0C\u975E\uFF09\u3002\u53EF\u4EE5\u7528\u4E8E\u63A5\u53E3\u8BF7\u6C42\u53C2\u6570\u6821\u9A8C\u3001\u5224\u65AD\u65B0\u8001\u6570\u636E\u662F\u5426\u6709\u53D8\u5316\u9700\u8981\u8FDB\u884C\u66F4\u65B0\u64CD\u4F5C",-1),xe=n("p",null,"\u5728 Spring Cloud Gateway \u4E2D Spring \u5229\u7528 Predicate \u7684\u7279\u6027\u5B9E\u73B0\u4E86\u5404\u79CD\u8DEF\u7531\u5339\u914D\u89C4\u5219\uFF0C\u6709\u901A\u8FC7 Header\u3001\u8BF7\u6C42\u53C2\u6570\u7B49\u4E0D\u540C\u7684\u6761\u4EF6\u6765\u8FDB\u884C\u4F5C\u4E3A\u6761\u4EF6\u5339\u914D\u5230\u5BF9\u5E94\u7684\u8DEF\u7531\u3002\u7F51\u4E0A\u6709\u4E00\u5F20\u56FE\u603B\u7ED3\u4E86 Spring Cloud \u5185\u7F6E\u7684\u51E0\u79CD Predicate \u7684\u5B9E\u73B0",-1),Se=n("p",null,[n("img",{src:xn,alt:"\u5728\u8FD9\u91CC\u63D2\u5165\u56FE\u7247\u63CF\u8FF0"})],-1),Ie=n("p",null,"\u8BF4\u767D\u4E86 Predicate \u5C31\u662F\u4E3A\u4E86\u5B9E\u73B0\u4E00\u7EC4\u5339\u914D\u89C4\u5219\uFF0C\u65B9\u4FBF\u8BA9\u8BF7\u6C42\u8FC7\u6765\u627E\u5230\u5BF9\u5E94\u7684 Route \u8FDB\u884C\u5904\u7406\uFF0C\u63A5\u4E0B\u6765\u6211\u4EEC\u63A5\u4E0B Spring Cloud GateWay \u5185\u7F6E\u51E0\u79CD Predicate \u7684\u4F7F\u7528",-1),je=s("\u8F6C\u53D1\u89C4\u5219\uFF08predicates\uFF09\uFF0C\u5047\u8BBE\u8F6C\u53D1uri\u90FD\u8BBE\u5B9A\u4E3A***"),Ce={href:"http://localhost:9023/",target:"_blank",rel:"noopener noreferrer"},Re=s("http://localhost:9023"),Ae=s("***"),Ee=e('<table><thead><tr><th style="text-align:left;">\u89C4\u5219</th><th style="text-align:left;">\u5B9E\u4F8B</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;">Path</td><td style="text-align:left;">- Path=/gate/<strong>,/rule/</strong></td><td style="text-align:left;">### \u5F53\u8BF7\u6C42\u7684\u8DEF\u5F84\u4E3Agate\u3001rule\u5F00\u5934\u7684\u65F6\uFF0C\u8F6C\u53D1\u5230http://localhost:9023\u670D\u52A1\u5668\u4E0A</td></tr><tr><td style="text-align:left;">Before</td><td style="text-align:left;">- Before=2017-01-20T17:42:47.789-07:00[America/Denver]</td><td style="text-align:left;">\u5728\u67D0\u4E2A\u65F6\u95F4\u4E4B\u524D\u7684\u8BF7\u6C42\u624D\u4F1A\u88AB\u8F6C\u53D1\u5230 http://localhost:9023\u670D\u52A1\u5668\u4E0A</td></tr><tr><td style="text-align:left;">After</td><td style="text-align:left;">- After=2017-01-20T17:42:47.789-07:00[America/Denver]</td><td style="text-align:left;">\u5728\u67D0\u4E2A\u65F6\u95F4\u4E4B\u540E\u7684\u8BF7\u6C42\u624D\u4F1A\u88AB\u8F6C\u53D1</td></tr><tr><td style="text-align:left;">Between</td><td style="text-align:left;">- Between=2017-01-20T17:42:47.789-07:00[America/Denver],2017-01-21T17:42:47.789-07:00[America/Denver]</td><td style="text-align:left;">\u5728\u67D0\u4E2A\u65F6\u95F4\u6BB5\u4E4B\u95F4\u7684\u624D\u4F1A\u88AB\u8F6C\u53D1</td></tr><tr><td style="text-align:left;">Cookie</td><td style="text-align:left;">- Cookie=chocolate, ch.p</td><td style="text-align:left;">\u540D\u4E3Achocolate\u7684\u8868\u5355\u6216\u8005\u6EE1\u8DB3\u6B63\u5219ch.p\u7684\u8868\u5355\u624D\u4F1A\u88AB\u5339\u914D\u5230\u8FDB\u884C\u8BF7\u6C42\u8F6C\u53D1</td></tr><tr><td style="text-align:left;">Header</td><td style="text-align:left;">- Header=X-Request-Id, \\d+</td><td style="text-align:left;">\u643A\u5E26\u53C2\u6570X-Request-Id\u6216\u8005\u6EE1\u8DB3\\d+\u7684\u8BF7\u6C42\u5934\u624D\u4F1A\u5339\u914D</td></tr><tr><td style="text-align:left;">Host</td><td style="text-align:left;">- Host=www.hd123.com</td><td style="text-align:left;">\u5F53\u4E3B\u673A\u540D\u4E3Awww.hd123.com\u7684\u65F6\u5019\u76F4\u63A5\u8F6C\u53D1\u5230http://localhost:9023\u670D\u52A1\u5668\u4E0A</td></tr><tr><td style="text-align:left;">Method</td><td style="text-align:left;">- Method=GET</td><td style="text-align:left;">\u53EA\u6709GET\u65B9\u6CD5\u624D\u4F1A\u5339\u914D\u8F6C\u53D1\u8BF7\u6C42\uFF0C\u8FD8\u53EF\u4EE5\u9650\u5B9APOST\u3001PUT\u7B49\u8BF7\u6C42\u65B9\u5F0F</td></tr></tbody></table><ul><li>Before\u3001After\u3001between\u7684\u65F6\u95F4\u53EF\u4EE5\u6839\u636E<code>ZonedDateTime</code>\u6765\u83B7\u53D6</li></ul>',2),Oe=e(`<p>\u7EC4\u5408\u4F7F\u7528</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> api<span class="token punctuation">-</span>gateway
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> gateway<span class="token punctuation">-</span>service
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//www.baidu.com
          <span class="token key atrule">order</span><span class="token punctuation">:</span> <span class="token number">0</span>
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Host=<span class="token important">**.foo.org</span>
            <span class="token punctuation">-</span> Path=/headers
            <span class="token punctuation">-</span> Method=GET
            <span class="token punctuation">-</span> Header=X<span class="token punctuation">-</span>Request<span class="token punctuation">-</span>Id<span class="token punctuation">,</span> \\d+
            <span class="token punctuation">-</span> Query=foo<span class="token punctuation">,</span> ba.
            <span class="token punctuation">-</span> Query=baz
            <span class="token punctuation">-</span> Cookie=chocolate<span class="token punctuation">,</span> ch.p
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u5E38\u7528\u7684filter\u4EE5\u53CA\u81EA\u5B9A\u4E49filter"><a class="header-anchor" href="#\u5E38\u7528\u7684filter\u4EE5\u53CA\u81EA\u5B9A\u4E49filter" aria-hidden="true">#</a> \u5E38\u7528\u7684Filter\u4EE5\u53CA\u81EA\u5B9A\u4E49Filter</h5><blockquote><p>https://docs.spring.io/spring-cloud-gateway/docs/2.2.10.BUILD-SNAPSHOT/reference/html/#gatewayfilter-factories</p><p>\u8DEF\u7531\u8FC7\u6EE4\u5668\u5141\u8BB8\u4EE5\u67D0\u79CD\u65B9\u5F0F\u4FEE\u6539\u4F20\u5165\u7684http\u8BF7\u6C42\u6216\u8005\u4F20\u51FA\u7684http\u54CD\u5E94\u3002\u8DEF\u7531\u7B5B\u9009\u7684\u4F5C\u7528\u57DF\u662F\u7279\u5B9A\u8DEF\u7531\u3002springcloud gateway\u5305\u62EC\u8BB8\u591A\u5185\u7F6E\u7684GatewayFilter\u5DE5\u5382</p><p><strong>\u4F5C\u7528</strong></p><p>\u5F53\u6211\u4EEC\u6709\u5F88\u591A\u670D\u52A1\u65F6\uFF0C\u6BD4\u5982\u4E0B\u56FE\u4E2D\u7684user-service\u3001order-service\u3001product-service\u7B49\u670D\u52A1\uFF0C\u5BA2\u6237\u7AEF\u8BF7\u6C42\u5404\u4E2A\u670D\u52A1\u7684api\u65F6\uFF0C\u6BCF\u4E2A\u670D\u52A1\u90FD\u9700\u8981\u505A\u76F8\u540C\u7684\u4E8B\u60C5\uFF0C\u6BD4\u5982\u9274\u6743\u3001\u9650\u6D41\u3001\u65E5\u5FD7\u8F93\u51FA\u7B49</p><p><img src="`+Sn+'" alt="image-20211217202827524"></p><p><img src="'+In+'" alt="image-20211217202841412"></p><p><strong>\u8FC7\u6EE4\u89C4\u5219</strong></p><table><thead><tr><th style="text-align:left;">\u8FC7\u6EE4\u89C4\u5219</th><th style="text-align:left;">\u5B9E\u4F8B</th><th style="text-align:left;">\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;">PrefixPath</td><td style="text-align:left;">- PrefixPath=/app</td><td style="text-align:left;">\u5728\u8BF7\u6C42\u8DEF\u5F84\u524D\u52A0\u4E0Aapp\uFF0C\u5BF9\u8BF7\u6C42\u7684\u8DEF\u5F84\u6DFB\u52A0\u524D\u7F00/app</td></tr><tr><td style="text-align:left;">RewritePath</td><td style="text-align:left;">- RewritePath=/test, /app/test</td><td style="text-align:left;">\u8BBF\u95EElocalhost:9022/test,\u8BF7\u6C42\u4F1A\u8F6C\u53D1\u5230localhost:8001/app/test</td></tr><tr><td style="text-align:left;">SetPath</td><td style="text-align:left;">SetPath=/app/{path}</td><td style="text-align:left;">\u901A\u8FC7\u6A21\u677F\u8BBE\u7F6E\u8DEF\u5F84\uFF0C\u8F6C\u53D1\u7684\u89C4\u5219\u65F6\u4F1A\u5728\u8DEF\u5F84\u524D\u589E\u52A0app\uFF0C{path}\u8868\u793A\u539F\u8BF7\u6C42\u8DEF\u5F84</td></tr><tr><td style="text-align:left;">RedirectTo</td><td style="text-align:left;"></td><td style="text-align:left;">\u91CD\u5B9A\u5411</td></tr><tr><td style="text-align:left;">RemoveRequestHeader</td><td style="text-align:left;"></td><td style="text-align:left;">\u53BB\u6389\u67D0\u4E2A\u8BF7\u6C42\u5934\u4FE1\u606F</td></tr></tbody></table><p>\u6CE8\uFF1A\u5F53\u914D\u7F6E\u591A\u4E2Afilter\u65F6\uFF0C\u4F18\u5148\u5B9A\u4E49\u7684\u4F1A\u88AB\u8C03\u7528\uFF0C\u5269\u4F59\u7684filter\u5C06\u4E0D\u4F1A\u751F\u6548</p></blockquote><h6 id="\u4F7F\u7528\u5185\u7F6E\u7684\u8FC7\u6EE4\u5668"><a class="header-anchor" href="#\u4F7F\u7528\u5185\u7F6E\u7684\u8FC7\u6EE4\u5668" aria-hidden="true">#</a> \u4F7F\u7528\u5185\u7F6E\u7684\u8FC7\u6EE4\u5668</h6><p><img src="'+jn+`" alt="image-20211217203707737"></p><p>\u4F7F\u7528</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> springcloud<span class="token punctuation">-</span>gateway<span class="token punctuation">-</span><span class="token number">8989</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">consul</span><span class="token punctuation">:</span>
      <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8500</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">service-name</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.application.name<span class="token punctuation">}</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> product_route           <span class="token comment">## \u6307\u5B9A\u8DEF\u7531\u552F\u4E00\u6807\u8BC6</span>
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">9998</span>  <span class="token comment">## \u6307\u5B9A\u8DEF\u7531\u670D\u52A1\u7684\u5730\u5740</span>
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/product/<span class="token important">**</span>        <span class="token comment">## \u6307\u5B9A\u8DEF\u7531\u89C4\u5219</span>
          <span class="token key atrule">filters</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> AddRequestParameter=id<span class="token punctuation">,</span><span class="token number">34</span>
            <span class="token punctuation">-</span> AddResponseHeader=username<span class="token punctuation">,</span>zhangsan
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="\u4F7F\u7528\u81EA\u5B9A\u4E49filter"><a class="header-anchor" href="#\u4F7F\u7528\u81EA\u5B9A\u4E49filter" aria-hidden="true">#</a> \u4F7F\u7528\u81EA\u5B9A\u4E49filter</h6><p>\u548Cspringmvc\u4E2D\u7684\u8FC7\u6EE4\u5668\u5DEE\u4E0D\u591A\uFF0C\u9700\u8981\u591A\u5B9E\u73B0\u4E00\u4E2A\u63A5\u53E3<code>Ordered</code>\uFF0C\u6267\u884C\u8FD9\u4E2A\u8FC7\u6EE4\u5668\u7684\u6267\u884C\u4F18\u5148\u7EA7</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u81EA\u5B9A\u4E49\u8FC7\u6EE4\u5668
 */</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomGlobalFilter</span> <span class="token keyword">implements</span> <span class="token class-name">GlobalFilter</span><span class="token punctuation">,</span> <span class="token class-name">Ordered</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * \u81EA\u5B9A\u8FC7\u6EE4\uFF1A\u5047\u8BBE\u4F20\u9012\u53C2\u6570\u4E2D\u542B\u6709username\u8FD9\u4E2A\u5C5E\u6027
     *
     * <span class="token keyword">@param</span> <span class="token parameter">exchange</span> \u6DB5\u76D6\u4E86request \u548C response 
     * <span class="token keyword">@param</span> <span class="token parameter">chain</span> \u5C31\u662F\u8FC7\u6EE4\u5668\u7684chain
     * <span class="token keyword">@return</span> \u5176\u5B9E\u5C31\u662FVoid \u8FD4\u56DE\u503C\u6CA1\u6709\u5B9E\u9645\u7684\u5177\u4F53\u610F\u4E49
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">ServerWebExchange</span> exchange<span class="token punctuation">,</span> <span class="token class-name">GatewayFilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\u8FDB\u5165\u81EA\u5B9A\u4E49filter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>exchange<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getQueryParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\u7528\u6237\u8EAB\u4EFD\u4FE1\u606F\u5408\u6CD5\uFF0C\u653E\u884C\u8BF7\u6C42\u7EE7\u7EED\u6267\u884C&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> chain<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>exchange<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u7EE7\u7EED\u6267\u884C\u4E0B\u4E00\u4E2Afilter</span>
        <span class="token punctuation">}</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\u975E\u6CD5\u7528\u6237\uFF0C\u62D2\u63A5\u8BBF\u95EE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> exchange<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setComplete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * filter \u6267\u884C\u4F18\u5148\u7EA7
     *
     * <span class="token keyword">@return</span> \u6570\u5B57\u8D8A\u5C0Ffilter\u8D8A\u5148\u6267\u884C -1 \u6700\u5148\u6267\u884C
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="springcloud-gateway-\u9AD8\u7EA7\u529F\u80FD"><a class="header-anchor" href="#springcloud-gateway-\u9AD8\u7EA7\u529F\u80FD" aria-hidden="true">#</a> Springcloud gateway \u9AD8\u7EA7\u529F\u80FD</h4><blockquote><p>\u53C2\u8003\uFF1Ahttps://blog.csdn.net/zhangkaixuan456/article/details/108644949</p></blockquote><h5 id="\u5B9E\u73B0\u7194\u65AD\u964D\u7EA7"><a class="header-anchor" href="#\u5B9E\u73B0\u7194\u65AD\u964D\u7EA7" aria-hidden="true">#</a> \u5B9E\u73B0\u7194\u65AD\u964D\u7EA7</h5><blockquote><p>\u4E3A\u4EC0\u4E48\u8981\u5B9E\u73B0\u7194\u65AD\u964D\u7EA7\uFF1F</p><p>\u5728\u5206\u5E03\u5F0F\u7CFB\u7EDF\u4E2D\uFF0C\u7F51\u5173\u4F5C\u4E3A\u6D41\u91CF\u7684\u5165\u53E3\uFF0C\u56E0\u6B64\u4F1A\u6709\u5927\u91CF\u7684\u8BF7\u6C42\u8FDB\u5165\u7F51\u5173\uFF0C\u5411\u5176\u4ED6\u670D\u52A1\u53D1\u8D77\u8C03\u7528\uFF0C\u5176\u4ED6\u670D\u52A1\u4E0D\u53EF\u907F\u514D\u7684\u4F1A\u51FA\u73B0\u8C03\u7528\u5931\u8D25\uFF08\u8D85\u65F6\u3001\u5F02\u5E38\uFF09\uFF0C\u5931\u8D25\u65F6\u4E0D\u80FD\u8BA9\u8BF7\u6C42\u5806\u79EF\u5728\u7F51\u5173\u4E0A\uFF0C\u9700\u8981\u5FEB\u901F\u5931\u8D25\u5E76\u8FD4\u56DE\u7ED9\u5BA2\u6237\u7AEF\uFF0C\u60F3\u8981\u5B9E\u73B0\u8FD9\u4E2A\u8981\u6C42\uFF0C\u5C31\u5FC5\u987B\u5728\u7F51\u5173\u4E0A\u505A\u7194\u65AD\u3001\u964D\u7EA7\u64CD\u4F5C</p><p>\u4E3A\u4EC0\u4E48\u5728\u7F51\u5173\u4E0A\u8BF7\u6C42\u5931\u8D25\u9700\u8981\u5FEB\u901F\u8FD4\u56DE\u7ED9\u5BA2\u6237\u7AEF\uFF1F</p><p>\u56E0\u4E3A\u5F53\u4E00\u4E2A\u5BA2\u6237\u7AEF\u8BF7\u6C42\u53D1\u751F\u6545\u969C\u7684\u65F6\u5019\uFF0C\u8FD9\u4E2A\u8BF7\u6C42\u4F1A\u4E00\u76F4\u5806\u79EF\u5728\u7F51\u5173\u4E0A\uFF0C\u5F53\u7136\u53EA\u6709\u4E00\u4E2A\u8FD9\u79CD\u8BF7\u6C42\uFF0C\u7F51\u5173\u80AF\u5B9A\u6CA1\u6709\u95EE\u9898\uFF08\u5982\u679C\u4E00\u4E2A\u8BF7\u6C42\u5C31\u80FD\u9020\u6210\u6574\u4E2A\u7CFB\u7EDF\u762B\u75EA\uFF0C\u90A3\u8FD9\u4E2A\u7CFB\u7EDF\u53EF\u4EE5\u4E0B\u67B6\u4E86\uFF09\uFF0C\u4F46\u662F\u7F51\u5173\u4E0A\u5806\u79EF\u591A\u4E86\u5C31\u4F1A\u7ED9\u7F51\u5173\u4E43\u81F3\u6574\u4E2A\u670D\u52A1\u90FD\u9020\u6210\u5DE8\u5927\u7684\u538B\u529B\uFF0C\u751A\u81F3\u6574\u4E2A\u670D\u52A1\u5B95\u6389\u3002\u56E0\u6B64\u8981\u5BF9\u4E00\u4E9B\u670D\u52A1\u548C\u9875\u9762\u8FDB\u884C\u6709\u7B56\u7565\u7684\u964D\u7EA7\uFF0C\u4EE5\u6B64\u7F13\u89E3\u670D\u52A1\u5668\u8D44\u6E90\u7684\u7684\u538B\u529B\uFF0C\u4EE5\u4FDD\u8BC1\u6838\u5FC3\u4E1A\u52A1\u7684\u6B63\u5E38\u8FD0\u884C\uFF0C\u540C\u65F6\u4E5F\u4FDD\u6301\u4E86\u5BA2\u6237\u548C\u5927\u90E8\u5206\u5BA2\u6237\u7684\u5F97\u5230\u6B63\u786E\u7684\u76F8\u5E94\uFF0C\u6240\u4EE5\u9700\u8981\u7F51\u5173\u4E0A\u8BF7\u6C42\u5931\u8D25\u9700\u8981\u5FEB\u901F\u8FD4\u56DE\u7ED9\u5BA2\u6237\u7AEF</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
 <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
   <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
     <span class="token key atrule">routes</span><span class="token punctuation">:</span>
       <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> rateLimit_route
         <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">8000</span>
         <span class="token key atrule">order</span><span class="token punctuation">:</span> <span class="token number">0</span>
         <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
           <span class="token punctuation">-</span> Path=/test/<span class="token important">**</span>
         <span class="token key atrule">filters</span><span class="token punctuation">:</span>
           <span class="token punctuation">-</span> StripPrefix=1
           <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Hystrix
             <span class="token key atrule">args</span><span class="token punctuation">:</span>
               <span class="token key atrule">name</span><span class="token punctuation">:</span> fallbackCmdA
               <span class="token key atrule">fallbackUri</span><span class="token punctuation">:</span> forward<span class="token punctuation">:</span>/fallbackA

<span class="token key atrule">hystrix.command.fallbackCmdA.execution.isolation.thread.timeoutInMilliseconds</span><span class="token punctuation">:</span> <span class="token number">5000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u91CC\u7684\u914D\u7F6E\uFF0C\u4F7F\u7528\u4E86\u4E24\u4E2A\u8FC7\u6EE4\u5668\uFF1A</p><ol><li>\u8FC7\u6EE4\u5668StripPrefix\uFF0C\u4F5C\u7528\u662F\u53BB\u6389\u8BF7\u6C42\u8DEF\u5F84\u7684\u6700\u524D\u9762n\u4E2A\u90E8\u5206\u622A\u53D6\u6389\u3002</li></ol><p>StripPrefix=1\u5C31\u4EE3\u8868\u622A\u53D6\u8DEF\u5F84\u7684\u4E2A\u6570\u4E3A1\uFF0C\u6BD4\u5982\u524D\u7AEF\u8FC7\u6765\u8BF7\u6C42/test/good/1/view\uFF0C\u5339\u914D\u6210\u529F\u540E\uFF0C\u8DEF\u7531\u5230\u540E\u7AEF\u7684\u8BF7\u6C42\u8DEF\u5F84\u5C31\u4F1A\u53D8\u6210<code>http://localhost:8888/good/1/view</code></p><ol start="2"><li>\u8FC7\u6EE4\u5668Hystrix\uFF0C\u4F5C\u7528\u662F\u901A\u8FC7Hystrix\u8FDB\u884C\u7194\u65AD\u964D\u7EA7</li></ol><p>\u5F53\u4E0A\u6E38\u7684\u8BF7\u6C42\uFF0C\u8FDB\u5165\u4E86Hystrix\u7194\u65AD\u964D\u7EA7\u673A\u5236\u65F6\uFF0C\u5C31\u4F1A\u8C03\u7528fallbackUri\u914D\u7F6E\u7684\u964D\u7EA7\u5730\u5740\u3002\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u8FD8\u9700\u8981\u5355\u72EC\u8BBE\u7F6EHystrix\u7684commandKey\u7684\u8D85\u65F6\u65F6\u95F4</p><p>fallbackUri\u914D\u7F6E\u7684\u964D\u7EA7\u5730\u5740\u7684\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>gateway<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>gateway<span class="token punctuation">.</span>response<span class="token punctuation">.</span></span><span class="token class-name">Response</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FallbackController</span> <span class="token punctuation">{</span>

   <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/fallbackA&quot;</span><span class="token punctuation">)</span>
   <span class="token keyword">public</span> <span class="token class-name">Response</span> <span class="token function">fallbackA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token class-name">Response</span> response <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       response<span class="token punctuation">.</span><span class="token function">setCode</span><span class="token punctuation">(</span><span class="token string">&quot;100&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       response<span class="token punctuation">.</span><span class="token function">setMessage</span><span class="token punctuation">(</span><span class="token string">&quot;\u670D\u52A1\u6682\u65F6\u4E0D\u53EF\u7528&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">return</span> response<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h5 id="\u5206\u5E03\u5F0F\u9650\u6D41"><a class="header-anchor" href="#\u5206\u5E03\u5F0F\u9650\u6D41" aria-hidden="true">#</a> \u5206\u5E03\u5F0F\u9650\u6D41</h5><p><code>\u5F85\u8865\u5145</code></p><h4 id="\u7F51\u5173\u914D\u7F6E\u8DE8\u57DF"><a class="header-anchor" href="#\u7F51\u5173\u914D\u7F6E\u8DE8\u57DF" aria-hidden="true">#</a> \u7F51\u5173\u914D\u7F6E\u8DE8\u57DF</h4><h5 id="\u901A\u8FC7\u914D\u7F6E"><a class="header-anchor" href="#\u901A\u8FC7\u914D\u7F6E" aria-hidden="true">#</a> \u901A\u8FC7\u914D\u7F6E</h5><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">locator</span><span class="token punctuation">:</span>
          <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">lowerCaseServiceId</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token comment">## \u8DE8\u57DF</span>
      <span class="token key atrule">globalcors</span><span class="token punctuation">:</span>
        <span class="token key atrule">corsConfigurations</span><span class="token punctuation">:</span>
          <span class="token key atrule">&#39;[/**]&#39;</span><span class="token punctuation">:</span>
            <span class="token key atrule">allowedHeaders</span><span class="token punctuation">:</span> <span class="token string">&quot;*&quot;</span>
            <span class="token key atrule">allowedOrigins</span><span class="token punctuation">:</span> <span class="token string">&quot;*&quot;</span>
            <span class="token key atrule">allowedMethods</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> GET
            <span class="token punctuation">-</span> POST
            <span class="token punctuation">-</span> DELETE
            <span class="token punctuation">-</span> PUT
            <span class="token punctuation">-</span> OPTION
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u901A\u8FC7\u4EE3\u7801"><a class="header-anchor" href="#\u901A\u8FC7\u4EE3\u7801" aria-hidden="true">#</a> \u901A\u8FC7\u4EE3\u7801</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">CorsWebFilter</span> <span class="token function">corsFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">CorsConfiguration</span> config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CorsConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// cookie\u8DE8\u57DF</span>
  config<span class="token punctuation">.</span><span class="token function">setAllowCredentials</span><span class="token punctuation">(</span><span class="token class-name">Boolean</span><span class="token punctuation">.</span>TRUE<span class="token punctuation">)</span><span class="token punctuation">;</span>
  config<span class="token punctuation">.</span><span class="token function">addAllowedMethod</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  config<span class="token punctuation">.</span><span class="token function">addAllowedOrigin</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  config<span class="token punctuation">.</span><span class="token function">addAllowedHeader</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// \u914D\u7F6E\u524D\u7AEFjs\u5141\u8BB8\u8BBF\u95EE\u7684\u81EA\u5B9A\u4E49\u54CD\u5E94\u5934</span>
  config<span class="token punctuation">.</span><span class="token function">addExposedHeader</span><span class="token punctuation">(</span><span class="token string">&quot;setToken&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token class-name">UrlBasedCorsConfigurationSource</span> source <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UrlBasedCorsConfigurationSource</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PathPatternParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  source<span class="token punctuation">.</span><span class="token function">registerCorsConfiguration</span><span class="token punctuation">(</span><span class="token string">&quot;/**&quot;</span><span class="token punctuation">,</span> config<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CorsWebFilter</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="config\u7EC4\u4EF6\u4F7F\u7528"><a class="header-anchor" href="#config\u7EC4\u4EF6\u4F7F\u7528" aria-hidden="true">#</a> config\u7EC4\u4EF6\u4F7F\u7528</h2><h3 id="\u4EC0\u4E48\u662Fconfig"><a class="header-anchor" href="#\u4EC0\u4E48\u662Fconfig" aria-hidden="true">#</a> \u4EC0\u4E48\u662FConfig</h3><blockquote><p>\u5B98\u65B9\u7F51\u5740\uFF1Ahttps://spring.io/projects/spring-cloud-config</p><p>Spring Cloud Config \u4E3A\u5206\u5E03\u5F0F\u7CFB\u7EDF\u4E2D\u7684\u5916\u90E8\u5316\u914D\u7F6E\u63D0\u4F9B\u670D\u52A1\u5668\u7AEF\u548C\u5BA2\u6237\u7AEF\u652F\u6301</p><p>Config\u914D\u7F6E\uFF0C\u53C8\u79F0\u4E3A\u7EDF\u4E00\u914D\u7F6E\u4E2D\u5FC3\uFF0C\u987E\u540D\u601D\u4E49\uFF0C\u5C31\u662F\u5C06\u914D\u7F6E\u7EDF\u4E00\u7BA1\u7406\uFF0C\u914D\u7F6E\u7EDF\u4E00\u7BA1\u7406\u7684\u597D\u5904\u662F\u5728\u65E5\u540E\u5927\u89C4\u6A21\u96C6\u7FA4\u90E8\u7F72\u670D\u52A1\u5E94\u7528\u65F6\u76F8\u540C\u7684\u670D\u52A1\u914D\u7F6E\u4E00\u81F4\uFF0C\u65E5\u540E\u5728\u4FEE\u6539\u914D\u7F6E\u53EA\u9700\u8981\u7EDF\u4E00\u4FEE\u6539\u5168\u90E8\u540C\u6B65\uFF0C\u4E0D\u9700\u8981\u4E00\u4E2A\u4E00\u4E2A\u670D\u52A1\u624B\u52A8\u7EF4\u62A4</p></blockquote><p>\u7EDF\u4E00\u914D\u7F6E\u4E2D\u5FC3\u7EC4\u4EF7\u6D41\u7A0B\u56FE</p><p><img src="`+Cn+`" alt="image-20211217211453217"></p><h3 id="config-server\u5F00\u53D1"><a class="header-anchor" href="#config-server\u5F00\u53D1" aria-hidden="true">#</a> Config Server\u5F00\u53D1</h3><h4 id="\u521B\u5EFA\u65B0\u5DE5\u7A0B-\u5E76\u5F15\u5165\u4F9D\u8D56"><a class="header-anchor" href="#\u521B\u5EFA\u65B0\u5DE5\u7A0B-\u5E76\u5F15\u5165\u4F9D\u8D56" aria-hidden="true">#</a> \u521B\u5EFA\u65B0\u5DE5\u7A0B\uFF0C\u5E76\u5F15\u5165\u4F9D\u8D56</h4><p>\u4FEE\u6539\u7248\u672C\u4E3A2.2.5\u5E76\u6DFB\u52A0spingcloud\u7684\u5168\u5C40\u4F9D\u8D56</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring-cloud.version</span><span class="token punctuation">&gt;</span></span>Hoxton.SR6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring-cloud.version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- \u5168\u5C40\u7BA1\u7406springcloud\u7248\u672C\uFF0C \u5E76\u4E0D\u4F1A\u5F15\u5165\u5177\u4F53\u7684\u4F9D\u8D56\uFF0C\u53EA\u662F --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${spring-cloud.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6DFB\u52A0consul\u76F8\u5173\u4F9D\u8D56</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5F15\u5165consul\u4F9D\u8D56--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-consul-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--consul \u5065\u5EB7\u68C0\u67E5\u7684\u4F9D\u8D56 \u5FC5\u987B\u8981\u5F15\u5165\uFF0C\u5982\u679C\u6CA1\u6709\u5F15\u5165\u8FD9\u4E2A\u4F9D\u8D56\uFF0C\u5373\u4F7F\u670D\u52A1\u53EF\u7528\uFF0C\u4F46\u662F\u5728\u670D\u52A1\u5728consul\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3\u83B7\u53D6\u4E0D\u5230\u670D\u52A1\u72B6\u6001--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6DFB\u52A0config\u4F9D\u8D56</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5F15\u5165\u7EDF\u4E00\u914D\u7F6E\u4E2D\u5FC3--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-config-server<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u5F00\u542F\u7EDF\u4E00\u914D\u7F6E\u4E2D\u5FC3\u670D\u52A1"><a class="header-anchor" href="#\u5F00\u542F\u7EDF\u4E00\u914D\u7F6E\u4E2D\u5FC3\u670D\u52A1" aria-hidden="true">#</a> \u5F00\u542F\u7EDF\u4E00\u914D\u7F6E\u4E2D\u5FC3\u670D\u52A1</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token annotation punctuation">@EnableConfigServer</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringcloudConfigServer7878Application</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringcloudConfigServer7878Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="github\u521B\u5EFA\u4E00\u4E2A\u4ED3\u5E93"><a class="header-anchor" href="#github\u521B\u5EFA\u4E00\u4E2A\u4ED3\u5E93" aria-hidden="true">#</a> github\u521B\u5EFA\u4E00\u4E2A\u4ED3\u5E93</h4><p><img src="`+Rn+`" alt="image-20211217235958779"></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">##</span> \u521B\u5EFA\u4E4B\u540E\u7684\u5206\u652F\u662Fmain\uFF0C\u5982\u679C\u4E0D\u60F3\u4FEE\u6539config server\u7684\u83B7\u53D6\u548C\u63D0\u4EA4\u7684\u5206\u652F\uFF0C\u9700\u8981\u4FEE\u6539\u4E3Amaster(springcloud config\u9ED8\u8BA4\u662Fmaster)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u590D\u5236\u4ED3\u5E93http\u5730\u5740\uFF1A<code>https://github.com/aldencarter/springcloud-config-server-7878.git</code></p><h4 id="\u914D\u7F6E\u8FDC\u7A0B\u4ED3\u5E93"><a class="header-anchor" href="#\u914D\u7F6E\u8FDC\u7A0B\u4ED3\u5E93" aria-hidden="true">#</a> \u914D\u7F6E\u8FDC\u7A0B\u4ED3\u5E93</h4><p>\u5728\u540C\u4E00\u914D\u7F6E\u4E2D\u5FC3\u670D\u52A1\u4E2D\u4FEE\u6539\u914D\u7F6E\u6587\u4EF6\u6307\u5411\u8FDC\u7A0B\u4ED3\u5E93</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> springcloud<span class="token punctuation">-</span>config<span class="token punctuation">-</span>server<span class="token punctuation">-</span><span class="token number">7878</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">consul</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">service-name</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.application.name<span class="token punctuation">}</span>
      <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8500</span>
    <span class="token key atrule">config</span><span class="token punctuation">:</span>
      <span class="token key atrule">server</span><span class="token punctuation">:</span>
        <span class="token key atrule">git</span><span class="token punctuation">:</span>
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com/aldencarter/springcloud<span class="token punctuation">-</span>config<span class="token punctuation">-</span>server<span class="token punctuation">-</span>7878.git
<span class="token comment">##          username:      ## \u79C1\u6709\u4ED3\u5E93\u8BBF\u95EE\u7528\u6237\u540D</span>
<span class="token comment">##          password:      ## \u79C1\u6709\u4ED3\u5E93\u8BBF\u95EE\u5BC6\u7801</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u542F\u52A8\u914D\u7F6E\u4E2D\u5FC3\u670D\u52A1"><a class="header-anchor" href="#\u542F\u52A8\u914D\u7F6E\u4E2D\u5FC3\u670D\u52A1" aria-hidden="true">#</a> \u542F\u52A8\u914D\u7F6E\u4E2D\u5FC3\u670D\u52A1</h4><p><img src="`+An+'" alt="image-20211217225711837"></p><h4 id="\u6D4B\u8BD5\u62C9\u53D6\u8FDC\u7AEF\u914D\u7F6E"><a class="header-anchor" href="#\u6D4B\u8BD5\u62C9\u53D6\u8FDC\u7AEF\u914D\u7F6E" aria-hidden="true">#</a> \u6D4B\u8BD5\u62C9\u53D6\u8FDC\u7AEF\u914D\u7F6E</h4><p>\u5728github\u521B\u5EFA\u914D\u7F6E\u6587\u4EF6<code>order.properties</code>\uFF0C\u4E09\u79CD\u6587\u4EF6\u7C7B\u578B</p><ul><li><code>http://localhost:7878/order-xxx.properties</code></li><li><code>http://localhost:7878/order-xxx.json</code></li><li><code>http://localhost:7878/order-xxx.yaml</code></li></ul><p>\u4E09\u79CD\u914D\u7F6E\u65B9\u5F0F\uFF1A</p><ul><li>\u751F\u4EA7\u73AF\u5883\uFF1A<code>order-prod.yaml</code></li><li>\u5F00\u53D1\u73AF\u5883\uFF1A<code>order-dev.yaml</code></li><li>\u6D4B\u8BD5\u73AF\u5883\uFF1A<code>order-test.yaml</code></li></ul><p>\u9996\u5148\u6211\u4EEC\u5148\u8981\u6D4B\u8BD5server\u7AEF\u662F\u5426\u53EF\u4EE5\u8BFB\u53D6\u5230github\u4E0A\u9762\u7684\u914D\u7F6E\u4FE1\u606F\uFF0C\u76F4\u63A5\u8BBF\u95EE\uFF1A<code>http://localhost:7878/order/dev</code> \uFF0C\u8FD4\u56DE\u7684\u4FE1\u606F\u5982\u4E0B</p><p><img src="'+En+'" alt="image-20211218000648951"></p><p>\u4E0A\u8FF0\u7684\u8FD4\u56DE\u7684\u4FE1\u606F\u5305\u542B\u4E86\u914D\u7F6E\u6587\u4EF6\u7684\u4F4D\u7F6E\u3001\u7248\u672C\u3001\u914D\u7F6E\u6587\u4EF6\u7684\u540D\u79F0\u4EE5\u53CA\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684\u5177\u4F53\u5185\u5BB9\uFF0C\u8BF4\u660Eserver\u7AEF\u5DF2\u7ECF\u6210\u529F\u83B7\u53D6\u4E86git\u4ED3\u5E93\u7684\u914D\u7F6E\u4FE1\u606F</p><p>\u5982\u679C\u76F4\u63A5\u67E5\u770B\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684\u914D\u7F6E\u4FE1\u606F\u53EF\u8BBF\u95EE\uFF1A<code>http://localhost:8770/order-dev.properties</code>\uFF0C\u8FD4\u56DE\uFF1A</p><p><img src="'+On+`" alt="image-20211218000820608"></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>\u5F53\u6211\u4EEC\u53EA\u662F\u521B\u5EFA\u4E86\u4E00\u4E2A\u516C\u5171\u7684\u914D\u7F6E\u6587\u4EF6(\u4E5F\u5C31\u662F-\u540E\u9762\u4EC0\u4E48\u90FD\u4E0D\u52A0)\u7684\u60C5\u51B5\u4E0B\uFF0C\u6211\u4EEC\u5BFB\u627E\u4E0D\u540C\u73AF\u5883\u4E0B\u7684\u914D\u7F6E\u6587\u4EF6\u7684\u65F6\u5019\uFF0C\u5982\u679C\u627E\u4E0D\u5230\uFF0C\u4F1A\u8FD4\u56DE\u516C\u5171\u914D\u7F6E
\u5982\u679C\u80FD\u627E\u5230\u5BF9\u5E94\u73AF\u5883\u7684\u914D\u7F6E\uFF0C\u5C31\u4F1A\u628A\u516C\u5171\u914D\u7F6E\u548C\u5BF9\u5E94\u73AF\u5883\u7684\u914D\u7F6E\u53E0\u52A0\u6574\u5408\u8FD4\u56DE
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u62C9\u53D6\u8FDC\u7AEF\u914D\u7F6E\u89C4\u5219"><a class="header-anchor" href="#\u62C9\u53D6\u8FDC\u7AEF\u914D\u7F6E\u89C4\u5219" aria-hidden="true">#</a> \u62C9\u53D6\u8FDC\u7AEF\u914D\u7F6E\u89C4\u5219</h4><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">-</span> label/name-profile.yaml
	label		\u4EE3\u8868\u53BB\u54EA\u4E2A\u5206\u652F\u83B7\u53D6\uFF0C\u9ED8\u8BA4\u4F7F\u7528master\u5206\u652F
	name		\u4EE3\u8868\u8BFB\u53D6\u54EA\u4E2A\u5177\u4F53\u7684\u914D\u7F6E\u6587\u4EF6\u540D\u79F0
	profile	\u4EE3\u8868\u8BFB\u53D6\u914D\u7F6E\u6587\u4EF6\u73AF\u5883
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+Mn+`" alt="image-20211218002557938"></p><h4 id="\u67E5\u770B\u62C9\u53D6\u914D\u7F6E\u8BE6\u7EC6\u4FE1\u606F"><a class="header-anchor" href="#\u67E5\u770B\u62C9\u53D6\u914D\u7F6E\u8BE6\u7EC6\u4FE1\u606F" aria-hidden="true">#</a> \u67E5\u770B\u62C9\u53D6\u914D\u7F6E\u8BE6\u7EC6\u4FE1\u606F</h4><div class="language-http ext-http line-numbers-mode"><pre class="language-http"><code><span class="token header"><span class="token header-name keyword">http</span><span class="token punctuation">:</span><span class="token header-value">//localhost:7878/client/dev</span></span>
[client:\u4EE3\u8868\u8FDC\u7AEF\u914D\u7F6E\u540D\u79F0]
[dev:\u4EE3\u8868\u8FDC\u7A0B\u914D\u7F6E\u7684\u73AF\u5883]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u6307\u5B9A\u5206\u652F\u548C\u672C\u5730\u4ED3\u5E93\u4F4D\u7F6E"><a class="header-anchor" href="#\u6307\u5B9A\u5206\u652F\u548C\u672C\u5730\u4ED3\u5E93\u4F4D\u7F6E" aria-hidden="true">#</a> \u6307\u5B9A\u5206\u652F\u548C\u672C\u5730\u4ED3\u5E93\u4F4D\u7F6E</h4><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">spring.cloud.config.server.git.basedir</span><span class="token punctuation">=</span><span class="token value attr-value">/localrepo ## \u6307\u5B9A\u672C\u5730\u4ED3\u5E93\u4F4D\u7F6E\uFF0C\u4E00\u5B9A\u8981\u662F\u4E00\u4E2A\u7A7A\u76EE\u5F55\uFF0C\u5728\u9996\u6B21\u4F1A\u5C06\u8BE5\u76EE\u5F55\u6E05\u7A7A</span>
<span class="token key attr-name">spring.cloud.config.server.git.default-label</span><span class="token punctuation">=</span><span class="token value attr-value">master	## \u6307\u5B9A\u5206\u652F\uFF0C\u65B0\u7248\u672C\u7684github\u521B\u5EFA\u7684\u5206\u652F\u662Fmain\uFF0C\u800Cspringcloud config\u9ED8\u8BA4\u662Fmaster\u8981\u6CE8\u610F\uFF0C\u8981\u4E0D\u7136\u83B7\u53D6\u4E0D\u5230\u914D\u7F6E</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="config-client\u5F00\u53D1"><a class="header-anchor" href="#config-client\u5F00\u53D1" aria-hidden="true">#</a> Config Client\u5F00\u53D1</h3><p>\u672C\u6765\u5E94\u8BE5\u5728\u524D\u9762\u7684\u7528\u6237\u670D\u52A1\u6216\u8005\u5546\u54C1\u670D\u52A1\u4E2D\u914D\u7F6E\u7684\uFF0C\u4F46\u662F\u73B0\u5728\u6D4B\u8BD5\u4E3A\u4E86\u8026\u5408\u4E4B\u524D\u7684\u9879\u76EE\uFF0C\u521B\u5EFA\u4E00\u4E2A\u65B0module\uFF0C\u5176\u5B9E\u662F\u4E4B\u524D\u7684\u9879\u76EE\u914D\u7F6E\u4E1C\u897F\u592A\u591A\u4E86\uFF0C\u592A\u4E71\u4E86</p><h4 id="\u9879\u76EE\u521D\u59CB\u5316"><a class="header-anchor" href="#\u9879\u76EE\u521D\u59CB\u5316" aria-hidden="true">#</a> \u9879\u76EE\u521D\u59CB\u5316</h4><p>\u4FEE\u6539\u9879\u76EE\u7248\u672C\u4E3A2.2.5\uFF0C\u5E76\u5F15\u5165spring cloud\u73AF\u5883\u4F9D\u8D56</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring-cloud.version</span><span class="token punctuation">&gt;</span></span>Hoxton.SR6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring-cloud.version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- \u5168\u5C40\u7BA1\u7406springcloud\u7248\u672C\uFF0C \u5E76\u4E0D\u4F1A\u5F15\u5165\u5177\u4F53\u7684\u4F9D\u8D56\uFF0C\u53EA\u662F --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${spring-cloud.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6DFB\u52A0consul\u76F8\u5173\u7684\u4F9D\u8D56</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5F15\u5165consul\u4F9D\u8D56--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-consul-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--consul \u5065\u5EB7\u68C0\u67E5\u7684\u4F9D\u8D56 \u5FC5\u987B\u8981\u5F15\u5165\uFF0C\u5982\u679C\u6CA1\u6709\u5F15\u5165\u8FD9\u4E2A\u4F9D\u8D56\uFF0C\u5373\u4F7F\u670D\u52A1\u53EF\u7528\uFF0C\u4F46\u662F\u5728\u670D\u52A1\u5728consul\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3\u83B7\u53D6\u4E0D\u5230\u670D\u52A1\u72B6\u6001--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u542F\u52A8\u7C7B\u6DFB\u52A0\u6CE8\u89E3<code>@EnableDiscoveryClient</code>\uFF0C\u5176\u5B9E\u8FD9\u4E2A\u6CE8\u89E3\u52A0\u4E0D\u52A0\u90FD\u53EF\u4EE5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringcloudConfigClient7879Application</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringcloudConfigClient7879Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u542F\u52A8\u9879\u76EE\u67E5\u770B\u662F\u5426\u5DF2\u7ECF\u6CE8\u518C\u5230consul</p><p><img src="`+Tn+`" alt="image-20211218011712292"></p><h4 id="\u5F15\u5165\u4F9D\u8D56-1"><a class="header-anchor" href="#\u5F15\u5165\u4F9D\u8D56-1" aria-hidden="true">#</a> \u5F15\u5165\u4F9D\u8D56</h4><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5F15\u5165config client\u5F00\u53D1--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-config<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u8FDC\u7A0B\u4ED3\u5E93\u521B\u5EFA\u914D\u7F6E\u6587\u4EF6"><a class="header-anchor" href="#\u8FDC\u7A0B\u4ED3\u5E93\u521B\u5EFA\u914D\u7F6E\u6587\u4EF6" aria-hidden="true">#</a> \u8FDC\u7A0B\u4ED3\u5E93\u521B\u5EFA\u914D\u7F6E\u6587\u4EF6</h4><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">-</span> client.properties												## \u7528\u6765\u5B58\u653E\u516C\u5171\u914D\u7F6E
	spring:
    application:
      name: springcloud-config-client-7879
    cloud:
      consul:
        discovery:
          service-name: \${spring.application.name}
        host: localhost
        port: 8500

<span class="token list punctuation">-</span> client-dev.properties										## \u7528\u6765\u5B58\u653E\u5F00\u53D1\u76F8\u5173\u7684\u914D\u7F6E\uFF0C\u6CE8\u610F\u8FD9\u91CC\u4EE5\u7AEF\u53E3\u4E3A\u4F8B\uFF0C\u4EE5\u540E\u4E0D\u540C\u914D\u7F6E\u5206\u522B\u5B58\u653E
	server:
  	port: 7880

<span class="token list punctuation">-</span> cliet-prod.properties										## \u7528\u6765\u5B58\u653E\u751F\u4EA7\u76F8\u5173\u7684\u914D\u7F6E
	server:
  	port: 7879
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+Pn+'" alt="image-20211218012925122"></p><p>\u6D4B\u8BD5\u8BBF\u95EE\u914D\u7F6E\u6587\u4EF6</p><p><img src="'+Bn+'" alt="image-20211218013119206"></p><p>\u6D4B\u8BD5\u83B7\u53D6clients-dev\u914D\u7F6E\u6587\u4EF6</p><p><img src="'+Dn+`" alt="image-20211218013143040"></p><h4 id="\u7F16\u5199\u914D\u7F6E\u6587\u4EF6"><a class="header-anchor" href="#\u7F16\u5199\u914D\u7F6E\u6587\u4EF6" aria-hidden="true">#</a> \u7F16\u5199\u914D\u7F6E\u6587\u4EF6</h4><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">config</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>                                 <span class="token comment">## \u5F00\u542F\u7EDF\u4E00\u914D\u7F6E\u4E2D\u5FC3\u670D\u52A1</span>
        <span class="token key atrule">service-id</span><span class="token punctuation">:</span> springcloud<span class="token punctuation">-</span>config<span class="token punctuation">-</span>server<span class="token punctuation">-</span><span class="token number">7878</span>    <span class="token comment">## \u6307\u5B9A\u7EDF\u4E00\u914D\u7F6E\u670D\u52A1\u4E2D\u5FC3\u7684\u670D\u52A1\u552F\u4E00\u6807\u8BC6</span>
      <span class="token key atrule">label</span><span class="token punctuation">:</span> master                                   <span class="token comment">## \u6307\u5B9A\u4ECE\u4ED3\u5E93\u90A3\u4E2A\u5206\u652F\u62C9\u53D6\u914D\u7F6E</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> clients                                   <span class="token comment">## \u6307\u5B9A\u62C9\u53D6\u914D\u7F6E\u6587\u4EF6\u7684\u540D\u79F0</span>
      <span class="token key atrule">profile</span><span class="token punctuation">:</span> dev                                    <span class="token comment">## \u6307\u5B9A\u62C9\u53D6\u914D\u7F6E\u6587\u4EF6\u7684\u73AF\u5883</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u51FA\u73B0\u95EE\u9898"><a class="header-anchor" href="#\u51FA\u73B0\u95EE\u9898" aria-hidden="true">#</a> \u51FA\u73B0\u95EE\u9898</h4><ol><li>\u5F53\u6211\u4EEC\u5B8C\u6210\u4E0A\u9762\u7684\u914D\u7F6E\u4E4B\u540E\uFF0C\u542F\u52A8\u9879\u76EE\uFF0C\u51FA\u73B0\u62A5\u9519</li></ol><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>Caused by: java.lang.IllegalArgumentException: Consul service ids must not be empty, must start with a letter, end with a letter or digit, and have as interior characters only letters, digits, and hyphen: null

\u5F53\u6211\u4EEC\u542F\u52A8\u670D\u52A1\u7684\u65F6\u5019\uFF0C\u5B83\u8981\u5F80consul\u4E2D\u53BB\u6CE8\u518C\u7684\u65F6\u5019\uFF0C\u5FC5\u987B\u8981\u6709\u4E00\u4E2A\u670D\u52A1\u7684\u540D\u5B57\uFF0C\u4F46\u662F\u5F53\u524D\u542F\u52A8\u7684\u65F6\u5019\uFF0Cspring consul\u5982\u679C\u68C0\u6D4B\u5230\u6211\u4EEC\u7684\u914D\u7F6E\u6587\u4EF6\u4E2D\u6CA1\u6709\u670D\u52A1\u540D\u79F0\uFF0C\u5C31\u4E0D\u4F1A\u542F\u52A8\u670D\u52A1\uFF0C\u4E5F\u5C31\u4E0D\u4F1A\u6709\u540E\u7EED\u7684\u62C9\u53D6\u670D\u52A1\u914D\u7F6E\u7684\u64CD\u4F5C\uFF0C\u6240\u4EE5\uFF0C\u6211\u4EEC\u670D\u52A1\u7684\u540D\u5B57\u8FD8\u662F\u8981\u653E\u5728\u672C\u5730\u7684\u914D\u7F6E\u4E2D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7EFC\u4E0A\uFF0C\u6574\u4E2A\u670D\u52A1\u7684\u914D\u7F6E\u5E94\u8BE5\u662F</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> springcloud<span class="token punctuation">-</span>config<span class="token punctuation">-</span>client<span class="token punctuation">-</span><span class="token number">7879</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">config</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>                                 <span class="token comment">## \u5F00\u542F\u7EDF\u4E00\u914D\u7F6E\u4E2D\u5FC3\u670D\u52A1</span>
        <span class="token key atrule">service-id</span><span class="token punctuation">:</span> springcloud<span class="token punctuation">-</span>config<span class="token punctuation">-</span>server<span class="token punctuation">-</span><span class="token number">7878</span>    <span class="token comment">## \u6307\u5B9A\u7EDF\u4E00\u914D\u7F6E\u670D\u52A1\u4E2D\u5FC3\u7684\u670D\u52A1\u552F\u4E00\u6807\u8BC6</span>
      <span class="token key atrule">label</span><span class="token punctuation">:</span> master                                   <span class="token comment">## \u6307\u5B9A\u4ECE\u4ED3\u5E93\u90A3\u4E2A\u5206\u652F\u62C9\u53D6\u914D\u7F6E</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> clients                                   <span class="token comment">## \u6307\u5B9A\u62C9\u53D6\u914D\u7F6E\u6587\u4EF6\u7684\u540D\u79F0</span>
      <span class="token key atrule">profile</span><span class="token punctuation">:</span> dev                                    <span class="token comment">## \u6307\u5B9A\u62C9\u53D6\u914D\u7F6E\u6587\u4EF6\u7684\u73AF\u5883</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>spring\u9879\u76EE\u5728\u542F\u52A8\u7684\u65F6\u5019\u52A0\u8F7D\u914D\u7F6E\u6587\u4EF6\uFF0C\u4E00\u65E6\u68C0\u6D4B\u5230\u914D\u7F6E\u4E86\u9700\u8981\u53BB\u8FDC\u7AEF\u52A0\u8F7D\u914D\u7F6E\uFF0C\u5C31\u4F1A\u53BB\u52A0\u8F7D\u914D\u7F6E\uFF0C\u4F46\u662F\u8FD9\u4E2A\u65F6\u5019\u542F\u52A8\u7684\u64CD\u4F5C\u4E0D\u4F1A\u7B49\u5230\u914D\u7F6E\u6587\u4EF6\u62C9\u53D6\u5B8C</li></ol><p>\u6B64\u65F6\u5C31\u4F1A\u51FA\u73B0\u62A5\u9519\u7684\u60C5\u51B5\u51FA\u73B0\uFF1A8080\u5DF2\u7ECF\u88AB\u5360\u7528\uFF08\u9879\u76EE\u6A21\u62DF\u4ECE8080\u7AEF\u53E3\u542F\u52A8\uFF09</p><p>\u90A3\u4E48\u6211\u4EEC\u5C31\u8981\u4FEE\u6539\uFF0C\u7B49\u5F85\u62C9\u53D6\u5B8C\u8FDC\u7AEF\u7684\u914D\u7F6E\u6587\u4EF6\u4E4B\u540E\uFF0C\u5728\u52A0\u8F7D\u62C9\u53D6\u7684\u914D\u7F6E\u6765\u542F\u52A8</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">##</span> \u6269\u5C55</span>
\u5728springboot\u4E2D\u6709\u4E24\u79CD\u914D\u7F6E\u6587\u4EF6
<span class="token list punctuation">-</span> bootstrap.properties				## \u9884\u542F\u52A8\u7684\u914D\u7F6E\u6587\u4EF6\uFF0C\u4F18\u5148\u7EA7\u8981\u9AD8\u4E8Eapplication.properties
<span class="token list punctuation">-</span> application.properties
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6240\u4EE5\u6211\u4EEC\u53EF\u4EE5\u5C06application\u7684\u914D\u7F6E\u6587\u4EF6\u540D\u4FEE\u6539\u6210bootstrap\uFF0C\u8FD9\u6837\u5728\u9884\u542F\u52A8\u7684\u65F6\u5019\u5C31\u53EF\u4EE5\u628A\u8FDC\u7A0B\u914D\u7F6E\u62C9\u53D6\u4E0B\u6765\uFF0C\u8FD9\u6837\u5728\u542F\u52A8\u7684\u65F6\u5019\uFF0C\u5C31\u4F1A\u62C9\u53D6\u6587\u4EF6</p><p><img src="`+Fn+`" alt="image-20211218034649115"></p><h4 id="\u542F\u52A8\u6D4B\u8BD5"><a class="header-anchor" href="#\u542F\u52A8\u6D4B\u8BD5" aria-hidden="true">#</a> \u542F\u52A8\u6D4B\u8BD5</h4><p>\u5B8C\u6210\u4E86\u4E0A\u9762\u7684\u9519\u8BEF\u5904\u7406\u548C\u914D\u7F6E\u4E4B\u540E\uFF0C\u6211\u4EEC\u7F16\u5199\u4E00\u4E2AController\u6765\u9A8C\u8BC1\u6211\u4EEC\u7684\u62C9\u53D6\u662F\u5426\u6210\u529F</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${server.port}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> port<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/hello/hello&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u8FDC\u7AEF\u62C9\u53D6\u914D\u7F6E\u6D4B\u8BD5 : &quot;</span> <span class="token operator">+</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u542F\u52A8\u9879\u76EE\uFF0C\u6211\u4EEC\u80FD\u770B\u5230\u5F53\u524D\u8FD0\u884C\u7684\u7AEF\u53E3\u662F<code>7880</code>\uFF0C\u4E5F\u5C31\u662F\u8BF4\u5DF2\u7ECF\u62C9\u53D6\u5230\u4E86<code>dev</code>\u73AF\u5883\u5BF9\u5E94\u7684\u914D\u7F6E\u6587\u4EF6</p><p><img src="`+Hn+'" alt="image-20211218035243314"></p><p><img src="'+Nn+'" alt="image-20211218035252061"></p><p>\u6211\u4EEC\u8BBF\u95EE\u5BF9\u5E94\u7684\u8FDE\u63A5<code>http://localhost:7880/hello/hello</code>\uFF0C\u5DF2\u7ECF\u6210\u529F\u8BBF\u95EE\u5BF9\u5E94\u6D4B\u8BD5\u7AEF\u53E3\u7684\u63A5\u53E3</p><p><img src="'+Gn+`" alt="image-20211218035354141"></p><h3 id="\u624B\u52A8\u914D\u7F6E\u5237\u65B0"><a class="header-anchor" href="#\u624B\u52A8\u914D\u7F6E\u5237\u65B0" aria-hidden="true">#</a> \u624B\u52A8\u914D\u7F6E\u5237\u65B0</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>\u53EA\u6709\u5F53\u9879\u76EE\u542F\u52A8\u7684\u65F6\u5019\u624D\u4F1A\u53BB\u62C9\u53D6\u670D\u52A1\uFF0C\u90A3\u4E48\u5982\u4F55\u505A\u5230\u5F53\u8FDC\u7AEF\u914D\u7F6E\u53D1\u751F\u6539\u53D8\u7684\u65F6\u5019\u80FD\u81EA\u52A8\u62C9\u53D6\u914D\u7F6E\u5462
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="\u8BF4\u660E-2"><a class="header-anchor" href="#\u8BF4\u660E-2" aria-hidden="true">#</a> \u8BF4\u660E</h4><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>\u4F5C\u4E3A\u5F00\u53D1\u4EBA\u5458\u80AF\u5B9A\u662F\u77E5\u9053\u90A3\u4E9B\u914D\u7F6E\u6587\u4EF6\u4FEE\u6539\u4E86\u914D\u7F6E\uFF0C\u90A3\u4E48\u8FD9\u4E2A\u65F6\u5019\u5C31\u53EF\u4EE5\u8BA9\u8FD0\u7EF4\u4EBA\u5458\u53BB\u624B\u52A8\u5237\u65B0\u914D\u7F6E\u6587\u4EF6\uFF0C\u8FD9\u4E2A\u5C31\u662F\u624B\u52A8\u5237\u65B0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5728\u751F\u4EA7\u73AF\u5883\u4E2D\uFF0C\u5FAE\u670D\u52A1\u53EF\u80FD\u975E\u5E38\u591A\uFF0C\u6BCF\u6B21\u4FEE\u6539\u5B8C\u8FDC\u7AEF\u914D\u7F6E\u4E4B\u540E\uFF0C\u4E0D\u53EF\u80FD\u5BF9\u6240\u6709\u7684\u670D\u52A1\u8FDB\u884C\u91CD\u65B0\u542F\u52A8\uFF0C\u8FD9\u4E2A\u65F6\u5019\u9700\u8981\u8BA9\u4FEE\u6539\u7684\u914D\u7F6E\u80FD\u591F\u62C9\u53D6\u8FDC\u7AEF\u4FEE\u6539\u4E4B\u540E\u7684\u914D\u7F6E\uFF0C\u4ECE\u800C\u4E0D\u7528\u6BCF\u6B21\u91CD\u542F\u670D\u52A1\u624D\u80FD\u751F\u6548\uFF0C\u8FDB\u4E00\u6B65\u7684\u63D0\u9AD8\u5FAE\u670D\u52A1\u7CFB\u7EDF\u7684\u7EF4\u62A4\u6548\u7387\u3002\u5728springcloud\u4E2D\u4E5F\u4E3A\u6211\u4EEC\u63D0\u4F9B\u4E86\u624B\u52A8\u5237\u65B0\u914D\u7F6E\u548C\u81EA\u52A8\u5237\u65B0\u914D\u7F6E\u4E24\u79CD\u7B56\u7565\uFF0C\u8FD9\u91CC\u6211\u4EEC\u5148\u8BD5\u8BD5\u624B\u52A8\u5237\u65B0\u914D\u7F6E\u6587\u4EF6</p><blockquote><p>\u8FD8\u6709\u4E00\u79CD\u81EA\u52A8\u5237\u65B0\u8981\u7ED3\u5408spring cloud bus\u6765\u5B9E\u73B0\u81EA\u52A8\u5237\u65B0</p></blockquote><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>\u5728\u4FEE\u6539\u8FDC\u7AEF\u914D\u7F6E\u6587\u4EF6\u4E4B\u540E\uFF0C\u6211\u4EEC\u9700\u8981\u5411\u9700\u8981\u5237\u65B0\u914D\u7F6E\u6587\u4EF6\u7684\u670D\u52A1\u53D1\u9001\u4E00\u4E2Apost\u8BF7\u6C42\uFF0C\u660E\u786E\u544A\u8BC9\u5B83\u5237\u65B0\u914D\u7F6E\uFF0C\u90A3\u4E48\u53D1\u9001\u7684\u8BF7\u6C42\u7684url\u662F\u56FA\u5B9A\u7684\uFF0C\u662Fspringcloud\u7ED9\u6211\u4EEC\u7684\u4E00\u4E2A\u5237\u65B0\u914D\u7F6E\u7684url\uFF0C\u8FD9\u4E2Aurl\u9ED8\u8BA4\u662F\u4E0D\u5141\u8BB8\u6211\u4EEC\u8BBF\u95EE\u7684\uFF0C\u6240\u4EE5\u6211\u4EEC\u9700\u8981\u66B4\u9732\u6240\u6709\u7684\u7AEF\u70B9\uFF0C\u5176\u4E2D\u5C31\u5305\u62EC\u4E86\u5237\u65B0\u914D\u7F6E\u7684url\u7AEF\u70B9
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="\u6DFB\u52A0\u5237\u65B0\u66B4\u9732\u7AEF\u70B9"><a class="header-anchor" href="#\u6DFB\u52A0\u5237\u65B0\u66B4\u9732\u7AEF\u70B9" aria-hidden="true">#</a> \u6DFB\u52A0\u5237\u65B0\u66B4\u9732\u7AEF\u70B9</h4><p>\u5728config client\u7AEF\u52A0\u5165\u5237\u65B0\u66B4\u9732\u7AEF\u70B9\uFF0C\u5982\u679C\u4E0B\u9762\u7684\u65B9\u5F0F\u51FA\u73B0\u9519\u8BEF\uFF0C\u53EF\u4EE5\u5C1D\u8BD5\u53BB\u9664\u53CC\u5F15\u53F7</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">management</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpoints</span><span class="token punctuation">:</span>
    <span class="token key atrule">web</span><span class="token punctuation">:</span>
      <span class="token key atrule">exposure</span><span class="token punctuation">:</span>
        <span class="token key atrule">include</span><span class="token punctuation">:</span> <span class="token string">&quot;*&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u5728\u9700\u8981\u5237\u65B0\u4EE3\u7801\u7684\u7C7B\u4E2D\u52A0\u5165\u5237\u65B0\u914D\u7F6E\u7684\u6CE8\u89E3"><a class="header-anchor" href="#\u5728\u9700\u8981\u5237\u65B0\u4EE3\u7801\u7684\u7C7B\u4E2D\u52A0\u5165\u5237\u65B0\u914D\u7F6E\u7684\u6CE8\u89E3" aria-hidden="true">#</a> \u5728\u9700\u8981\u5237\u65B0\u4EE3\u7801\u7684\u7C7B\u4E2D\u52A0\u5165\u5237\u65B0\u914D\u7F6E\u7684\u6CE8\u89E3</h4><p>\u5982\u679C\u60F3\u8BA9\u4EE3\u7801\u80FD\u83B7\u53D6\u5230\u91CD\u65B0\u62C9\u53D6\u914D\u7F6E\u6587\u4EF6\u7684\u5185\u5BB9\u7684\u8BDD\uFF0C\u5728\u9700\u8981\u7684Controller\u4E2D\u6DFB\u52A0<code>@RefreshScope</code>\u6CE8\u89E3\uFF0C\u56E0\u4E3A\u4EE3\u7801\u5728\u521A\u5F00\u52A0\u8F7D\u7684\u65F6\u5019\uFF0C\u5728class\u6587\u4EF6\u4E2D\u90FD\u662F\u8BFB\u53D6\u8FDC\u7A0B\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684\uFF0C\u8FD9\u4E2A\u65F6\u5019\u90FD\u662F\u9ED8\u8BA4\u5199\u6B7B\u5728class\u6587\u4EF6\u4E2D\uFF0C\u52A0\u5165<code>@RefreshScope</code>\u53EF\u4EE5\u8BA9\u5B57\u8282\u7801\u6587\u4EF6\u91CD\u65B0\u7F16\u8BD1\u52A0\u8F7D</p><blockquote><p>\u5728\u4E1A\u52A1\u4EE3\u7801\u4E2D\uFF0C\u5982\u679C\u6CE8\u5165\u7684\u4E86\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684\u503C\uFF0C\u5C31\u9700\u8981\u52A0\u5165\u8FD9\u4E2A\u6CE8\u89E3</p></blockquote><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RefreshScope</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${server.port}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> port<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${name}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>	<span class="token comment">//\u672C\u6B21\u5C31\u4FEE\u6539\u8FD9\u4E2A\u4F5C\u4E3A\u6D4B\u8BD5\uFF0C\u6211\u4EEC\u9700\u8981\u5728\u8FDC\u7AEF\u914D\u7F6E\u6587\u4EF6\u4E2D\u6DFB\u52A0\u4E2A\u914D\u7F6E</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/hello/hello&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u8FDC\u7AEF\u62C9\u53D6\u914D\u7F6E\u6D4B\u8BD5 : &quot;</span> <span class="token operator">+</span> port <span class="token operator">+</span> <span class="token string">&quot;, name : &quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6211\u4EEC\u5728\u8FDC\u7AEF\u914D\u7F6E\u6587\u4EF6\u6DFB\u52A0name\u914D\u7F6E</p><p><img src="`+Un+'" alt="image-20211218043514795"></p><h4 id="\u542F\u52A8\u6D4B\u8BD5-1"><a class="header-anchor" href="#\u542F\u52A8\u6D4B\u8BD5-1" aria-hidden="true">#</a> \u542F\u52A8\u6D4B\u8BD5</h4><p>\u542F\u52A8\u9879\u76EE\uFF0C\u6211\u4EEC\u5148\u4E0D\u4FEE\u6539\u8FDC\u7AEF\u914D\u7F6E\u6587\u4EF6\uFF0C\u8BBF\u95EE<code>http://localhost:7880/hello/hello</code></p><p><img src="'+Ln+'" alt="image-20211218043626656"></p><p>\u7136\u540E\u6211\u4EEC\u4FEE\u6539name\u7684\u503C</p><p><img src="'+$n+`" alt="image-20211218045121607"></p><p>\u63A5\u7740\u6211\u4EEC\u7EC8\u4E8E\u53EF\u4EE5\u53D1\u9001\u8FD9\u4E2APOST\u7684\u8BF7\u6C42\u4E86</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">curl</span> -X POST http://localhost:7880/actuator/refresh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="`+zn+'" alt="image-20211218045526488"></p><p>\u518D\u6B21\u8BBF\u95EE<code>http://localhost:7880/hello/hello</code>\uFF0C\u5DF2\u7ECF\u53D8\u6210\u4E86\u6211\u4EEC\u4FEE\u6539\u7684\u503C</p><p><img src="'+Vn+'" alt="image-20211218045623397"></p><blockquote><p>\u4E3A\u4E86\u89E3\u51B3\u8FD9\u4E2A\u591A\u6B21\u624B\u52A8\u5237\u65B0\u7684\u95EE\u9898\uFF0Cspringcloud\u5B98\u65B9\u53C8\u63D0\u4F9B\u4E86bus\u7EC4\u4EF6\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u4E00\u6B21\u624B\u52A8POST\uFF0C\u591A\u4E2A\u670D\u52A1\u66F4\u65B0</p></blockquote><h2 id="bus\u7EC4\u4EF6\u7684\u4F7F\u7528"><a class="header-anchor" href="#bus\u7EC4\u4EF6\u7684\u4F7F\u7528" aria-hidden="true">#</a> Bus\u7EC4\u4EF6\u7684\u4F7F\u7528</h2><h3 id="\u4EC0\u4E48\u662Fbus"><a class="header-anchor" href="#\u4EC0\u4E48\u662Fbus" aria-hidden="true">#</a> \u4EC0\u4E48\u662FBus</h3>',134),Me=n("p",null,"\u5B98\u65B9\u7F51\u5740\uFF1Ahttps://spring.io/projects/spring-cloud-bus",-1),Te=s("Spring Cloud Bus links nodes of a distributed system with a lightweight message broker. This can then be used to broadcast state changes (e.g. configuration changes) or other management instructions. AMQP and Kafka broker implementations are included with the project. Alternatively, any "),Pe={href:"https://spring.io/projects/spring-cloud-stream",target:"_blank",rel:"noopener noreferrer"},Be=s("Spring Cloud Stream"),De=s(" binder found on the classpath will work out of the box as a transport."),Fe=n("p",null,"\u7FFB\u8BD1\uFF1A",-1),He=n("p",null,"Spring Cloud Bus \u5C06\u5206\u5E03\u5F0F\u7CFB\u7EDF\u7684\u8282\u70B9\u4E0E\u8F7B\u91CF\u7EA7\u6D88\u606F\u4EE3\u7406\u8FDE\u63A5\u8D77\u6765\u3002\u7136\u540E\u53EF\u4EE5\u4F7F\u7528\u5B83\u6765\u5E7F\u64AD\u72B6\u6001\u66F4\u6539\uFF08\u4F8B\u5982\u914D\u7F6E\u66F4\u6539\uFF09\u6216\u5176\u4ED6\u7BA1\u7406\u6307\u4EE4\u3002 AMQP \u548C Kafka \u4EE3\u7406\u5B9E\u73B0\u5305\u542B\u5728\u9879\u76EE\u4E2D\u3002\u6216\u8005\uFF0C\u5728\u7C7B\u8DEF\u5F84\u4E0A\u627E\u5230\u7684\u4EFB\u4F55 Spring Cloud Stream \u7ED1\u5B9A\u5668\u90FD\u53EF\u4EE5\u4F5C\u4E3A\u4F20\u8F93\u5F00\u7BB1\u5373\u7528",-1),Ne=n("p",null,"\u901A\u4FD7\u5B9A\u4E49\uFF1A",-1),Ge=n("p",null,"bus\u79F0\u4E4B\u4E3Aspringcloud\u4E2D\u6D88\u606F\u603B\u7EBF\uFF0C\u4E3B\u8981\u7528\u6765\u5728\u5FAE\u670D\u52A1\u7CFB\u7EDF\u4E2D\u5B9E\u73B0\u8FDC\u7AEF\u914D\u7F6E\u66F4\u65B0\u65F6\u901A\u8FC7\u5E7F\u64AD\u7684\u5F62\u5F0F\u901A\u77E5\u6240\u6709\u5BA2\u6237\u7AEF\u5237\u65B0\u914D\u7F6E\u4FE1\u606F\uFF0C\u907F\u514D\u624B\u52A8\u91CD\u542F\u670D\u52A1\u7684\u5DE5\u4F5C",-1),Ue=e('<h3 id="\u5B9E\u73B0\u914D\u7F6E\u5237\u65B0\u539F\u7406"><a class="header-anchor" href="#\u5B9E\u73B0\u914D\u7F6E\u5237\u65B0\u539F\u7406" aria-hidden="true">#</a> \u5B9E\u73B0\u914D\u7F6E\u5237\u65B0\u539F\u7406</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>springcloud\u5B98\u65B9\u63D0\u4F9B\u4E86bus\u7EC4\u4EF6\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u4E00\u6B21\u624B\u52A8POST\uFF0C\u591A\u4E2A\u670D\u52A1\u66F4\u65B0\n<span class="token code-snippet code keyword">`\u5982\u679C\u60F3\u8981\u5728\u5B9E\u73B0\u81EA\u52A8\u5237\u65B0\u7684\u8BDD\uFF0C\u53EF\u4EE5\u7ED3\u5408\u6D4F\u89C8\u5668\u7684\u7279\u6027\uFF0C\u8FD9\u4E2A\u8FDC\u7A0Bgit\u4ED3\u5E93\u6709\u4E00\u4E2A\u7279\u6027\uFF0C\u5F53\u8FDC\u7AEF\u7684\u4ED3\u5E93\u4E2D\u6709\u4EFB\u4F55\u4E00\u4E2A\u6587\u4EF6\u53D1\u751F\u53D8\u5316\u7684\u65F6\u5019\uFF08\u63D0\u4EA4\u7684\u65F6\u5019\uFF09\uFF0C\u81EA\u52A8\u7684\u5411\u6211\u4EEC\u7684\u670D\u52A1\u53D1\u9001\u4E00\u4E2APOST\u8BF7\u6C42\uFF0C\u8FD9\u4E2A\u5176\u5B9E\u5C31\u662Fwebhooks\u529F\u80FD`</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="'+Wn+`" alt="image-20211218053529615"></p><h3 id="\u642D\u5EFArabbitmq\u670D\u52A1"><a class="header-anchor" href="#\u642D\u5EFArabbitmq\u670D\u52A1" aria-hidden="true">#</a> \u642D\u5EFArabbitmq\u670D\u52A1</h3><blockquote><p>\u5B98\u65B9\u5B89\u88C5\u6587\u6863\uFF1Ahttps://www.rabbitmq.com/install-rpm.html</p><p>\u5B98\u65B9\u6587\u6863\u6709\u5F88\u591A\u79CD\u5B89\u88C5\u65B9\u5F0F\uFF0C\u672C\u6B21\u4F7F\u7528yum\u65B9\u5F0F\u5B89\u88C5</p><p>\u73AF\u5883\uFF1Acentos7</p></blockquote><h4 id="\u6DFB\u52A0rabbitmq\u9700\u8981\u7684yum-repo"><a class="header-anchor" href="#\u6DFB\u52A0rabbitmq\u9700\u8981\u7684yum-repo" aria-hidden="true">#</a> \u6DFB\u52A0rabbitmq\u9700\u8981\u7684yum.repo</h4><p>\u4EE5\u4E0B\u793A\u4F8B\u8BBE\u7F6E\u4E86\u4E00\u4E2A\u5B58\u50A8\u5E93\uFF0C\u8BE5\u5B58\u50A8\u5E93\u5C06\u4ECE PackageCloud \u5B89\u88C5 RabbitMQ \u53CA\u5176 Erlang \u4F9D\u8D56\u9879\uFF0C\u5E76\u9488\u5BF9 CentOS 7\u3002\u4E0E CentOS 8 \u6307\u4EE4\u7565\u6709\u4E0D\u540C</p><p>\u5C06\u4E00\u4E0B\u7684\u5B58\u50A8\u5E93\u6DFB\u52A0<code>/etc/yum.repos.d/rabbitmq.repo</code>\u6587\u4EF6</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> /etc/yum.repos.d/11.rabbitmq.repo <span class="token comment">## \u5982\u679C\u4E4B\u524D\u6CA1\u6709\u5B89\u88C5\u8FC7vim\u7684\u8BDD\uFF0C\u53EF\u4EE5\u4F7F\u7528vi \u6216\u8005\u901A\u8FC7yum install -y vim\u5B89\u88C5</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6DFB\u52A0\u5185\u5BB9</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">## In /etc/yum.repos.d/11.rabbitmq.repo</span>

<span class="token comment">##</span>
<span class="token comment">### Zero dependency Erlang</span>
<span class="token comment">##</span>

<span class="token punctuation">[</span>rabbitmq_erlang<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>rabbitmq_erlang
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://packagecloud.io/rabbitmq/erlang/el/7/<span class="token variable">$basearch</span>
<span class="token assign-left variable">repo_gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token comment">## PackageCloud&#39;s repository key and RabbitMQ package signing key</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://packagecloud.io/rabbitmq/erlang/gpgkey
       https://github.com/rabbitmq/signing-keys/releases/download/2.0/rabbitmq-release-signing-key.asc
<span class="token assign-left variable">sslverify</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">sslcacert</span><span class="token operator">=</span>/etc/pki/tls/certs/ca-bundle.crt
<span class="token assign-left variable">metadata_expire</span><span class="token operator">=</span><span class="token number">300</span>

<span class="token punctuation">[</span>rabbitmq_erlang-source<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>rabbitmq_erlang-source
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://packagecloud.io/rabbitmq/erlang/el/7/SRPMS
<span class="token assign-left variable">repo_gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://packagecloud.io/rabbitmq/erlang/gpgkey
<span class="token assign-left variable">sslverify</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">sslcacert</span><span class="token operator">=</span>/etc/pki/tls/certs/ca-bundle.crt
<span class="token assign-left variable">metadata_expire</span><span class="token operator">=</span><span class="token number">300</span>

<span class="token comment">##</span>
<span class="token comment">### RabbitMQ server</span>
<span class="token comment">##</span>

<span class="token punctuation">[</span>rabbitmq_server<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>rabbitmq_server
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://packagecloud.io/rabbitmq/rabbitmq-server/el/7/<span class="token variable">$basearch</span>
<span class="token assign-left variable">repo_gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token comment">## PackageCloud&#39;s repository key and RabbitMQ package signing key</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://packagecloud.io/rabbitmq/rabbitmq-server/gpgkey
       https://github.com/rabbitmq/signing-keys/releases/download/2.0/rabbitmq-release-signing-key.asc
<span class="token assign-left variable">sslverify</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">sslcacert</span><span class="token operator">=</span>/etc/pki/tls/certs/ca-bundle.crt
<span class="token assign-left variable">metadata_expire</span><span class="token operator">=</span><span class="token number">300</span>

<span class="token punctuation">[</span>rabbitmq_server-source<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>rabbitmq_server-source
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://packagecloud.io/rabbitmq/rabbitmq-server/el/7/SRPMS
<span class="token assign-left variable">repo_gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://packagecloud.io/rabbitmq/rabbitmq-server/gpgkey
<span class="token assign-left variable">sslverify</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">sslcacert</span><span class="token operator">=</span>/etc/pki/tls/certs/ca-bundle.crt
<span class="token assign-left variable">metadata_expire</span><span class="token operator">=</span><span class="token number">300</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="install-packages-with-yum"><a class="header-anchor" href="#install-packages-with-yum" aria-hidden="true">#</a> Install Packages with Yum</h4><p>\u5237\u65B0\u4F9D\u8D56\u5E93</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum update -y
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Next, install the packages</p><p>\u6DFB\u52A0erlang\u73AF\u5883\u9700\u8981\u7684\u4E24\u4E2A\u4F9D\u8D56</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">### install these dependencies from standard OS repositories</span>
yum <span class="token function">install</span> socat <span class="token function">logrotate</span> -y
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B89\u88C5erlang\u73AF\u5883\u548Crabbitmq</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum <span class="token function">install</span> erlang <span class="token number">11</span>.rabbitmq-server -y <span class="token comment">## \u5982\u679C\u83B7\u53D6\u5BC6\u94A5\u5931\u8D25\u7684\u8BDD\uFF0C\u7FFB\u5427</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="\u542F\u52A8\u6D4B\u8BD5-2"><a class="header-anchor" href="#\u542F\u52A8\u6D4B\u8BD5-2" aria-hidden="true">#</a> \u542F\u52A8\u6D4B\u8BD5</h4><p>\u542F\u52A8rabbitmq</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment">## systemctl start 11.rabbitmq-server</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u67E5\u770Brabbitmq\u72B6\u6001</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment">## rabbitmqctl status</span>
Status of <span class="token function">node</span> rabbit@localhost <span class="token punctuation">..</span>.
Runtime

<span class="token comment">## \u8FDB\u7A0Bpid</span>
OS PID: <span class="token number">130734</span>
OS: Linux
Uptime <span class="token punctuation">(</span>seconds<span class="token punctuation">)</span>: <span class="token number">33</span>
Is under maintenance?: <span class="token boolean">false</span>
RabbitMQ version: <span class="token number">3.9</span>.11 <span class="token comment">## \u7248\u672C</span>
Node name: rabbit@localhost <span class="token comment">## \u8282\u70B9\u540D\u79F0\uFF0C\u5728erlang\u4E2D\u6709\u8282\u70B9\u548C\u5E94\u7528\u7684\u6982\u5FF5</span>

<span class="token comment">## erlang \u914D\u7F6E\u4FE1\u606F</span>

Erlang configuration: Erlang/OTP <span class="token number">23</span> <span class="token punctuation">[</span>erts-11.2.2.7<span class="token punctuation">]</span> <span class="token punctuation">[</span>source<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">64</span>-bit<span class="token punctuation">]</span> <span class="token punctuation">[</span>smp:2:2<span class="token punctuation">]</span> <span class="token punctuation">[</span>ds:2:2:10<span class="token punctuation">]</span> <span class="token punctuation">[</span>async-threads:1<span class="token punctuation">]</span> <span class="token punctuation">[</span>hipe<span class="token punctuation">]</span>
Erlang processes: <span class="token number">267</span> used, <span class="token number">1048576</span> limit
Scheduler run queue: <span class="token number">1</span>
Cluster heartbeat <span class="token function">timeout</span> <span class="token punctuation">(</span>net_ticktime<span class="token punctuation">)</span>: <span class="token number">60</span>

<span class="token comment">## 11.rabbitmq \u63D2\u4EF6</span>
Plugins

Enabled plugin file: /etc/11.rabbitmq/enabled_plugins
Enabled plugins:

<span class="token comment">## \u6570\u636E\u5B58\u50A8\u76EE\u5F55</span>
Data directory

Node data directory: /var/lib/11.rabbitmq/mnesia/rabbit@localhost
Raft data directory: /var/lib/11.rabbitmq/mnesia/rabbit@localhost/quorum/rabbit@localhost

<span class="token comment">## \u914D\u7F6E\u6587\u4EF6</span>
Config files


<span class="token comment">## \u65E5\u5FD7</span>
Log file<span class="token punctuation">(</span>s<span class="token punctuation">)</span>

 * /var/log/11.rabbitmq/rabbit@localhost.log
 * /var/log/11.rabbitmq/rabbit@localhost_upgrade.log
 * <span class="token operator">&lt;</span>stdout<span class="token operator">&gt;</span>

<span class="token comment">## \u8B66\u62A5</span>
Alarms

<span class="token punctuation">(</span>none<span class="token punctuation">)</span>

<span class="token comment">## \u5185\u5B58\u4FE1\u606F</span>
Memory

Total memory used: <span class="token number">0.0703</span> gb
Calculation strategy: rss
Memory high watermark setting: <span class="token number">0.4</span> of available memory, computed to: <span class="token number">0.4078</span> gb

code: <span class="token number">0.0242</span> gb <span class="token punctuation">(</span><span class="token number">34.16</span> %<span class="token punctuation">)</span>
other_proc: <span class="token number">0.0187</span> gb <span class="token punctuation">(</span><span class="token number">26.4</span> %<span class="token punctuation">)</span>
other_system: <span class="token number">0.0128</span> gb <span class="token punctuation">(</span><span class="token number">18.04</span> %<span class="token punctuation">)</span>
allocated_unused: <span class="token number">0.0103</span> gb <span class="token punctuation">(</span><span class="token number">14.49</span> %<span class="token punctuation">)</span>
other_ets: <span class="token number">0.003</span> gb <span class="token punctuation">(</span><span class="token number">4.2</span> %<span class="token punctuation">)</span>
atom: <span class="token number">0.0013</span> gb <span class="token punctuation">(</span><span class="token number">1.87</span> %<span class="token punctuation">)</span>
metrics: <span class="token number">0.0002</span> gb <span class="token punctuation">(</span><span class="token number">0.31</span> %<span class="token punctuation">)</span>
binary: <span class="token number">0.0002</span> gb <span class="token punctuation">(</span><span class="token number">0.27</span> %<span class="token punctuation">)</span>
mnesia: <span class="token number">0.0001</span> gb <span class="token punctuation">(</span><span class="token number">0.13</span> %<span class="token punctuation">)</span>
plugins: <span class="token number">0.0</span> gb <span class="token punctuation">(</span><span class="token number">0.05</span> %<span class="token punctuation">)</span>
quorum_ets: <span class="token number">0.0</span> gb <span class="token punctuation">(</span><span class="token number">0.04</span> %<span class="token punctuation">)</span>
msg_index: <span class="token number">0.0</span> gb <span class="token punctuation">(</span><span class="token number">0.04</span> %<span class="token punctuation">)</span>
stream_queue_procs: <span class="token number">0.0</span> gb <span class="token punctuation">(</span><span class="token number">0.0</span> %<span class="token punctuation">)</span>
stream_queue_replica_reader_procs: <span class="token number">0.0</span> gb <span class="token punctuation">(</span><span class="token number">0.0</span> %<span class="token punctuation">)</span>
connection_channels: <span class="token number">0.0</span> gb <span class="token punctuation">(</span><span class="token number">0.0</span> %<span class="token punctuation">)</span>
connection_other: <span class="token number">0.0</span> gb <span class="token punctuation">(</span><span class="token number">0.0</span> %<span class="token punctuation">)</span>
connection_readers: <span class="token number">0.0</span> gb <span class="token punctuation">(</span><span class="token number">0.0</span> %<span class="token punctuation">)</span>
connection_writers: <span class="token number">0.0</span> gb <span class="token punctuation">(</span><span class="token number">0.0</span> %<span class="token punctuation">)</span>
mgmt_db: <span class="token number">0.0</span> gb <span class="token punctuation">(</span><span class="token number">0.0</span> %<span class="token punctuation">)</span>
queue_procs: <span class="token number">0.0</span> gb <span class="token punctuation">(</span><span class="token number">0.0</span> %<span class="token punctuation">)</span>
queue_slave_procs: <span class="token number">0.0</span> gb <span class="token punctuation">(</span><span class="token number">0.0</span> %<span class="token punctuation">)</span>
quorum_queue_procs: <span class="token number">0.0</span> gb <span class="token punctuation">(</span><span class="token number">0.0</span> %<span class="token punctuation">)</span>
reserved_unallocated: <span class="token number">0.0</span> gb <span class="token punctuation">(</span><span class="token number">0.0</span> %<span class="token punctuation">)</span>
stream_queue_coordinator_procs: <span class="token number">0.0</span> gb <span class="token punctuation">(</span><span class="token number">0.0</span> %<span class="token punctuation">)</span>

File Descriptors

Total: <span class="token number">2</span>, limit: <span class="token number">32671</span>
Sockets: <span class="token number">0</span>, limit: <span class="token number">29401</span>

Free Disk Space

Low <span class="token function">free</span> disk space watermark: <span class="token number">0.05</span> gb
Free disk space: <span class="token number">41.1812</span> gb

Totals

Connection count: <span class="token number">0</span> <span class="token comment">## \u8FDE\u63A5\u6570\u91CF</span>
Queue count: <span class="token number">0</span> <span class="token comment">## \u961F\u5217\u6570\u91CF</span>
Virtual <span class="token function">host</span> count: <span class="token number">1</span> <span class="token comment">## \u4E3B\u673A\u6570\u91CF</span>

<span class="token comment">## \u76D1\u542C\u7AEF\u53E3</span>
Listeners

Interface: <span class="token punctuation">[</span>::<span class="token punctuation">]</span>, port: <span class="token number">25672</span>, protocol: clustering, purpose: inter-node and CLI tool communication <span class="token comment">## \u5E94\u8BE5\u662F\u901A\u4FE1\u7684\u7AEF\u53E3</span>
Interface: <span class="token punctuation">[</span>::<span class="token punctuation">]</span>, port: <span class="token number">5672</span>, protocol: amqp, purpose: AMQP <span class="token number">0</span>-9-1 and AMQP <span class="token number">1.0</span> <span class="token comment">## AMQP\u7AEF\u53E3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u5F00\u542Frabbitmq\u7684web\u7BA1\u7406\u754C\u9762\u8FDC\u7A0B\u8BBF\u95EE"><a class="header-anchor" href="#\u5F00\u542Frabbitmq\u7684web\u7BA1\u7406\u754C\u9762\u8FDC\u7A0B\u8BBF\u95EE" aria-hidden="true">#</a> \u5F00\u542Frabbitmq\u7684web\u7BA1\u7406\u754C\u9762\u8FDC\u7A0B\u8BBF\u95EE</h5><h6 id="\u5F00\u542Frabbitmq\u7684web\u8BBF\u95EE"><a class="header-anchor" href="#\u5F00\u542Frabbitmq\u7684web\u8BBF\u95EE" aria-hidden="true">#</a> \u5F00\u542Frabbitmq\u7684web\u8BBF\u95EE</h6><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">11</span>.rabbitmq-plugins <span class="token builtin class-name">enable</span> rabbitmq_management
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h6 id="\u4E3A\u4E86\u80FD\u8BA9guest\u80FD\u5728web\u7BA1\u7406\u754C\u9762\u767B\u5F55-\u5173\u95ED\u9632\u706B\u5899"><a class="header-anchor" href="#\u4E3A\u4E86\u80FD\u8BA9guest\u80FD\u5728web\u7BA1\u7406\u754C\u9762\u767B\u5F55-\u5173\u95ED\u9632\u706B\u5899" aria-hidden="true">#</a> \u4E3A\u4E86\u80FD\u8BA9guest\u80FD\u5728web\u7BA1\u7406\u754C\u9762\u767B\u5F55\uFF0C\u5173\u95ED\u9632\u706B\u5899</h6><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">service</span> iptables stop <span class="token comment">## \u6216\u8005systemctl stop firewalld \u5982\u679C\u662F\u8981\u5F00\u542F\u4E0D\u5F00\u542F\u9632\u706B\u5899\u7684\u8BDD\uFF0C\u76F4\u63A5\u4F7F\u7528systemctl disable firewalld</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h6 id="\u6DFB\u52A0\u8FDC\u7A0B\u8BBF\u95EE\u7684\u7528\u6237"><a class="header-anchor" href="#\u6DFB\u52A0\u8FDC\u7A0B\u8BBF\u95EE\u7684\u7528\u6237" aria-hidden="true">#</a> \u6DFB\u52A0\u8FDC\u7A0B\u8BBF\u95EE\u7684\u7528\u6237</h6><p>\u5728<code>/etc/rabbitmq</code>\u4E2D\u521B\u5EFA<code>rabbitmq.conf</code>\u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u6DFB\u52A0\u5982\u4E0B\u5185\u5BB9</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>
<span class="token punctuation">{</span>rabbit, <span class="token punctuation">[</span><span class="token punctuation">{</span>tcp_listeners, <span class="token punctuation">[</span><span class="token number">5672</span><span class="token punctuation">]</span><span class="token punctuation">}</span>, <span class="token punctuation">{</span>loopback_users, <span class="token punctuation">[</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>admin\u662F\u6DFB\u52A0\u7684\u7528\u6237\u540D</li><li>. \u662F\u5FC5\u987B\u7684</li></ul><p>\u5B98\u65B9\u8868\u793A\uFF0Crabbitmq\u4F1A\u5728\u542F\u52A8\u7684\u65F6\u5019\u4ECE\u8FD9\u4E9B\u4F4D\u7F6E\u8BFB\u53D6\u914D\u7F6E\u4FE1\u606F</p><p><img src="`+Xn+`" alt="image-20211210210801146"></p><p><strong>\u8FD9\u4E2A\u5B98\u65B9\u9A97\u4EBA\uFF0Crabbitmq.conf\u540D\u5B57\u7684\u914D\u7F6E\u6587\u4EF6\u542F\u52A8\u5931\u8D25\uFF0C\u8981rabbitmq.config\u624D\u884C</strong></p><p>\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\u6DFB\u52A0admin\u7528\u6237\u5230rabbitmq\uFF0C\u5E76\u8D4B\u4E88\u5B83\u7BA1\u7406\u5458\u6743\u9650</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">## RabbitMQ\u65B0\u589E\u8D26\u53F7\u5BC6\u7801</span>
rabbitmqctl add_user admin <span class="token number">123456</span>
<span class="token comment">## \u8BBE\u7F6E\u6210\u7BA1\u7406\u5458\u89D2\u8272</span>
rabbitmqctl set_user_tags admin administrator
<span class="token comment">## \u8BBE\u7F6E\u6743\u9650</span>
rabbitmqctl set_permissions -p <span class="token string">&quot;/&quot;</span> admin <span class="token string">&quot;.*&quot;</span> <span class="token string">&quot;.*&quot;</span> <span class="token string">&quot;.*&quot;</span>
<span class="token comment">## \u67E5\u770B\u7528\u6237\u5217\u8868</span>
rabbitmqctl list_users
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6267\u884C\u7ED3\u679C</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@mq1 ~<span class="token punctuation">]</span><span class="token comment">## rabbitmqctl add_user admin 123456</span>
Adding user <span class="token string">&quot;admin&quot;</span> <span class="token punctuation">..</span>.
Done. Don<span class="token string">&#39;t forget to grant the user permissions to some virtual hosts! See &#39;</span>rabbitmqctl <span class="token builtin class-name">help</span> set_permissions&#39; to learn more.
<span class="token punctuation">[</span>root@mq1 ~<span class="token punctuation">]</span><span class="token comment">## rabbitmqctl set_user_tags admin administrator</span>
Setting tags <span class="token keyword">for</span> user <span class="token string">&quot;admin&quot;</span> to <span class="token punctuation">[</span>administrator<span class="token punctuation">]</span> <span class="token punctuation">..</span>.
<span class="token punctuation">[</span>root@mq1 ~<span class="token punctuation">]</span><span class="token comment">## rabbitmqctl set_permissions -p &quot;/&quot; admin &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;</span>
Setting permissions <span class="token keyword">for</span> user <span class="token string">&quot;admin&quot;</span> <span class="token keyword">in</span> vhost <span class="token string">&quot;/&quot;</span> <span class="token punctuation">..</span>.
<span class="token punctuation">[</span>root@mq1 ~<span class="token punctuation">]</span><span class="token comment">## rabbitmqctl list_users</span>
Listing <span class="token function">users</span> <span class="token punctuation">..</span>.
user	tags
admin	<span class="token punctuation">[</span>administrator<span class="token punctuation">]</span>
guest	<span class="token punctuation">[</span>administrator<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="\u91CD\u542Frabbitmq"><a class="header-anchor" href="#\u91CD\u542Frabbitmq" aria-hidden="true">#</a> \u91CD\u542Frabbitmq</h6><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>systemctl restart <span class="token number">11</span>.rabbitmq-server
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h6 id="\u8BBF\u95EE\u6D4B\u8BD5"><a class="header-anchor" href="#\u8BBF\u95EE\u6D4B\u8BD5" aria-hidden="true">#</a> \u8BBF\u95EE\u6D4B\u8BD5</h6><div class="language-http ext-http line-numbers-mode"><pre class="language-http"><code><span class="token header"><span class="token header-name keyword">http</span><span class="token punctuation">:</span><span class="token header-value">//172.16.187.16:15672</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8F93\u5165\u521A\u624D\u521B\u5EFA\u7528\u6237\u7684\u4FE1\u606F\u767B\u5F55\u6210\u529F</p><p><img src="`+Jn+`" alt="image-20211218063755168"></p><h4 id="\u5B9E\u73B0\u81EA\u52A8\u914D\u7F6E\u5237\u65B0"><a class="header-anchor" href="#\u5B9E\u73B0\u81EA\u52A8\u914D\u7F6E\u5237\u65B0" aria-hidden="true">#</a> \u5B9E\u73B0\u81EA\u52A8\u914D\u7F6E\u5237\u65B0</h4><h5 id="\u5728\u6240\u6709\u7684\u9879\u76EE\u4E2D\u5F15\u5165bus\u4F9D\u8D56"><a class="header-anchor" href="#\u5728\u6240\u6709\u7684\u9879\u76EE\u4E2D\u5F15\u5165bus\u4F9D\u8D56" aria-hidden="true">#</a> \u5728\u6240\u6709\u7684\u9879\u76EE\u4E2D\u5F15\u5165bus\u4F9D\u8D56</h5><p>\u5F53\u524D\u6211\u4EEC\u53EA\u6709\u4E00\u4E2Aclient \u548C\u4E00\u4E2Aserver</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-bus-amqp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u914D\u7F6E\u7EDF\u4E00\u914D\u7F6E\u4E2D\u5FC3\u8FDE\u63A5\u5230rabbitmq"><a class="header-anchor" href="#\u914D\u7F6E\u7EDF\u4E00\u914D\u7F6E\u4E2D\u5FC3\u8FDE\u63A5\u5230rabbitmq" aria-hidden="true">#</a> \u914D\u7F6E\u7EDF\u4E00\u914D\u7F6E\u4E2D\u5FC3\u8FDE\u63A5\u5230rabbitmq</h5><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code>spring.11.rabbitmq.host=172.16.187.16				<span class="token comment">## \u8FDE\u63A5\u4E3B\u673A</span>
spring.11.rabbitmq.port=5672									<span class="token comment">## \u8FDE\u63A5\u7AEF\u53E3</span>
spring.11.rabbitmq.username=admin						<span class="token comment">## \u8FDE\u63A5\u7528\u6237\u540D</span>
spring.11.rabbitmq.password=123456						<span class="token comment">## \u8FDE\u63A5\u5BC6\u7801</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u8FDC\u7AEF\u914D\u7F6E\u4E2D\u52A0\u5165\u8FDE\u63A5\u5230rabbitmq"><a class="header-anchor" href="#\u8FDC\u7AEF\u914D\u7F6E\u4E2D\u52A0\u5165\u8FDE\u63A5\u5230rabbitmq" aria-hidden="true">#</a> \u8FDC\u7AEF\u914D\u7F6E\u4E2D\u52A0\u5165\u8FDE\u63A5\u5230rabbitmq</h5><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
	<span class="token key atrule">rabbitmq</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> 172.16.187.16
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">5672</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> admin
    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123456</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4FEE\u6539\u4E4B\u540E</p><p><img src="`+Qn+`" alt="image-20211218072131283"></p><h5 id="\u542F\u52A8\u7EDF\u4E00\u914D\u7F6E\u4E2D\u5FC3\u670D\u52A1"><a class="header-anchor" href="#\u542F\u52A8\u7EDF\u4E00\u914D\u7F6E\u4E2D\u5FC3\u670D\u52A1" aria-hidden="true">#</a> \u542F\u52A8\u7EDF\u4E00\u914D\u7F6E\u4E2D\u5FC3\u670D\u52A1</h5><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>\u52A0\u5165bus\u7EC4\u4EF6\u4E4B\u540E\u5BA2\u6237\u7AEF\u542F\u52A8\u62A5\u9519
\u539F\u56E0\uFF1Aspringcloud\u4E2D\u9ED8\u8BA4\u8FDE\u63A5\u4E0D\u5230\u8FDC\u7A0B\u670D\u52A1\u5668\u4E0D\u4F1A\u62A5\u9519\uFF0C\u4F46\u662F\u5728\u4F7F\u7528bus\u6D88\u606F\u603B\u7EBF\u65F6\u5FC5\u987B\u5F00\u542F\u8FDE\u63A5\u8FDC\u7A0B\u670D\u52A1\u5931\u8D25\u62A5\u9519
\u9700\u8981\u5728\u5BA2\u6237\u7AEF\u7684\u914D\u7F6E\u4E2D\u6DFB\u52A0\u914D\u7F6E\uFF0C\u5F00\u542F\u8FDE\u63A5\u4E0D\u5230\u8FDC\u7A0B\u670D\u52A1\u5668\u7ACB\u5373\u62A5\u9519
spring.cloud.config.fail-fast=true ## \u8BA9\u5B83\u5FEB\u901F\u5931\u8D25\uFF0C\u5F53\u6211\u4EEC\u7684\u6D88\u606F\u603B\u7EBF\u8FDE\u63A5\u51FA\u73B0\u95EE\u9898\u7684\u65F6\u5019\uFF0C\u4E5F\u4E0D\u5F71\u54CD\u5FAE\u670D\u52A1\u7684\u6B63\u5E38\u8FD0\u884C
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+Zn+'" alt="image-20211218074338504"></p><p>\u5F53\u6211\u4EEC\u542F\u52A8\u4E4B\u914D\u7F6E\u4E2D\u5FC3\u670D\u52A1\u4E4B\u540E\uFF0C\u5C31\u4F1A\u5728rabbitmq\u4E2D\u65B0\u751F\u6210\u4E00\u4E2A\u961F\u5217\uFF0C\u4E4B\u540E\u5C31\u662F\u901A\u8FC7\u8FD9\u4E2A\u961F\u5217\u8FDB\u884C\u5E7F\u64AD\u6D88\u606F</p><p><img src="'+Kn+`" alt="image-20211218072016420"></p><h5 id="\u6267\u884Cpost\u63A5\u53E3\u5237\u65B0\u914D\u7F6E"><a class="header-anchor" href="#\u6267\u884Cpost\u63A5\u53E3\u5237\u65B0\u914D\u7F6E" aria-hidden="true">#</a> \u6267\u884Cpost\u63A5\u53E3\u5237\u65B0\u914D\u7F6E</h5><p>\u4E4B\u540E\u5F53\u6211\u4EEC\u7684\u67D0\u4E00\u4E2A\u6216\u8005\u591A\u4E2A\u670D\u52A1\u7684\u8FDC\u7A0B\u914D\u7F6E\u9700\u8981\u66F4\u65B0\uFF0C\u90A3\u4E48\u53EA\u9700\u8981\u5411config-server\u53D1\u9001\u4E00\u4E2Apost\u8BF7\u6C42\uFF0C\u5B83\u4E0B\u9762\u9700\u8981\u66F4\u65B0\u7684\u670D\u52A1\u914D\u7F6E\u4F1A\u81EA\u52A8\u62C9\u53D6\u914D\u7F6E\u6587\u4EF6</p><p>\u6B64\u65F6\u6211\u4EEC\u9700\u8981\u4E5F\u662F\u9700\u8981\u5728config-server\u4E2D\u66B4\u9732\u7AEF\u70B9</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">management.endpoints.web.exposure.include</span><span class="token punctuation">=</span><span class="token value attr-value">* ## \u8FD9\u4E2A\u5982\u679C\u662Fproperties\u914D\u7F6E\u7684\u8BDD\uFF0C\u9700\u8981\u53BB\u9664\u53CC\u5F15\u53F7\uFF0C\u5982\u679C\u662Fyaml\u7684\u8BDD\u53EF\u4EE5\u52A0\u4E0A\u53CC\u5F15\u53F7</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4FEE\u6539\u8FDC\u7A0B\u914D\u7F6E\u540E\u5728\u914D\u7F6E\u4E2D\u5FC3\u670D\u52A1\u901A\u8FC7\u6267\u884Cpost\u63A5\u53E3\u5237\u65B0\u914D\u7F6E</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">curl</span> -X POST http://localhost:7878/actuator/bus-refresh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5 id="\u6D4B\u8BD5-1"><a class="header-anchor" href="#\u6D4B\u8BD5-1" aria-hidden="true">#</a> \u6D4B\u8BD5</h5><p>\u8FD8\u662F\u548C\u4E0D\u7528bus\u7684\u65F6\u5019\u4E00\u6837\uFF0C\u8BBF\u95EE<code>http://localhost:7880/hello/hello</code>\uFF0C\u8FD4\u56DE</p><p><img src="`+Yn+'" alt="image-20211218074637496"></p><p>\u7136\u540E\u6211\u4EEC\u5728git\u4E0A\u4FEE\u6539\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684name\u503C</p><p><img src="'+ns+`" alt="image-20211218074722599"></p><p>\u53D1\u9001POST\u8BF7\u6C42</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">curl</span> -X POST http://localhost:7878/actuator/bus-refresh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u7136\u540E\u6211\u4EEC\u518D\u6B21\u8BF7\u6C42<code>http://localhost:7880/hello/hello</code>\uFF0C\u5DF2\u7ECF\u4FEE\u6539\u6210\u6211\u4EEC\u914D\u7F6E\u7684lisi</p><p><img src="`+ss+`" alt="image-20211218121802075"></p><p>\u901A\u8FC7\u4E0A\u8FF0\u7684\u914D\u7F6E\u5C31\u5B9E\u73B0\u4E86\u914D\u7F6E\u624B\u52A8\u591A\u670D\u52A1\u5237\u65B0\u914D\u7F6E</p><h4 id="\u6307\u5B9A\u670D\u52A1\u5237\u65B0\u914D\u7F6E"><a class="header-anchor" href="#\u6307\u5B9A\u670D\u52A1\u5237\u65B0\u914D\u7F6E" aria-hidden="true">#</a> \u6307\u5B9A\u670D\u52A1\u5237\u65B0\u914D\u7F6E</h4><h5 id="\u8BF4\u660E-3"><a class="header-anchor" href="#\u8BF4\u660E-3" aria-hidden="true">#</a> \u8BF4\u660E</h5><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u4F7F\u7528<code>curl -X POST http://localhost:7878/actuator/bus-refresh</code>\u8FD9\u79CD\u65B9\u5F0F\u5237\u65B0\u914D\u7F6E\u662F\u5168\u90E8\u5E7F\u64AD\u5F62\u5F0F\uFF0C\u4E5F\u5C31\u662F\u6240\u6709\u7684\u5FAE\u670D\u52A1\u90FD\u80FD\u63A5\u6536\u5230\u5237\u65B0\u914D\u7F6E\u901A\u77E5\uFF0C\u4F46\u6709\u65F6\u5019\u6211\u4EEC\u4FEE\u6539\u7684\u4EC5\u4EC5\u662F\u67D0\u4E2A\u670D\u52A1\u5668\u7684\u914D\u7F6E\uFF0C\u8FD9\u4E2A\u65F6\u5019\u5BF9\u4E8E\u5176\u4ED6\u670D\u52A1\u7684\u901A\u77E5\u662F\u591A\u4F59\u7684\uFF0C\u56E0\u6B64\u5C31\u9700\u8981\u6307\u5B9A\u670D\u52A1\u8FDB\u884C\u901A\u77E5</p><h5 id="\u6307\u5B9A\u670D\u52A1\u5237\u65B0\u914D\u7F6E\u5B9E\u73B0"><a class="header-anchor" href="#\u6307\u5B9A\u670D\u52A1\u5237\u65B0\u914D\u7F6E\u5B9E\u73B0" aria-hidden="true">#</a> \u6307\u5B9A\u670D\u52A1\u5237\u65B0\u914D\u7F6E\u5B9E\u73B0</h5><p>\u6307\u5B9A\u7AEF\u53E3\u5237\u65B0\u67D0\u4E2A\u5177\u4F53\u7684\u670D\u52A1</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">curl</span> -X POST http://localhost:7878/actuator/bus-refresh/springcloud-config-client-7879:7879
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6307\u5B9A\u670D\u52A1ID\u5237\u65B0\u670D\u52A1\u96C6\u7FA4\u8282\u70B9</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">curl</span> -X POST http://localhost:7878/actuator/bus-refresh/springcloud-config-client-7879
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5176\u4E2D\uFF0Cconfigclient\u4EE3\u8868\u5237\u65B0\u670D\u52A1\u7684\u552F\u4E00\u6807\u8BC6</p><h4 id="\u96C6\u6210webhook\u5B9E\u73B0\u81EA\u52A8\u5237\u65B0"><a class="header-anchor" href="#\u96C6\u6210webhook\u5B9E\u73B0\u81EA\u52A8\u5237\u65B0" aria-hidden="true">#</a> \u96C6\u6210webhook\u5B9E\u73B0\u81EA\u52A8\u5237\u65B0</h4><p>webhooks\u5176\u5B9E\u5C31\u662F\u7ED9git\u4ED3\u5E93\u6DFB\u52A0\u4E00\u4E2A\u76D1\u542C\u4E8B\u4EF6\uFF0C\u53EF\u4EE5\u662F\u5F53\u7528\u6237\u4FEE\u6539\u914D\u7F6E\u6587\u4EF6\u70B9\u51FB\u4FEE\u6539\u63D0\u4EA4\u4E4B\u540E\uFF0C\u89E6\u53D1\u8BE5\u4E8B\u4EF6</p><h5 id="\u914D\u7F6Ewebhooks"><a class="header-anchor" href="#\u914D\u7F6Ewebhooks" aria-hidden="true">#</a> \u914D\u7F6Ewebhooks</h5><ol><li>\u6DFB\u52A0webhooks</li></ol><p><img src="`+as+'" alt="image-20211218191128019"></p><ol start="2"><li>\u5728webhooks\u4E2D\u6DFB\u52A0\u5237\u65B0\u914D\u7F6E\u63A5\u53E3</li></ol><p><img src="'+ts+'" alt="image-20211218191424880"></p><p>\u5176\u5B9E\u5C31\u662F\u8BA9webhooks\u5728\u6211\u4EEC\u63D0\u4EA4\u914D\u7F6E\u6587\u4EF6\u7684\u65F6\u5019\uFF0C\u89E6\u53D1<code>http://localhost:7878/actuator/bus-refresh</code>\u8FD9\u4E2A\u8BF7\u6C42\uFF0C\u66FF\u4EE3\u6211\u4EEC\u53D1\u9001POST\u8BF7\u6C42</p><ol start="3"><li>\u5F53\u6211\u4EEC\u4F7F\u7528\u5185\u7F51\u7A7F\u900F\u914D\u7F6Eurl\uFF0C\u5E76\u914D\u7F6Ewebhooks\u7684\u65F6\u5019\uFF0C\u4F1A\u81EA\u52A8\u53D1\u9001\u4E00\u6761\u8BF7\u6C42\u7ED9\u914D\u7F6E\u7684\u8FDE\u63A5\u9A8C\u8BC1\uFF0C\u4F1A\u51FA\u73B0\u9519\u8BEF</li></ol><p><img src="'+es+`" alt="image-20211218194031126"></p><p>\u89E3\u51B3\u529E\u6CD5\uFF1A</p><p>\u56E0\u4E3Awebhooks\u5728\u53D1\u9001\u7684\u65F6\u5019\u4F1A\u628A\u5F88\u591A\u7684\u4FE1\u606F\u53D1\u9001\u7ED9\u670D\u52A1\u7AEF\uFF0Cspringcloud\u65B0\u7248\u672C(H.SR6)\u6709\u4E00\u4E2Abug\uFF0C</p><p>\u53EA\u9700\u8981\u6DFB\u52A0\u8FC7\u6EE4\u5668</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebHooksFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> filterConfig<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> servletRequest<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> servletResponse<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
        <span class="token class-name">HttpServletRequest</span> httpServletRequest <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">)</span> servletRequest<span class="token punctuation">;</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>httpServletRequest<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>url<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">&quot;/bus-refresh&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>servletRequest<span class="token punctuation">,</span>servletResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">RequestWrapper</span> requestWrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RequestWrapper</span><span class="token punctuation">(</span>httpServletRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
        filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>requestWrapper<span class="token punctuation">,</span> servletResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">RequestWrapper</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServletRequestWrapper</span> <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token class-name">RequestWrapper</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">super</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">ServletInputStream</span> <span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token class-name">ByteArrayInputStream</span> byteArrayInputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteArrayInputStream</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">ServletInputStream</span> servletInputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServletInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token annotation punctuation">@Override</span>
                <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> byteArrayInputStream<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token annotation punctuation">@Override</span>
                <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isFinished</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> byteArrayInputStream<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token annotation punctuation">@Override</span>
                <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isReady</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token annotation punctuation">@Override</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setReadListener</span><span class="token punctuation">(</span><span class="token class-name">ReadListener</span> listener<span class="token punctuation">)</span> <span class="token punctuation">{</span>

                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> servletInputStream<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u5185\u7F51\u7A7F\u900F"><a class="header-anchor" href="#\u5185\u7F51\u7A7F\u900F" aria-hidden="true">#</a> \u5185\u7F51\u7A7F\u900F</h5><p>\u5F53\u6211\u4EEC\u4F7F\u7528webhooks\u7684\u65F6\u5019\uFF0C\u662F\u4E0D\u80FD\u8BBF\u95EE\u6211\u4EEC\u5C40\u57DF\u7F51\u5185\u90E8\u7684\u670D\u52A1\u7684\uFF0C\u4E3A\u4E86\u80FD\u6D4B\u8BD5webhooks\u662F\u5426\u53EF\u4EE5\u4F7F\u7528\uFF0C\u6211\u4EEC\u7684\u505A\u6CD5\u53EF\u4EE5\u6709\u4E24\u4E2A\u9009\u62E9\uFF1A</p><ul><li>\u5185\u7F51\u7A7F\u900F</li><li>\u8D2D\u4E70\u516C\u7F51\u670D\u52A1\u5668</li></ul><p>\u5185\u7F51\u7A7F\u900F\uFF0C\u5728\u4E0D\u901A\u8FC7\u516C\u7F51IP\u5730\u5740\u8BA9\u5728\u4E0D\u540C\u7684\u5C40\u57DF\u7F51\u4E0B\u7684\u7F51\u7EDC\u80FD\u4E92\u901A\uFF0C\u4E5F\u5C31\u662F\u80FD\u8BA9\u672C\u673A\u7684\u670D\u52A1\u7AEF\u53E3\u66B4\u9732\u51FA\u53BB\u8BA9\u4E92\u8054\u7F51\u4E2D\u7684\u8BF7\u6C42\u80FD\u53D1\u9001\u5230\u672C\u673A\u7684\u670D\u52A1\u7AEF\u53E3\u4E0A\u5904\u7406</p><blockquote><p>\u5185\u7F51\u7A7F\u900F\u7B80\u5355\u6765\u8BF4\u5C31\u662F\u5C06\u5185\u7F51\u5916\u7F51\u901A\u8FC7natapp\u96A7\u9053\u6253\u901A,\u8BA9\u5185\u7F51\u7684\u6570\u636E\u8BA9\u5916\u7F51\u53EF\u4EE5\u83B7\u53D6\u3002\u6BD4\u5982\u5E38\u7528\u7684\u529E\u516C\u5BA4\u8F6F\u4EF6\u7B49\uFF0C\u4E00\u822C\u5728\u529E\u516C\u5BA4\u6216\u5BB6\u91CC\uFF0C\u901A\u8FC7\u62E8\u53F7\u4E0A\u7F51\uFF0C\u8FD9\u6837\u529E\u516C\u8F6F\u4EF6\u53EA\u6709\u5728\u672C\u5730\u7684\u5C40\u57DF\u7F51\u4E4B\u5185\u624D\u80FD\u8BBF\u95EE\uFF0C\u90A3\u4E48\u95EE\u9898\u6765\u4E86\uFF0C\u5982\u679C\u662F\u624B\u673A\u4E0A\uFF0C\u6216\u8005\u516C\u53F8\u5916\u5730\u7684\u529E\u516C\u4EBA\u5458\uFF0C\u5982\u4F55\u8BBF\u95EE\u5230\u529E\u516C\u8F6F\u4EF6\u5462\uFF1F\u8FD9\u5C31\u9700\u8981natapp\u5185\u7F51\u7A7F\u900F\u5DE5\u5177\u4E86\u3002\u8FD0\u884Cnatapp\u96A7\u9053\u4E4B\u540E\uFF0Cnatapp\u4F1A\u5206\u914D\u4E00\u4E2A\u4E13\u5C5E\u57DF\u540D/\u7AEF\u53E3,\u529E\u516C\u8F6F\u4EF6\u5C31\u5DF2\u7ECF\u5728\u516C\u7F51\u4E0A\u4E86,\u5728\u5916\u5730\u7684\u529E\u516C\u4EBA\u5458\u53EF\u4EE5\u5728\u4EFB\u4F55\u5730\u65B9\u6109\u5FEB\u7684\u8BBF\u95EE\u529E\u516C\u8F6F\u4EF6\u4E86</p></blockquote><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>\u53EF\u4EE5\u4F7F\u7528natapp
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="maven\u6539\u9020springcloud\u9879\u76EE"><a class="header-anchor" href="#maven\u6539\u9020springcloud\u9879\u76EE" aria-hidden="true">#</a> maven\u6539\u9020springcloud\u9879\u76EE</h2><h3 id="\u5B58\u5728\u95EE\u9898"><a class="header-anchor" href="#\u5B58\u5728\u95EE\u9898" aria-hidden="true">#</a> \u5B58\u5728\u95EE\u9898</h3><p>\u6839\u636E\u4E4B\u524D\u7684\u5B66\u4E60\u8FC7\u7A0B\uFF0C\u6211\u4EEC\u5728\u9879\u76EE\u548C\u7F16\u7801\u4E0A\u6709\u8F83\u5927\u7684\u5197\u4F59\u548C\u8026\u5408\uFF0C\u53EF\u4EE5\u53D1\u73B0\u6709\u4E0B\u9762\u7684\u95EE\u9898</p><ul><li>\u9879\u76EE\u4F9D\u8D56\u4EE3\u7801\u8026\u5408\u7A0B\u5EA6\u8F83\u5927\uFF0Cmaven\u4F9D\u8D56\u914D\u7F6E\u91CD\u5408</li><li>springcloud\u7248\u672C\u4E0D\u56FA\u5B9A\uFF0C\u8FC7\u4E8E\u677E\u6563\uFF0C\u53EF\u80FD\u4F1A\u51FA\u73B0\u7248\u672C\u4E0D\u517C\u5BB9</li><li>\u5B58\u5728\u4E00\u4E9B\u516C\u5171\u7684\u4EE3\u7801\uFF0C\u6BD4\u5982\u5DE5\u5177\u7C7B\u3001\u5B9E\u4F53\u7C7B\u7B49</li></ul><h3 id="\u89E3\u51B3\u529E\u6CD5"><a class="header-anchor" href="#\u89E3\u51B3\u529E\u6CD5" aria-hidden="true">#</a> \u89E3\u51B3\u529E\u6CD5</h3><p>\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528maven\u7684\u7236\u5B50\u9879\u76EE\u6765\u89E3\u51B3\u4E00\u4E9Bmaven\u4F9D\u8D56\u91CD\u590D\u7684\u95EE\u9898\uFF0C\u5C06\u91CD\u590D\u7684\u4F9D\u8D56\u3001\u7248\u672C\u63A7\u5236\u653E\u5230\u7236\u9879\u76EE\u4E2D\uFF0C\u5C06\u4E00\u4E9B\u516C\u5171\u7684\u4EE3\u7801\u62BD\u53D6\u5230\u516C\u5171\u7684\u9879\u76EE\u4E2D</p><p><img src="`+ps+'" alt="image-20211218203850769"></p><h3 id="\u6784\u5EFA"><a class="header-anchor" href="#\u6784\u5EFA" aria-hidden="true">#</a> \u6784\u5EFA</h3><h4 id="\u521B\u5EFA\u7236\u9879\u76EE"><a class="header-anchor" href="#\u521B\u5EFA\u7236\u9879\u76EE" aria-hidden="true">#</a> \u521B\u5EFA\u7236\u9879\u76EE</h4><ol><li>\u521B\u5EFAmaven\u9879\u76EE\uFF0C\u7236\u9879\u76EE\u4E0D\u4F7F\u7528\u4EFB\u4F55\u9AA8\u67B6\uFF0C\u7236\u9879\u76EE\u4E2D\u4E0D\u5199\u4EE3\u7801\uFF0C\u4EC5\u4EC5\u7528\u6765\u7BA1\u7406\u4F9D\u8D56</li></ol><p><img src="'+os+`" alt="image-20211218204349903"></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">##</span> \u7EC4\u7EC7\u540D\u8FD9\u91CC\u586B\u5199\u9519\u8BEF\u4E86\uFF0C\u5E94\u8BE5\u662Fcom.example.cloud  \u4E5F\u5C31\u662Fcom.\u516C\u53F8\u540D.\u4EA7\u54C1\u540D</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>\u53EF\u4EE5\u4E3A\u4E86\u9879\u76EE\u4EE3\u7801\u7684\u6574\u6D01\uFF0C\u76F4\u63A5\u5C06\u7236\u9879\u76EE\u8FD9\u4E9B\u5220\u9664</li></ol><p><img src="`+ls+`" alt="image-20211218204558903"></p><ol start="3"><li>\u5168\u5C40\u7EF4\u62A4springcloud\u7248\u672C\uFF0C\u6DFB\u52A0\u4F9D\u8D56\u58F0\u660E</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring-cloud.version</span><span class="token punctuation">&gt;</span></span>Hoxton.SR6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring-cloud.version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--\u4E0B\u8F7Dspringcloud\u4F9D\u8D56\u516C\u5171\u7248\u672C--&gt;</span>
<span class="token comment">&lt;!-- \u5168\u5C40\u7BA1\u7406springcloud\u7248\u672C\uFF0C \u5E76\u4E0D\u4F1A\u5F15\u5165\u5177\u4F53\u7684\u4F9D\u8D56\uFF0C\u53EA\u662F\u58F0\u660E --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${spring-cloud.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u7236\u9879\u76EE\u7EE7\u627Fspringboot\u9879\u76EE\uFF0C\u5E76\u7EF4\u62A4springboot\u7684\u7EDF\u4E00\u7248\u672C</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5168\u5C40\u5B9A\u4E49\u7236\u9879\u76EEspringboot--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- lookup parent from repository --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u521B\u5EFA\u516C\u5171\u9879\u76EE"><a class="header-anchor" href="#\u521B\u5EFA\u516C\u5171\u9879\u76EE" aria-hidden="true">#</a> \u521B\u5EFA\u516C\u5171\u9879\u76EE</h4><ol><li>\u5728\u7236\u9879\u76EE\u4E2D\u521B\u5EFAmodule</li></ol><p>\u586B\u5199module\u540D\u79F0\u548C\u7EC4\u7EC7\u540D</p><p><img src="`+cs+`" alt="image-20211218205413784"></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">##</span> \u7EC4\u7EC7\u540D\u8FD9\u91CC\u586B\u5199\u9519\u8BEF\u4E86\uFF0C\u5E94\u8BE5\u662Fcom.example.cloud  \u4E5F\u5C31\u662Fcom.\u516C\u53F8\u540D.\u4EA7\u54C1\u540D</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u521B\u5EFA\u4E4B\u540Epom.xml\u6587\u4EF6\u5982\u679C\u88AB\u5FFD\u7565\u7684\u8BDD\uFF08maven\u6A21\u5757\u4E0D\u80FD\u88AB\u8BC6\u522B\uFF09\uFF0C\u53D6\u6D88\u4EE5\u4E0B\u52FE\u9009</p><p><img src="`+is+'" alt="image-20211218210227168"></p><p>\u5982\u679C\u51FA\u73B0\u76EE\u5F55\u4E0D\u5339\u914D\u7684\u60C5\u51B5\uFF0C\u53EF\u4EE5\u914D\u7F6E</p><p><img src="'+us+'" alt="image-20211218210815876"></p><ol start="2"><li>\u90A3\u4E48\u6211\u4EEC\u5C31\u7684\u4E00\u4E9B\u516C\u5171\u7C7B\u7684\u4EE3\u7801\u5C31\u53EF\u4EE5\u653E\u5728\u8FD9\u4E2Amodule\u4E2D\u4E86</li></ol><p><img src="'+rs+`" alt="image-20211218210914353"></p><ol start="3"><li>\u56E0\u4E3A\u516C\u5171\u9879\u76EE\u4E2D\u7684\u4EE3\u7801\u57FA\u672C\u4E0A\u6240\u6709\u7684\u670D\u52A1\u5B50\u6A21\u5757\u90FD\u4F7F\u7528\u5230\u4E86\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5728\u5B50\u6A21\u5757\u4E2D\u6BCF\u4E2A\u5F15\u5165\u6216\u8005\u662F\u76F4\u63A5\u5728\u7236\u9879\u76EE\u4E2D\u5F15\u5165\uFF0C\u5B50\u9879\u76EE\u5C31\u4F1A\u7EE7\u627F\u7236\u9879\u76EE\u7684\u4F9D\u8D56</li></ol><p>\u8FD9\u91CC\u9009\u62E9\u76F4\u63A5\u5728\u7236\u9879\u76EE\u4E2D\u5F15\u5165</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.example.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>springcloud-maven-common<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u521B\u5EFA\u4E1A\u52A1\u670D\u52A1"><a class="header-anchor" href="#\u521B\u5EFA\u4E1A\u52A1\u670D\u52A1" aria-hidden="true">#</a> \u521B\u5EFA\u4E1A\u52A1\u670D\u52A1</h4><p>\u8FD9\u91CC\u4EE5user\u4E3A\u4F8B</p><ol><li>\u521B\u5EFAmaven\u9879\u76EE</li></ol><p><img src="`+ds+`" alt="image-20211218211639507"></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">##</span> \u7EC4\u7EC7\u540D\u8FD9\u91CC\u586B\u5199\u9519\u8BEF\u4E86\uFF0C\u5E94\u8BE5\u662Fcom.example.springcloud  \u4E5F\u5C31\u662Fcom.\u516C\u53F8\u540D.\u4EA7\u54C1\u540D</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>\u56E0\u4E3A\u6211\u4EEC\u4E0D\u662F\u4F7F\u7528<code>spring initializr</code>\u521B\u5EFA\u7684\u6A21\u5757\uFF0C\u6240\u4EE5\u5165\u53E3\u7C7B\u9700\u8981\u81EA\u5DF1\u521B\u5EFA</li></ol><p>\u5165\u53E3\u7C7B\u9700\u8981\u6DFB\u52A0<code>@SpringBootApplication</code>\u6CE8\u89E3\uFF0C\u6240\u4EE5\u6211\u4EEC\u5C06web\u4F9D\u8D56\u6DFB\u52A0\u8FDB\u6765</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>\u5F53\u6211\u4EEC\u901A\u8FC7spring initializr\u521B\u5EFA\u4E00\u4E2A\u7A7A\u767D\u9879\u76EE\uFF0C\u4E5F\u5C31\u662F\u4EC0\u4E48\u90FD\u4E0D\u52FE\u9009\u7684\u65F6\u5019\uFF0C\u4E3A\u4EC0\u4E48\u53EF\u4EE5\u4F7F\u7528@SpringBootApplication\u6CE8\u89E3\u5462\uFF1F
\u56E0\u4E3A\u521B\u5EFA\u7A7A\u767D\u9879\u76EE\u7684\u65F6\u5019\u4F1A\u5F15\u5165\u4E00\u4E2A\u4F9D\u8D56
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
\u800C\u6211\u4EEC\u5728\u521B\u5EFA\u7684\u65F6\u5019\u5982\u679C\u52FE\u9009\u4E86web\u4F9D\u8D56\uFF0C\u5219\u4F1A\u5F15\u5165
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
\u4E5F\u5C31\u662F\u8BF4\uFF0Cweb\u4E2D\u5DF2\u7ECF\u5305\u542B\u4E86\u53EF\u4EE5\u542F\u52A8\u7684starter\uFF0C\u4E5F\u53EF\u4EE5\u6DFB\u52A0@SpringBootApplication\u6CE8\u89E3\u4E86
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u6837\u6211\u4EEC\u5C31\u53EF\u4EE5\u521B\u5EFA\u5165\u53E3\u7C7B\u5E76\u6DFB\u52A0\u6CE8\u89E3\u4E86</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>user</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringcloudMavenUserApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringcloudMavenUserApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u521B\u5EFAapplication.yaml\u6587\u4EF6</li></ol><p>\u8FD9\u6837\u6211\u4EEC\u7684\u914D\u7F6E\u5C31\u53EF\u4EE5\u5728\u8FD9\u91CC\u7F16\u5199\u4E86</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8089</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> springcloud<span class="token punctuation">-</span>maven<span class="token punctuation">-</span>user
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>product\u6A21\u5757\u505A\u4E86\u540C\u6837\u7684\u64CD\u4F5C\u4E4B\u540E\u5C31\u53EF\u4EE5\u542F\u52A8\u6A21\u5757\u4E86</li></ol><p><img src="`+ks+'" alt="image-20211218215828694"></p><ol start="5"><li>\u5F00\u542Fdashboard</li></ol><p><img src="'+vs+`" alt="image-20211218220051280"></p><h4 id="\u7ED9\u4E1A\u52A1\u670D\u52A1\u6DFB\u52A0\u6CE8\u518C\u4E2D\u5FC3consul"><a class="header-anchor" href="#\u7ED9\u4E1A\u52A1\u670D\u52A1\u6DFB\u52A0\u6CE8\u518C\u4E2D\u5FC3consul" aria-hidden="true">#</a> \u7ED9\u4E1A\u52A1\u670D\u52A1\u6DFB\u52A0\u6CE8\u518C\u4E2D\u5FC3consul</h4><p>\u56E0\u4E3A\u6240\u6709\u7684\u670D\u52A1\u90FD\u9700\u8981\u6CE8\u518C\u5230\u6CE8\u518C\u4E2D\u5FC3\uFF0C\u6240\u4EE5\u6211\u4EEC\u76F4\u63A5\u628A\u4F9D\u8D56\u6DFB\u52A0\u5230common\u6A21\u5757\u4E2D</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5F15\u5165consul\u4F9D\u8D56--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-consul-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--consul \u5065\u5EB7\u68C0\u67E5\u7684\u4F9D\u8D56 \u5FC5\u987B\u8981\u5F15\u5165\uFF0C\u5982\u679C\u6CA1\u6709\u5F15\u5165\u8FD9\u4E2A\u4F9D\u8D56\uFF0C\u5373\u4F7F\u670D\u52A1\u53EF\u7528\uFF0C\u4F46\u662F\u5728\u670D\u52A1\u5728consul\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3\u83B7\u53D6\u4E0D\u5230\u670D\u52A1\u72B6\u6001--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728\u9700\u8981\u6CE8\u518C\u5230\u6CE8\u518C\u4E2D\u5FC3\u7684\u670D\u52A1\u6DFB\u52A0\u914D\u7F6E</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">consul</span><span class="token punctuation">:</span>
      <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8500</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">service-name</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.application.name<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728\u542F\u52A8\u7C7B\u4E0A\u6DFB\u52A0\u6CE8\u89E3\u5F00\u542Fconsul\uFF08\u5176\u5B9E\u4E0D\u7528\u6DFB\u52A0\u4E5F\u662F\u53EF\u4EE5\u7684\uFF09\uFF0C\u4EE5user\u6A21\u5757\u4E3A\u4F8B</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringcloudMavenUserApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringcloudMavenUserApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u542F\u52A8\u670D\u52A1\uFF0C\u5DF2\u7ECF\u6CE8\u518C\u5230consul\u4E2D\u5FC3</p><p><img src="`+ms+'" alt="image-20211218224019835"></p><p>\u4E4B\u540E\u8981\u6DFB\u52A0\u7684\u4EC0\u4E48\u670D\u52A1\u57FA\u672C\u90FD\u662F\u524D\u9762\u7684\u6B65\u9AA4\u4E86</p><h2 id="\u9879\u76EE\u7EC3\u4E60"><a class="header-anchor" href="#\u9879\u76EE\u7EC3\u4E60" aria-hidden="true">#</a> \u9879\u76EE\u7EC3\u4E60</h2><h3 id="\u6982\u8FF0-1"><a class="header-anchor" href="#\u6982\u8FF0-1" aria-hidden="true">#</a> \u6982\u8FF0</h3><p>\u63A5\u4E0B\u6765\u4F1A\u4F7F\u7528springcloud\u6784\u5EFAems\u524D\u540E\u7AEF\u5206\u79BB\u9879\u76EE\u7EC3\u4E60\uFF0Cems\u5458\u5DE5\u7BA1\u7406\u7CFB\u7EDF</p><p>\u76EE\u524D\u7684\u9879\u76EE\u67B6\u6784\u65B9\u5F0F</p><p><img src="'+gs+`" alt="image-20211218235307792"></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>\u8FD9\u91CC\u8FD8\u6CA1\u6709\u5305\u542B\u6570\u636E\u6301\u4E45\u5316\u548C\u5176\u4ED6\u65B9\u9762\u7684\u4FE1\u606F\uFF0C\u53EA\u662F\u5C06springcloud\u5B66\u4E60\u548C\u6574\u5408\u7684\u90E8\u5206\u5728\u9879\u76EE\u4E2D\u7684\u4F4D\u7F6E\u7ED8\u5236\u51FA\u6765
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="\u9879\u76EE\u7ED3\u6784"><a class="header-anchor" href="#\u9879\u76EE\u7ED3\u6784" aria-hidden="true">#</a> \u9879\u76EE\u7ED3\u6784</h3><p>\u6784\u5EFA\u65B9\u5F0F\u8FD8\u662F\u548C\u7B2C9\u7AE0\u4E2D\u4E00\u6837\uFF0C\u4E00\u822C\u662F\u5148\u628A\u4E1A\u52A1\u529F\u80FD\u5F00\u53D1\u5B8C\u4E4B\u540E\u5728\u6DFB\u52A0\u7F51\u5173\u3001\u7EDF\u4E00\u914D\u7F6E\u7BA1\u7406\u7B49\u975E\u8026\u5408\u5728\u4E1A\u52A1\u529F\u80FD\u4E2D\u7684\u670D\u52A1\uFF0C\u6240\u4EE5\u6211\u4EEC\u5148\u6309\u7167\u4E0B\u9762\u7684\u6A21\u5757\u521B\u5EFA</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>ems-parent
	<span class="token list punctuation">-</span> ems-common				\u516C\u5171\u6A21\u5757\uFF0C\u5305\u542B\u5DE5\u5177\u7C7B\u548C\u5B9E\u4F53\u7C7B\u7B49
	<span class="token list punctuation">-</span> ems-emp						\u5458\u5DE5\u7BA1\u7406\u6A21\u5757
	<span class="token list punctuation">-</span> ems-user					\u7528\u6237\u7BA1\u7406\u6A21\u5757
	<span class="token list punctuation">-</span> ems-file					\u6587\u4EF6\u7BA1\u7406\u6A21\u5757\uFF0C\u4E3B\u8981\u7528\u4E8E\u6587\u4EF6\u4E0A\u4F20\u4E0B\u8F7D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u521B\u5EFA\u9879\u76EE\u548C\u6A21\u5757"><a class="header-anchor" href="#\u521B\u5EFA\u9879\u76EE\u548C\u6A21\u5757" aria-hidden="true">#</a> \u521B\u5EFA\u9879\u76EE\u548C\u6A21\u5757</h4><p>\u6309\u7167\u7B2C9\u7AE0\u521B\u5EFA</p><p><img src="`+bs+`" alt="image-20211219002604723"></p><h4 id="\u7236\u9879\u76EE\u5F15\u5165\u4F9D\u8D56"><a class="header-anchor" href="#\u7236\u9879\u76EE\u5F15\u5165\u4F9D\u8D56" aria-hidden="true">#</a> \u7236\u9879\u76EE\u5F15\u5165\u4F9D\u8D56</h4><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5168\u5C40\u5B9A\u4E49\u7236\u9879\u76EEspringboot--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- lookup parent from repository --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring-cloud.version</span><span class="token punctuation">&gt;</span></span>Hoxton.SR6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring-cloud.version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>lombok.version</span><span class="token punctuation">&gt;</span></span>1.18.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>lombok.version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--\u4E0B\u8F7Dspringcloud\u4F9D\u8D56\u516C\u5171\u7248\u672C--&gt;</span>
<span class="token comment">&lt;!-- \u5168\u5C40\u7BA1\u7406springcloud\u7248\u672C\uFF0C \u5E76\u4E0D\u4F1A\u5F15\u5165\u5177\u4F53\u7684\u4F9D\u8D56\uFF0C\u53EA\u662F\u58F0\u660E --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${spring-cloud.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u5F15\u5165web\u4F9D\u8D56"><a class="header-anchor" href="#\u5F15\u5165web\u4F9D\u8D56" aria-hidden="true">#</a> \u5F15\u5165web\u4F9D\u8D56</h4><p>\u56E0\u4E3A\u4E09\u4E2A\u4E1A\u52A1\u670D\u52A1\u90FD\u4F9D\u8D56spring-boot-web\u3001consul\u6CE8\u518C\u4E2D\u5FC3\u76F8\u5173\u7684\u4F9D\u8D56\uFF0C\u6240\u4EE5\u6211\u4EEC\u5C06web\u4F9D\u8D56\u653E\u5230common\u6A21\u5757\u4E2D</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5F15\u5165spring-boot-starter-web\u4F9D\u8D56--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--\u5F15\u5165consul\u4F9D\u8D56--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-consul-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--consul \u5065\u5EB7\u68C0\u67E5\u7684\u4F9D\u8D56 \u5FC5\u987B\u8981\u5F15\u5165\uFF0C\u5982\u679C\u6CA1\u6709\u5F15\u5165\u8FD9\u4E2A\u4F9D\u8D56\uFF0C\u5373\u4F7F\u670D\u52A1\u53EF\u7528\uFF0C\u4F46\u662F\u5728\u670D\u52A1\u5728consul\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3\u83B7\u53D6\u4E0D\u5230\u670D\u52A1\u72B6\u6001--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--\u5F15\u5165lombok--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${lombok.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u5F00\u53D1\u5165\u53E3\u7C7B"><a class="header-anchor" href="#\u5F00\u53D1\u5165\u53E3\u7C7B" aria-hidden="true">#</a> \u5F00\u53D1\u5165\u53E3\u7C7B</h4><p>\u4EE5user\u6A21\u5757\u4E3A\u4F8B\uFF0C\u5176\u4ED6\u6A21\u5757file\u3001emp\u90FD\u662F\u5982\u6B64</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmsUserApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">EmsUserApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u7F16\u5199\u914D\u7F6E\u6587\u4EF6-1"><a class="header-anchor" href="#\u7F16\u5199\u914D\u7F6E\u6587\u4EF6-1" aria-hidden="true">#</a> \u7F16\u5199\u914D\u7F6E\u6587\u4EF6</h4><p>\u4EE5user\u6A21\u5757\u4E3A\u4F8B\uFF0C\u5176\u4ED6\u6A21\u5757file\u3001emp\u90FD\u662F\u5982\u6B64</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8989</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> ems<span class="token punctuation">-</span>user
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">consul</span><span class="token punctuation">:</span>
      <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8500</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">service-name</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.application.name<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5176\u4E2D\uFF0C\u5404\u4E2A\u7AEF\u53E3\u4E3A\uFF1A</p><ul><li>user 8989</li><li>file 8990</li><li>emp 8991</li></ul><h3 id="\u542F\u52A8\u6D4B\u8BD5-3"><a class="header-anchor" href="#\u542F\u52A8\u6D4B\u8BD5-3" aria-hidden="true">#</a> \u542F\u52A8\u6D4B\u8BD5</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>\u5982\u679C\u542F\u52A8\u51FA\u73B0\uFF1Ajava: JDK isn&#39;t specified for module\u9519\u8BEF\uFF0C\u5220\u9664.idea\u6587\u4EF6\u5173\u95EDidea\uFF0C\u91CD\u65B0\u6253\u5F00\u9879\u76EE
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u542F\u52A8\u4E4B\u540E\uFF0C\u6211\u4EEC\u5C31\u53EF\u4EE5\u5728\u6CE8\u518C\u4E2D\u5FC3\u770B\u5230\u6211\u4EEC\u7684\u670D\u52A1\u4E86</p><p><img src="`+hs+`" alt="image-20211219011445145"></p><h3 id="\u5BF9\u5404\u4E2A\u670D\u52A1\u7F16\u5199\u5BF9\u5E94\u7684\u63A5\u53E3"><a class="header-anchor" href="#\u5BF9\u5404\u4E2A\u670D\u52A1\u7F16\u5199\u5BF9\u5E94\u7684\u63A5\u53E3" aria-hidden="true">#</a> \u5BF9\u5404\u4E2A\u670D\u52A1\u7F16\u5199\u5BF9\u5E94\u7684\u63A5\u53E3</h3><h4 id="\u7528\u6237\u6A21\u5757"><a class="header-anchor" href="#\u7528\u6237\u6A21\u5757" aria-hidden="true">#</a> \u7528\u6237\u6A21\u5757</h4><h5 id="\u9A8C\u8BC1\u7801\u63A5\u53E3"><a class="header-anchor" href="#\u9A8C\u8BC1\u7801\u63A5\u53E3" aria-hidden="true">#</a> \u9A8C\u8BC1\u7801\u63A5\u53E3</h5><p>\u6211\u4EEC\u4E4B\u524D\u5728\u7F16\u5199\u9A8C\u8BC1\u7684\u65F6\u5019\uFF0C\u90FD\u662F\u5411\u524D\u7AEF\u8F93\u51FA\u6D41\uFF0C\u5C06\u56FE\u7247\u8F93\u51FA\u5230\u524D\u7AEF\u9875\u9762\u4E0A\uFF0C\u4F46\u662F\u5728\u524D\u540E\u5206\u79BB\u7684\u9879\u76EE\u4E2D\uFF0C\u5C31\u4E0D\u80FD\u4EE5\u6D41\u7684\u65B9\u5F0F\u8F93\u51FA\u4E86\uFF0C\u53EF\u4EE5\u9009\u62E9base64\u7684\u65B9\u5F0F\u8F93\u51FA</p><h6 id="\u63A5\u53E3\u8BF4\u660E"><a class="header-anchor" href="#\u63A5\u53E3\u8BF4\u660E" aria-hidden="true">#</a> \u63A5\u53E3\u8BF4\u660E</h6><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">-</span> \u5730\u5740 http://localhost:8992/user/getImage
<span class="token list punctuation">-</span> \u8BF7\u6C42\u65B9\u5F0F\uFF1AGET
<span class="token list punctuation">-</span> \u8BF7\u6C42\u53C2\u6570\uFF1A\u65E0
<span class="token list punctuation">-</span> \u54CD\u5E94\u7ED3\u679C\uFF1A{&quot;msg&quot;:&quot;\u83B7\u53D6\u6210\u529F&quot;,&quot;status&quot;:true,&quot;data&quot;:&quot;\u5FC5\u987B\u662F\u9A8C\u8BC1\u7801\u7684base64\u683C\u5F0F\uFF0C\u5982\uFF1A<span class="token code-snippet code keyword">\`data:image/png;base4,.....\`</span>&quot;}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u7528\u6237\u6CE8\u518C"><a class="header-anchor" href="#\u7528\u6237\u6CE8\u518C" aria-hidden="true">#</a> \u7528\u6237\u6CE8\u518C</h5><h6 id="\u63A5\u53E3\u8BF4\u660E-1"><a class="header-anchor" href="#\u63A5\u53E3\u8BF4\u660E-1" aria-hidden="true">#</a> \u63A5\u53E3\u8BF4\u660E</h6><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">-</span> \u5730\u5740\uFF1Ahttp://localhost:8992/user/register?code=xxxx&amp;Codekey=xxxx
<span class="token list punctuation">-</span> \u8BF7\u6C42\u65B9\u5F0F\uFF1APOST
<span class="token list punctuation">-</span> \u53C2\u6570\uFF1A{sex:&quot;\u7537&quot;,realname:&quot;\u5F20\u4E09&quot;,password:&quot;123456&quot;,username:&quot;zhansan&quot;}(json\u683C\u5F0F)
<span class="token list punctuation">-</span> \u54CD\u5E94\u7ED3\u679C\uFF1A
	<span class="token list punctuation">-</span> \u6210\u529F\uFF1A{&quot;msg&quot;:&quot;\u6CE8\u518C\u6210\u529F&quot;,&quot;state&quot;:true}
	<span class="token list punctuation">-</span> \u5931\u8D25\uFF1A{&quot;msg&quot;:&quot;\u7528\u6237\u540D\u5DF2\u7ECF\u5B58\u5728&quot;,&quot;state&quot;:false}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u7528\u6237\u767B\u5F55"><a class="header-anchor" href="#\u7528\u6237\u767B\u5F55" aria-hidden="true">#</a> \u7528\u6237\u767B\u5F55</h5><h6 id="\u63A5\u53E3\u8BF4\u660E-2"><a class="header-anchor" href="#\u63A5\u53E3\u8BF4\u660E-2" aria-hidden="true">#</a> \u63A5\u53E3\u8BF4\u660E</h6><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">-</span> \u5730\u5740\uFF1Ahttp://localhost:8992/user/login
<span class="token list punctuation">-</span> \u8BF7\u6C42\u65B9\u5F0F\uFF1APOST
<span class="token list punctuation">-</span> \u53C2\u6570\uFF1A{username:&quot;zhangsan&quot;,password:&quot;123456&quot;}(json\u683C\u5F0F)

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u5458\u5DE5\u6A21\u5757"><a class="header-anchor" href="#\u5458\u5DE5\u6A21\u5757" aria-hidden="true">#</a> \u5458\u5DE5\u6A21\u5757</h4><h5 id="\u5458\u5DE5\u5217\u8868"><a class="header-anchor" href="#\u5458\u5DE5\u5217\u8868" aria-hidden="true">#</a> \u5458\u5DE5\u5217\u8868</h5><h5 id="\u4FDD\u5B58\u5458\u5DE5\u4FE1\u606F"><a class="header-anchor" href="#\u4FDD\u5B58\u5458\u5DE5\u4FE1\u606F" aria-hidden="true">#</a> \u4FDD\u5B58\u5458\u5DE5\u4FE1\u606F</h5><h5 id="\u67E5\u770B\u5458\u5DE5\u4FE1\u606F"><a class="header-anchor" href="#\u67E5\u770B\u5458\u5DE5\u4FE1\u606F" aria-hidden="true">#</a> \u67E5\u770B\u5458\u5DE5\u4FE1\u606F</h5><h5 id="\u66F4\u65B0\u5458\u5DE5\u4FE1\u606F"><a class="header-anchor" href="#\u66F4\u65B0\u5458\u5DE5\u4FE1\u606F" aria-hidden="true">#</a> \u66F4\u65B0\u5458\u5DE5\u4FE1\u606F</h5><p><strong>\u5F85\u66F4\u65B0</strong></p><h2 id="spring-cloud-alibaba"><a class="header-anchor" href="#spring-cloud-alibaba" aria-hidden="true">#</a> spring cloud alibaba</h2><p><strong>\u5C31\u662F\u5DE5\u5177\u96C6\uFF0C\u672C\u6B21\u4F7F\u7528\u7684\u7248\u672C\uFF1A2.2.1</strong></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>\u4E3A\u4EC0\u4E48\u8981\u4F7F\u7528alibaba\uFF0C\u6267\u52E4\u5B66\u4E60\u7684springcloud\u652F\u6301\u7684Netflix\u5F00\u6E90\u7684\u5F88\u591A\u7EC4\u4EF6\u90FD\u5DF2\u7ECF\u505C\u6B62\u66F4\u65B0\u7EF4\u62A4\u4E86\uFF0C\u6240\u4EE5\u5C31\u51FA\u73B0\u4E86\u4E00\u4E9B\u66FF\u4EE3\u54C1
<span class="token list punctuation">-</span> nacos \u6CE8\u518C\u4E2D\u5FC3
<span class="token list punctuation">-</span> \u670D\u52A1\u901A\u4FE1\u65B9\u5F0F\u6CA1\u6709\u4EFB\u4F55\u53D8\u5316
<span class="token list punctuation">-</span> sentinel \u6D41\u91CF\u63A7\u5236\u66FF\u4EE3hystrix
<span class="token list punctuation">-</span> gateway\u7F51\u5173\u6CA1\u6709\u53D8\u5316
<span class="token list punctuation">-</span> config\u548Cbus\u8FDB\u884C\u8FDB\u4E00\u6B65\u5C01\u88C5
\u4E5F\u5C31\u662F\u8BF4spring alibaba\u662F\u5728\u4E4B\u524Dspring cloud netflix\u5DE5\u5177\u96C6\u7EC4\u4EF6\u7684\u57FA\u7840\u4E4B\u4E0A\u5F00\u53D1\u51FA\u6765\u7684\u5DE5\u5177\u96C6\u7EC4\u4EF6\uFF0C\u6709\u4E00\u4E9B\u8FD8\u662F\u7528\u4E4B\u524D\u7684\u7EC4\u4EF6\uFF0C\u4E5F\u5C31\u662F\u548C\u4E4B\u524D\u76F8\u8F85\u76F8\u6210
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u7B80\u4ECB"><a class="header-anchor" href="#\u7B80\u4ECB" aria-hidden="true">#</a> \u7B80\u4ECB</h3><blockquote><p>\u5B98\u65B9\u7F51\u5740\uFF1Ahttps://spring.io/projects/spring-cloud-alibaba</p><p>Spring Cloud Alibaba provides a one-stop solution for distributed application development. It contains all the components required to develop distributed applications, making it easy for you to develop your applications using Spring Cloud.</p><p>With Spring Cloud Alibaba, you only need to add some annotations and a small amount of configurations to connect Spring Cloud applications to the distributed solutions of Alibaba, and build a distributed application system with Alibaba middleware.</p><p>\u7FFB\u8BD1\uFF1A</p><p>Spring Cloud Alibaba \u4E3A\u5206\u5E03\u5F0F\u5E94\u7528\u5F00\u53D1\u63D0\u4F9B\u4E00\u7AD9\u5F0F\u89E3\u51B3\u65B9\u6848\u3002\u5B83\u5305\u542B\u4E86\u5F00\u53D1\u5206\u5E03\u5F0F\u5E94\u7528\u6240\u9700\u7684\u6240\u6709\u7EC4\u4EF6\uFF0C\u8BA9\u60A8\u53EF\u4EE5\u8F7B\u677E\u5730\u4F7F\u7528 Spring Cloud \u5F00\u53D1\u60A8\u7684\u5E94\u7528</p><p>\u4F7F\u7528 Spring Cloud Alibaba\uFF0C\u60A8\u53EA\u9700\u6DFB\u52A0\u4E00\u4E9B\u6CE8\u89E3\u548C\u5C11\u91CF\u914D\u7F6E\u5373\u53EF\u5C06 Spring Cloud \u5E94\u7528\u8FDE\u63A5\u5230\u5206\u5E03\u5F0F\u963F\u91CC\u5DF4\u5DF4\u7684\u89E3\u51B3\u65B9\u6848\uFF0C\u5E76\u4E0E\u963F\u91CC\u5DF4\u5DF4\u4E2D\u95F4\u4EF6\u6784\u5EFA\u5206\u5E03\u5F0F\u5E94\u7528\u7CFB\u7EDF</p></blockquote><h3 id="\u73AF\u5883\u642D\u5EFA-2"><a class="header-anchor" href="#\u73AF\u5883\u642D\u5EFA-2" aria-hidden="true">#</a> \u73AF\u5883\u642D\u5EFA</h3><h4 id="\u6784\u5EFA\u9879\u76EE\u5E76\u5F15\u5165\u4F9D\u8D56"><a class="header-anchor" href="#\u6784\u5EFA\u9879\u76EE\u5E76\u5F15\u5165\u4F9D\u8D56" aria-hidden="true">#</a> \u6784\u5EFA\u9879\u76EE\u5E76\u5F15\u5165\u4F9D\u8D56</h4><p>\u521B\u5EFAspringboot\u9879\u76EE\uFF0C\u5E76\u4FEE\u6539\u9879\u76EE\u7684springboot\u7248\u672C\u4E3A2.2.5\u7248\u672C</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5B9A\u4E49springcloud alibaba\u7684\u7248\u672C--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring.cloud.alibaba.version</span><span class="token punctuation">&gt;</span></span>2.2.1.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring.cloud.alibaba.version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!--\u5168\u5C40\u5F15\u5165springcloud alibaba\u4E0B\u8F7D\u4F9D\u8D56\u5730\u5740\uFF0C\u5E76\u4E0D\u4F1A\u5F15\u5165\u4F9D\u8D56--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-alibaba-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${spring.cloud.alibaba.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="nacos"><a class="header-anchor" href="#nacos" aria-hidden="true">#</a> nacos</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3\uFF0C\u7528\u6765\u66FF\u4EE3eureka\u6216\u8005consul\uFF0C\u6211\u4EEC\u4E4B\u524D\u7528\u7684\u662Fconsul\u6240\u4EE5\u4E3B\u8981\u662F\u66FF\u4EE3consul
nacos : name configurations
<span class="token list punctuation">-</span> name server \u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3
<span class="token list punctuation">-</span> configurations \u7EDF\u4E00\u914D\u7F6E\u4E2D\u5FC3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u4EC0\u4E48\u662Fnacos"><a class="header-anchor" href="#\u4EC0\u4E48\u662Fnacos" aria-hidden="true">#</a> \u4EC0\u4E48\u662Fnacos</h4><blockquote><p>\u5B98\u7F51\uFF1Ahttps://nacos.io/zh-cn/</p><p><img src="`+fs+`" alt="image-20211219024625184"></p><p>nacos\u81F4\u529B\u4E8E\u5E2E\u52A9\u60A8\u53D1\u73B0\u3001\u914D\u7F6E\u548C\u7BA1\u7406\u5FAE\u670D\u52A1\u3002nacos\u63D0\u4F9B\u4E86\u4E00\u7EC4\u7B80\u5355\u7684\u7684\u7279\u6027\u96C6\uFF0C\u5E2E\u52A9\u60A8\u662F\u5B9E\u73B0\u52A8\u6001\u670D\u52A1\u53D1\u73B0\u3001\u670D\u52A1\u914D\u7F6E\u3001\u670D\u52A1\u5143\u6570\u636E\u53CA\u6D41\u91CF\u7BA1\u7406</p><p><strong>\u603B\u7ED3\uFF1Anacos\u5C31\u662F\u5FAE\u670D\u52A1\u67B6\u6784\u4E2D\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3\u4EE5\u53CA\u7EDF\u4E00\u914D\u7F6E\u4E2D\u5FC3\uFF0C\u7528\u6765\u66FF\u4EE3\u539F\u6765\u7684(eureka\u3001consul)\u4EE5\u53CAconfig\u7EC4\u4EF6</strong></p></blockquote><h4 id="\u5B89\u88C5nacos"><a class="header-anchor" href="#\u5B89\u88C5nacos" aria-hidden="true">#</a> \u5B89\u88C5nacos</h4><h5 id="\u51C6\u5907\u73AF\u5883"><a class="header-anchor" href="#\u51C6\u5907\u73AF\u5883" aria-hidden="true">#</a> \u51C6\u5907\u73AF\u5883</h5><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">-</span> 64 bit os\uFF0C\u652F\u6301 linux/unix/mac/windows\uFF0C\u63A8\u8350linux/unix/mac
<span class="token list punctuation">-</span> 64 bit jdk 1.8+ \u4E0B\u8F7D &amp; \u914D\u7F6E
<span class="token list punctuation">-</span> maven 3.2.x+ \u4E0B\u8F7D &amp; \u914D\u7F6E
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u4E0B\u8F7Dnacos"><a class="header-anchor" href="#\u4E0B\u8F7Dnacos" aria-hidden="true">#</a> \u4E0B\u8F7Dnacos</h5><p>\u672C\u6B21\u4E0B\u8F7D1.3.1\u7248\u672C</p><blockquote><p>github\u5730\u5740\uFF1Ahttps://github.com/alibaba/nacos</p><p><img src="`+ys+`" alt="image-20211219030756936"></p></blockquote><h5 id="\u89E3\u538B\u5B89\u88C5\u5305\u5230\u6307\u5B9A\u4F4D\u7F6E"><a class="header-anchor" href="#\u89E3\u538B\u5B89\u88C5\u5305\u5230\u6307\u5B9A\u4F4D\u7F6E" aria-hidden="true">#</a> \u89E3\u538B\u5B89\u88C5\u5305\u5230\u6307\u5B9A\u4F4D\u7F6E</h5><p>\u76EE\u5F55\u7ED3\u6784</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token list punctuation">-</span> bin				\u542F\u52A8nacos\u670D\u52A1\u7684\u811A\u672C\u76EE\u5F55
<span class="token list punctuation">-</span> conf			nacos\u7684\u914D\u7F6E\u6587\u4EF6\u76EE\u5F55
<span class="token list punctuation">-</span> target		nacos\u7684\u542F\u52A8\u4F9D\u8D56\u5B58\u653E\u76EE\u5F55
<span class="token list punctuation">-</span> data			nacos\u542F\u52A8\u6210\u529F\u540E\u4FDD\u5B58\u6570\u636E\u7684\u76EE\u5F55
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u542F\u52A8\u5B89\u88C5\u670D\u52A1"><a class="header-anchor" href="#\u542F\u52A8\u5B89\u88C5\u670D\u52A1" aria-hidden="true">#</a> \u542F\u52A8\u5B89\u88C5\u670D\u52A1</h5><p>linux/unix/mac\u542F\u52A8\uFF0C\u6253\u5F00\u7EC8\u7AEF\u8FDB\u5165nacos\u7684bin\u76EE\u5F55\u6267\u884C\u5982\u4E0B\u547D\u4EE4</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>./startup.sh -m standalone <span class="token comment">## \u5148\u5355\u673A\u6A21\u5F0F\u8FD0\u884C</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>windows\u542F\u52A8</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>\u6267\u884Ccmd startup.cmd\u6216\u8005\u53CC\u51FBstartup.cmd\u8FD0\u884C\u6587\u4EF6
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6267\u884C</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">(</span>base<span class="token punctuation">)</span> aldencarter@aldencarter bin % ./startup.sh -m standalone
/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/bin/java  -Xms512m -Xmx512m -Xmn256m -Dnacos.standalone<span class="token operator">=</span>true -Dnacos.member.list<span class="token operator">=</span> -Djava.ext.dirs<span class="token operator">=</span>/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/jre/lib/ext:/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/lib/ext -Xloggc:/Users/aldencarter/opt/codes/environments/nacos/logs/nacos_gc.log -verbose:gc -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:+PrintGCTimeStamps -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles<span class="token operator">=</span><span class="token number">10</span> -XX:GCLogFileSize<span class="token operator">=</span>100M -Dloader.path<span class="token operator">=</span>/Users/aldencarter/opt/codes/environments/nacos/plugins/health,/Users/aldencarter/opt/codes/environments/nacos/plugins/cmdb -Dnacos.home<span class="token operator">=</span>/Users/aldencarter/opt/codes/environments/nacos -jar /Users/aldencarter/opt/codes/environments/nacos/target/nacos-server.jar  --spring.config.location<span class="token operator">=</span>classpath:/,classpath:/config/,file:./,file:./config/,file:/Users/aldencarter/opt/codes/environments/nacos/conf/ --logging.config<span class="token operator">=</span>/Users/aldencarter/opt/codes/environments/nacos/conf/nacos-logback.xml --server.max-http-header-size<span class="token operator">=</span><span class="token number">524288</span>
nacos is starting with standalone
nacos is starting\uFF0Cyou can check the /Users/aldencarter/opt/codes/environments/nacos/logs/start.out
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7<code>/Users/aldencarter/opt/codes/environments/nacos/logs/start.out</code>\u65E5\u5FD7\u6587\u4EF6\u6765\u67E5\u770B\u542F\u52A8\u65F6\u5019\u7684\u65E5\u5FD7\u4FE1\u606F</p><p><img src="`+ws+'" alt="image-20211219032131490"></p><p>\u4ECE\u65E5\u5FD7\u4E2D\u6211\u4EEC\u53EF\u4EE5\u77E5\u9053\uFF1A</p><ul><li>nacos\u9ED8\u8BA4\u5360\u75288848\u7AEF\u53E3</li><li>\u8BBF\u95EE\u7F51\u5740\u5728/nacos</li></ul><h5 id="\u8BBF\u95EEnacos\u7684web\u670D\u52A1\u7BA1\u7406\u754C\u9762"><a class="header-anchor" href="#\u8BBF\u95EEnacos\u7684web\u670D\u52A1\u7BA1\u7406\u754C\u9762" aria-hidden="true">#</a> \u8BBF\u95EEnacos\u7684web\u670D\u52A1\u7BA1\u7406\u754C\u9762</h5><p>\u8BBF\u95EE<code>http://localhost:8848/nacos/#/login</code>\uFF0C\u9700\u8981\u767B\u5F55</p><blockquote><p>\u901A\u8FC7\u5730\u5740\uFF1Ahttps://nacos.io/zh-cn/docs/console-guide.html\uFF0C\u53EF\u4EE5\u77E5\u9053\u9ED8\u8BA4\u7684\u8D26\u53F7\u5BC6\u7801\u662F\uFF1A<code>nacos/nacos</code></p></blockquote><p><img src="'+_s+`" alt="image-20211219032914735"></p><p>\u83DC\u5355\u4FE1\u606F</p><ul><li>\u914D\u7F6E\u7BA1\u7406\uFF1A\u914D\u7F6E\u4E2D\u5FC3\uFF0C\u548C\u547D\u540D\u7A7A\u95F4\u7ED3\u5408\u5E94\u7528</li><li>\u670D\u52A1\u7BA1\u7406\uFF1Anacos\u4F5C\u4E3A\u5FAE\u670D\u52A1\u7684\u6CE8\u518C\u4E2D\u5FC3</li><li>\u6743\u9650\u7BA1\u7406\uFF1A\u4E3Anacos\u7684\u767B\u5F55\u7528\u6237\u8FDB\u884C\u6743\u9650\u7BA1\u7406</li><li>\u547D\u540D\u7A7A\u95F4</li><li>\u96C6\u7FA4\u7BA1\u7406\uFF1A\u7BA1\u7406nacos\u7684\u96C6\u7FA4</li></ul><h4 id="\u5F00\u53D1\u670D\u52A1\u6CE8\u518C\u5230nacos"><a class="header-anchor" href="#\u5F00\u53D1\u670D\u52A1\u6CE8\u518C\u5230nacos" aria-hidden="true">#</a> \u5F00\u53D1\u670D\u52A1\u6CE8\u518C\u5230nacos</h4><p>nacos\u4F5C\u4E3A\u5FAE\u670D\u52A1\u7684\u6CE8\u518C\u4E2D\u5FC3\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u5F00\u53D1\u5FAE\u670D\u52A1\u4F5C\u4E3A\u5BA2\u6237\u7AEF\u6CE8\u518C\u5230nacos\u4E2D\u5FC3</p><h5 id="\u5F15\u5165alibaba\u57FA\u7840\u914D\u7F6E\u73AF\u5883"><a class="header-anchor" href="#\u5F15\u5165alibaba\u57FA\u7840\u914D\u7F6E\u73AF\u5883" aria-hidden="true">#</a> \u5F15\u5165alibaba\u57FA\u7840\u914D\u7F6E\u73AF\u5883</h5><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5B9A\u4E49springcloud alibaba\u7684\u7248\u672C--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring.cloud.alibaba.version</span><span class="token punctuation">&gt;</span></span>2.2.1.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring.cloud.alibaba.version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>


<span class="token comment">&lt;!--\u5168\u5C40\u5F15\u5165springcloud alibaba\u4E0B\u8F7D\u4F9D\u8D56\u5730\u5740\uFF0C\u5E76\u4E0D\u4F1A\u5F15\u5165\u4F9D\u8D56--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-alibaba-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${spring.cloud.alibaba.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u6DFB\u52A0nacos\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0\u7684\u4F9D\u8D56"><a class="header-anchor" href="#\u6DFB\u52A0nacos\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0\u7684\u4F9D\u8D56" aria-hidden="true">#</a> \u6DFB\u52A0nacos\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0\u7684\u4F9D\u8D56</h5><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5F15\u5165nacos\u4F9D\u8D56--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u6DFB\u52A0nacos\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0\u7684\u914D\u7F6E"><a class="header-anchor" href="#\u6DFB\u52A0nacos\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0\u7684\u914D\u7F6E" aria-hidden="true">#</a> \u6DFB\u52A0nacos\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0\u7684\u914D\u7F6E</h5><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8789</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> springcloud<span class="token punctuation">-</span>alibaba<span class="token punctuation">-</span>nacos<span class="token punctuation">-</span>demo<span class="token punctuation">-</span><span class="token number">8789</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span>   <span class="token comment">## \u6307\u5B9Anacos\u670D\u52A1\u5730\u5740</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.cloud.nacos.server<span class="token punctuation">-</span>addr<span class="token punctuation">}</span>  <span class="token comment">## \u6307\u5B9A\u6CE8\u518C\u4E2D\u5FC3\u5730\u5740</span>
<span class="token key atrule">management</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpoint</span><span class="token punctuation">:</span>
    <span class="token key atrule">web</span><span class="token punctuation">:</span>
      <span class="token key atrule">exposure</span><span class="token punctuation">:</span>
        <span class="token key atrule">include</span><span class="token punctuation">:</span> <span class="token string">&quot;*&quot;</span>  <span class="token comment">## \u66B4\u9732\u6240\u6709\u7684web\u7AEF\u70B9</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u542F\u52A8\u7C7B\u6DFB\u52A0\u6CE8\u89E3"><a class="header-anchor" href="#\u542F\u52A8\u7C7B\u6DFB\u52A0\u6CE8\u89E3" aria-hidden="true">#</a> \u542F\u52A8\u7C7B\u6DFB\u52A0\u6CE8\u89E3</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span> <span class="token comment">// \u65B0\u7248\u672Cspringcloud\u9ED8\u8BA4\u5F00\u542F\u670D\u52A1\u6CE8\u518C\u548C\u53D1\u73B0\u53EF\u4EE5\u4E0D\u52A0\u5165</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringcloudAlibabaNacosDemo8789Application</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringcloudAlibabaNacosDemo8789Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u67E5\u770Bnacos\u7684\u670D\u52A1\u5217\u8868"><a class="header-anchor" href="#\u67E5\u770Bnacos\u7684\u670D\u52A1\u5217\u8868" aria-hidden="true">#</a> \u67E5\u770Bnacos\u7684\u670D\u52A1\u5217\u8868</h5><p>\u542F\u52A8\u4E4B\u540E\u5C31\u53EF\u4EE5\u67E5\u770B\u662F\u5426\u6CE8\u518C\u5230nacos\u6CE8\u518C\u4E2D\u5FC3</p><p><img src="`+qs+`" alt="image-20211219040257490"></p><h5 id="\u6D4B\u8BD5\u670D\u52A1\u95F4\u7684\u8C03\u7528"><a class="header-anchor" href="#\u6D4B\u8BD5\u670D\u52A1\u95F4\u7684\u8C03\u7528" aria-hidden="true">#</a> \u6D4B\u8BD5\u670D\u52A1\u95F4\u7684\u8C03\u7528</h5><blockquote><p>\u540Cnamespace\u4E0B\u4E0D\u540C\u5206\u7EC4\u4E4B\u95F4\u7684\u670D\u52A1\u8C03\u7528\u95EE\u9898\uFF0C\u4E0D\u53EF\u8C03\u7528</p><p>\u6211\u662Fnamespace\u505A\u73AF\u5883\u9694\u79BB\u3002\u60F3\u901A\u8FC7group\u505A\u4E0D\u540C\u4E1A\u52A1\u9694\u79BB\u7684\u3002\u6211\u4EE5\u4E3Agroup\u53EA\u662F\u7528\u6765\u505A\u5206\u7EC4\u3002\u6CA1\u60F3\u5230\u4E5F\u505A\u670D\u52A1\u9694\u79BB\u3002\u770B\u6765\u53EA\u80FD\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0\u4E0D\u505A\u5206\u7EC4\u4E86</p><p>https://github.com/alibaba/nacos/issues/3193</p></blockquote><h6 id="\u521B\u5EFA\u7528\u6237\u670D\u52A1\u548C\u5546\u54C1\u670D\u52A1"><a class="header-anchor" href="#\u521B\u5EFA\u7528\u6237\u670D\u52A1\u548C\u5546\u54C1\u670D\u52A1" aria-hidden="true">#</a> \u521B\u5EFA\u7528\u6237\u670D\u52A1\u548C\u5546\u54C1\u670D\u52A1</h6><p>\u5F15\u5165\u5BF9\u5E94\u7684\u4F9D\u8D56\uFF0C\u8BB0\u5F97\u4FEE\u6539springboot\u7248\u672C\u4E3A2.2.5.RELEASE</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5B9A\u4E49springcloud alibaba\u7684\u7248\u672C--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring.cloud.alibaba.version</span><span class="token punctuation">&gt;</span></span>2.2.1.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring.cloud.alibaba.version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>


<span class="token comment">&lt;!--\u5168\u5C40\u5F15\u5165springcloud alibaba\u4E0B\u8F7D\u4F9D\u8D56\u5730\u5740\uFF0C\u5E76\u4E0D\u4F1A\u5F15\u5165\u4F9D\u8D56--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-alibaba-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${spring.cloud.alibaba.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!--\u5F15\u5165nacos\u4F9D\u8D56--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u914D\u7F6E\u8FDE\u63A5\u5230nacos\u7684\u914D\u7F6E\u4FE1\u606F</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9099</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> springcloud<span class="token punctuation">-</span>alibaba<span class="token punctuation">-</span>nacos<span class="token punctuation">-</span>user
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.cloud.nacos.server<span class="token punctuation">-</span>addr<span class="token punctuation">}</span>
<span class="token key atrule">management</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpoint</span><span class="token punctuation">:</span>
    <span class="token key atrule">web</span><span class="token punctuation">:</span>
      <span class="token key atrule">exposure</span><span class="token punctuation">:</span>
        <span class="token key atrule">include</span><span class="token punctuation">:</span> <span class="token string">&quot;*&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u542F\u52A8\u6D4B\u8BD5</p><p><img src="`+xs+`" alt="image-20211219044055678"></p><h5 id="resttemplate-ribbon\u8C03\u7528"><a class="header-anchor" href="#resttemplate-ribbon\u8C03\u7528" aria-hidden="true">#</a> RestTemplate+Ribbon\u8C03\u7528</h5><h6 id="\u5728product\u4E2D\u521B\u5EFAproductcontroller\u521B\u5EFA\u65B9\u6CD5\u4F9Buser\u8C03\u7528"><a class="header-anchor" href="#\u5728product\u4E2D\u521B\u5EFAproductcontroller\u521B\u5EFA\u65B9\u6CD5\u4F9Buser\u8C03\u7528" aria-hidden="true">#</a> \u5728product\u4E2D\u521B\u5EFA<code>ProductController</code>\u521B\u5EFA\u65B9\u6CD5\u4F9Buser\u8C03\u7528</h6><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProductController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${server.port}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> port<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/product/find&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\u8FDB\u5165\u5546\u54C1\u670D\u52A1\uFF0C\u63A5\u6536\u7684\u5546\u54C1ID\u4E3A\uFF1A&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u5546\u54C1\u670D\u52A1\u67E5\u8BE2\u6210\u529F\uFF0C\u67E5\u8BE2id\u4E3A\uFF1A&quot;</span> <span class="token operator">+</span> id <span class="token operator">+</span> <span class="token string">&quot;\u5F53\u524D\u5904\u7406\u670D\u52A1\u7684\u7AEF\u53E3\u53F7\uFF1A&quot;</span> <span class="token operator">+</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="\u5728user\u4E2D\u521B\u5EFAusercontroller\u521B\u5EFA\u65B9\u6CD5\u8C03\u7528product\u7684\u4E2D\u7684\u65B9\u6CD5"><a class="header-anchor" href="#\u5728user\u4E2D\u521B\u5EFAusercontroller\u521B\u5EFA\u65B9\u6CD5\u8C03\u7528product\u7684\u4E2D\u7684\u65B9\u6CD5" aria-hidden="true">#</a> \u5728user\u4E2D\u521B\u5EFA<code>UserController</code>\u521B\u5EFA\u65B9\u6CD5\u8C03\u7528product\u7684\u4E2D\u7684\u65B9\u6CD5</h6><ol><li>RestTempalte\u65B9\u5F0F</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user/findProduct&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">findProduct</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;productId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> productId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u7B2C\u4E00\u79CD\u65B9\u5F0F\uFF1ArestTemplate\u65B9\u5F0F\u8C03\u7528</span>
        <span class="token keyword">final</span> <span class="token class-name">RestTemplate</span> restTemplate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">Map</span> map <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:9098/product/find?id=&quot;</span> <span class="token operator">+</span> productId<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\u8FD4\u56DE\u7684\u4FE1\u606F\uFF1A[{}]&quot;</span><span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u8D1F\u8F7D\u5747\u8861\u5B9E\u73B0restTemplate+Ribbon</li></ol><p>Ribbon\u4F9D\u8D56\u5DF2\u7ECF\u9ED8\u8BA4\u5728nacos\u4E2D\u5F15\u5165\u4E86</p><p><img src="`+Ss+`" alt="image-20211219052448213"></p><p>\u5728UserController\u4E2D\u6DFB\u52A0Ribbon\u4EE3\u7801\u5B9E\u73B0\u8D1F\u8F7D\u5747\u8861</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">DiscoveryClient</span> discoveryClient<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">LoadBalancerClient</span> loadBalancerClient<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">RestTemplate</span> customRestTemplate<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user/findProduct&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">findProduct</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;productId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> productId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u7B2C\u4E00\u79CD\u65B9\u5F0F\uFF1ArestTemplate\u65B9\u5F0F\u8C03\u7528</span>
        <span class="token comment">//final RestTemplate restTemplate = new RestTemplate();</span>
        <span class="token comment">//final Map map = restTemplate.getForObject(&quot;http://localhost:9098/product/find?id=&quot; + productId, Map.class);</span>
        <span class="token comment">//log.info(&quot;\u8FD4\u56DE\u7684\u4FE1\u606F\uFF1A[{}]&quot;, map);</span>

        <span class="token comment">// \u7B2C\u4E8C\u79CD\u65B9\u5F0F\uFF1ArestTemplate+ribbon \u8D1F\u8F7D\u5747\u8861\u5BA2\u6237\u7AEF 1. DiscoveryClient 2. LoadBalanceClient 3. @LoadBalance</span>
        <span class="token comment">// 1. DiscoveryClient \u8FD4\u56DE\u6240\u6709\u7684\u5B9E\u4F8B\u4F9B\u6211\u4EEC\u81EA\u5DF1\u9009\u62E9</span>
        <span class="token comment">//final List&lt;ServiceInstance&gt; instances = discoveryClient.getInstances(&quot;springcloud-alibaba-nacos-product&quot;);</span>
        <span class="token comment">//for (ServiceInstance instance : instances) {</span>
        <span class="token comment">//    // \u4ECE\u8FD4\u56DE\u7684instances\u4E2D\u9009\u62E9\u4E00\u4E2A\u4F5C\u4E3A\u670D\u52A1\u7684\u8C03\u7528</span>
        <span class="token comment">//    log.info(&quot;\u670D\u52A1\u5730\u5740\uFF1A[{}]&quot;, instance.getUri());</span>
        <span class="token comment">//}</span>

        <span class="token comment">// 2. LoadBalanceClient \u8FD4\u56DE\u4E00\u4E2A\u6700\u5408\u9002\u7684\u5B9E\u4F8B\uFF0C\u6839\u636E\u9009\u62E9\u7B97\u6CD5\uFF0C\u9ED8\u8BA4\u662F\u8F6E\u8BE2\u7B97\u6CD5</span>
        <span class="token comment">//final ServiceInstance instance = loadBalancerClient.choose(&quot;springcloud-alibaba-nacos-product&quot;);</span>
        <span class="token comment">//log.info(&quot;\u9009\u4E2D\u7684\u670D\u52A1\u5730\u5740\uFF1A[{}]&quot;, instance.getUri());</span>
        <span class="token comment">// \u8FD9\u4E2A\u65F6\u5019\u5C31\u53EF\u4EE5\u4F7F\u7528\u8FD9\u4E2A\u8D1F\u8F7D\u5747\u8861\u7684\u5B9E\u4F8B\u53BB\u8BF7\u6C42\u5BF9\u5E94\u7684\u670D\u52A1\u4E86</span>
        <span class="token comment">//final Map forObject = restTemplate.getForObject(instance.getUri() + &quot;/product/find?id=&quot; + productId, Map.class);</span>

        <span class="token comment">// 3.  @LoadBalance</span>
        <span class="token keyword">final</span> <span class="token class-name">Map</span> forObject <span class="token operator">=</span> customRestTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span><span class="token string">&quot;http://springcloud-alibaba-nacos-product/product/find?id=&quot;</span> <span class="token operator">+</span> productId<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\u6CE8\u89E3\u65B9\u5F0F\u8D1F\u8F7D\u5747\u8861\u83B7\u53D6\u5230\u7684\u503C\uFF1A[{}]&quot;</span><span class="token punctuation">,</span> forObject<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// nacos\u505A\u5230\u4E86\u9AD8\u6548\u7684\u611F\u77E5\uFF0C\u539F\u6765\u6211\u4EEC\u4F7F\u7528Ribbon\u7684\u65F6\u5019\u662F\u4F1A\u5728\u5BA2\u6237\u7AEF\u7F13\u5B58\u670D\u52A1\u5B9E\u4F8B\u7684\uFF0C\u73B0\u5728nacos\u80FD\u81EA\u52A8\u7684\u611F\u77E5\u5230\u670D\u52A1\u7684\u542F\u52A8\u548C\u5173\u505C\uFF0C\u4EE5\u4FBF\u5237\u65B0\u6211\u4EEC\u7684\u7F13\u5B58\uFF0C\u52A8\u6001\u611F\u77E5</span>

        <span class="token keyword">return</span> forObject<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>RestTemplate\u6CE8\u5165\u6DFB\u52A0\u8D1F\u8F7D\u5747\u8861</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RestTemplateConfig</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@LoadBalanced</span> <span class="token comment">//\u4EE3\u8868\u521B\u5EFA\u4E00\u4E2A\u8D1F\u8F7D\u5747\u8861\u7684restTemplate\u7684\u5BF9\u8C61</span>
    <span class="token keyword">public</span> <span class="token class-name">RestTemplate</span> <span class="token function">getRestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="openfeign-ribbon\u5B9E\u73B0\u8D1F\u8F7D\u5747\u8861\u548C\u8BF7\u6C42url\u89E3\u8026"><a class="header-anchor" href="#openfeign-ribbon\u5B9E\u73B0\u8D1F\u8F7D\u5747\u8861\u548C\u8BF7\u6C42url\u89E3\u8026" aria-hidden="true">#</a> OpenFeign+Ribbon\u5B9E\u73B0\u8D1F\u8F7D\u5747\u8861\u548C\u8BF7\u6C42URL\u89E3\u8026</h5><p>\u4E3A\u4E86\u6574\u5408openfeign\uFF0C\u6211\u4EEC\u6700\u597D\u662F\u628Aspringcloud\u7684\u4F9D\u8D56\u58F0\u660E\u4E5F\u6DFB\u52A0\u8FDB\u6765\uFF0C\u8FDB\u884C\u7BA1\u7406</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5B9A\u4E49springcloud alibaba\u7684\u7248\u672C--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring.cloud.alibaba.version</span><span class="token punctuation">&gt;</span></span>2.2.1.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring.cloud.alibaba.version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring-cloud.version</span><span class="token punctuation">&gt;</span></span>Hoxton.SR6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring-cloud.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!--\u5168\u5C40\u5F15\u5165springcloud alibaba\u4E0B\u8F7D\u4F9D\u8D56\u5730\u5740\uFF0C\u5E76\u4E0D\u4F1A\u5F15\u5165\u4F9D\u8D56--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-alibaba-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${spring.cloud.alibaba.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
						<span class="token comment">&lt;!--\u5168\u5C40\u5F15\u5165springcloud\u4E0B\u8F7D\u4F9D\u8D56\u5730\u5740\uFF0C\u5E76\u4E0D\u4F1A\u5F15\u5165\u4F9D\u8D56--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${spring-cloud.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728RestTempalate+Ribbon\u7684\u57FA\u7840\u4E0A\u5F15\u5165openfeign\u4F9D\u8D56\uFF0Cnacos\u4E2D\u6CA1\u6709openFeign</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5F15\u5165openfeign--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-openfeign<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u542F\u52A8\u7C7B\u6DFB\u52A0\u6CE8\u89E3</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token annotation punctuation">@EnableFeignClients</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringcloudAlibabaNacosUser9099Application</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringcloudAlibabaNacosUser9099Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7F16\u5199\u8C03\u7528\u63A5\u53E3</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u8C03\u7528\u5546\u54C1feign\u63A5\u53E3
 * \u62EC\u53F7\u4E2D\u58F0\u660E\u9700\u8981\u8C03\u7528\u7684\u670D\u52A1\u540D\u79F0
 */</span>
<span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span><span class="token string">&quot;springcloud-alibaba-nacos-product&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ProductClient</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * \u58F0\u660E\u8C03\u7528\u7684\u65B9\u6CD5\uFF0C\u548C\u88AB\u8C03\u7528\u8005\u7684\u65B9\u6CD5\u4E00\u81F4\uFF0C\u53EA\u9700\u8981\u590D\u5236\u8FC7\u6765\u5C31\u597D
     *
     * <span class="token keyword">@param</span> <span class="token parameter">id</span>
     * <span class="token keyword">@return</span>
     */</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/product/find&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u90A3\u4E48\u6211\u4EEC\u5C31\u53EF\u4EE5\u5728\u8C03\u7528\u7684\u65F6\u5019\u76F4\u63A5\u6CE8\u5165ProductClient\uFF0C\u76F4\u63A5\u8C03\u7528\u5C31\u597D</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">ProductClient</span> productClient<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user/findProduct&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">findProduct</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;productId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> productId<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// feign \u8C03\u7528</span>
        <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> forObject <span class="token operator">=</span> productClient<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>productId<span class="token punctuation">)</span><span class="token punctuation">;</span>

        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;openfeign + \u8D1F\u8F7D\u5747\u8861\u83B7\u53D6\u5230\u7684\u503C\uFF1A[{}]&quot;</span><span class="token punctuation">,</span> forObject<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> forObject<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u4F7F\u7528nacos\u4F5C\u4E3A\u914D\u7F6E\u4E2D\u5FC3"><a class="header-anchor" href="#\u4F7F\u7528nacos\u4F5C\u4E3A\u914D\u7F6E\u4E2D\u5FC3" aria-hidden="true">#</a> \u4F7F\u7528nacos\u4F5C\u4E3A\u914D\u7F6E\u4E2D\u5FC3</h4><p>nacos\u53D6\u6D88\u4E86git\u4F5C\u4E3A\u914D\u7F6E\u6587\u4EF6\u5B58\u50A8\u3001\u53BB\u9664\u4E86bus\u603B\u7EBF\uFF0C\u5C06\u914D\u7F6E\u6587\u4EF6\u5B58\u50A8\u5728nacos\u4E2D</p><p><img src="`+Is+'" alt="image-20211219233640865"></p><h5 id="\u4ECEnacos\u83B7\u53D6\u914D\u7F6E"><a class="header-anchor" href="#\u4ECEnacos\u83B7\u53D6\u914D\u7F6E" aria-hidden="true">#</a> \u4ECEnacos\u83B7\u53D6\u914D\u7F6E</h5><p>\u914D\u7F6E\u7BA1\u7406\u83DC\u5355</p><p><img src="'+js+`" alt="image-20211219235949992"></p><ol><li>\u914D\u7F6E\u5217\u8868</li></ol><p>public \u9ED8\u8BA4\u547D\u540D\u7A7A\u95F4\uFF0C\u5728\u591A\u4E2A\u9879\u76EE\u7684\u914D\u7F6E\u6587\u4EF6\u5B58\u50A8\u5230nacos\u4E0A\u7684\u65F6\u5019\uFF0C\u4E3A\u4E86\u4E0D\u8BA9\u914D\u7F6E\u6587\u4EF6\u53D1\u9001\u51B2\u7A81\uFF0C\u5C31\u4EE5\u547D\u540D\u7A7A\u95F4\u6765\u533A\u5206 default_group</p><h6 id="\u521B\u5EFA\u9879\u76EE\u5E76\u5F15\u5165nacos\u914D\u7F6E\u4E2D\u5FC3\u4F9D\u8D56"><a class="header-anchor" href="#\u521B\u5EFA\u9879\u76EE\u5E76\u5F15\u5165nacos\u914D\u7F6E\u4E2D\u5FC3\u4F9D\u8D56" aria-hidden="true">#</a> \u521B\u5EFA\u9879\u76EE\u5E76\u5F15\u5165nacos\u914D\u7F6E\u4E2D\u5FC3\u4F9D\u8D56</h6><p>\u521B\u5EFAweb\u7684springboot\u6A21\u5757\uFF0C\u4F5C\u4E3A\u5FAE\u670D\u52A1\u4F7F\u7528\uFF0C\u5148\u5F15\u5165springcloud\u548Cspringalibaba\u7684\u4F9D\u8D56\u58F0\u660E</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5B9A\u4E49springcloud alibaba\u7684\u7248\u672C--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring.cloud.alibaba.version</span><span class="token punctuation">&gt;</span></span>2.2.1.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring.cloud.alibaba.version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--\u5168\u5C40\u5F15\u5165springcloud alibaba\u4E0B\u8F7D\u4F9D\u8D56\u5730\u5740\uFF0C\u5E76\u4E0D\u4F1A\u5F15\u5165\u4F9D\u8D56--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-alibaba-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${spring.cloud.alibaba.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--\u5F15\u5165nacos\u4F9D\u8D56--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F15\u5165nacos\u914D\u7F6E\u7684\u4F9D\u8D56</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-config<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="\u914D\u7F6E\u914D\u7F6E\u4E2D\u5FC3\u5730\u5740"><a class="header-anchor" href="#\u914D\u7F6E\u914D\u7F6E\u4E2D\u5FC3\u5730\u5740" aria-hidden="true">#</a> \u914D\u7F6E\u914D\u7F6E\u4E2D\u5FC3\u5730\u5740</h6><ol><li>\u5148\u5728nacos\u7684\u914D\u7F6E\u7BA1\u7406-&gt;\u914D\u7F6E\u5217\u8868\u4E2D\u521B\u5EFA\u914D\u7F6E</li></ol><p><img src="`+Cs+`" alt="image-20211220015508554"></p><p>\u8FDC\u7A0B\u914D\u7F6E\u4FE1\u606F\uFF1A</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">server.port</span><span class="token punctuation">=</span><span class="token value attr-value">9066</span>
<span class="token key attr-name">spring.cloud.nacos.discovery.server-addr</span><span class="token punctuation">=</span><span class="token value attr-value">\${spring.cloud.nacos.server-addr}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u4FEE\u6539\u5FAE\u670D\u52A1\u9879\u76EE\u83B7\u53D6nacos\u8FDC\u7AEF\u914D\u7F6E\uFF0C\u6CE8\u610F\u9700\u8981\u5148\u628Aapplication\u6539\u6210boostrap(\u4F7F\u7528bootstrap.yaml\u8868\u793A\u9884\u914D\u7F6E)</li></ol><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">spring.cloud.nacos.server-addr</span><span class="token punctuation">=</span><span class="token value attr-value">localhost:8848                             ## \u8FDC\u7A0B\u914D\u7F6E\u4E2D\u5FC3\u7684\u5730\u5740</span>
<span class="token key attr-name">spring.cloud.nacos.config.server-addr</span><span class="token punctuation">=</span><span class="token value attr-value">\${spring.cloud.nacos.server-addr}   ## \u53BB\u6307\u5B9Anacos\u5730\u5740\u8BFB\u53D6\u914D\u7F6E</span>
<span class="token key attr-name">spring.cloud.nacos.config.group</span><span class="token punctuation">=</span><span class="token value attr-value">DEFAULT_GROUP                             ## \u8BFB\u53D6\u914D\u7F6E\u7684\u5206\u7EC4</span>
<span class="token key attr-name">spring.cloud.nacos.config.file-extension</span><span class="token punctuation">=</span><span class="token value attr-value">properties                       ## \u6307\u5B9A\u8BFB\u53D6\u6587\u4EF6\u540E\u7F00</span>
<span class="token key attr-name">spring.application.name</span><span class="token punctuation">=</span><span class="token value attr-value">configclient                                      ## \u6307\u5B9A\u8BFB\u53D6\u6587\u4EF6\u7684\u524D\u7F00</span>
<span class="token key attr-name">spring.profiles.active</span><span class="token punctuation">=</span><span class="token value attr-value">prod                                               ## \u6307\u5B9A\u8BFB\u53D6\u6587\u4EF6\u7684\u5177\u4F53\u73AF\u5883</span>
<span class="token key attr-name">spring.cloud.nacos.config.namespace</span><span class="token punctuation">=</span><span class="token value attr-value">public 																## \u547D\u540D\u7A7A\u95F4</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u542F\u52A8</li></ol><p>\u542F\u52A8\u7EC8\u7AEF\u8F93\u51FA\u8FD0\u884C\u7684\u7AEF\u53E3\u4E3A\uFF1A</p><p><img src="`+Rs+'" alt="image-20211220015633239"></p><h5 id="dataid"><a class="header-anchor" href="#dataid" aria-hidden="true">#</a> DataId</h5><p>\u5728 Nacos Spring Cloud \u4E2D\uFF0C<code>dataId</code> \u7684\u5B8C\u6574\u683C\u5F0F\u5982\u4E0B\uFF1A</p><div class="language-plain ext-plain line-numbers-mode"><pre class="language-plain"><code>${prefix}-${spring.profiles.active}.${file-extension}\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>',323),Le=n("li",null,[n("code",null,"prefix"),s(" \u9ED8\u8BA4\u4E3A "),n("code",null,"spring.application.name"),s(" \u7684\u503C\uFF0C\u4E5F\u53EF\u4EE5\u901A\u8FC7\u914D\u7F6E\u9879 "),n("code",null,"spring.cloud.nacos.config.prefix"),s("\u6765\u914D\u7F6E")],-1),$e=n("code",null,"spring.profiles.active",-1),ze=s(" \u5373\u4E3A\u5F53\u524D\u73AF\u5883\u5BF9\u5E94\u7684 profile\uFF0C\u8BE6\u60C5\u53EF\u4EE5\u53C2\u8003 "),Ve={href:"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-profiles.html#boot-features-profiles",target:"_blank",rel:"noopener noreferrer"},We=s("Spring Boot\u6587\u6863"),Xe=s("\u3002 "),Je=n("strong",null,[s("\u6CE8\u610F\uFF1A\u5F53 "),n("code",null,"spring.profiles.active"),s(" \u4E3A\u7A7A\u65F6\uFF0C\u5BF9\u5E94\u7684\u8FDE\u63A5\u7B26 "),n("code",null,"-"),s(" \u4E5F\u5C06\u4E0D\u5B58\u5728\uFF0CdataId \u7684\u62FC\u63A5\u683C\u5F0F\u53D8\u6210 "),n("code",null,"${prefix}.${file-extension}")],-1),Qe=n("li",null,[n("code",null,"file-exetension"),s(" \u4E3A\u914D\u7F6E\u5185\u5BB9\u7684\u6570\u636E\u683C\u5F0F\uFF0C\u53EF\u4EE5\u901A\u8FC7\u914D\u7F6E\u9879 "),n("code",null,"spring.cloud.nacos.config.file-extension"),s(" \u6765\u914D\u7F6E\u3002\u76EE\u524D\u53EA\u652F\u6301 "),n("code",null,"properties"),s(" \u548C "),n("code",null,"yaml"),s(" \u7C7B\u578B")],-1),Ze=e(`<h5 id="\u5B9E\u73B0\u81EA\u52A8\u914D\u7F6E\u5237\u65B0-1"><a class="header-anchor" href="#\u5B9E\u73B0\u81EA\u52A8\u914D\u7F6E\u5237\u65B0-1" aria-hidden="true">#</a> \u5B9E\u73B0\u81EA\u52A8\u914D\u7F6E\u5237\u65B0</h5><p>nacos\u80FD\u81EA\u52A8\u5B8C\u6210\u914D\u7F6E\u7684\u5237\u65B0\uFF0C\u5728\u6211\u4EEC\u7F16\u5199\u914D\u7F6E\u6587\u4EF6\u53D1\u5E03\u4E4B\u540E\uFF0C\u5FAE\u670D\u52A1\u5C31\u53EF\u4EE5\u83B7\u53D6\u5230\u6211\u4EEC\u914D\u7F6E\u4E4B\u540E\u7684\u914D\u7F6E\uFF0C\u662F\u6839\u636E\u6587\u4EF6\u5185\u5BB9\u7684MD5\u6765\u6BD4\u8F83\u7684\u3002\u6211\u4EEC\u7F16\u5199\u4E00\u4E2AController\u6765\u6D4B\u8BD5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@RefreshScope</span> <span class="token comment">// \u5728\u9700\u8981\u83B7\u53D6\u5237\u65B0\u540E\u7684\u914D\u7F6E\u6DFB\u52A0\u8FD9\u4E2A\u6CE8\u89E3</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${user.name}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/test/getName&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u83B7\u53D6\u5230\u7684\u540D\u5B57\u4E3A\uFF1A&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6211\u4EEC\u5728nacos\u4E2D\u6DFB\u52A0user.name=zhangsan\uFF0C\u8BBF\u95EEController\u63A5\u53E3</p><p><img src="`+As+'" alt="image-20211220021902382"></p><p>\u7136\u540E\u6211\u4EEC\u5C06name\u6539\u6210lisi\uFF0C\u8BBF\u95EEController\u63A5\u53E3</p><p><img src="'+Es+'" alt="image-20211220022000472"></p><p>\u5DF2\u7ECF\u4FEE\u6539\u6210\u529F\u4E86</p><h5 id="\u547D\u540D\u7A7A\u95F4"><a class="header-anchor" href="#\u547D\u540D\u7A7A\u95F4" aria-hidden="true">#</a> \u547D\u540D\u7A7A\u95F4</h5><blockquote><p>\u7528\u4E8E\u8FDB\u884C\u79DF\u6237\u7C92\u5EA6\u7684\u914D\u7F6E\u9694\u79BB\u3002\u4E0D\u540C\u7684\u547D\u540D\u7A7A\u95F4\u4E0B\uFF0C\u53EF\u4EE5\u5B58\u5728\u76F8\u540C\u7684 Group \u6216 Data ID \u7684\u914D\u7F6E\u3002Namespace \u7684\u5E38\u7528\u573A\u666F\u4E4B\u4E00\u662F\u4E0D\u540C\u73AF\u5883\u7684\u914D\u7F6E\u7684\u533A\u5206\u9694\u79BB\uFF0C\u4F8B\u5982\u5F00\u53D1\u6D4B\u8BD5\u73AF\u5883\u548C\u751F\u4EA7\u73AF\u5883\u7684\u8D44\u6E90\uFF08\u5982\u914D\u7F6E\u3001\u670D\u52A1\uFF09\u9694\u79BB\u7B49</p></blockquote><p>\u65B0\u5EFA\u547D\u540D\u7A7A\u95F4</p><p><img src="'+Os+'" alt="image-20211220025422531"></p><p><img src="'+Ms+'" alt="image-20211220025514922"></p><p><img src="'+Ts+`" alt="image-20211220030852211"></p><h5 id="\u914D\u7F6E\u5206\u7C7B"><a class="header-anchor" href="#\u914D\u7F6E\u5206\u7C7B" aria-hidden="true">#</a> \u914D\u7F6E\u5206\u7C7B</h5><blockquote><p>Nacos \u4E2D\u7684\u4E00\u7EC4\u914D\u7F6E\u96C6\uFF0C\u662F\u7EC4\u7EC7\u914D\u7F6E\u7684\u7EF4\u5EA6\u4E4B\u4E00\u3002\u901A\u8FC7\u4E00\u4E2A\u6709\u610F\u4E49\u7684\u5B57\u7B26\u4E32\uFF08\u5982 Buy \u6216 Trade \uFF09\u5BF9\u914D\u7F6E\u96C6\u8FDB\u884C\u5206\u7EC4\uFF0C\u4ECE\u800C\u533A\u5206 Data ID \u76F8\u540C\u7684\u914D\u7F6E\u96C6\u3002\u5F53\u60A8\u5728 Nacos \u4E0A\u521B\u5EFA\u4E00\u4E2A\u914D\u7F6E\u65F6\uFF0C\u5982\u679C\u672A\u586B\u5199\u914D\u7F6E\u5206\u7EC4\u7684\u540D\u79F0\uFF0C\u5219\u914D\u7F6E\u5206\u7EC4\u7684\u540D\u79F0\u9ED8\u8BA4\u91C7\u7528 DEFAULT_GROUP \u3002\u914D\u7F6E\u5206\u7EC4\u7684\u5E38\u89C1\u573A\u666F\uFF1A\u4E0D\u540C\u7684\u5E94\u7528\u6216\u7EC4\u4EF6\u4F7F\u7528\u4E86\u76F8\u540C\u7684\u914D\u7F6E\u7C7B\u578B\uFF0C\u5982 database_url \u914D\u7F6E\u548C MQ_topic \u914D\u7F6E</p></blockquote><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">##</span> \u5E94\u8BE5\u600E\u4E48\u5206\u7C7B</span>
<span class="token title important"><span class="token punctuation">##</span> \u65B9\u5F0F\u4E00</span>
\u9879\u76EE\u540D:ems namespace    \u670D\u52A1\u540D: group  user-prod/dev/test.properties

<span class="token title important"><span class="token punctuation">##</span> \u65B9\u5F0F\u4E8C</span>
\u751F\u4EA7\u73AF\u5883 namespace			\u9879\u76EE\u540D:ems group		user/product/order-prod.properties
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="sentinel-\u6D41\u91CF\u536B\u5175"><a class="header-anchor" href="#sentinel-\u6D41\u91CF\u536B\u5175" aria-hidden="true">#</a> sentinel \u6D41\u91CF\u536B\u5175</h3><blockquote><p>\u5B98\u7F51\uFF1Ahttps://sentinelguard.io/zh-cn/</p></blockquote><h4 id="\u4EC0\u4E48\u662Fsentinel"><a class="header-anchor" href="#\u4EC0\u4E48\u662Fsentinel" aria-hidden="true">#</a> \u4EC0\u4E48\u662Fsentinel</h4><h5 id="\u8BF4\u660E-4"><a class="header-anchor" href="#\u8BF4\u660E-4" aria-hidden="true">#</a> \u8BF4\u660E</h5><p><img src="`+Ps+'" alt="image-20211220033545935"></p><blockquote><p>\u968F\u7740\u5FAE\u670D\u52A1\u7684\u6D41\u884C\uFF0C\u670D\u52A1\u548C\u670D\u52A1\u4E4B\u95F4\u7684\u7A33\u5B9A\u6027\u53D8\u5F97\u8D8A\u6765\u8D8A\u91CD\u8981\u3002Sentinel \u662F\u9762\u5411\u5206\u5E03\u5F0F\u670D\u52A1\u67B6\u6784\u7684\u6D41\u91CF\u63A7\u5236\u7EC4\u4EF6\uFF0C\u4E3B\u8981\u4EE5\u6D41\u91CF\u4E3A\u5207\u5165\u70B9\uFF0C\u4ECE\u6D41\u91CF\u63A7\u5236\u3001\u7194\u65AD\u964D\u7EA7\u3001\u7CFB\u7EDF\u81EA\u9002\u5E94\u4FDD\u62A4\u7B49\u591A\u4E2A\u7EF4\u5EA6\u6765\u5E2E\u52A9\u60A8\u4FDD\u969C\u5FAE\u670D\u52A1\u7684\u7A33\u5B9A\u6027</p><p>\u901A\u4FD7\uFF1A\u7528\u6765\u5728\u5FAE\u670D\u52A1\u7CFB\u7EDF\u4E2D\u4FDD\u62A4\u5FAE\u670D\u52A1\u7684\u6B63\u5E38\u8FD0\u884C\u3002\u5982\uFF1A\u670D\u52A1\u96EA\u5D29\u3001\u670D\u52A1\u7194\u65AD\u3001\u670D\u52A1\u964D\u7EA7\uFF0C\u5C31\u662F\u7528\u6765\u66FF\u6362hystrix</p></blockquote><h5 id="\u7279\u6027"><a class="header-anchor" href="#\u7279\u6027" aria-hidden="true">#</a> \u7279\u6027</h5><ul><li>\u4E30\u5BCC\u7684\u5E94\u7528\u573A\u666F\uFF1ASentinel \u627F\u63A5\u4E86\u963F\u91CC\u5DF4\u5DF4\u8FD110\u5E74\u7684\u53CC\u5341\u4E00\u5927\u4FC3\u6D41\u91CF\u7684\u6838\u5FC3\u573A\u666F\uFF0C\u4F8B\u5982\u79D2\u6740\u3001\u6D88\u606F\u524A\u5CF0\u586B\u8C37\u3001\u96C6\u7FA4\u6D41\u91CF\u63A7\u5236\u3001\u5B9E\u65F6\u7194\u65AD\u4E0B\u6E38\u4E0D\u53EF\u7528\u5E94\u7528\u7B49</li><li>\u5B8C\u5907\u7684\u5B9E\u65F6\u76D1\u63A7\uFF1ASentinel \u540C\u65F6\u63D0\u4F9B\u5B9E\u65F6\u7684\u76D1\u63A7\u529F\u80FD\u3002\u4F60\u53EF\u4EE5\u5728\u63A7\u5236\u53F0\u4E2D\u770B\u5230\u63A5\u5165\u5E94\u7528\u7684\u5355\u53F0\u673A\u5668\u79D2\u7EA7\u6570\u636E\uFF0C\u751A\u81F3 500 \u53F0\u4EE5\u4E0B\u89C4\u6A21\u7684\u96C6\u7FA4\u7684\u6C47\u603B\u8FD0\u884C\u60C5\u51B5</li><li>\u5E7F\u6CDB\u7684\u5F00\u6E90\u751F\u6001\uFF1ASentinel \u63D0\u4F9B\u5F00\u7BB1\u5373\u7528\u7684\u4E0E\u5176\u5B83\u5F00\u6E90\u6846\u67B6/\u5E93\u7684\u6574\u5408\u6A21\u5757\uFF0C\u4F8B\u5982\u4E0E Spring Cloud\u3001Dubbo\u3001gRPC \u7684\u6574\u5408\u3002\u53EA\u9700\u8981\u5F15\u5165\u76F8\u5E94\u7684\u4F9D\u8D56\u5E76\u8FDB\u884C\u7B80\u5355\u7684\u914D\u7F6E\u5373\u53EF\u5FEB\u901F\u5730\u63A5\u5165 Sentinel</li><li>\u5B8C\u5584\u7684SPI\u6269\u5C55\u70B9\uFF1ASentinel \u63D0\u4F9B\u7B80\u5355\u6613\u7528\u3001\u5B8C\u5584\u7684 SPI \u6269\u5C55\u63A5\u53E3\u3002\u60A8\u53EF\u4EE5\u901A\u8FC7\u5B9E\u73B0\u6269\u5C55\u63A5\u53E3\u6765\u5FEB\u901F\u5730\u5B9A\u5236\u903B\u8F91\u3002\u4F8B\u5982\u5B9A\u5236\u89C4\u5219\u7BA1\u7406\u3001\u9002\u914D\u52A8\u6001\u6570\u636E\u6E90\u7B49</li></ul><p><img src="'+Bs+'" alt="img"></p><h4 id="sentinel\u4F7F\u7528"><a class="header-anchor" href="#sentinel\u4F7F\u7528" aria-hidden="true">#</a> sentinel\u4F7F\u7528</h4><p>sentinel\u63D0\u4F9B\u4E86\u4E24\u4E2A\u670D\u52A1\u7EC4\u4EF6\uFF1A</p><ul><li>\u4E00\u4E2A\u662Fsentinel\u7528\u6765\u5B9E\u73B0\u5FAE\u670D\u52A1\u7CFB\u7EDF\u7EC8\u7AEF\u670D\u52A1\u7194\u65AD\u3001\u964D\u7EA7\u7B49\u529F\u80FD\u3002\u8FD9\u70B9\u548Chystrix\u7C7B\u4F3C</li><li>\u4E00\u4E2A\u662Fsentinel dashboard\u7528\u6765\u76D1\u63A7\u5FAE\u670D\u52A1\u7CFB\u7EDF\u4E2D\u6D41\u91CF\u8C03\u7528\u7B49\u60C5\u51B5\u3002\u8FD9\u70B9\u548Chystrix\u7C7B\u4F3C</li></ul><h5 id="sentinel-dashboard\u7684\u5B89\u88C5"><a class="header-anchor" href="#sentinel-dashboard\u7684\u5B89\u88C5" aria-hidden="true">#</a> sentinel dashboard\u7684\u5B89\u88C5</h5><h6 id="\u4E0B\u8F7D"><a class="header-anchor" href="#\u4E0B\u8F7D" aria-hidden="true">#</a> \u4E0B\u8F7D</h6><p>https://github.com/alibaba/Sentinel/releases</p><p><img src="'+Ds+`" alt="image-20211220035935151"></p><h6 id="\u542F\u52A8"><a class="header-anchor" href="#\u542F\u52A8" aria-hidden="true">#</a> \u542F\u52A8</h6><p>\u4EEA\u8868\u76D8\u662F\u4E00\u4E2Ajar\u5305\u53EF\u4EE5\u76F4\u63A5\u8FC7Java\u547D\u4EE4\u542F\u52A8\uFF0C\u5982\uFF1A<code>java -jar</code>\u65B9\u5F0F\u8FD0\u884C \u9ED8\u8BA4\u7AEF\u53E3 8080</p><div class="language-dash ext-dash line-numbers-mode"><pre class="language-dash"><code>java -Dserver.port=9191 -jar sentinel-dashboard-1.7.2.jar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="`+Fs+'" alt="image-20211220040617911"></p><p>\u542F\u52A8\u4E4B\u540E\u6211\u4EEC\u6839\u636E\u8BBE\u7F6E\u7684\u7AEF\u53E3\u8BBF\u95EE<code>http://localhost:9191</code></p>',38),Ke=s("\u4ECE Sentinel 1.6.0 \u8D77\uFF0CSentinel \u63A7\u5236\u53F0\u5F15\u5165\u57FA\u672C\u7684"),Ye=n("strong",null,"\u767B\u5F55",-1),np=s("\u529F\u80FD\uFF0C\u9ED8\u8BA4\u7528\u6237\u540D\u548C\u5BC6\u7801\u90FD\u662F "),sp=n("code",null,"sentinel",-1),ap=s("\u3002\u53EF\u4EE5\u53C2\u8003 "),tp={href:"https://sentinelguard.io/zh-cn/docs/dashboard.html#%E9%89%B4%E6%9D%83",target:"_blank",rel:"noopener noreferrer"},ep=s("\u9274\u6743\u6A21\u5757\u6587\u6863"),pp=s(" \u914D\u7F6E\u7528\u6237\u540D\u548C\u5BC6\u7801"),op=e('<p><img src="'+Hs+`" alt="image-20211220041022410"></p><h5 id="sentinel\u5B9E\u65F6\u76D1\u63A7\u670D\u52A1"><a class="header-anchor" href="#sentinel\u5B9E\u65F6\u76D1\u63A7\u670D\u52A1" aria-hidden="true">#</a> sentinel\u5B9E\u65F6\u76D1\u63A7\u670D\u52A1</h5><h6 id="\u521B\u5EFA\u9879\u76EE\u5F15\u5165\u4F9D\u8D56"><a class="header-anchor" href="#\u521B\u5EFA\u9879\u76EE\u5F15\u5165\u4F9D\u8D56" aria-hidden="true">#</a> \u521B\u5EFA\u9879\u76EE\u5F15\u5165\u4F9D\u8D56</h6><p>\u57FA\u672C\u7684nacos\u4F9D\u8D56\u4E5F\u662F\u9700\u8981\u5148\u5F15\u5165</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5B9A\u4E49springcloud alibaba\u7684\u7248\u672C--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring.cloud.alibaba.version</span><span class="token punctuation">&gt;</span></span>2.2.1.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring.cloud.alibaba.version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--\u5168\u5C40\u5F15\u5165springcloud alibaba\u4E0B\u8F7D\u4F9D\u8D56\u5730\u5740\uFF0C\u5E76\u4E0D\u4F1A\u5F15\u5165\u4F9D\u8D56--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-alibaba-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${spring.cloud.alibaba.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!--\u5F15\u5165nacos\u670D\u52A1\u4F9D\u8D56--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F15\u5165sentinel</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5F15\u5165sentinel--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-sentinel<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="\u914D\u7F6E"><a class="header-anchor" href="#\u914D\u7F6E" aria-hidden="true">#</a> \u914D\u7F6E</h6><p>\u5F15\u5165\u4F9D\u8D56\u4E4B\u540E\u5C31\u4F1A\u4EA7\u751Fsentinel\u7684\u76D1\u63A7\u65E5\u5FD7\uFF0C\u6240\u4EE5\u9700\u8981\u914D\u7F6E\u8BA9sentinel dashboard\u77E5\u9053\u8BE5\u600E\u4E48\u627E\u5230\u8FD9\u4E9B\u6570\u636E\u3002\u5728\u914D\u7F6E\u6DFB\u52A0\u8FD9\u4E9B\u914D\u7F6E</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment">## sentinel dashboard \u548C sentinel \u914D\u7F6E \u9700\u8981\u628A\u4E0B\u9762\u7684\u6CE8\u91CA\u53BB\u9664</span>
<span class="token key attr-name">spring.cloud.sentinel.enabled</span><span class="token punctuation">=</span><span class="token value attr-value">true      ## \u5F00\u542Fsentinel \u9ED8\u8BA4\u5F00\u542F</span>
<span class="token key attr-name">spring.cloud.sentinel.transport.dashboard</span><span class="token punctuation">=</span><span class="token value attr-value">localhost:9191    ## \u8FDE\u63A5\u5230dashboard</span>
<span class="token key attr-name">spring.cloud.sentinel.transport.port</span><span class="token punctuation">=</span><span class="token value attr-value">8719   ## \u4E0Edashboard\u901A\u4FE1\u7684\u7AEF\u53E3\uFF0C\u9ED8\u8BA4\u5199\u6B7B\u5728\u6E90\u7801\u4E2D</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="\u542F\u52A8\u6D4B\u8BD5-4"><a class="header-anchor" href="#\u542F\u52A8\u6D4B\u8BD5-4" aria-hidden="true">#</a> \u542F\u52A8\u6D4B\u8BD5</h6><p>sentinel\u5728\u542F\u52A8\u7684\u65F6\u5019\u5728dashboard\u4E2D\u662F\u68C0\u6D4B\u4E0D\u5230\u7684\uFF0C\u4F1A\u5EF6\u8FDF\u52A0\u8F7D\uFF0C\u53EA\u6709\u5728\u8C03\u7528\u4E4B\u540E\u624D\u4F1A\u5F00\u59CB\u521D\u59CB\u5316sentinel\uFF0C\u6240\u4EE5\u5F53\u6211\u8C03\u7528Controller\u4E2D\u7684\u8BF7\u6C42\`\`\u540E\uFF0C\u7EC8\u7AEF\u8F93\u51FA</p><p><img src="`+Ns+'" alt="image-20211220044121509"></p><p>\u5728sentinel dashboard\u4E2D\u5C31\u53EF\u4EE5\u770B\u5230\u5FAE\u670D\u52A1\u7684\u4FE1\u606F\uFF0C\u5F53\u6211\u4EEC\u53D1\u8D77\u66F4\u591A\u7684\u8BF7\u6C42\u7684\u5C31\u4F1A\u663E\u793A\u5B9E\u65F6\u76D1\u63A7\u4FE1\u606F</p><p><img src="'+Gs+`" alt="image-20211220045414394"></p><h5 id="sentinel\u6D41\u91CF\u63A7\u5236"><a class="header-anchor" href="#sentinel\u6D41\u91CF\u63A7\u5236" aria-hidden="true">#</a> sentinel\u6D41\u91CF\u63A7\u5236</h5><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>\u6D41\u63A7\u89C4\u5219\u4EC5\u4EC5\u5F53\u524D\u672C\u6B21\u542F\u52A8\u7684\u5E94\u7528\u53EF\u7528\uFF0C\u4E00\u65E6\u91CD\u542F\u5E94\u7528\u5C31\u9700\u8981\u91CD\u65B0\u914D\u7F6E
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>\u6D41\u91CF\u63A7\u5236\u5728\u7F51\u7EDC\u4F20\u8F93\u4E2D\u662F\u4E00\u4E2A\u5E38\u7528\u7684\u6982\u5FF5\uFF0C\u5B83\u7528\u4E8E\u8C03\u6574\u7F51\u7EDC\u5305\u7684\u53D1\u9001\u6570\u636E\u3002\u7136\u800C\uFF0C\u4ECE\u7CFB\u7EDF\u7A33\u5B9A\u6027\u89D2\u5EA6\u8003\u8651\uFF0C\u5728\u5904\u7406\u8BF7\u6C42\u7684\u901F\u5EA6\u4E0A\uFF0C\u4E5F\u6709\u975E\u5E38\u591A\u7684\u8BB2\u7A76</p><p>\u4EFB\u610F\u65F6\u95F4\u5230\u6765\u7684\u8BF7\u6C42\u5F80\u5F80\u662F\u968F\u673A\u4E0D\u53EF\u63A7\u7684\uFF0C\u800C\u7CFB\u7EDF\u7684\u5904\u7406\u80FD\u529B\u662F\u6709\u9650\u7684\u3002\u6211\u4EEC\u9700\u8981\u6839\u636E\u7CFB\u7EDF\u7684\u5904\u7406\u80FD\u529B\u5BF9\u6D41\u91CF\u8FDB\u884C\u63A7\u5236</p><p>Sentinel \u4F5C\u4E3A\u4E00\u4E2A\u8C03\u914D\u5668\uFF0C\u53EF\u4EE5\u6839\u636E\u9700\u8981\u628A\u968F\u673A\u7684\u8BF7\u6C42\u8C03\u6574\u6210\u5408\u9002\u7684\u5F62\u72B6\uFF0C\u5982\u4E0B\u56FE\u6240\u793A\uFF1A</p><p><img src="`+Us+'" alt="arch"></p><p>\u6D41\u91CF\u63A7\u5236\u6709\u4EE5\u4E0B\u51E0\u4E2A\u89D2\u5EA6:</p><ul><li>\u8D44\u6E90\u7684\u8C03\u7528\u5173\u7CFB\uFF0C\u4F8B\u5982\u8D44\u6E90\u7684\u8C03\u7528\u94FE\u8DEF\uFF0C\u8D44\u6E90\u548C\u8D44\u6E90\u4E4B\u95F4\u7684\u5173\u7CFB\uFF1B</li><li>\u8FD0\u884C\u6307\u6807\uFF0C\u4F8B\u5982 QPS\u3001\u7EBF\u7A0B\u6C60\u3001\u7CFB\u7EDF\u8D1F\u8F7D\u7B49\uFF1B</li><li>\u63A7\u5236\u7684\u6548\u679C\uFF0C\u4F8B\u5982\u76F4\u63A5\u9650\u6D41\u3001\u51B7\u542F\u52A8\u3001\u6392\u961F\u7B49\u3002</li></ul><p>Sentinel \u7684\u8BBE\u8BA1\u7406\u5FF5\u662F\u8BA9\u60A8\u81EA\u7531\u9009\u62E9\u63A7\u5236\u7684\u89D2\u5EA6\uFF0C\u5E76\u8FDB\u884C\u7075\u6D3B\u7EC4\u5408\uFF0C\u4ECE\u800C\u8FBE\u5230\u60F3\u8981\u7684\u6548\u679C</p></blockquote><p>\u6D41\u91CF\u63A7\u5236\uFF08flow control\uFF09\uFF0C\u5176\u539F\u7406\u662F\u76D1\u63A7\u5E94\u7528\u6D41\u91CF\u7684QPS\u6216\u8005\u5E76\u53D1\u7EBF\u7A0B\u6570\u7B49\u6307\u6807\uFF0C\u5F53\u8FBE\u5230\u6307\u5B9A\u7684\u9608\u503C\u65F6\u5BF9\u6D41\u91CF\u8FDB\u884C\u63A7\u5236\uFF0C\u4EE5\u907F\u514D\u88AB\u77AC\u65F6\u7684\u6D41\u91CF\u9AD8\u5CF0\u51B2\u57AE\uFF0C\u4ECE\u800C\u4FDD\u969C\u5E94\u7528\u7684\u9AD8\u53EF\u7528\u6027</p><p>\u540C\u4E00\u4E2A\u8D44\u6E90\u53EF\u4EE5\u521B\u5EFA\u591A\u6761\u9650\u6D41\u89C4\u5219\uFF0Cflowslot\u4F1A\u5BF9\u8BE5\u8D44\u6E90\u7684\u6240\u6709\u9650\u6D41\u89C4\u5219\u4F9D\u6B21\u904D\u5386\uFF0C\u76F4\u5230\u6709\u89C4\u5219\u89E6\u53D1\u9650\u6D41\u6216\u8005\u6240\u6709\u89C4\u5219\u904D\u5386\u5B8C\u6210</p><p>\u4E00\u6761\u9650\u6D41\u89C4\u5219\u4E3B\u8981\u7531\u4E0B\u9762\u7684\u51E0\u4E2A\u56E0\u7D20\u7EC4\u6210\uFF0C\u6211\u4EEC\u53EF\u4EE5\u7EC4\u5408\u8FD9\u4E9B\u5143\u7D20\u6765\u5B9E\u73B0\u4E0D\u540C\u7684\u9650\u6D41\u6548\u679C\uFF1A</p><ul><li>resource\uFF1A\u8D44\u6E90\u540D\uFF0C\u5373\u9650\u6D41\u89C4\u5219\u7684\u4F5C\u7528\u5BF9\u8C61 \u670D\u52A1\u8DEF\u5F84\uFF0C\u53EF\u4EE5\u5176\u522B\u540D\uFF0C\u4E4B\u540E\u5BF9\u8FD9\u4E2A\u522B\u540D\u7684\u89C4\u5219\u9650\u5B9A\uFF0C\u5C31\u662F\u5BF9\u8FD9\u4E2A\u8D44\u6E90\u7684\u9650\u5B9A</li><li>count\uFF1A\u9650\u6D41\u9608\u503C</li><li>grade\uFF1A\u9650\u6D41\u9608\u503C\u7C7B\u578B\uFF08QPS\u6216\u8005\u5E76\u53D1\u7EBF\u7A0B\u6570\uFF09</li><li>limitApp\uFF1A\u6D41\u63A7\u9488\u5BF9\u7684\u8C03\u7528\u6765\u6E90\uFF0C\u82E5\u4E3Adefault\u5219\u4E0D\u533A\u5206\u8C03\u7528\u6765\u6E90</li><li>strategy\uFF1A\u8C03\u7528\u5173\u7CFB\u9650\u6D41\u7B56\u7565 \u76F4\u63A5 \u5173\u8054 \u94FE\u8DEF</li><li>controlBehavior\uFF1A\u6D41\u91CF\u63A7\u5236\u6548\u679C\uFF08\u76F4\u63A5\u62D2\u7EDD\u3001Warm Up\u3001\u5300\u901F \u6392\u961F\uFF09</li></ul><p>\u6D41\u91CF\u63A7\u5236\u4E3B\u8981\u7531\u4E24\u79CD\u7EDF\u8BA1\u7C7B\u578B\uFF0C\u4E00\u79CD\u662F\u7EDF\u8BA1\u5E76\u53D1\u7EBF\u7A0B\u6570\uFF0C\u53E6\u5916\u4E00\u79CD\u5219\u662F\u7EDF\u8BA1QPS</p><h6 id="qps\u9650\u6D41"><a class="header-anchor" href="#qps\u9650\u6D41" aria-hidden="true">#</a> QPS\u9650\u6D41</h6><p>\u8FDB\u5165\u5165\u53E3\uFF1A\u53EF\u4EE5\u662F\u83DC\u5355\u7684\u6D41\u63A7\u63A7\u5236\uFF0C\u4E5F\u53EF\u4EE5\u5728\u7C07\u70B9\u94FE\u8DEF\u4E2D\u70B9\u51FB\u5BF9\u5E94\u8D44\u6E90\u70B9\u51FB\u6DFB\u52A0</p><p><img src="'+Ls+`" alt="image-20211220055638686"></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>QPS \u6BCF\u79D2\u7684\u8BF7\u6C42\u6570\u91CF\uFF0C\u4E0D\u80FD\u8D85\u8FC7\u9608\u503C\uFF0C\u6BD4\u5982\uFF1A1\u79D2\u5185\u7684\u8BF7\u6C42\u6570\u91CF\u4E0D\u80FD\u8D85\u8FC710\u4E2A\u7B49
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6BD4\u5982\uFF0C\u8BBE\u7F6E\u4E00\u4E2AQPS\u9650\u6D41\uFF0C\u5728\u83DC\u5355\u4E2D\u7684\u6D41\u63A7\u89C4\u5219\u83DC\u5355-&gt;\u65B0\u589E\u6D41\u63A7\u89C4\u5219</p><p><img src="`+$s+'" alt="image-20211220052734101"></p><ul><li>\u8D44\u6E90\u540D\u8868\u793A\u8BF7\u6C42\u7684\u8DEF\u5F84</li><li>\u9488\u5BF9\u6765\u6E90\u8868\u793A\u53EF\u4EE5\u5BF9\u7279\u5B9A\u7684\u6765\u6E90\u8FDB\u884C\u9650\u5B9A</li><li>\u9608\u503C\u7C7B\u578B\u53EF\u4EE5\u9009\u62E9QPS\u6216\u8005\u7EBF\u7A0B\u6570</li><li>\u5355\u673A\u9608\u503C\u8868\u793A\u6BCF\u4E2A\u673A\u5668\u5F53\u524D\u8FD9\u4E2A\u8D44\u6E90\u53EF\u4EE5\u6BCF\u79D2\u53EF\u4EE5\u5904\u7406\u7684\u8BF7\u6C42\u6570</li></ul><p>\u8FD9\u4E48\u8BBE\u7F6E\u4E4B\u540E\uFF0C\u6211\u4EEC\u5C1D\u8BD5\u57281\u79D2\u5185\u53D1\u9001\u591A\u4E2A\u8BF7\u6C42\u7ED9\u8FD9\u4E2A\u8FDE\u63A5\uFF0C\u4F1A\u53D1\u73B0\u6839\u636E\u6211\u4EEC\u9009\u62E9\u7684\u6D41\u63A7\u6548\u679C\u6765\u5904\u7406\u591A\u4F59\u7684\u8BF7\u6C42</p><p><img src="'+zs+`" alt="image-20211220053138472"></p><h6 id="\u7EBF\u7A0B\u6570\u9650\u6D41"><a class="header-anchor" href="#\u7EBF\u7A0B\u6570\u9650\u6D41" aria-hidden="true">#</a> \u7EBF\u7A0B\u6570\u9650\u6D41</h6><p>\u8FDB\u5165\u5165\u53E3\uFF1A\u53EF\u4EE5\u662F\u83DC\u5355\u7684\u6D41\u63A7\u63A7\u5236\uFF0C\u4E5F\u53EF\u4EE5\u5728\u7C07\u70B9\u94FE\u8DEF\u4E2D\u70B9\u51FB\u5BF9\u5E94\u8D44\u6E90\u70B9\u51FB\u6DFB\u52A0</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>\u67D0\u4E00\u4E2A\u65F6\u523B\u5E76\u53D1\u7684\u7EBF\u7A0B\u4E0D\u80FD\u8D85\u8FC7\u9608\u503C\uFF0C\u572810\u70B910\u520610\u79D2\u7684\u8FD9\u4E2A\u65F6\u523B\u5904\u7406\u8BF7\u6C42\u7684\u7EBF\u7A0B\u6570\u4E0D\u80FD\u8D85\u8FC710\u4E2A
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6BD4\u5982\u6211\u4EEC\u5C06\u521A\u624D\u7684\u7EBF\u7A0B\u6570\u7684\u6D41\u63A7\u4FEE\u6539\u6210\u7EBF\u7A0B\u6570\u636E</p><p><img src="`+Vs+'" alt="image-20211220054106829"></p><p>\u7136\u540E\u6211\u4EEC\u4F7F\u7528\u5E76\u53D1\u6D4B\u8BD5jmeter\u6765\u6D4B\u8BD5</p><p>\u5C06ramp-up\u8BBE\u7F6E\u4E3A0\uFF0C\u8868\u793A\u9488\u5BF9\u8FD920\u5F00\u542F\u7684\u7EBF\u7A0B\u8FD0\u884C\u7684\u65F6\u95F4\u95F4\u9694\u4E3A0\uFF0C\u5E76\u4E14\u5FAA\u73AF\u6B21\u6570\u662F\u6C38\u8FDC\u8868\u793A\u4E00\u76F4\u8BF7\u6C42\u8D44\u6E90</p><p><img src="'+Ws+'" alt="image-20211220054331387"></p><p>\u6DFB\u52A0http\u8BF7\u6C42\uFF0C\u8BF7\u6C42\u7684url\u4E3A<code>http://localhost:9066/test/getName</code>\uFF0C\u53C2\u6570\u5982\u4E0B</p><p><img src="'+Xs+`" alt="image-20211220054509053"></p><p>jmeter\u542F\u52A8\u4E4B\u540E\uFF0C\u6211\u4EEC\u901A\u8FC7\u6D4F\u89C8\u5668\u53BB\u8BF7\u6C42\uFF0C\u53EF\u4EE5\u770B\u5230\u5DF2\u7ECF\u88AB\u6D41\u63A7\u4E86</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>\u53EA\u6709\u4E00\u4E2A\u7EBF\u7A0B\u5728\u5F53\u524D\u65F6\u95F4\u5904\u7406\u5F53\u524D\u8BF7\u6C42\uFF0C\u6240\u4EE5\u5F53\u6211\u4EEC\u901A\u8FC7\u6D4F\u89C8\u5668\u53D1\u9001\u8BF7\u6C42\uFF0C\u5C31\u4F1A\u53EF\u80FD\u5BFC\u81F4\u6D41\u63A7
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="`+Js+'" alt="image-20211220054717669"></p><h6 id="\u6D41\u63A7\u6A21\u5F0F"><a class="header-anchor" href="#\u6D41\u63A7\u6A21\u5F0F" aria-hidden="true">#</a> \u6D41\u63A7\u6A21\u5F0F</h6><ol><li>\u76F4\u63A5</li></ol><p>\u6807\u8BC6\u6D41\u91CF\u63A7\u5236\u89C4\u5219\u5230\u8FBE\u9608\u503C\u76F4\u63A5\u89E6\u53D1\u6D41\u91CF\u63A7\u5236</p><ol start="2"><li>\u5173\u8054</li></ol><p>\u5F53\u4E24\u4E2A\u8D44\u6E90\u4E4B\u95F4\u5177\u6709\u8D44\u6E90\u4E89\u62A2\u6216\u8005\u4F9D\u8D56\u5173\u7CFB\u7684\u65F6\u5019\uFF0C\u8FD9\u4E24\u4E2A\u8D44\u6E90\u4FBF\u5177\u6709\u4E86\u5173\u8054\uFF0C\u6BD4\u5982\u5BF9\u6570\u636E\u5E93\u540C\u4E00\u4E2A\u5B57\u6BB5\u7684\u8BFB\u64CD\u4F5C\u548C\u5199\u64CD\u4F5C\u5B58\u5728\u4E89\u62A2\uFF0C\u8BFB\u7684\u901F\u5EA6\u8FC7\u9AD8\u4F1A\u5F71\u54CD\u5199\u7684\u901F\u5EA6\uFF0C\u5199\u7684\u901F\u5EA6\u8FC7\u9AD8\u4F1A\u5F71\u54CD\u8BFB\u7684\u901F\u5EA6\uFF0C\u5982\u679C\u653E\u4EFB\u8BFB\u5199\u64CD\u4F5C\u4E89\u62A2\u8D44\u6E90\uFF0C\u5219\u4E89\u62A2\u672C\u8EAB\u5E26\u6765\u7684\u5F00\u9500\u4F1A\u964D\u4F4E\u6574\u4F53\u7684\u541E\u5410\u91CF\u3002\u53EF\u4F7F\u7528\u5173\u8054\u9650\u5B9A\u9650\u6D41\u6765\u907F\u514D\u5177\u6709\u5173\u8054\u5173\u7CFB\u7684\u8D44\u6E90\u4E4B\u95F4\u8FC7\u6E21\u7684\u4E89\u62A2\uFF0C\u4E3E\u4F8B\u6765\u8BF4\uFF0Cread_db \u548C write_db\u8FD9\u4E24\u4E2A\u8D44\u6E90\u5206\u522B\u4EE3\u8868\u6570\u636E\u5E93\u8BFB\u5199\uFF0C\u6211\u4EEC\u53EF\u4EE5\u7ED9read_db\u8BBE\u7F6E\u9650\u6D41\u89C4\u5219\u6765\u8FBE\u5230\u5199\u4F18\u5148\u7684\u76EE\u7684\uFF1A\u8BBE\u7F6E strategy \u4E3A RuleConstant.STRATEGY_RELATE \u540C\u65F6\u8BBE\u7F6ErefResource \u4E3Awrite_db\u3002\u8FD9\u6837\u5F53\u5199\u5E93\u64CD\u4F5C\u8FC7\u4E8E\u9891\u7E41\u65F6\uFF0C\u8BFB\u6570\u636E\u7684\u8BF7\u6C42\u4F1A\u88AB\u9650\u6D41</p><p><img src="'+Qs+`" alt="image-20211220061548885"></p><ol start="3"><li>\u94FE\u8DEF\u9650\u6D41</li></ol><blockquote><p>https://sentinelguard.io/zh-cn/docs/flow-control.html</p></blockquote><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>\u7528\u6237\u670D\u52A1-&gt;\u5546\u54C1\u670D\u52A1-&gt;\u8BA2\u5355\u670D\u52A1\uFF0C\u591A\u4E2A\u670D\u52A1\u4E4B\u95F4\u7684
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6BD4\u5982\uFF0C\u5982\u4E0B\u56FE\uFF0C\u5BF9\u5546\u54C1\u670D\u52A1\u8C03\u7528\u8BA2\u5355\u7CFB\u7EDF\u7684\u8FD9\u6761\u94FE\u8DEF\u4E0A\u8FDB\u884C\u9650\u6D41\uFF0C\u4F46\u662F\u5BF9\u5546\u54C1\u670D\u52A1\u8C03\u7528\u5176\u4ED6\u670D\u52A1\u4E0D\u9650\u6D41\uFF0C\u4E5F\u4E0D\u4F1A\u5F71\u54CD\u7528\u6237\u670D\u52A1\u8C03\u7528\u8BA2\u5355\u670D\u52A1\uFF0C\u8FD9\u6837\u5C31\u53EF\u4EE5\u4FDD\u8BC1\u7528\u6237\u670D\u52A1\u8C03\u7528\u8BA2\u5355\u670D\u52A1\u80FD\u88AB\u66F4\u591A\u5904\u7406</p><p><img src="`+Zs+'" alt="image-20211220064056121"></p><p>\u8BBE\u7F6E\u65B9\u5F0F\uFF0C\u4E5F\u5C31\u662F\u5165\u53E3\u8D44\u6E90product\u662F\u5546\u54C1\uFF0C\u5F53product\u5165\u53E3\u8D44\u6E90\u901A\u8FC7\u94FE\u8DEF\u8C03\u7528\u5230\u8BA2\u5355\u8D44\u6E90order\u7684\u65F6\u5019\u4F1A\u5FEB\u901F\u5931\u8D25</p><p><img src="'+Ks+'" alt="image-20211220064202805"></p><h6 id="\u6D41\u63A7\u6548\u679C"><a class="header-anchor" href="#\u6D41\u63A7\u6548\u679C" aria-hidden="true">#</a> \u6D41\u63A7\u6548\u679C</h6><ol><li>\u76F4\u63A5\u62D2\u7EDD</li></ol>',60),lp=n("code",null,"RuleConstant.CONTROL_BEHAVIOR_DEFAULT",-1),cp=s("\u65B9\u5F0F\u3002\u8BE5\u65B9\u5F0F\u662F\u9ED8\u8BA4\u7684\u6D41\u91CF\u63A7\u5236\u65B9\u5F0F\uFF0C\u5F53QPS\u8D85\u8FC7\u4EFB\u610F\u89C4\u5219\u7684\u9608\u503C\u540E\uFF0C\u65B0\u7684\u8BF7\u6C42\u5C31\u4F1A\u88AB\u7ACB\u5373\u62D2\u7EDD\uFF0C\u62D2\u7EDD\u65B9\u5F0F\u4E3A\u629B\u51FA"),ip=n("code",null,"FlowException",-1),up=s("\u3002\u8FD9\u79CD\u65B9\u5F0F\u9002\u7528\u4E8E\u5BF9\u7CFB\u7EDF\u5904\u7406\u80FD\u529B\u786E\u5207\u5DF2\u77E5\u7684\u60C5\u51B5\u4E0B\uFF0C\u6BD4\u5982\u901A\u8FC7\u538B\u6D4B\u786E\u5B9A\u4E86\u7CFB\u7EDF\u7684\u51C6\u786E\u6C34\u4F4D\u65F6\u3002\u5177\u4F53\u7684\u4F8B\u5B50\u53C2\u89C1 "),rp={href:"https://github.com/alibaba/Sentinel/blob/master/sentinel-demo/sentinel-demo-basic/src/main/java/com/alibaba/csp/sentinel/demo/flow/FlowQpsDemo.java",target:"_blank",rel:"noopener noreferrer"},dp=s("FlowqpsDemo"),kp=n("ol",{start:"2"},[n("li",null,"Warm Up")],-1),vp=n("code",null,"RuleConstant.CONTROL_BEHAVIOR_WARM_UP",-1),mp=s('\u65B9\u5F0F\u3002\u8BE5\u65B9\u5F0F\u4E3B\u8981\u7528\u4E8E\u7CFB\u7EDF\u957F\u671F\u5904\u4E8E\u4F4E\u6C34\u4F4D\u7684\u60C5\u51B5\u4E0B\uFF0C\u5F53\u6D41\u91CF\u7A81\u7136\u589E\u52A0\u65F6\uFF0C\u76F4\u63A5\u628A\u7CFB\u7EDF\u62C9\u5347\u5230\u9AD8\u6C34\u4F4D\u53EF\u80FD\u77AC\u95F4\u628A\u7CFB\u7EDF\u538B\u57AE\u3002\u901A\u8FC7"\u51B7\u542F\u52A8"\uFF0C\u8BA9\u901A\u8FC7\u7684\u6D41\u91CF\u7F13\u6162\u589E\u52A0\uFF0C\u5728\u4E00\u5B9A\u65F6\u95F4\u5185\u9010\u6E10\u589E\u52A0\u5230\u9608\u503C\u4E0A\u9650\uFF0C\u7ED9\u51B7\u7CFB\u7EDF\u4E00\u4E2A\u9884\u70ED\u7684\u65F6\u95F4\uFF0C\u907F\u514D\u51B7\u7CFB\u7EDF\u88AB\u538B\u57AE\u7684\u60C5\u51B5\u3002\u5177\u4F53\u7684\u4F8B\u5B50\u53C2\u89C1 '),gp={href:"https://github.com/alibaba/Sentinel/blob/master/sentinel-demo/sentinel-demo-basic/src/main/java/com/alibaba/csp/sentinel/demo/flow/WarmUpFlowDemo.java",target:"_blank",rel:"noopener noreferrer"},bp=s("WarmUpFlowDemo"),hp=n("p",null,"\u901A\u5E38\u51B7\u542F\u52A8\u7684\u8FC7\u7A0B\u7CFB\u7EDF\u5141\u8BB8\u901A\u8FC7\u7684 QPS \u66F2\u7EBF\u5982\u4E0B\u56FE\u6240\u793A",-1),fp=n("p",null,[n("img",{src:Ys,alt:"\u51B7\u542F\u52A8\u8FC7\u7A0B QPS \u66F2\u7EBF"})],-1),yp=n("p",null,"\u8BBE\u8BA1\u754C\u9762\uFF0C\u4F1A\u6709\u4E00\u4E2A\u56E0\u5B50\uFF0C\u6BCF\u79D2\u589E\u52A0\u591A\u5C11\uFF0C\u9ED8\u8BA4\u662F3\uFF0C\u6BD4\u5982\uFF0C\u5F53\u524D\u670D\u52A1\u6BCF\u79D2\u9700\u8981\u5904\u740620\u4E2A\u8BF7\u6C42\uFF0C\u8BBE\u7F6E\u9884\u70ED\u65F6\u957F10\u79D2\uFF0C\u90A3\u4E48\u521A\u5F00\u59CB\u53EA\u5904\u740620/3=6\u4E2A\u52307\u4E2A\u8BF7\u6C42\uFF0C\u5176\u4ED6\u7684\u5168\u90E8\u653E\u5F03\uFF0C10\u79D2\u4E4B\u540E\u7A33\u5B9A\u63A5\u6536\u5904\u740620\u4E2A\u8BF7\u6C42",-1),wp=n("p",null,[n("img",{src:na,alt:"image-20211220071503507"})],-1),_p=n("ol",{start:"3"},[n("li",null,"\u5300\u901F\u6392\u961F")],-1),qp=n("code",null,"RuleConstant.CONTROL_BEHAVIOR_RATE_LIMITER",-1),xp=s("\u65B9\u5F0F\u3002\u8FD9\u79CD\u65B9\u5F0F\u4E25\u683C\u63A7\u5236\u4E86\u8BF7\u6C42\u901A\u8FC7\u7684\u95F4\u9694\u65F6\u95F4\uFF0C\u4E5F\u5373\u662F\u8BA9\u8BF7\u6C42\u4EE5\u5747\u5300\u7684\u901F\u5EA6\u901A\u8FC7\uFF0C\u5BF9\u5E94\u7684\u662F\u6F0F\u6876\u7B97\u6CD5\u3002\u5177\u4F53\u7684\u4F8B\u5B50\u53C2\u89C1 "),Sp={href:"https://github.com/alibaba/Sentinel/blob/master/sentinel-demo/sentinel-demo-basic/src/main/java/com/alibaba/csp/sentinel/demo/flow/PaceFlowDemo.java",target:"_blank",rel:"noopener noreferrer"},Ip=s("PaceFlowDemo"),jp=e('<p>\u8BE5\u65B9\u5F0F\u7684\u4F5C\u7528\u5982\u4E0B\u56FE\u6240\u793A</p><p><img src="'+sa+'" alt="img"></p><p>\u8FD9\u79CD\u65B9\u5F0F\u4E3B\u8981\u7528\u4E8E\u5904\u7406\u95F4\u9694\u6027\u7A81\u53D1\u7684\u6D41\u91CF\uFF0C\u4F8B\u5982\u6D88\u606F\u961F\u5217\u3002\u60F3\u8C61\u4E00\u4E0B\u8FD9\u6837\u7684\u573A\u666F\uFF0C\u5728\u67D0\u4E00\u79D2\u6709\u5927\u91CF\u7684\u8BF7\u6C42\u5230\u6765\uFF0C\u800C\u63A5\u4E0B\u6765\u7684\u51E0\u79D2\u5219\u5904\u4E8E\u7A7A\u95F2\u72B6\u6001\uFF0C\u6211\u4EEC\u5E0C\u671B\u7CFB\u7EDF\u80FD\u591F\u5728\u63A5\u4E0B\u6765\u7684\u7A7A\u95F2\u671F\u95F4\u9010\u6E10\u5904\u7406\u8FD9\u4E9B\u8BF7\u6C42\uFF0C\u800C\u4E0D\u662F\u5728\u7B2C\u4E00\u79D2\u76F4\u63A5\u62D2\u7EDD\u591A\u4F59\u7684\u8BF7\u6C42</p><p><img src="'+aa+'" alt="image-20211220072757951"></p><p>1\u79D2\u53EA\u5141\u8BB8\u901A\u8FC7\u4E00\u4E2A\uFF0C1\u79D2\u6267\u884C1\u4E2A\uFF0C\u7B49\u5F85\u65F6\u95F4\u662F5\u79D2\uFF0C\u90A3\u4E48\u5F53\u524D\u6765\u4E8610\u4E2A\u8BF7\u6C42\uFF0C\u4E00\u4E2A\u4E00\u4E2A\u6392\u961F\uFF0C\u5F53\u5904\u7406\u4E865\u4E2A\u4E4B\u540E\uFF0C\u8D85\u65F6\u65F6\u95F4\u5230\uFF0C\u90A3\u4E48\u4E4B\u540E\u76846-10\u5C31\u662F\u4F1A\u88AB\u4E22\u5F03\uFF0C\u76F4\u63A5\u62A5\u9519</p><h5 id="\u7194\u65AD\u964D\u7EA7"><a class="header-anchor" href="#\u7194\u65AD\u964D\u7EA7" aria-hidden="true">#</a> \u7194\u65AD\u964D\u7EA7</h5><blockquote><p>Sentinel\u9664\u4E86\u6D41\u91CF\u63A7\u5236\u4EE5\u5916\uFF0C\u5BF9\u8C03\u7528\u94FE\u8DEF\u4E2D\u4E0D\u7A33\u5B9A\u7684\u8D44\u6E90\u8FDB\u884C\u7194\u65AD\u964D\u7EA7\u4E5F\u662F\u4FDD\u969C\u9AD8\u53EF\u7528\u7684\u91CD\u8981\u63AA\u65BD\u4E4B\u4E00\u3002\u7531\u4E8E\u8C03\u7528\u5173\u7CFB\u7684\u590D\u6742\u6027\uFF0C\u5982\u679C\u8C03\u7528\u94FE\u8DEF\u4E2D\u7684\u67D0\u4E2A\u8D44\u6E90\u4E0D\u7A33\u5B9A\uFF0C\u6700\u7EC8\u4F1A\u5BFC\u81F4\u8BF7\u6C42\u53D1\u751F\u5806\u79EF\u3002Sentinel \u7194\u65AD\u964D\u7EA7\u4F1A\u5728\u8C03\u7528\u94FE\u8DEF\u4E2D\u67D0\u4E2A\u8D44\u6E90\u51FA\u73B0\u4E0D\u7A33\u5B9A\u72B6\u6001\u65F6\uFF08\u4F8B\u5982\u8C03\u7528\u8D85\u65F6\u6216\u5F02\u5E38\u6BD4\u4F8B\u5347\u9AD8\uFF09\uFF0C\u5BF9\u8FD9\u4E2A\u8D44\u6E90\u7684\u8C03\u7528\u8FDB\u884C\u9650\u5236\uFF0C\u8BA9\u8BF7\u6C42\u5FEB\u901F\u5931\u8D25\uFF0C\u907F\u514D\u5F71\u54CD\u5230\u5176\u5B83\u7684\u8D44\u6E90\u800C\u5BFC\u81F4\u7EA7\u8054\u9519\u8BEF\u3002\u5F53\u8D44\u6E90\u88AB\u964D\u7EA7\u540E\uFF0C\u5728\u63A5\u4E0B\u6765\u7684\u964D\u7EA7\u65F6\u95F4\u7A97\u53E3\u4E4B\u5185\uFF0C\u5BF9\u8BE5\u8D44\u6E90\u7684\u8C03\u7528\u90FD\u81EA\u52A8\u7194\u65AD\uFF08\u9ED8\u8BA4\u884C\u4E3A\u662F\u629B\u51FA DegradeException\uFF09</p></blockquote><p><img src="'+ta+'" alt="image"></p><p>Sentinel \u548C Hystrix \u7684\u539F\u5219\u662F\u4E00\u81F4\u7684: \u5F53\u8C03\u7528\u94FE\u8DEF\u4E2D\u67D0\u4E2A\u8D44\u6E90\u51FA\u73B0\u4E0D\u7A33\u5B9A\uFF0C\u4F8B\u5982\uFF0C\u8868\u73B0\u4E3A timeout\uFF0C\u5F02\u5E38\u6BD4\u4F8B\u5347\u9AD8\u7684\u65F6\u5019\uFF0C\u5219\u5BF9\u8FD9\u4E2A\u8D44\u6E90\u7684\u8C03\u7528\u8FDB\u884C\u9650\u5236\uFF0C\u5E76\u8BA9\u8BF7\u6C42\u5FEB\u901F\u5931\u8D25\uFF0C\u907F\u514D\u5F71\u54CD\u5230\u5176\u5B83\u7684\u8D44\u6E90\uFF0C\u6700\u7EC8\u4EA7\u751F\u96EA\u5D29\u7684\u6548\u679C</p><h6 id="\u964D\u7EA7\u7B56\u7565"><a class="header-anchor" href="#\u964D\u7EA7\u7B56\u7565" aria-hidden="true">#</a> \u964D\u7EA7\u7B56\u7565</h6><ol><li>\u5E73\u5747\u54CD\u5E94\u65F6\u95F4 (DEGRADE_GRADE_RT)</li></ol><p>\u5F53\u8D44\u6E90\u7684\u5E73\u5747\u54CD\u5E94\u65F6\u95F4\u8D85\u8FC7\u9608\u503C\uFF08DegradeRule \u4E2D\u7684 count\uFF0C\u4EE5 ms \u4E3A\u5355\u4F4D\uFF09\u4E4B\u540E\uFF0C\u8D44\u6E90\u8FDB\u5165\u51C6\u964D\u7EA7\u72B6\u6001\u3002\u63A5\u4E0B\u6765\u5982\u679C\u6301\u7EED\u8FDB\u5165 5 \u4E2A\u8BF7\u6C42\uFF0C\u5B83\u4EEC\u7684 RT \u90FD\u6301\u7EED\u8D85\u8FC7\u8FD9\u4E2A\u9608\u503C\uFF0C\u90A3\u4E48\u5728\u63A5\u4E0B\u7684\u65F6\u95F4\u7A97\u53E3\uFF08DegradeRule \u4E2D\u7684 timeWindow\uFF0C\u4EE5 s \u4E3A\u5355\u4F4D\uFF09\u4E4B\u5185\uFF0C\u5BF9\u8FD9\u4E2A\u65B9\u6CD5\u7684\u8C03\u7528\u90FD\u4F1A\u81EA\u52A8\u5730\u8FD4\u56DE\uFF08\u629B\u51FA DegradeException\uFF09\u3002\u5728\u4E0B\u4E00\u4E2A\u65F6\u95F4\u7A97\u53E3\u5230\u6765\u65F6, \u4F1A\u63A5\u7740\u518D\u653E\u51655\u4E2A\u8BF7\u6C42, \u518D\u91CD\u590D\u4E0A\u9762\u7684\u5224\u65AD</p><p><img src="'+ea+'" alt="image-20211220074737081"></p><p>\u6BD4\u5982\u8BBE\u7F6E</p><p><img src="'+pa+`" alt="image-20211220075944766"></p><p>\u5F53\u8FDB\u5165\u5E73\u5747\u54CD\u5E94\u65F6\u95F4\u8D85\u8FC7\u9608\u503C100ms\uFF0C\u63A5\u4E0B\u67655\u4E2A\u8BF7\u6C42\u90FD\u8D85\u8FC7\u8FD9\u4E2A\u9608\u503C100ms\uFF0C\u90A3\u4E48\u5C31\u4F1A\u964D\u7EA730s</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">##</span> \u65B0\u7248\u672C(1.8.0 \u53CA\u4EE5\u4E0A\u7248\u672C)\u5C06\u8FD9\u4E2A\u4FEE\u6539\u6210\u4E86\u5982\u4E0B</span>
\u6162\u8C03\u7528\u6BD4\u4F8B (SLOW_REQUEST_RATIO)\uFF1A\u9009\u62E9\u4EE5\u6162\u8C03\u7528\u6BD4\u4F8B\u4F5C\u4E3A\u9608\u503C\uFF0C\u9700\u8981\u8BBE\u7F6E\u5141\u8BB8\u7684\u6162\u8C03\u7528 RT\uFF08\u5373\u6700\u5927\u7684\u54CD\u5E94\u65F6\u95F4\uFF09\uFF0C\u8BF7\u6C42\u7684\u54CD\u5E94\u65F6\u95F4\u5927\u4E8E\u8BE5\u503C\u5219\u7EDF\u8BA1\u4E3A\u6162\u8C03\u7528\u3002\u5F53\u5355\u4F4D\u7EDF\u8BA1\u65F6\u957F\uFF08statIntervalMs\uFF09\u5185\u8BF7\u6C42\u6570\u76EE\u5927\u4E8E\u8BBE\u7F6E\u7684\u6700\u5C0F\u8BF7\u6C42\u6570\u76EE\uFF0C\u5E76\u4E14\u6162\u8C03\u7528\u7684\u6BD4\u4F8B\u5927\u4E8E\u9608\u503C\uFF0C\u5219\u63A5\u4E0B\u6765\u7684\u7194\u65AD\u65F6\u957F\u5185\u8BF7\u6C42\u4F1A\u81EA\u52A8\u88AB\u7194\u65AD\u3002\u7ECF\u8FC7\u7194\u65AD\u65F6\u957F\u540E\u7194\u65AD\u5668\u4F1A\u8FDB\u5165\u63A2\u6D4B\u6062\u590D\u72B6\u6001\uFF08HALF-OPEN \u72B6\u6001\uFF09\uFF0C\u82E5\u63A5\u4E0B\u6765\u7684\u4E00\u4E2A\u8BF7\u6C42\u54CD\u5E94\u65F6\u95F4\u5C0F\u4E8E\u8BBE\u7F6E\u7684\u6162\u8C03\u7528 RT \u5219\u7ED3\u675F\u7194\u65AD\uFF0C\u82E5\u5927\u4E8E\u8BBE\u7F6E\u7684\u6162\u8C03\u7528 RT \u5219\u4F1A\u518D\u6B21\u88AB\u7194\u65AD
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u5F02\u5E38\u6BD4\u4F8B (DEGRADE_GRADE_EXCEPTION_RATIO)</li></ol><p>\u5F53\u8D44\u6E90\u7684\u6BCF\u79D2\u5F02\u5E38\u603B\u6570\u5360\u901A\u8FC7\u91CF\u7684\u6BD4\u503C\u8D85\u8FC7\u9608\u503C\uFF08DegradeRule \u4E2D\u7684 count\uFF09\u4E4B\u540E\uFF0C\u8D44\u6E90\u8FDB\u5165\u964D\u7EA7\u72B6\u6001\uFF0C\u5373\u5728\u63A5\u4E0B\u7684\u65F6\u95F4\u7A97\u53E3\uFF08DegradeRule\u4E2D\u7684 timeWindow\uFF0C\u4EE5 s \u4E3A\u5355\u4F4D\uFF09\u4E4B\u5185\uFF0C\u5BF9\u8FD9\u4E2A\u65B9\u6CD5\u7684\u8C03\u7528\u90FD\u4F1A\u81EA\u52A8\u5730\u8FD4\u56DE\u3002\u5F02\u5E38\u6BD4\u7387\u7684\u9608\u503C\u8303\u56F4\u662F [0.0, 1.0]\uFF0C\u4EE3\u8868 0% - 100%</p><p><img src="`+oa+'" alt="image-20211220074754932"></p><p>\u6BD4\u5982\u8BBE\u7F6E</p><p><img src="'+la+`" alt="image-20211220081753209"></p><p>\u5982\u679C1\u79D2\u6BCF\u53D1\u4E8610\u4E2A\u8BF7\u6C42\uFF0C\u5176\u4E2D\u6709\u4E00\u4E2A1\u4E2A\u8BF7\u6C42\u51FA\u73B0\u4E86\u5F02\u5E38\uFF0C\u90A3\u4E48\u5C31\u4F1A\u6253\u5F00\u65AD\u8DEF\u5668</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">##</span> \u65B0\u7248\u672C(1.8.0 \u53CA\u4EE5\u4E0A\u7248\u672C)\u5C06\u8FD9\u4E2A\u4FEE\u6539\u6210\u4E86\u5982\u4E0B</span>
\u5F02\u5E38\u6BD4\u4F8B (ERROR_RATIO)\uFF1A\u5F53\u5355\u4F4D\u7EDF\u8BA1\u65F6\u957F\uFF08statIntervalMs\uFF09\u5185\u8BF7\u6C42\u6570\u76EE\u5927\u4E8E\u8BBE\u7F6E\u7684\u6700\u5C0F\u8BF7\u6C42\u6570\u76EE\uFF0C\u5E76\u4E14\u5F02\u5E38\u7684\u6BD4\u4F8B\u5927\u4E8E\u9608\u503C\uFF0C\u5219\u63A5\u4E0B\u6765\u7684\u7194\u65AD\u65F6\u957F\u5185\u8BF7\u6C42\u4F1A\u81EA\u52A8\u88AB\u7194\u65AD\u3002\u7ECF\u8FC7\u7194\u65AD\u65F6\u957F\u540E\u7194\u65AD\u5668\u4F1A\u8FDB\u5165\u63A2\u6D4B\u6062\u590D\u72B6\u6001\uFF08HALF-OPEN \u72B6\u6001\uFF09\uFF0C\u82E5\u63A5\u4E0B\u6765\u7684\u4E00\u4E2A\u8BF7\u6C42\u6210\u529F\u5B8C\u6210\uFF08\u6CA1\u6709\u9519\u8BEF\uFF09\u5219\u7ED3\u675F\u7194\u65AD\uFF0C\u5426\u5219\u4F1A\u518D\u6B21\u88AB\u7194\u65AD\u3002\u5F02\u5E38\u6BD4\u7387\u7684\u9608\u503C\u8303\u56F4\u662F [0.0, 1.0]\uFF0C\u4EE3\u8868 0% - 100%
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u5F02\u5E38\u6570 (DEGRADE_GRADE_EXCEPTION_COUNT)</li></ol><p>\u5F53\u8D44\u6E90\u8FD1 1 \u5206\u949F\u7684\u5F02\u5E38\u6570\u76EE\u8D85\u8FC7\u9608\u503C\u4E4B\u540E\u4F1A\u8FDB\u884C\u7194\u65AD</p><p>\u6BD4\u5982\u8BBE\u7F6E\uFF1A</p><p><img src="`+ca+`" alt="image-20211220082437249"></p><p>1\u5206\u949F\u4E4B\u5185\u5F02\u5E38\u6570\u8D85\u8FC72\u4E2A\uFF0C\u5C31\u4F1A\u89E6\u53D1\u65AD\u8DEF\u5668</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">##</span> \u65B0\u7248\u672C(1.8.0 \u53CA\u4EE5\u4E0A\u7248\u672C)\u5C06\u8FD9\u4E2A\u4FEE\u6539\u6210\u4E86\u5982\u4E0B</span>
\u5F02\u5E38\u6570 (ERROR_COUNT)\uFF1A\u5F53\u5355\u4F4D\u7EDF\u8BA1\u65F6\u957F\u5185\u7684\u5F02\u5E38\u6570\u76EE\u8D85\u8FC7\u9608\u503C\u4E4B\u540E\u4F1A\u81EA\u52A8\u8FDB\u884C\u7194\u65AD\u3002\u7ECF\u8FC7\u7194\u65AD\u65F6\u957F\u540E\u7194\u65AD\u5668\u4F1A\u8FDB\u5165\u63A2\u6D4B\u6062\u590D\u72B6\u6001\uFF08HALF-OPEN \u72B6\u6001\uFF09\uFF0C\u82E5\u63A5\u4E0B\u6765\u7684\u4E00\u4E2A\u8BF7\u6C42\u6210\u529F\u5B8C\u6210\uFF08\u6CA1\u6709\u9519\u8BEF\uFF09\u5219\u7ED3\u675F\u7194\u65AD\uFF0C\u5426\u5219\u4F1A\u518D\u6B21\u88AB\u7194\u65AD
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="sentinelresource\u6CE8\u89E3"><a class="header-anchor" href="#sentinelresource\u6CE8\u89E3" aria-hidden="true">#</a> sentinelResource\u6CE8\u89E3</h5><h6 id="\u6982\u5FF5-3"><a class="header-anchor" href="#\u6982\u5FF5-3" aria-hidden="true">#</a> \u6982\u5FF5</h6><blockquote><p>\u7F51\u5740\uFF1Ahttps://github.com/alibaba/Sentinel/wiki/%E6%B3%A8%E8%A7%A3%E6%94%AF%E6%8C%81</p></blockquote><blockquote><p>\u6CE8\u610F\uFF1A\u6CE8\u89E3\u65B9\u5F0F\u57CB\u70B9\u4E0D\u652F\u6301 private \u65B9\u6CD5\u3002</p></blockquote><p><code>@SentinelResource</code> \u7528\u4E8E\u5B9A\u4E49\u8D44\u6E90\uFF0C\u5E76\u63D0\u4F9B\u53EF\u9009\u7684\u5F02\u5E38\u5904\u7406\u548C fallback \u914D\u7F6E\u9879\u3002 <code>@SentinelResource</code> \u6CE8\u89E3\u5305\u542B\u4EE5\u4E0B\u5C5E\u6027\uFF1A</p><ul><li><p><code>value</code>\uFF1A\u8D44\u6E90\u540D\u79F0\uFF0C\u5FC5\u9700\u9879\uFF08\u4E0D\u80FD\u4E3A\u7A7A\uFF09</p></li><li><p><code>entryType</code>\uFF1Aentry \u7C7B\u578B\uFF0C\u53EF\u9009\u9879\uFF08\u9ED8\u8BA4\u4E3A <code>EntryType.OUT</code>\uFF09</p></li><li><p><code>blockHandler</code> / <code>blockHandlerClass</code>: <code>blockHandler</code> \u5BF9\u5E94\u5904\u7406 <code>BlockException</code> \u7684\u51FD\u6570\u540D\u79F0\uFF0C\u53EF\u9009\u9879\u3002blockHandler \u51FD\u6570\u8BBF\u95EE\u8303\u56F4\u9700\u8981\u662F <code>public</code>\uFF0C\u8FD4\u56DE\u7C7B\u578B\u9700\u8981\u4E0E\u539F\u65B9\u6CD5\u76F8\u5339\u914D\uFF0C\u53C2\u6570\u7C7B\u578B\u9700\u8981\u548C\u539F\u65B9\u6CD5\u76F8\u5339\u914D\u5E76\u4E14\u6700\u540E\u52A0\u4E00\u4E2A\u989D\u5916\u7684\u53C2\u6570\uFF0C\u7C7B\u578B\u4E3A <code>BlockException</code>\u3002blockHandler \u51FD\u6570\u9ED8\u8BA4\u9700\u8981\u548C\u539F\u65B9\u6CD5\u5728\u540C\u4E00\u4E2A\u7C7B\u4E2D\u3002\u82E5\u5E0C\u671B\u4F7F\u7528\u5176\u4ED6\u7C7B\u7684\u51FD\u6570\uFF0C\u5219\u53EF\u4EE5\u6307\u5B9A <code>blockHandlerClass</code> \u4E3A\u5BF9\u5E94\u7684\u7C7B\u7684 <code>Class</code> \u5BF9\u8C61\uFF0C\u6CE8\u610F\u5BF9\u5E94\u7684\u51FD\u6570\u5FC5\u9700\u4E3A static \u51FD\u6570\uFF0C\u5426\u5219\u65E0\u6CD5\u89E3\u6790</p></li><li><p><code>fallback</code>/<code>fallbackClass</code>\uFF1Afallback \u51FD\u6570\u540D\u79F0\uFF0C\u53EF\u9009\u9879\uFF0C\u7528\u4E8E\u5728\u629B\u51FA\u5F02\u5E38\u7684\u65F6\u5019\u63D0\u4F9B fallback \u5904\u7406\u903B\u8F91\u3002fallback \u51FD\u6570\u53EF\u4EE5\u9488\u5BF9\u6240\u6709\u7C7B\u578B\u7684\u5F02\u5E38\uFF08\u9664\u4E86<code>exceptionsToIgnore</code>\u91CC\u9762\u6392\u9664\u6389\u7684\u5F02\u5E38\u7C7B\u578B\uFF09\u8FDB\u884C\u5904\u7406\u3002fallback \u51FD\u6570\u7B7E\u540D\u548C\u4F4D\u7F6E\u8981\u6C42</p><ul><li>\u8FD4\u56DE\u503C\u7C7B\u578B\u5FC5\u987B\u4E0E\u539F\u51FD\u6570\u8FD4\u56DE\u503C\u7C7B\u578B\u4E00\u81F4</li><li>\u65B9\u6CD5\u53C2\u6570\u5217\u8868\u9700\u8981\u548C\u539F\u51FD\u6570\u4E00\u81F4\uFF0C\u6216\u8005\u53EF\u4EE5\u989D\u5916\u591A\u4E00\u4E2A <code>Throwable</code> \u7C7B\u578B\u7684\u53C2\u6570\u7528\u4E8E\u63A5\u6536\u5BF9\u5E94\u7684\u5F02\u5E38</li><li>fallback \u51FD\u6570\u9ED8\u8BA4\u9700\u8981\u548C\u539F\u65B9\u6CD5\u5728\u540C\u4E00\u4E2A\u7C7B\u4E2D\u3002\u82E5\u5E0C\u671B\u4F7F\u7528\u5176\u4ED6\u7C7B\u7684\u51FD\u6570\uFF0C\u5219\u53EF\u4EE5\u6307\u5B9A<code>fallbackClass</code> \u4E3A\u5BF9\u5E94\u7684\u7C7B\u7684 <code>Class</code> \u5BF9\u8C61\uFF0C\u6CE8\u610F\u5BF9\u5E94\u7684\u51FD\u6570\u5FC5\u9700\u4E3A static \u51FD\u6570\uFF0C\u5426\u5219\u65E0\u6CD5\u89E3\u6790</li></ul></li><li><p><code>defaultFallback</code>\uFF08since 1.6.0\uFF09\uFF1A\u9ED8\u8BA4\u7684 fallback \u51FD\u6570\u540D\u79F0\uFF0C\u53EF\u9009\u9879\uFF0C\u901A\u5E38\u7528\u4E8E\u901A\u7528\u7684 fallback \u903B\u8F91\uFF08\u5373\u53EF\u4EE5\u7528\u4E8E\u5F88\u591A\u670D\u52A1\u6216\u65B9\u6CD5\uFF09\u3002\u9ED8\u8BA4 fallback \u51FD\u6570\u53EF\u4EE5\u9488\u5BF9\u6240\u6709\u7C7B\u578B\u7684\u5F02\u5E38\uFF08\u9664\u4E86<code>exceptionsToIgnore</code>\u91CC\u9762\u6392\u9664\u6389\u7684\u5F02\u5E38\u7C7B\u578B\uFF09\u8FDB\u884C\u5904\u7406\u3002\u82E5\u540C\u65F6\u914D\u7F6E\u4E86 fallback \u548C defaultFallback\uFF0C\u5219\u53EA\u6709 fallback \u4F1A\u751F\u6548\u3002defaultFallback \u51FD\u6570\u7B7E\u540D\u8981\u6C42</p><ul><li>\u8FD4\u56DE\u503C\u7C7B\u578B\u5FC5\u987B\u4E0E\u539F\u51FD\u6570\u8FD4\u56DE\u503C\u7C7B\u578B\u4E00\u81F4</li><li>\u65B9\u6CD5\u53C2\u6570\u5217\u8868\u9700\u8981\u4E3A\u7A7A\uFF0C\u6216\u8005\u53EF\u4EE5\u989D\u5916\u591A\u4E00\u4E2A <code>Throwable</code> \u7C7B\u578B\u7684\u53C2\u6570\u7528\u4E8E\u63A5\u6536\u5BF9\u5E94\u7684\u5F02\u5E38</li><li>defaultFallback \u51FD\u6570\u9ED8\u8BA4\u9700\u8981\u548C\u539F\u65B9\u6CD5\u5728\u540C\u4E00\u4E2A\u7C7B\u4E2D\u3002\u82E5\u5E0C\u671B\u4F7F\u7528\u5176\u4ED6\u7C7B\u7684\u51FD\u6570\uFF0C\u5219\u53EF\u4EE5\u6307\u5B9A<code>fallbackClass</code> \u4E3A\u5BF9\u5E94\u7684\u7C7B\u7684 <code>Class</code> \u5BF9\u8C61\uFF0C\u6CE8\u610F\u5BF9\u5E94\u7684\u51FD\u6570\u5FC5\u9700\u4E3A static \u51FD\u6570\uFF0C\u5426\u5219\u65E0\u6CD5\u89E3\u6790</li></ul></li><li><p><code>exceptionsToIgnore</code>\uFF08since 1.6.0\uFF09\uFF1A\u7528\u4E8E\u6307\u5B9A\u54EA\u4E9B\u5F02\u5E38\u88AB\u6392\u9664\u6389\uFF0C\u4E0D\u4F1A\u8BA1\u5165\u5F02\u5E38\u7EDF\u8BA1\u4E2D\uFF0C\u4E5F\u4E0D\u4F1A\u8FDB\u5165 fallback \u903B\u8F91\u4E2D\uFF0C\u800C\u662F\u4F1A\u539F\u6837\u629B\u51FA</p></li></ul><p>1.8.0 \u7248\u672C\u5F00\u59CB\uFF0C<code>defaultFallback</code> \u652F\u6301\u5728\u7C7B\u7EA7\u522B\u8FDB\u884C\u914D\u7F6E</p><blockquote><p>\u6CE8\uFF1A1.6.0 \u4E4B\u524D\u7684\u7248\u672C fallback \u51FD\u6570\u53EA\u9488\u5BF9\u964D\u7EA7\u5F02\u5E38\uFF08<code>DegradeException</code>\uFF09\u8FDB\u884C\u5904\u7406\uFF0C<strong>\u4E0D\u80FD\u9488\u5BF9\u4E1A\u52A1\u5F02\u5E38\u8FDB\u884C\u5904\u7406</strong>\u3002</p></blockquote><p>\u7279\u522B\u5730\uFF0C\u82E5 blockHandler \u548C fallback \u90FD\u8FDB\u884C\u4E86\u914D\u7F6E\uFF0C\u5219\u88AB\u9650\u6D41\u964D\u7EA7\u800C\u629B\u51FA <code>BlockException</code> \u65F6\u53EA\u4F1A\u8FDB\u5165 <code>blockHandler</code> \u5904\u7406\u903B\u8F91\u3002\u82E5\u672A\u914D\u7F6E <code>blockHandler</code>\u3001<code>fallback</code> \u548C <code>defaultFallback</code>\uFF0C\u5219\u88AB\u9650\u6D41\u964D\u7EA7\u65F6\u4F1A\u5C06 <code>BlockException</code> <strong>\u76F4\u63A5\u629B\u51FA</strong>\uFF08\u82E5\u65B9\u6CD5\u672C\u8EAB\u672A\u5B9A\u4E49 throws BlockException \u5219\u4F1A\u88AB JVM \u5305\u88C5\u4E00\u5C42 <code>UndeclaredThrowableException</code>\uFF09</p><h6 id="\u5B9E\u64CD"><a class="header-anchor" href="#\u5B9E\u64CD" aria-hidden="true">#</a> \u5B9E\u64CD</h6><p>\u7F16\u5199\u6D4B\u8BD5\u4EE3\u7801</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@RefreshScope</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${user.name}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/test/getName&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@SentinelResource</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;aa&quot;</span><span class="token punctuation">,</span> blockHandler <span class="token operator">=</span> <span class="token string">&quot;testBlockHandler&quot;</span><span class="token punctuation">)</span> <span class="token comment">//value \u7ED9\u8D44\u6E90\u6DFB\u52A0\u522B\u540D\uFF0C\u5FC5\u987B\u503C\uFF0CblockHandler \u5904\u7406\u964D\u7EA7|\u6D41\u63A7\u5F02\u5E38\u81EA\u5B9A\u4E49\u7684\u65B9\u6CD5</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;\u975E\u6CD5\u53C2\u6570&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u83B7\u53D6\u5230\u7684\u540D\u5B57\u4E3A\uFF1A&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot; \u83B7\u53D6\u5230\u7684id\u4E3A\uFF1A&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token class-name">JSONObject</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * <span class="token keyword">@param</span> <span class="token parameter">id</span> \u63A5\u6536\u53C2\u6570\u5FC5\u987B\u548C\u539F\u65B9\u6CD5\u4E00\u81F4
     * <span class="token keyword">@param</span> <span class="token parameter">e</span>  \u51FA\u73B0\u7684\u5F02\u5E38
     * <span class="token keyword">@return</span> \u8FD4\u56DE\u503C\u548C\u539F\u65B9\u6CD5\u4E00\u81F4
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testBlockHandler</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">,</span> <span class="token class-name">BlockException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">FlowException</span><span class="token punctuation">)</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u670D\u52A1\u5DF2\u7ECF\u88AB\u6D41\u63A7 &quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">DegradeException</span><span class="token punctuation">)</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u670D\u52A1\u5DF2\u7ECF\u88AB\u964D\u7EA7 &quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token class-name">JSONObject</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7136\u540E\u7F16\u5199\u964D\u7EA7\u89C4\u5219</p><p><img src="`+ia+'" alt="image-20211220085727561"></p><p>\u5F53\u6211\u4EEC\u8BF7\u6C42\u4E00\u6B21<code>http://localhost:9066/test/getName?id=-1</code>\uFF0C\u5BFC\u81F4\u51FA\u73B0\u5F02\u5E38\uFF0C\u90A3\u4E48\u5C31\u4F1A\u65AD\u8DEF30s\uFF0C\u5373\u4F7F\u662F\u6211\u4EEC\u8F93\u5165\u7684id\u662F\u6B63\u786E\u7684\uFF0C\u4E5F\u4F1A\u629B\u51FA\u5F02\u5E38</p><p><img src="'+ua+'" alt="image-20211220085823862"></p><p>\u7B2C\u4E00\u6B21\u89E6\u53D1\u5F02\u5E38\u7684\u65F6\u5019\u4F1A\u76F4\u63A5\u5C06\u5F02\u5E38\u4FE1\u606F\u53D1\u7ED9\u5BA2\u6237\uFF0C\u9488\u5BF9\u8FD9\u79CD\u4E1A\u52A1\u5F02\u5E38\uFF0C\u4E5F\u662F\u9700\u8981\u5904\u7406\u7684</p><p><img src="'+ra+`" alt="image-20211220091037057"></p><p>\u901A\u8FC7\u4F7F\u7528fallback\u6765\u5904\u7406</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@RefreshScope</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${user.name}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/test/getName&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@SentinelResource</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;aa&quot;</span><span class="token punctuation">,</span> blockHandler <span class="token operator">=</span> <span class="token string">&quot;testBlockHandler&quot;</span><span class="token punctuation">,</span> fallback <span class="token operator">=</span> <span class="token string">&quot;testFallBack&quot;</span><span class="token punctuation">)</span>
    <span class="token comment">//value \u7ED9\u8D44\u6E90\u6DFB\u52A0\u522B\u540D\uFF0C\u5FC5\u987B\u503C\uFF0CblockHandler \u5904\u7406\u964D\u7EA7|\u6D41\u63A7\u5F02\u5E38\u81EA\u5B9A\u4E49\u7684\u65B9\u6CD5</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;\u975E\u6CD5\u53C2\u6570&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u83B7\u53D6\u5230\u7684\u540D\u5B57\u4E3A\uFF1A&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot; \u83B7\u53D6\u5230\u7684id\u4E3A\uFF1A&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token class-name">JSONObject</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * <span class="token keyword">@param</span> <span class="token parameter">id</span> \u63A5\u6536\u53C2\u6570\u5FC5\u987B\u548C\u539F\u65B9\u6CD5\u4E00\u81F4
     * <span class="token keyword">@param</span> <span class="token parameter">e</span>  \u51FA\u73B0\u7684\u5F02\u5E38
     * <span class="token keyword">@return</span> \u8FD4\u56DE\u503C\u548C\u539F\u65B9\u6CD5\u4E00\u81F4
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testBlockHandler</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">,</span> <span class="token class-name">BlockException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">FlowException</span><span class="token punctuation">)</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u670D\u52A1\u5DF2\u7ECF\u88AB\u6D41\u63A7 &quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">DegradeException</span><span class="token punctuation">)</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u670D\u52A1\u5DF2\u7ECF\u88AB\u964D\u7EA7 &quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token class-name">JSONObject</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testFallBack</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">,</span> <span class="token class-name">Throwable</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u51FA\u73B0\u8FD0\u884C\u65F6\u5F02\u5E38 &quot;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; id\u503C\u4E3A &quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token class-name">JSONObject</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0D\u7528\u52A0\u5165\u4EFB\u4F55\u7684\u6D41\u63A7\u3001\u964D\u7EA7\u90FD\u4F1A\u5904\u7406\u8FD9\u4E2A\u9519\u8BEF\uFF0C\u542F\u52A8\u4E4B\u540E\u6D4B\u8BD5</p><p><img src="`+da+'" alt="image-20211220091414624"></p><h2 id="\u6574\u5408\u73AF\u5883\u516C\u5171\u4F9D\u8D56"><a class="header-anchor" href="#\u6574\u5408\u73AF\u5883\u516C\u5171\u4F9D\u8D56" aria-hidden="true">#</a> \u6574\u5408\u73AF\u5883\u516C\u5171\u4F9D\u8D56</h2><h3 id="\u6574\u5408\u56FE\u4F8B"><a class="header-anchor" href="#\u6574\u5408\u56FE\u4F8B" aria-hidden="true">#</a> \u6574\u5408\u56FE\u4F8B</h3><p>spring cloud + spring cloud alibaba</p><p><img src="'+ka+'" alt="image-20211220190835602"></p><h3 id="\u6784\u5EFA\u6CE8\u518C\u9879\u76EE"><a class="header-anchor" href="#\u6784\u5EFA\u6CE8\u518C\u9879\u76EE" aria-hidden="true">#</a> \u6784\u5EFA\u6CE8\u518C\u9879\u76EE</h3><h4 id="\u521B\u5EFA\u7236\u9879\u76EE-1"><a class="header-anchor" href="#\u521B\u5EFA\u7236\u9879\u76EE-1" aria-hidden="true">#</a> \u521B\u5EFA\u7236\u9879\u76EE</h4><p>\u521B\u5EFAmaven\u7A7A\u9879\u76EE</p><p><img src="'+va+`" alt="image-20211220191347313"></p><h5 id="\u914D\u7F6E\u9879\u76EE\u4F9D\u8D56"><a class="header-anchor" href="#\u914D\u7F6E\u9879\u76EE\u4F9D\u8D56" aria-hidden="true">#</a> \u914D\u7F6E\u9879\u76EE\u4F9D\u8D56</h5><p>\u5C06maven\u7A7A\u9879\u76EE\u7684\u7236\u9879\u76EE\u8BBE\u7F6E\u4E3Aspringboot\u7684\u4F9D\u8D56\u9879\u76EE</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- lookup parent from repository --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F15\u5165springcloud\u548Cspringcloud alibaba\u58F0\u660E\u4F9D\u8D56</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring.cloud.alibaba.version</span><span class="token punctuation">&gt;</span></span>2.2.1.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring.cloud.alibaba.version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>spring-cloud.version</span><span class="token punctuation">&gt;</span></span>Hoxton.SR6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>spring-cloud.version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--\u5168\u5C40\u5F15\u5165springcloud alibaba\u4E0B\u8F7D\u4F9D\u8D56\u5730\u5740\uFF0C\u5E76\u4E0D\u4F1A\u5F15\u5165\u4F9D\u8D56--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-alibaba-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${spring.cloud.alibaba.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${spring-cloud.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u521B\u5EFAcommon\u6A21\u5757"><a class="header-anchor" href="#\u521B\u5EFAcommon\u6A21\u5757" aria-hidden="true">#</a> \u521B\u5EFAcommon\u6A21\u5757</h4><p>\u516C\u5171\u4F9D\u8D56\u9879\u76EEcommon\u653E\u7F6E\u516C\u5171\u5B9E\u4F53\u7C7B\u3001\u5DE5\u5177\u7C7B\u3001\u516C\u5171\u4F9D\u8D56\u7B49\uFF0C\u521B\u5EFAmaven</p><p><img src="`+ma+`" alt="image-20211220192135220"></p><h4 id="\u521B\u5EFA\u7528\u6237\u6A21\u5757"><a class="header-anchor" href="#\u521B\u5EFA\u7528\u6237\u6A21\u5757" aria-hidden="true">#</a> \u521B\u5EFA\u7528\u6237\u6A21\u5757</h4><p>\u521B\u5EFA\u7A7Amodule\uFF0C\u57FA\u672C\u548C\u516C\u5171\u6A21\u5757\u4E00\u81F4<code>dangdang_user</code>\uFF0C\u5C06\u8BE5\u6A21\u5757\u4FEE\u6539\u6210springboot-web\u9879\u76EE</p><h5 id="\u521B\u5EFA\u5E76\u6210springboot\u9879\u76EE"><a class="header-anchor" href="#\u521B\u5EFA\u5E76\u6210springboot\u9879\u76EE" aria-hidden="true">#</a> \u521B\u5EFA\u5E76\u6210springboot\u9879\u76EE</h5><p>\u6DFB\u52A0web\u4F9D\u8D56\uFF0C\u56E0\u4E3A\u4E4B\u540E\u5176\u4ED6\u9879\u6A21\u5757\u90FD\u4F9D\u8D56web\uFF0C\u6240\u4EE5\u6211\u4EEC\u5C06\u5B83\u653E\u5230common\u6A21\u5757\u4E2D\uFF0C\u7136\u540E\u5728user\u6A21\u5757\u4E2D\u5F15\u5165common\u4F9D\u8D56</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6DFB\u52A0\u542F\u52A8\u7C7B</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">UserApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6DFB\u52A0application.yaml\u914D\u7F6E\u6587\u4EF6</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9091</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> dangdang_user
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u542F\u52A8\u6D4B\u8BD5\uFF0C\u5DF2\u7ECF\u6210\u529F\u8FD0\u884C\u57289091\u7AEF\u53E3</p><p><img src="`+ga+`" alt="image-20211220193351507"></p><h5 id="\u5C06\u8BE5\u670D\u52A1\u6CE8\u518C\u5230nacos\u6CE8\u518C\u4E2D\u5FC3"><a class="header-anchor" href="#\u5C06\u8BE5\u670D\u52A1\u6CE8\u518C\u5230nacos\u6CE8\u518C\u4E2D\u5FC3" aria-hidden="true">#</a> \u5C06\u8BE5\u670D\u52A1\u6CE8\u518C\u5230nacos\u6CE8\u518C\u4E2D\u5FC3</h5><p>\u5F15\u5165nacos\u6CE8\u518C\u4F9D\u8D56\uFF0C\u73B0\u5728\u6211\u4EEC\u5148\u5F15\u5165\u5230user\u6A21\u5757\u4E2D\uFF0C\u56E0\u4E3A\u4E4B\u540E\u591A\u4E2A\u6A21\u5757\u90FD\u4F9D\u8D56nacos\u6CE8\u518C\u4F9D\u8D56\uFF0C\u6211\u4EEC\u5C06\u5B83\u8F6C\u79FB\u5230common\u6A21\u5757\u4E2D</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5F15\u5165nacos\u6CE8\u518C\u4F9D\u8D56--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u914D\u7F6Enacos\u8FDE\u63A5\u4FE1\u606F</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9091</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> dangdang_user
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.cloud.nacos.server<span class="token punctuation">-</span>addr<span class="token punctuation">}</span>
<span class="token key atrule">management</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpoint</span><span class="token punctuation">:</span>
    <span class="token key atrule">web</span><span class="token punctuation">:</span>
      <span class="token key atrule">exposure</span><span class="token punctuation">:</span>
        <span class="token key atrule">include</span><span class="token punctuation">:</span> <span class="token string">&quot;*&quot;</span> <span class="token comment">## \u4E3A\u4EC0\u4E48\u6CA1\u6709\u63D0\u793A\u5462\uFF1F\u56E0\u4E3A\u6CA1\u6709\u5F15\u5165spring-boot-starter-actuator</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u542F\u52A8\u6D4B\u8BD5\uFF0C\u5DF2\u7ECF\u8FD0\u884C\u6CE8\u518C\u5230\u4E86nacos\u6CE8\u518C\u4E2D\u5FC3</p><p><img src="`+ba+'" alt="image-20211220202120895"></p><p><img src="'+ha+'" alt="image-20211220202135429"></p><h4 id="\u521B\u5EFA\u56FE\u4E66\u6A21\u5757"><a class="header-anchor" href="#\u521B\u5EFA\u56FE\u4E66\u6A21\u5757" aria-hidden="true">#</a> \u521B\u5EFA\u56FE\u4E66\u6A21\u5757</h4><p>\u521B\u5EFA\u548C\u914D\u7F6E\u65B9\u5F0F\u548C\u7528\u6237\u6A21\u5757\u4E00\u81F4\uFF0C\u8FD9\u91CC\u4E0D\u8D58\u8FF0\uFF0C\u6700\u540E\u542F\u52A8\u548C\u6CE8\u518C\u5230nacos\u6CE8\u518C\u4E2D\u5FC3</p><p><img src="'+fa+'" alt="image-20211220202749527"></p><p><img src="'+ya+`" alt="image-20211220202803146"></p><h3 id="\u670D\u52A1\u95F4\u901A\u4FE1\u4EE5\u53CA\u901A\u4FE1\u76D1\u542C"><a class="header-anchor" href="#\u670D\u52A1\u95F4\u901A\u4FE1\u4EE5\u53CA\u901A\u4FE1\u76D1\u542C" aria-hidden="true">#</a> \u670D\u52A1\u95F4\u901A\u4FE1\u4EE5\u53CA\u901A\u4FE1\u76D1\u542C</h3><h4 id="\u901A\u4FE1"><a class="header-anchor" href="#\u901A\u4FE1" aria-hidden="true">#</a> \u901A\u4FE1</h4><h5 id="\u914D\u7F6E\u548C\u7F16\u7801"><a class="header-anchor" href="#\u914D\u7F6E\u548C\u7F16\u7801" aria-hidden="true">#</a> \u914D\u7F6E\u548C\u7F16\u7801</h5><p>\u4E3A\u4E86\u5B9E\u73B0\u8D1F\u8F7D\u5747\u8861+\u8BF7\u6C42URL\u4ECE\u4E1A\u52A1\u4EE3\u7801\u4E2D\u89E3\u8026\uFF0C\u6211\u4EEC\u9009\u7528 Ribbon+OpenFeign\u7684\u65B9\u5F0F\u6765\u8FDB\u884C\u670D\u52A1\u95F4\u7684\u8C03\u7528\u901A\u4FE1</p><p>\u8FD9\u91CC\u6211\u4EEC\u4F7F\u7528user\u670D\u52A1\u8C03\u7528book\u670D\u52A1\u4F5C\u4E3A\u6D4B\u8BD5\uFF0C\u5373<code>UserController.findBook-&gt;BookController.find</code></p><p>user\u6A21\u5757\u5F15\u5165\u4F9D\u8D56\uFF0C\u56E0\u4E3ARibbon+OpenFeign\u7684\u4F9D\u8D56\u57FA\u672C\u6BCF\u4E2A\u670D\u52A1\u90FD\u4F1A\u5F15\u5165\uFF0C\u6240\u4EE5\u6211\u4EEC\u653E\u7F6E\u5230common\u6A21\u5757\u4E2D\uFF0C\u800CRibbon\u5DF2\u7ECF\u5728nacos\u5F15\u5165\uFF0C\u6240\u4EE5\u6211\u4EEC\u53EA\u9700\u8981\u5F15\u5165openFeign\u4F9D\u8D56</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5F15\u5165Ribbon\u4F9D\u8D56--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-openfeign<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728book\u6A21\u5757\u4E2D\u521B\u5EFA<code>BookController.find</code>\u7ED9<code>UserController.findBook</code>\u6D4B\u8BD5\u8C03\u7528</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${server.port}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> port<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/book/find&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u67E5\u8BE2\u5230\u7684id\u4E3A\uFF1A&quot;</span> <span class="token operator">+</span> id <span class="token operator">+</span> <span class="token string">&quot; \u672C\u6B21\u5904\u7406\u8BE5\u4E8B\u52A1\u7684\u7AEF\u53E3\u4E3A\uFF1A&quot;</span> <span class="token operator">+</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> JSON<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u6837book\u6A21\u5757\u7684\u90E8\u5206\u5C31\u6682\u65F6\u505A\u5B8C\u4E86\uFF0C\u63A5\u4E0B\u6765\u5F00\u59CB\u5B8C\u6210user\u6A21\u5757\u7684\u90E8\u5206</p><p>\u5728user\u6A21\u5757\u542F\u52A8\u7C7B\u6DFB\u52A0<code>@EnableFeignClients</code>\u6CE8\u89E3</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span> <span class="token comment">// \u53EF\u52A0\u53EF\u4E0D\u52A0\uFF0C\u9ED8\u8BA4\u5F00\u542F</span>
<span class="token annotation punctuation">@EnableFeignClients</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">UserApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7F16\u5199BookClient\u63A5\u53E3\u5B9E\u73B0\u5BF9<code>BookController.find</code>\u7684\u8C03\u7528\u5C01\u88C5</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;dangdang_book&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BookClient</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/book/find&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">String</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>\u8FD9\u91CC\u9700\u8981\u6CE8\u610F\u4E00\u4E2A\u95EE\u9898\uFF1A\u670D\u52A1\u7684\u540D\u5B57\u4E0D\u80FD\u5E26\u6709<span class="token code-snippet code keyword">\`_\`</span>\uFF0C\u6240\u4EE5\u6211\u4EEC\u628A<span class="token code-snippet code keyword">\`spring.application.name\`</span>\u90FD\u6539\u6210\u4E2D\u5212\u7EBF\uFF0C\u9879\u76EE\u540D\u5B57\u5148\u4E0D\u6539\u4E86\uFF0C\u4EE5\u540E\u76F4\u63A5\u4FEE\u6539\u6210\u662F\u4E2D\u6A2A\u7EBF\u7684\uFF0C\u5982\u679C\u4F7F\u7528\u4E86<span class="token code-snippet code keyword">\`_\`</span>\u5C31\u4F1A\u51FA\u73B0\u62A5\u9519Service id not legal hostname
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u7F16\u5199<code>UserController.findBook</code>\u8C03\u7528<code>BookClient.find</code>\uFF0C\u4ECE\u800C\u5B9E\u73B0\u5BF9<code>BookController.find</code>\u7684\u8C03\u7528</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">BookClient</span> bookClient<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user/findBook&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">findBook</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> bookClient<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u542F\u52A8\u548C\u6D4B\u8BD5"><a class="header-anchor" href="#\u542F\u52A8\u548C\u6D4B\u8BD5" aria-hidden="true">#</a> \u542F\u52A8\u548C\u6D4B\u8BD5</h5><p>\u4F7F\u7528dashboard\u542F\u52A8\u670D\u52A1\u4E4B\u540E\uFF0C\u90FD\u5DF2\u7ECF\u6B63\u786E\u8FD0\u884C\uFF0C\u4E3A\u4E86\u80FD\u6D4B\u8BD5\u8D1F\u8F7D\u5747\u8861\uFF0C\u6211\u4EEC\u5C06book\u6A21\u5757\u590D\u5236\u4E00\u4EFD\uFF0C\u591A\u542F\u52A8\u4E00\u4E2A\u670D\u52A1</p><p><img src="`+wa+'" alt="image-20211220210748610"></p><p>\u901A\u8FC7\u6D4F\u89C8\u5668\u8BBF\u95EE<code>http://localhost:9091/user/findBook?id=100</code>\u5E76\u5728\u6BCF\u6B21\u5237\u65B0\u540E\u53D1\u73B0\uFF0C\u672C\u6B21\u5904\u7406\u8BE5\u4E8B\u52A1\u7684\u7AEF\u53E3\u5728<code>9092\u548C9093</code>\u4E4B\u95F4\u8F6E\u8BE2</p><p><img src="'+_a+'" alt="image-20211220210929921"></p><p><img src="'+qa+`" alt="image-20211220210956430"></p><h4 id="\u901A\u4FE1\u76D1\u542C"><a class="header-anchor" href="#\u901A\u4FE1\u76D1\u542C" aria-hidden="true">#</a> \u901A\u4FE1\u76D1\u542C</h4><p>\u901A\u4FE1\u76D1\u542C\u5C31\u662F\u4E3A\u4E86\u5904\u7406\u670D\u52A1\u7194\u65AD\u548C\u964D\u7EA7\u7B49\u670D\u52A1\u4E4B\u95F4\u7684\u8C03\u7528\u53EF\u80FD\u4F1A\u51FA\u73B0\u7684\u95EE\u9898\uFF0C\u53EF\u4EE5\u4F7F\u7528\u7684\u7EC4\u4EF6\u6709hystrix\u3001sentinel\uFF0C\u56E0\u4E3Ahystrix\u5DF2\u7ECF\u505C\u6B62\u7EF4\u62A4\uFF0C\u6240\u4EE5\u6211\u4EEC\u9009\u7528sentinel</p><h5 id="\u914D\u7F6E\u548C\u7F16\u7801-1"><a class="header-anchor" href="#\u914D\u7F6E\u548C\u7F16\u7801-1" aria-hidden="true">#</a> \u914D\u7F6E\u548C\u7F16\u7801</h5><p>\u5F15\u5165\u4F9D\u8D56\uFF0C\u56E0\u4E3A\u57FA\u672C\u6240\u6709\u7684\u670D\u52A1\u90FD\u9700\u8981\u4F7F\u7528sentinel\uFF0C\u6240\u6709\u6211\u4EEC\u5C06\u4F9D\u8D56\u653E\u5230common\u6A21\u5757\uFF0C\u7136\u540E\u5728\u670D\u52A1\u6A21\u5757\u4E2D\u5F15\u5165\u5C31\u597D</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5F15\u5165sentinel--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-sentinel<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u914D\u7F6Esentinel</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9091</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> dangdang<span class="token punctuation">-</span>user
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.cloud.nacos.server<span class="token punctuation">-</span>addr<span class="token punctuation">}</span>
    <span class="token key atrule">sentinel</span><span class="token punctuation">:</span>		<span class="token comment">## \u8FD9\u91CC</span>
      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">transport</span><span class="token punctuation">:</span>
        <span class="token key atrule">dashboard</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">9191</span>
        <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8719</span>
<span class="token key atrule">management</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpoint</span><span class="token punctuation">:</span>
    <span class="token key atrule">web</span><span class="token punctuation">:</span>
      <span class="token key atrule">exposure</span><span class="token punctuation">:</span>
        <span class="token key atrule">include</span><span class="token punctuation">:</span> <span class="token string">&quot;*&quot;</span> <span class="token comment">## \u4E3A\u4EC0\u4E48\u6CA1\u6709\u63D0\u793A\u5462\uFF1F\u56E0\u4E3A\u6CA1\u6709\u5F15\u5165spring-boot-starter-actuator</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u6837\u6211\u4EEC\u5C31\u5DF2\u7ECF\u5F15\u5165\u5E76\u914D\u7F6E\u4E86sentinel\uFF0C\u53EF\u4EE5\u542F\u52A8\u9879\u76EE\u6D4B\u8BD5\u4E86</p><h5 id="\u542F\u52A8\u548C\u6D4B\u8BD5-1"><a class="header-anchor" href="#\u542F\u52A8\u548C\u6D4B\u8BD5-1" aria-hidden="true">#</a> \u542F\u52A8\u548C\u6D4B\u8BD5</h5><p>\u901A\u8FC7dashboard\u542F\u52A8\u9879\u76EE\uFF0C\u5728\u63A7\u5236\u53F0\u53EF\u4EE5\u770B\u5230</p><p><img src="`+xa+'" alt="image-20211220223214081"></p><p>\u7136\u540E\u6211\u4EEC\u901A\u8FC7\u8BF7\u6C42\u4E0A\u9762\u6211\u4EEC\u7F16\u5199<code>UserController.findBook</code>\u8FDE\u63A5<code>http://localhost:9091/user/findBook?id=100</code>\uFF0C\u89E6\u53D1sentinel\u7684\u76D1\u63A7\uFF0C\u5C31\u53EF\u4EE5\u5728sentinel dashboard\u4E2D\u770B\u5230\u6211\u4EEC\u670D\u52A1\u4E86</p><p><img src="'+Sa+'" alt="image-20211220223450676"></p><h6 id="\u6D41\u63A7\u6D4B\u8BD5"><a class="header-anchor" href="#\u6D41\u63A7\u6D4B\u8BD5" aria-hidden="true">#</a> \u6D41\u63A7\u6D4B\u8BD5</h6><p>\u6211\u4EEC\u5C1D\u8BD5\u5728<code>/user/findBook</code>\u8FD9\u4E2A\u8BF7\u6C42\u4E2D\u6DFB\u52A0\u4E00\u4E2A\u6D41\u63A7</p><p><img src="'+Ia+'" alt="image-20211220223816611"></p><p>\u7136\u540E\u6211\u4EEC\u5F00\u542Fjmeter\u6765\u6D4B\u8BD5\u6D41\u63A7\u662F\u5426\u662F1\u79D2\u5185\u53EA\u80FD\u63A5\u6536\u4E00\u4E2A\u8BF7\u6C42</p><p><img src="'+ja+`" alt="image-20211220224108549"></p><p>\u5F53\u6211\u4EEC\u8BA9jmeter\u6BCF\u79D2\u53D1\u9001\u4E00\u4E2A\u8BF7\u6C42\u5230<code>http://localhost:9091/user/findBook?id=100</code>\u5E76\u4E14\u6211\u4EEC\u81EA\u5DF1\u4E5F\u901A\u8FC7\u6D4F\u89C8\u5668\u53D1\u9001\u8BF7\u6C42\uFF0C\u8FD9\u4E8C\u8005\u5C31\u4F1A\u4E89\u62A2\u8FD9\u552F\u4E00\u76841\u4E2A\u8BF7\u6C42\uFF0C\u6211\u4EEC\u54EA\u91CC\u4E89\u5F97\u8FC7\u81EA\u52A8\u5316\uFF0C\u6240\u4EE5\u6211\u4EEC\u6BD4\u8F83\u5BB9\u6613\u5931\u8D25\uFF0C\u89E6\u53D1\u4E86\u6D41\u63A7</p><h6 id="\u964D\u7EA7\u6D4B\u8BD5"><a class="header-anchor" href="#\u964D\u7EA7\u6D4B\u8BD5" aria-hidden="true">#</a> \u964D\u7EA7\u6D4B\u8BD5</h6><p>\u4E3A\u4E86\u8BA9\u964D\u7EA7\u80FD\u591F\u89E6\u53D1\u5F02\u5E38\uFF0C\u5E76\u4E14\u6BD4\u8F83\u597D\u6D4B\u8BD5\uFF0C\u6211\u4EEC\u5728<code>UserController.findBook</code>\u4E2D\u6839\u636E\u4F20\u5165\u7684id\u53C2\u6570\u6765\u51B3\u5B9A\u662F\u5426\u89E6\u53D1\u5F02\u5E38\uFF0C\u6240\u4EE5\u6211\u4EEC\u4FEE\u6539\u4EE3\u7801\u5982\u4E0B</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">BookClient</span> bookClient<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user/findBook&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">findBook</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;id\u5C0F\u4E8E0 &quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> bookClient<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u91CD\u65B0\u542F\u52A8\u670D\u52A1\uFF0C\u7136\u540E\u5728sentinel dashboard\u4E2D\u914D\u7F6E\u964D\u7EA7\u6D4B\u8BD5</p><p><img src="`+Ca+'" alt="image-20211220224805160"></p><p>\u6211\u4EEC\u8BA9\u5B83\u53EA\u8981\u67091\u4E2A\u5F02\u5E38\u89E6\u53D1\u5C31\u6253\u5F00\u65AD\u8DEF\u566830\u79D2\uFF0C\u7136\u540E\u6211\u4EEC\u8BF7\u6C42<code>http://localhost:9091/user/findBook?id=-1</code>\u89E6\u53D1\u5F02\u5E38</p><p><img src="'+Ra+'" alt="image-20211220224928617"></p><p>\u4E4B\u540E\u6211\u4EEC\u5373\u4F7F\u662F\u4F20\u9012\u6B63\u786E\u7684\u503C\uFF0C\u4E5F\u4F1A\u88AB\u65AD\u8DEF\u5668\u62E6\u622A\uFF0C\u7136\u540E\u5FEB\u901F\u8FD4\u56DE</p><p><img src="'+Aa+`" alt="image-20211220225104195"></p><p>\u5F53\u7136\u4E4B\u540E\u8FD8\u6709\u81EA\u5B9A\u4E49\u5F02\u5E38\u5904\u7406\u7B49\uFF0C\u8FD9\u91CC\u5C31\u4E0D\u91CD\u590D\u524D\u9762\u5B66\u4E60\u7684\u65F6\u5019\u7684\u4EE3\u7801\u4E86</p><h3 id="\u7EDF\u4E00\u914D\u7F6E\u4E2D\u5FC3"><a class="header-anchor" href="#\u7EDF\u4E00\u914D\u7F6E\u4E2D\u5FC3" aria-hidden="true">#</a> \u7EDF\u4E00\u914D\u7F6E\u4E2D\u5FC3</h3><p>\u4E3A\u4E86\u80FD\u8BA9\u6211\u4EEC\u7684\u914D\u7F6E\u70ED\u90E8\u7F72\u5230\u5DF2\u7ECF\u542F\u52A8\u7684\u9879\u76EE\uFF0C\u5E76\u4E14\u80FD\u8BA9\u6211\u4EEC\u7EDF\u4E00\u7BA1\u7406\u914D\u7F6E\uFF0C\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528nacos\u7EDF\u4E00\u914D\u7F6E\u4E2D\u5FC3\uFF08\u5F53\u7136\u4E5F\u8FD8\u6709\u4E4B\u524D\u7684spring cloud config+bus\uFF0C\u4F46\u662F\u5728\u8FD9\u65B9\u9762nacos\u7684\u914D\u7F6E\u660E\u663E\u7684\u66F4\u52A0\u65B9\u4FBF\uFF09</p><h4 id="\u914D\u7F6E\u548C\u7F16\u7801-2"><a class="header-anchor" href="#\u914D\u7F6E\u548C\u7F16\u7801-2" aria-hidden="true">#</a> \u914D\u7F6E\u548C\u7F16\u7801</h4><p>\u5F15\u5165\u4F9D\u8D56</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5F15\u5165nacos\u914D\u7F6E\u4F9D\u8D56--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-config<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728nacos\u914D\u7F6E\u4E2D\u5FC3\u7F16\u5199\u5FAE\u670D\u52A1\u7684\u914D\u7F6E\uFF0C\u5206\u522B\u9700\u8981\u7F16\u5199\u7684user\u548Cbook\u7684\u914D\u7F6E\uFF0C\u5176\u4E2D\u5206\u522B\u5305\u542B\u4E86test\u3001prod\u3001dev\uFF0C\u8FD9\u91CC\u6211\u4EEC\u5148\u7F16\u5199dev\u5F00\u53D1\u73AF\u5883\u4E0B\u7684\u914D\u7F6E\u6587\u4EF6</p><p>\u4E3A\u4E86\u80FD\u591F\u533A\u5206\u4E0D\u540C\u5E94\u7528\u7684\u914D\u7F6E\uFF0C\u6211\u4EEC\u521B\u5EFAnamespace</p><p><img src="`+Ea+'" alt="image-20211220230434407"></p><p>\u7136\u540E\u5728\u914D\u7F6E\u5217\u8868\u4E2D\u9009\u62E9\u521B\u5EFA\u7684\u547D\u540D\u7A7A\u95F4\uFF0C\u7136\u540E\u65B0\u5EFA\u914D\u7F6E</p><p><img src="'+Oa+`" alt="image-20211220230748386"></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>\u6211\u4EEC\u5148\u521B\u5EFA\u4E00\u4E2A\u6CA1\u6709\u4EC0\u4E48\u610F\u4E49\u7684\u914D\u7F6E\u6765\u6D4B\u8BD5\u662F\u5426\u80FD\u591F\u6B63\u786E\u83B7\u53D6\u8FDC\u7A0B\u914D\u7F6E
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>user\u6A21\u5757\u4E2D\u914D\u7F6E\u8FDE\u63A5\u5230nacos\u914D\u7F6E\u4E2D\u5FC3\uFF0C<code>\u53EF\u4EE5\u548C\u4E4B\u524D\u7684\u6BD4\u8F83\u4E00\u4E0B\u90A3\u4E9B\u5730\u65B9\u4E0D\u4E00\u6837</code></p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9091</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> dangdang<span class="token punctuation">-</span>user
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.cloud.nacos.server<span class="token punctuation">-</span>addr<span class="token punctuation">}</span>
        <span class="token key atrule">namespace</span><span class="token punctuation">:</span> 710c5079<span class="token punctuation">-</span>7914<span class="token punctuation">-</span>4f90<span class="token punctuation">-</span>a0a6<span class="token punctuation">-</span>95f80712c14a
      <span class="token key atrule">config</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.cloud.nacos.server<span class="token punctuation">-</span>addr<span class="token punctuation">}</span>
        <span class="token key atrule">group</span><span class="token punctuation">:</span> dangdang<span class="token punctuation">-</span>user
        <span class="token key atrule">prefix</span><span class="token punctuation">:</span> dangdang<span class="token punctuation">-</span>user
        <span class="token key atrule">file-extension</span><span class="token punctuation">:</span> yaml
        <span class="token key atrule">namespace</span><span class="token punctuation">:</span> 710c5079<span class="token punctuation">-</span>7914<span class="token punctuation">-</span>4f90<span class="token punctuation">-</span>a0a6<span class="token punctuation">-</span>95f80712c14a
        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">sentinel</span><span class="token punctuation">:</span>
      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">transport</span><span class="token punctuation">:</span>
        <span class="token key atrule">dashboard</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">9191</span>
        <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8719</span>
  <span class="token key atrule">profiles</span><span class="token punctuation">:</span>
    <span class="token key atrule">active</span><span class="token punctuation">:</span> dev
<span class="token key atrule">management</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpoint</span><span class="token punctuation">:</span>
    <span class="token key atrule">web</span><span class="token punctuation">:</span>
      <span class="token key atrule">exposure</span><span class="token punctuation">:</span>
        <span class="token key atrule">include</span><span class="token punctuation">:</span> <span class="token string">&quot;*&quot;</span> <span class="token comment">## \u4E3A\u4EC0\u4E48\u6CA1\u6709\u63D0\u793A\u5462\uFF1F\u56E0\u4E3A\u6CA1\u6709\u5F15\u5165spring-boot-starter-actuator</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6211\u4EEC\u5728<code>UserController</code>\u4E2D\u5C1D\u8BD5\u83B7\u53D6\u521A\u624D\u6211\u4EEC\u8FDC\u7A0B\u914D\u7F6E\u7684\u4FE1\u606F<code>user.name=zhangsan</code></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RefreshScope</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">BookClient</span> bookClient<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${user.name}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user/findBook&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">findBook</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u83B7\u53D6\u5230\u7684name\u503C\uFF1A&quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;id\u5C0F\u4E8E0 &quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> bookClient<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u6837\u6211\u4EEC\u5C31\u53EF\u4EE5\u83B7\u53D6\u5230\u914D\u7F6Ename\u503C\u4E86</p><p><img src="`+Ma+`" alt="image-20211221004110477"></p><p>\u63A5\u4E0B\u6765\u6211\u4EEC\u5C31\u53EF\u4EE5\u628A\u4E00\u4E9B\u4E0D\u662F\u8FDC\u7A0B\u914D\u7F6E\u7684\u914D\u7F6E\u653E\u5230\u8FDC\u7A0B\u914D\u7F6E\u4E2D\u5FC3\u4E86</p><p>\u8FDC\u7AEF\u914D\u7F6E</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">user</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> zhangsan
<span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9091</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.cloud.nacos.server<span class="token punctuation">-</span>addr<span class="token punctuation">}</span>
        <span class="token key atrule">namespace</span><span class="token punctuation">:</span> 710c5079<span class="token punctuation">-</span>7914<span class="token punctuation">-</span>4f90<span class="token punctuation">-</span>a0a6<span class="token punctuation">-</span>95f80712c14a
    <span class="token key atrule">sentinel</span><span class="token punctuation">:</span>
      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">transport</span><span class="token punctuation">:</span>
        <span class="token key atrule">dashboard</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">9191</span>
        <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8719</span>
<span class="token key atrule">management</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpoint</span><span class="token punctuation">:</span>
    <span class="token key atrule">web</span><span class="token punctuation">:</span>
      <span class="token key atrule">exposure</span><span class="token punctuation">:</span>
        <span class="token key atrule">include</span><span class="token punctuation">:</span> <span class="token string">&quot;*&quot;</span> <span class="token comment">## \u4E3A\u4EC0\u4E48\u6CA1\u6709\u63D0\u793A\u5462\uFF1F\u56E0\u4E3A\u6CA1\u6709\u5F15\u5165spring-boot-starter-actuator</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u672C\u5730\u914D\u7F6E</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> dangdang<span class="token punctuation">-</span>user
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span>
      <span class="token key atrule">config</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.cloud.nacos.server<span class="token punctuation">-</span>addr<span class="token punctuation">}</span>
        <span class="token key atrule">group</span><span class="token punctuation">:</span> dangdang<span class="token punctuation">-</span>user
        <span class="token key atrule">prefix</span><span class="token punctuation">:</span> dangdang<span class="token punctuation">-</span>user
        <span class="token key atrule">file-extension</span><span class="token punctuation">:</span> yaml
        <span class="token key atrule">namespace</span><span class="token punctuation">:</span> 710c5079<span class="token punctuation">-</span>7914<span class="token punctuation">-</span>4f90<span class="token punctuation">-</span>a0a6<span class="token punctuation">-</span>95f80712c14a
        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">profiles</span><span class="token punctuation">:</span>
    <span class="token key atrule">active</span><span class="token punctuation">:</span> dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u542F\u52A8\u548C\u6D4B\u8BD5-2"><a class="header-anchor" href="#\u542F\u52A8\u548C\u6D4B\u8BD5-2" aria-hidden="true">#</a> \u542F\u52A8\u548C\u6D4B\u8BD5</h4><p>\u7136\u540E\u91CD\u65B0\u542F\u52A8\uFF0C\u4E5F\u8FD0\u884C\u5728\u6B63\u786E\u7684\u7AEF\u53E3\u4E0A</p><p><img src="`+Ta+'" alt="image-20211221005055226"></p><p>\u6211\u4EEC\u67E5\u770Bnacos\u6CE8\u518C\u4E2D\u5FC3\uFF0C\u4E5F\u53EF\u770B\u5230\u670D\u52A1</p><p><img src="'+Pa+'" alt="image-20211221005227959"></p><p>\u5728\u53D1\u9001\u4E00\u4E2A\u8BF7\u6C42\u4E4B\u540E\uFF0Csentinel\u4E5F\u663E\u793A\u4E86\u5F53\u524D\u670D\u52A1\u7684\u5BF9\u5E94\u4FE1\u606F</p><p><img src="'+Ba+'" alt="image-20211221005351624"></p><h3 id="\u7F51\u5173"><a class="header-anchor" href="#\u7F51\u5173" aria-hidden="true">#</a> \u7F51\u5173</h3><h4 id="\u8DEF\u7531\u914D\u7F6E"><a class="header-anchor" href="#\u8DEF\u7531\u914D\u7F6E" aria-hidden="true">#</a> \u8DEF\u7531\u914D\u7F6E</h4><h5 id="\u914D\u7F6E\u548C\u7F16\u7801-3"><a class="header-anchor" href="#\u914D\u7F6E\u548C\u7F16\u7801-3" aria-hidden="true">#</a> \u914D\u7F6E\u548C\u7F16\u7801</h5><p>\u521B\u5EFA\u7A7A\u767Dmvaen\u9879\u76EE</p><p><img src="'+Da+`" alt="image-20211221005904923"></p><p>\u5F15\u5165nacos\u548Cgateway\u4F9D\u8D56\uFF0C\u6211\u4EEC\u5148\u628Amaven\u6539\u9020\u6210\u80FD\u6CE8\u518C\u5230nacos\u4E2D\u5FC3\u7684\u670D\u52A1\uFF0C<code>\u8FD9\u91CC\u63D0\u524D\u5F15\u5165gateway\u4F9D\u8D56\u662F\u56E0\u4E3Anacos\u6CA1\u6709\u542F\u52A8\u5668\uFF0C\u800Cgateway\u6709\u542F\u52A8\u5668\uFF0C\u6211\u4EEC\u5148\u63D0\u524D\u5F15\u5165\uFF0Cgateway\u5C31\u50CF\u662Fweb\u4E00\u6837</code></p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u5F15\u5165nacos\u6CE8\u518C\u4F9D\u8D56--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--\u5F15\u5165gateway\u4F9D\u8D56--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-gateway<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6DFB\u52A0\u914D\u7F6E\u6CE8\u518C\u5230nacos\uFF0C\u505A\u8FDC\u7A0B\u914D\u7F6E\u7684\u8BDD\uFF0C\u8FD8\u8981\u5F15\u5165nacos-config\uFF0C\u548C\u4E0A\u9762\u7684\u64CD\u4F5C\u4E00\u81F4\uFF0C\u8FD9\u91CC\u5C31\u4E0D\u505A\u4E86</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8989</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> dangdang<span class="token punctuation">-</span>gateway
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> <span class="token string">&quot;\${spring.cloud.nacos.server-addr}&quot;</span>
        <span class="token key atrule">namespace</span><span class="token punctuation">:</span> 710c5079<span class="token punctuation">-</span>7914<span class="token punctuation">-</span>4f90<span class="token punctuation">-</span>a0a6<span class="token punctuation">-</span>95f80712c14a
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6DFB\u52A0\u542F\u52A8\u7C7B</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GatewayApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">GatewayApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u542F\u52A8\u5E76\u67E5\u770B\u662F\u5426\u6709\u6CE8\u518C\u5230nacos</p><p><img src="`+Fa+`" alt="image-20211221011817723"></p><p>\u5DF2\u7ECF\u6CE8\u518C\u5230nacos\uFF0C\u63A5\u4E0B\u6765\u6211\u4EEC\u5C31\u53EF\u4EE5\u8DEF\u7531\u4FE1\u606F\uFF0C\u53EF\u4EE5\u901A\u8FC7\u914D\u7F6E\u6587\u4EF6\u914D\u7F6E\uFF0C\u4E5F\u53EF\u4EE5\u901A\u8FC7Java\u4EE3\u7801\u7684\u65B9\u5F0F\u914D\u7F6E</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8989</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> dangdang<span class="token punctuation">-</span>gateway
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> <span class="token string">&quot;\${spring.cloud.nacos.server-addr}&quot;</span>
        <span class="token key atrule">namespace</span><span class="token punctuation">:</span> 710c5079<span class="token punctuation">-</span>7914<span class="token punctuation">-</span>4f90<span class="token punctuation">-</span>a0a6<span class="token punctuation">-</span>95f80712c14a
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">locator</span><span class="token punctuation">:</span>
          <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">## \u5F00\u542F\u6839\u636E\u670D\u52A1\u540D\u83B7\u53D6\u8DEF\u7531</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> user_route
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//dangdang<span class="token punctuation">-</span>user
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/user/<span class="token important">**</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> book_route
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//dangdang<span class="token punctuation">-</span>book
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/book/<span class="token important">**</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u914D\u7F6E\u5F00\u542F\u670D\u52A1\u670D\u52A1\u53D1\u73B0<code>discovery.locator.enabled=true</code>\uFF0C\u5B9E\u73B0\u8D1F\u8F7D\u5747\u8861</p><h5 id="\u542F\u52A8\u548C\u6D4B\u8BD5-3"><a class="header-anchor" href="#\u542F\u52A8\u548C\u6D4B\u8BD5-3" aria-hidden="true">#</a> \u542F\u52A8\u548C\u6D4B\u8BD5</h5><p>\u542F\u52A8\u9879\u76EE\uFF0C\u6211\u4EEC\u5C31\u53EF\u4EE5\u901A\u8FC78989\u7AEF\u53E3\u7F51\u5173\u8DEF\u7531\u5230\u5BF9\u5E94\u7684\u670D\u52A1\u4E0A\u53BB\u4E86</p><p>\u8BBF\u95EEuser\u6A21\u5757<code>http://localhost:8989/user/findBook?id=100</code></p><p><img src="`+Ha+'" alt="image-20211221013758262"></p><p>\u8BBF\u95EEbook\u6A21\u5757<code>http://localhost:8989/book/find?id=100</code></p><p><img src="'+Na+`" alt="image-20211221013830907"></p><p>\u5DF2\u7ECF\u6210\u529F\u8DEF\u7531\u5230\u5BF9\u5E94\u7684\u670D\u52A1\u4E0A</p><h4 id="\u8FC7\u6EE4\u914D\u7F6E"><a class="header-anchor" href="#\u8FC7\u6EE4\u914D\u7F6E" aria-hidden="true">#</a> \u8FC7\u6EE4\u914D\u7F6E</h4><p>\u8FD9\u91CC\u6211\u4EEC\u5C31\u662F\u7528\u81EA\u5B9A\u4E49\u8FC7\u6EE4\u5668\u6765\u6D4B\u8BD5\u5C31\u597D\u4E86</p><h5 id="\u914D\u7F6E\u548C\u7F16\u7801-4"><a class="header-anchor" href="#\u914D\u7F6E\u548C\u7F16\u7801-4" aria-hidden="true">#</a> \u914D\u7F6E\u548C\u7F16\u7801</h5><p>\u81EA\u5B9A\u4E49\u8FC7\u6EE4\u5668</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u81EA\u5B9A\u4E49\u8FC7\u6EE4\u5668
 */</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomGlobalFilter</span> <span class="token keyword">implements</span> <span class="token class-name">GlobalFilter</span><span class="token punctuation">,</span> <span class="token class-name">Ordered</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * \u81EA\u5B9A\u8FC7\u6EE4\uFF1A\u5047\u8BBE\u4F20\u9012\u53C2\u6570\u4E2D\u542B\u6709username\u8FD9\u4E2A\u5C5E\u6027
     *
     * <span class="token keyword">@param</span> <span class="token parameter">exchange</span> \u6DB5\u76D6\u4E86request \u548C response 
     * <span class="token keyword">@param</span> <span class="token parameter">chain</span> \u5C31\u662F\u8FC7\u6EE4\u5668\u7684chain
     * <span class="token keyword">@return</span> \u5176\u5B9E\u5C31\u662FVoid \u8FD4\u56DE\u503C\u6CA1\u6709\u5B9E\u9645\u7684\u5177\u4F53\u610F\u4E49
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">ServerWebExchange</span> exchange<span class="token punctuation">,</span> <span class="token class-name">GatewayFilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\u8FDB\u5165\u81EA\u5B9A\u4E49filter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>exchange<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getQueryParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\u7528\u6237\u8EAB\u4EFD\u4FE1\u606F\u5408\u6CD5\uFF0C\u653E\u884C\u8BF7\u6C42\u7EE7\u7EED\u6267\u884C&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> chain<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>exchange<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u7EE7\u7EED\u6267\u884C\u4E0B\u4E00\u4E2Afilter</span>
        <span class="token punctuation">}</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\u975E\u6CD5\u7528\u6237\uFF0C\u62D2\u63A5\u8BBF\u95EE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> exchange<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setComplete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * filter \u6267\u884C\u4F18\u5148\u7EA7
     *
     * <span class="token keyword">@return</span> \u6570\u5B57\u8D8A\u5C0Ffilter\u8D8A\u5148\u6267\u884C -1 \u6700\u5148\u6267\u884C
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u542F\u52A8\u548C\u6D4B\u8BD5-4"><a class="header-anchor" href="#\u542F\u52A8\u548C\u6D4B\u8BD5-4" aria-hidden="true">#</a> \u542F\u52A8\u548C\u6D4B\u8BD5</h5><p>\u542F\u52A8\u4E4B\u540E\u6D4B\u8BD5</p><p><img src="`+Ga+'" alt="image-20211221015202810"></p><p>\u81F3\u6B64\uFF0C\u5DF2\u7ECF\u57FA\u672C\u914D\u7F6E\u5B8C\u6210\uFF0C\u5F53\u7136\uFF0C\u8FD8\u6709\u5F88\u591A\u7684\u7EC6\u8282\u662F\u6CA1\u6709\u5904\u7406\u597D\u7684</p>',204);function Cp(Rp,Ap){const a=o("ExternalLinkIcon");return l(),c(i,null,[La,$a,za,Va,n("blockquote",null,[Wa,Xa,n("p",null,[Ja,n("a",Qa,[Za,t(a)])])]),Ka,n("blockquote",null,[Ya,n("p",null,[nt,n("a",st,[at,t(a)]),tt]),et,n("p",null,[pt,n("a",ot,[lt,t(a)]),ct,n("a",it,[ut,t(a)]),rt,n("a",dt,[kt,t(a)]),vt]),n("p",null,[mt,gt,bt,n("a",ht,[ft,t(a)]),yt]),wt,_t,qt]),xt,n("blockquote",null,[St,It,jt,Ct,n("table",null,[Rt,n("tbody",null,[n("tr",null,[n("td",At,[n("a",Et,[Ot,t(a)]),Mt]),Tt]),n("tr",null,[n("td",Pt,[n("a",Bt,[Dt,t(a)]),Ft]),Ht]),n("tr",null,[n("td",Nt,[n("a",Gt,[Ut,t(a)])]),Lt]),n("tr",null,[n("td",$t,[n("a",zt,[Vt,t(a)])]),Wt]),n("tr",null,[n("td",Xt,[n("a",Jt,[Qt,t(a)])]),Zt]),n("tr",null,[n("td",Kt,[n("a",Yt,[ne,t(a)])]),se]),n("tr",null,[n("td",ae,[n("a",te,[ee,t(a)])]),pe])])]),oe]),le,n("blockquote",null,[ce,ie,ue,n("p",null,[re,n("a",de,[ke,t(a)]),ve,n("a",me,[ge,t(a)]),be]),he,fe]),ye,n("blockquote",null,[we,_e,qe,xe,Se,Ie,n("p",null,[je,n("a",Ce,[Re,t(a)]),Ae]),Ee]),Oe,n("blockquote",null,[Me,n("p",null,[Te,n("a",Pe,[Be,t(a)]),De]),Fe,He,Ne,Ge]),Ue,n("ul",null,[Le,n("li",null,[$e,ze,n("a",Ve,[We,t(a)]),Xe,Je]),Qe]),Ze,n("blockquote",null,[n("p",null,[Ke,Ye,np,sp,ap,n("a",tp,[ep,t(a)]),pp])]),op,n("p",null,[lp,cp,ip,up,n("a",rp,[dp,t(a)])]),kp,n("p",null,[vp,mp,n("a",gp,[bp,t(a)])]),hp,fp,yp,wp,_p,n("p",null,[qp,xp,n("a",Sp,[Ip,t(a)])]),jp],64)}var Op=p(Ua,[["render",Cp],["__file","01.springcloud\u57FA\u7840.html.vue"]]);export{Op as default};
