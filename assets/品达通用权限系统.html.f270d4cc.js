import{_ as n,c as s}from"./app.1b3ac386.js";var a="/naive-dafou-ui-dist/assets/1581494294533.bc9a6126.png",t="/naive-dafou-ui-dist/assets/1581494316483.06c2f0db.png",p="/naive-dafou-ui-dist/assets/image-20200309144447288.d217bc18.png",e="/naive-dafou-ui-dist/assets/image-20200309161354850.047b20cf.png",o="/naive-dafou-ui-dist/assets/image-20220321223156751.5b864daa.png",c="/naive-dafou-ui-dist/assets/image-20200309162411234.6cf0a484.png",l="/naive-dafou-ui-dist/assets/image-20200309162930548.6b37f497.png",i="/naive-dafou-ui-dist/assets/image-20200309164816310.a293ee85.png",u="/naive-dafou-ui-dist/assets/image-20200309171305614.36d2706c.png",k="/naive-dafou-ui-dist/assets/image-20220321224323604.ff00a01f.png",r="/naive-dafou-ui-dist/assets/image-20200309172536863.132ee382.png",d="/naive-dafou-ui-dist/assets/image-20200309183218983.b9571553.png",v="/naive-dafou-ui-dist/assets/image-20200309202838884.db3e1be0.png",m="/naive-dafou-ui-dist/assets/image-20200309203604564.8e76d7ec.png",g="/naive-dafou-ui-dist/assets/image-20200309204048032.85df50ed.png",b="/naive-dafou-ui-dist/assets/image-20200309205147309.33cad71b.png",y="/naive-dafou-ui-dist/assets/image-20200309205631984.4aaebbbc.png",h="/naive-dafou-ui-dist/assets/image-20200309205659105.bebdb7c6.png",w="/naive-dafou-ui-dist/assets/image-20220321225250972.b8c52635.png",f="/naive-dafou-ui-dist/assets/image-20220321231356309.66e41ad7.png",q="/naive-dafou-ui-dist/assets/image-20220321233138027.be9c77f5.png",S="/naive-dafou-ui-dist/assets/image-20200310151825687.dfcfddc0.png",x="/naive-dafou-ui-dist/assets/image-20200323171911589-20220321235511018.7d5c6f8b.png",I="/naive-dafou-ui-dist/assets/image-20200323172758909-20220321235525743.878030d6.png",A="/naive-dafou-ui-dist/assets/image-20200323172919940-20220321235537932.24752001.png",j="/naive-dafou-ui-dist/assets/image-20200323174700655-20220321235548803.ed7e808e.png",M="/naive-dafou-ui-dist/assets/image-20220322212447047.7b81c63b.png",P="/naive-dafou-ui-dist/assets/image-20220322212705501.31c61581.png",L="/naive-dafou-ui-dist/assets/image-20220322221246413.3448dbc4.png",C="/naive-dafou-ui-dist/assets/image-20200310231806495.ae7f9323.png",T="/naive-dafou-ui-dist/assets/image-20200311130111153.20742d0b.png",O="/naive-dafou-ui-dist/assets/image-20200311132120704.77c77bca.png",E="/naive-dafou-ui-dist/assets/image-20200311160312939.9fbe8a34.png",R="/naive-dafou-ui-dist/assets/image-20200311160945104.10016ac5.png",U="/naive-dafou-ui-dist/assets/image-20200311164110473.bb1493d4.png",B="/naive-dafou-ui-dist/assets/image-20200312094303003.66b885c6.png",_="/naive-dafou-ui-dist/assets/image-20200312105346506.6aa731c9.png",H="/naive-dafou-ui-dist/assets/image-20200312105420754.558d463c.png",D="/naive-dafou-ui-dist/assets/image-20200312143108891.745faa65.png",N="/naive-dafou-ui-dist/assets/image-20200313104036578.3650d0bb.png",F="/naive-dafou-ui-dist/assets/1582607306465.a4dac797.png",V="/naive-dafou-ui-dist/assets/image-20200313105326050.7dd1a68b.png",z="/naive-dafou-ui-dist/assets/image-20200313155305995.5bd0f67e.png",W="/naive-dafou-ui-dist/assets/image-20200313155712644.d7649cf5.png",G="/naive-dafou-ui-dist/assets/image-20200316121602882.f3806690.png",J="/naive-dafou-ui-dist/assets/image-20200316162109856.6e450f7a.png",K="/naive-dafou-ui-dist/assets/image-20200316163032485.82b19b4b.png",X="/naive-dafou-ui-dist/assets/image-20200316180728320.6c15df24.png",$="/naive-dafou-ui-dist/assets/image-20200316180948468.60e1f377.png",Z="/naive-dafou-ui-dist/assets/image-20200316190609811.36986892.png",Q="/naive-dafou-ui-dist/assets/image-20200316163525762.00ef3ddc.png",Y="/naive-dafou-ui-dist/assets/image-20200317211408623.778246bc.png";const nn={},sn=s('<blockquote><p>https://blog.zhouinfo.site/2021/06/16/%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99-itcast%E5%93%81%E8%BE%BE%E9%80%9A%E7%94%A8%E6%9D%83%E9%99%90%E7%B3%BB%E7%BB%9F/</p></blockquote><h2 id="\u9879\u76EE\u6982\u8FF0"><a class="header-anchor" href="#\u9879\u76EE\u6982\u8FF0" aria-hidden="true">#</a> \u9879\u76EE\u6982\u8FF0</h2><h3 id="\u9879\u76EE\u4ECB\u7ECD"><a class="header-anchor" href="#\u9879\u76EE\u4ECB\u7ECD" aria-hidden="true">#</a> \u9879\u76EE\u4ECB\u7ECD</h3><p>\u5BF9\u4E8E\u4F01\u4E1A\u4E2D\u7684\u9879\u76EE\u7EDD\u5927\u591A\u6570\u90FD\u9700\u8981\u8FDB\u884C\u7528\u6237\u6743\u9650\u7BA1\u7406\u3001\u8BA4\u8BC1\u3001\u9274\u6743\u3001\u52A0\u5BC6\u3001\u89E3\u5BC6\u3001XSS\u9632\u8DE8\u7AD9\u653B\u51FB\u7B49\u3002\u8FD9\u4E9B\u529F\u80FD\u6574\u4F53\u5B9E\u73B0\u601D\u8DEF\u57FA\u672C\u4E00\u81F4\uFF0C\u4F46\u662F\u5927\u90E8\u5206\u9879\u76EE\u90FD\u9700\u8981\u5B9E\u73B0\u4E00\u6B21\uFF0C\u8FD9\u65E0\u5F62\u4E2D\u5C31\u5F62\u6210\u4E86\u5DE8\u5927\u7684\u8D44\u6E90\u6D6A\u8D39\u3002\u672C\u9879\u76EE\u5C31\u662F\u9488\u5BF9\u8FD9\u4E2A\u95EE\u9898\uFF0C\u63D0\u4F9B\u4E86\u4E00\u5957\u901A\u7528\u7684\u6743\u9650\u89E3\u51B3\u65B9\u6848\u2014-\u54C1\u8FBE\u901A\u7528\u6743\u9650\u7CFB\u7EDF</p><p>\u54C1\u8FBE\u901A\u7528\u6743\u9650\u7CFB\u7EDF\u57FA\u4E8ESpringCloud(Hoxton.SR1) +SpringBoot(2.2.2.RELEASE) \u7684\u5FAE\u670D\u52A1\u6846\u67B6\uFF0C\u5177\u5907\u901A\u7528\u7684\u7528\u6237\u7BA1\u7406\u3001\u8D44\u6E90\u6743\u9650\u7BA1\u7406\u3001\u7F51\u5173\u7EDF\u4E00\u9274\u6743\u3001XSS\u9632\u8DE8\u7AD9\u653B\u51FB\u7B49\u591A\u4E2A\u6A21\u5757\uFF0C\u652F\u6301\u591A\u4E1A\u52A1\u7CFB\u7EDF\u5E76\u884C\u5F00\u53D1\uFF0C\u652F\u6301\u591A\u670D\u52A1\u5E76\u884C\u5F00\u53D1\uFF0C\u53EF\u4EE5\u4F5C\u4E3A\u540E\u7AEF\u670D\u52A1\u7684\u5F00\u53D1\u811A\u624B\u67B6\u3002\u6838\u5FC3\u6280\u672F\u91C7\u7528SpringBoot\u3001Zuul\u3001Nacos\u3001Fegin\u3001Ribbon\u3001Hystrix\u3001JWT Token\u3001Mybatis Plus\u7B49\u4E3B\u8981\u6846\u67B6\u548C\u4E2D\u95F4\u4EF6</p><p>\u672C\u9879\u76EE\u5177\u6709\u4E24\u4E2A\u4E3B\u8981\u529F\u80FD\u7279\u6027\uFF1A</p><ul><li>\u7528\u6237\u6743\u9650\u7BA1\u7406\uFF1A\u5177\u6709\u7528\u6237\u3001\u90E8\u95E8\u3001\u5C97\u4F4D\u3001\u89D2\u8272\u3001\u83DC\u5355\u7BA1\u7406\uFF0C\u5E76\u901A\u8FC7\u7F51\u5173\u8FDB\u884C\u7EDF\u4E00\u7684\u6743\u9650\u8BA4\u8BC1</li><li>\u5FAE\u670D\u52A1\u5F00\u53D1\u6846\u67B6\uFF1A\u672C\u9879\u76EE\u540C\u65F6\u4E5F\u662F\u4E00\u4E2A\u5FAE\u670D\u52A1\u5F00\u53D1\u6846\u67B6\uFF0C\u96C6\u6210\u4E86\u57FA\u7840\u7684\u516C\u5171\u7EC4\u4EF6\uFF0C\u5305\u62EC\u6570\u636E\u5E93\u3001\u7F13\u5B58\u3001\u65E5\u5FD7\u3001\u8868\u5355\u9A8C\u8BC1\u3001\u5BF9\u8C61\u8F6C\u6362\u3001\u9632\u6CE8\u5165\u548C\u63A5\u53E3\u6587\u6863\u7BA1\u7406\u7B49\u5DE5\u5177</li></ul><h3 id="\u4E1A\u52A1\u67B6\u6784"><a class="header-anchor" href="#\u4E1A\u52A1\u67B6\u6784" aria-hidden="true">#</a> \u4E1A\u52A1\u67B6\u6784</h3><p><img src="'+a+'" alt="img"></p><h3 id="\u6280\u672F\u67B6\u6784"><a class="header-anchor" href="#\u6280\u672F\u67B6\u6784" aria-hidden="true">#</a> \u6280\u672F\u67B6\u6784</h3><p><img src="'+t+'" alt="img"></p><h3 id="\u73AF\u5883\u8981\u6C42"><a class="header-anchor" href="#\u73AF\u5883\u8981\u6C42" aria-hidden="true">#</a> \u73AF\u5883\u8981\u6C42</h3><ul><li><p>JDK \uFF1A 1.8 +</p></li><li><p>Maven\uFF1A 3.3 +</p><p>http://maven.apache.org/download.cgi</p></li><li><p>Mysql\uFF1A 5.6.0 +</p><p>https://downloads.mysql.com/archives/community</p></li><li><p>Redis\uFF1A 4.0 +</p><p>https://redis.io/download</p></li><li><p>Nacos\uFF1A 1.1.4</p><p>https://github.com/alibaba/nacos/releases</p></li><li><p>Node\uFF1A 11.3+\uFF08\u96C6\u6210npm\uFF09</p><p>https://nodejs.org/en/download</p></li></ul><h2 id="spring-boot-starter"><a class="header-anchor" href="#spring-boot-starter" aria-hidden="true">#</a> spring boot starter</h2><p>\u6211\u4EEC\u77E5\u9053Spring Boot\u5927\u5927\u7B80\u5316\u4E86\u9879\u76EE\u521D\u59CB\u642D\u5EFA\u4EE5\u53CA\u5F00\u53D1\u8FC7\u7A0B\uFF0C\u800C\u8FD9\u4E9B\u90FD\u662F\u901A\u8FC7Spring Boot\u63D0\u4F9B\u7684starter\u6765\u5B8C\u6210\u7684\u3002\u54C1\u8FBE\u901A\u7528\u6743\u9650\u7CFB\u7EDF\u5C31\u662F\u57FA\u4E8ESpring Boot\u8FDB\u884C\u5F00\u53D1\uFF0C\u800C\u4E14\u4E00\u4E9B\u57FA\u7840\u6A21\u5757\u5176\u672C\u8D28\u5C31\u662Fstarter\uFF0C\u6240\u4EE5\u6211\u4EEC\u9700\u8981\u5BF9Spring Boot\u7684starter\u6709\u4E00\u4E2A\u5168\u9762\u6DF1\u5165\u7684\u4E86\u89E3\uFF0C\u8FD9\u662F\u6211\u4EEC\u5F00\u53D1\u54C1\u8FBE\u901A\u7528\u6743\u9650\u7CFB\u7EDF\u7684\u5FC5\u5907\u77E5\u8BC6</p><h3 id="starter\u4ECB\u7ECD"><a class="header-anchor" href="#starter\u4ECB\u7ECD" aria-hidden="true">#</a> starter\u4ECB\u7ECD</h3><p>spring boot \u5728\u914D\u7F6E\u4E0A\u76F8\u6BD4spring\u8981\u7B80\u5355\u8BB8\u591A, \u5176\u6838\u5FC3\u5728\u4E8Espring-boot-starter, \u5728\u4F7F\u7528spring boot\u6765\u642D\u5EFA\u4E00\u4E2A\u9879\u76EE\u65F6, \u53EA\u9700\u8981\u5F15\u5165\u5B98\u65B9\u63D0\u4F9B\u7684starter, \u5C31\u53EF\u4EE5\u76F4\u63A5\u4F7F\u7528, \u514D\u53BB\u4E86\u5404\u79CD\u914D\u7F6E\u3002starter\u7B80\u5355\u6765\u8BB2\u5C31\u662F\u5F15\u5165\u4E86\u4E00\u4E9B\u76F8\u5173\u4F9D\u8D56\u548C\u4E00\u4E9B\u521D\u59CB\u5316\u7684\u914D\u7F6E</p><p>Spring\u5B98\u65B9\u63D0\u4F9B\u4E86\u5F88\u591Astarter\uFF0C\u7B2C\u4E09\u65B9\u4E5F\u53EF\u4EE5\u5B9A\u4E49starter\u3002\u4E3A\u4E86\u52A0\u4EE5\u533A\u5206\uFF0Cstarter\u4ECE\u540D\u79F0\u4E0A\u8FDB\u884C\u4E86\u5982\u4E0B\u89C4\u8303\uFF1A</p><ul><li>Spring\u5B98\u65B9\u63D0\u4F9B\u7684starter\u540D\u79F0\u4E3A\uFF1Aspring-boot-starter-xxx\uFF0C\u4F8B\u5982Spring\u5B98\u65B9\u63D0\u4F9B\u7684spring-boot-starter-web</li><li>\u7B2C\u4E09\u65B9\u63D0\u4F9B\u7684starter\u540D\u79F0\u4E3A\uFF1Axxx-spring-boot-starter\uFF0C\u4F8B\u5982\u7531mybatis\u63D0\u4F9B\u7684mybatis-spring-boot-starter</li></ul><h3 id="starter\u539F\u7406"><a class="header-anchor" href="#starter\u539F\u7406" aria-hidden="true">#</a> starter\u539F\u7406</h3><p>Spring Boot\u4E4B\u6240\u4EE5\u80FD\u591F\u5E2E\u6211\u4EEC\u7B80\u5316\u9879\u76EE\u7684\u642D\u5EFA\u548C\u5F00\u53D1\u8FC7\u7A0B\uFF0C\u4E3B\u8981\u662F\u57FA\u4E8E\u5B83\u63D0\u4F9B\u7684\u8D77\u6B65\u4F9D\u8D56\u548C\u81EA\u52A8\u914D\u7F6E</p><h4 id="\u8D77\u6B65\u4F9D\u8D56"><a class="header-anchor" href="#\u8D77\u6B65\u4F9D\u8D56" aria-hidden="true">#</a> \u8D77\u6B65\u4F9D\u8D56</h4><p>\u8D77\u6B65\u4F9D\u8D56\uFF0C\u5176\u5B9E\u5C31\u662F\u5C06\u5177\u5907\u67D0\u79CD\u529F\u80FD\u7684\u5750\u6807\u6253\u5305\u5230\u4E00\u8D77\uFF0C\u53EF\u4EE5\u7B80\u5316\u4F9D\u8D56\u5BFC\u5165\u7684\u8FC7\u7A0B\u3002\u4F8B\u5982\uFF0C\u6211\u4EEC\u5BFC\u5165spring-boot-starter-web\u8FD9\u4E2Astarter\uFF0C\u5219\u548Cweb\u5F00\u53D1\u76F8\u5173\u7684jar\u5305\u90FD\u4E00\u8D77\u5BFC\u5165\u5230\u9879\u76EE\u4E2D\u4E86\u3002\u5982\u4E0B\u56FE\u6240\u793A\uFF1A</p><p><img src="'+p+`" alt="img"></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> \u5C31\u662Fjar\u7684\u7684\u96C6\u5408\u4F53</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="\u81EA\u52A8\u914D\u7F6E"><a class="header-anchor" href="#\u81EA\u52A8\u914D\u7F6E" aria-hidden="true">#</a> \u81EA\u52A8\u914D\u7F6E</h4><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> \u4E3A\u4EC0\u4E48web\u5728\u5BFC\u5165\u4E4B\u540E\u5C31\u53EF\u4EE5\u76F4\u63A5\u542F\u52A8Tomcat\u5E76\u8FDB\u884C\u6D4F\u89C8\u5668\u8BBF\u95EE\u5462\uFF1F\u4E3B\u8981\u662Fspringboot\u8FDB\u884C\u4E86\u81EA\u52A8\u914D\u7F6E</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u81EA\u52A8\u914D\u7F6E\uFF0C\u5C31\u662F\u65E0\u987B\u624B\u52A8\u914D\u7F6Exml\uFF0C\u81EA\u52A8\u914D\u7F6E\u5E76\u7BA1\u7406bean\uFF0C\u53EF\u4EE5\u7B80\u5316\u5F00\u53D1\u8FC7\u7A0B\u3002\u90A3\u4E48Spring Boot\u662F\u5982\u4F55\u5B8C\u6210\u81EA\u52A8\u914D\u7F6E\u7684\u5462\uFF1F</p><p>\u81EA\u52A8\u914D\u7F6E\u6D89\u53CA\u5230\u5982\u4E0B\u51E0\u4E2A\u5173\u952E\u6B65\u9AA4\uFF1A</p><ul><li>\u57FA\u4E8EJava\u4EE3\u7801\u7684Bean\u914D\u7F6E\uFF08\u914D\u7F6E\u4ECE\u54EA\u91CC\u6765\uFF09</li><li>\u81EA\u52A8\u914D\u7F6E\u6761\u4EF6\u4F9D\u8D56\uFF08\u914D\u7F6E\u751F\u6548\u7684\u6761\u4EF6\uFF09</li><li>Bean\u53C2\u6570\u83B7\u53D6\uFF08spring IOC\u5728\u6CE8\u5165Bean\u7684\u65F6\u5019\uFF0C\u8FD9\u4E9BBean\u7684\u53C2\u6570\u9700\u8981\u5148\u8BFB\u53D6\u51FA\u6765\uFF0C\u624D\u80FD\u4F9B\u7ED9spring ioc\u4F7F\u7528\uFF09</li><li>Bean\u7684\u53D1\u73B0\uFF08Bean\u4ECE\u54EA\u91CC\u6765\uFF0C\u914D\u7F6E\u7684spring.factories\uFF09</li><li>Bean\u7684\u52A0\u8F7D\uFF08\u4EA4\u7ED9spring ioc\u52A0\u8F7D\uFF09</li></ul><p>\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u4E00\u4E2A\u5B9E\u9645\u7684\u4F8B\u5B50mybatis-spring-boot-starter\u6765\u8BF4\u660E\u81EA\u52A8\u914D\u7F6E\u7684\u5B9E\u73B0\u8FC7\u7A0B</p><h5 id="\u57FA\u4E8Ejava\u4EE3\u7801\u7684bean\u914D\u7F6E"><a class="header-anchor" href="#\u57FA\u4E8Ejava\u4EE3\u7801\u7684bean\u914D\u7F6E" aria-hidden="true">#</a> \u57FA\u4E8Ejava\u4EE3\u7801\u7684Bean\u914D\u7F6E</h5><p>\u5F53\u6211\u4EEC\u5728\u9879\u76EE\u4E2D\u5BFC\u5165\u4E86mybatis-spring-boot-starter\u8FD9\u4E2Ajar\u540E\uFF0C\u53EF\u4EE5\u770B\u5230\u5B83\u5305\u62EC\u4E86\u5F88\u591A\u76F8\u5173\u7684jar\u5305\uFF0C\u5982\u4E0B\u56FE\uFF1A</p><p><img src="`+e+'" alt="img"></p><p>\u5176\u4E2D\u5B83\u4F1A\u4F9D\u8D56\u4E00\u4E9B\u9700\u8981\u5230\u7684jar\u5305</p><p><img src="'+o+'" alt="image-20220321223156751"></p><p>\u5176\u4E2D\u5728mybatis-spring-boot-autoconfigure\u8FD9\u4E2Ajar\u5305\u4E2D\u6709\u5982\u4E0B\u4E00\u4E2A<strong>MybatisAutoConfiguration</strong>\u81EA\u52A8\u914D\u7F6E\u7C7B\uFF1A</p><p><img src="'+c+'" alt="img"></p><p>\u6253\u5F00\u8FD9\u4E2A\u7C7B\uFF0C\u622A\u53D6\u7684\u5173\u952E\u4EE3\u7801\u5982\u4E0B\uFF1A</p><p><img src="'+l+'" alt="img"></p><p><strong>@Configuration</strong>\u548C**@Bean**\u8FD9\u4E24\u4E2A\u6CE8\u89E3\u4E00\u8D77\u4F7F\u7528\u5C31\u53EF\u4EE5\u521B\u5EFA\u4E00\u4E2A\u57FA\u4E8Ejava\u4EE3\u7801\u7684\u914D\u7F6E\u7C7B\uFF0C\u53EF\u4EE5\u7528\u6765\u66FF\u4EE3\u4F20\u7EDF\u7684xml\u914D\u7F6E\u6587\u4EF6</p><ul><li><p><strong>@Configuration</strong> \u6CE8\u89E3\u7684\u7C7B\u53EF\u4EE5\u770B\u4F5C\u662F\u80FD\u751F\u4EA7\u8BA9Spring IoC\u5BB9\u5668\u7BA1\u7406\u7684Bean\u5B9E\u4F8B\u7684\u5DE5\u5382</p></li><li><p><strong>@Bean</strong> \u6CE8\u89E3\u7684\u65B9\u6CD5\u8FD4\u56DE\u7684\u5BF9\u8C61\u53EF\u4EE5\u88AB\u6CE8\u518C\u5230spring\u5BB9\u5668\u4E2D</p></li></ul><p>\u6240\u4EE5\u4E0A\u9762\u7684<strong>MybatisAutoConfiguration</strong>\u8FD9\u4E2A\u7C7B\uFF0C\u81EA\u52A8\u5E2E\u6211\u4EEC\u751F\u6210\u4E86SqlSessionFactory\u548CSqlSessionTemplate\u8FD9\u4E9BMybatis\u7684\u91CD\u8981\u5B9E\u4F8B\u5E76\u4EA4\u7ED9spring\u5BB9\u5668\u7BA1\u7406\uFF0C\u4ECE\u800C\u5B8C\u6210bean\u7684\u81EA\u52A8\u6CE8\u518C</p><h5 id="\u81EA\u52A8\u914D\u7F6E\u6761\u4EF6\u4F9D\u8D56"><a class="header-anchor" href="#\u81EA\u52A8\u914D\u7F6E\u6761\u4EF6\u4F9D\u8D56" aria-hidden="true">#</a> \u81EA\u52A8\u914D\u7F6E\u6761\u4EF6\u4F9D\u8D56</h5><p>\u4ECE<strong>MybatisAutoConfiguration</strong>\u8FD9\u4E2A\u7C7B\u4E2D\u4F7F\u7528\u7684\u6CE8\u89E3\u53EF\u4EE5\u770B\u51FA\uFF0C\u8981\u5B8C\u6210\u81EA\u52A8\u914D\u7F6E\u662F\u6709\u4F9D\u8D56\u6761\u4EF6\u7684</p><p><img src="'+i+'" alt="img"></p><p>\u6240\u4EE5\u8981\u5B8C\u6210Mybatis\u7684\u81EA\u52A8\u914D\u7F6E\uFF0C\u9700\u8981\u5728\u7C7B\u8DEF\u5F84\u4E2D\u5B58\u5728SqlSessionFactory.class\u3001SqlSessionFactoryBean.class\u8FD9\u4E24\u4E2A\u7C7B\uFF0C\u540C\u65F6\u9700\u8981\u5B58\u5728DataSource\u8FD9\u4E2Abean\u4E14\u8FD9\u4E2Abean\u5B8C\u6210\u81EA\u52A8\u6CE8\u518C</p><p>\u8FD9\u4E9B\u6CE8\u89E3\u662Fspring boot\u7279\u6709\u7684\uFF0C\u5E38\u89C1\u7684\u6761\u4EF6\u4F9D\u8D56\u6CE8\u89E3\u6709\uFF1A</p><table><thead><tr><th>\u6CE8\u89E3</th><th>\u529F\u80FD\u8BF4\u660E</th></tr></thead><tbody><tr><td>@ConditionalOnBean</td><td>\u4EC5\u5728\u5F53\u524D\u4E0A\u4E0B\u6587\u4E2D\u5B58\u5728\u67D0\u4E2Abean\u65F6\uFF0C\u624D\u4F1A\u5B9E\u4F8B\u5316\u8FD9\u4E2ABean</td></tr><tr><td>@ConditionalOnClass</td><td>\u67D0\u4E2Aclass\u4F4D\u4E8E\u7C7B\u8DEF\u5F84\u4E0A\uFF0C\u624D\u4F1A\u5B9E\u4F8B\u5316\u8FD9\u4E2ABean</td></tr><tr><td>@ConditionalOnExpression</td><td>\u5F53\u8868\u8FBE\u5F0F\u4E3Atrue\u7684\u65F6\u5019\uFF0C\u624D\u4F1A\u5B9E\u4F8B\u5316\u8FD9\u4E2ABean</td></tr><tr><td>@ConditionalOnMissingBean</td><td>\u4EC5\u5728\u5F53\u524D\u4E0A\u4E0B\u6587\u4E2D\u4E0D\u5B58\u5728\u67D0\u4E2Abean\u65F6\uFF0C\u624D\u4F1A\u5B9E\u4F8B\u5316\u8FD9\u4E2ABean</td></tr><tr><td>@ConditionalOnMissingClass</td><td>\u67D0\u4E2Aclass\u5728\u7C7B\u8DEF\u5F84\u4E0A\u4E0D\u5B58\u5728\u7684\u65F6\u5019\uFF0C\u624D\u4F1A\u5B9E\u4F8B\u5316\u8FD9\u4E2ABean</td></tr><tr><td>@ConditionalOnNotWebApplication</td><td>\u4E0D\u662Fweb\u5E94\u7528\u65F6\u624D\u4F1A\u5B9E\u4F8B\u5316\u8FD9\u4E2ABean</td></tr><tr><td>@AutoConfigureAfter</td><td>\u5728\u67D0\u4E2Abean\u5B8C\u6210\u81EA\u52A8\u914D\u7F6E\u540E\u5B9E\u4F8B\u5316\u8FD9\u4E2Abean</td></tr><tr><td>@AutoConfigureBefore</td><td>\u5728\u67D0\u4E2Abean\u5B8C\u6210\u81EA\u52A8\u914D\u7F6E\u524D\u5B9E\u4F8B\u5316\u8FD9\u4E2Abean</td></tr></tbody></table><h5 id="bean\u53C2\u6570\u83B7\u53D6"><a class="header-anchor" href="#bean\u53C2\u6570\u83B7\u53D6" aria-hidden="true">#</a> Bean\u53C2\u6570\u83B7\u53D6</h5><p>\u8981\u5B8C\u6210mybatis\u7684\u81EA\u52A8\u914D\u7F6E\uFF0C\u9700\u8981\u6211\u4EEC\u5728\u914D\u7F6E\u6587\u4EF6\u4E2D\u63D0\u4F9B\u6570\u636E\u6E90\u76F8\u5173\u7684\u914D\u7F6E\u53C2\u6570\uFF0C\u4F8B\u5982\u6570\u636E\u5E93\u9A71\u52A8\u3001\u8FDE\u63A5url\u3001\u6570\u636E\u5E93\u7528\u6237\u540D\u3001\u5BC6\u7801\u7B49\u3002\u90A3\u4E48spring boot\u662F\u5982\u4F55\u8BFB\u53D6yml\u6216\u8005properites\u914D\u7F6E\u6587\u4EF6\u7684\u7684\u5C5E\u6027\u6765\u521B\u5EFA\u6570\u636E\u6E90\u5BF9\u8C61\u7684\uFF1F</p><p>\u5728\u6211\u4EEC\u5BFC\u5165mybatis-spring-boot-starter\u8FD9\u4E2Ajar\u5305\u540E\u4F1A\u4F20\u9012\u8FC7\u6765\u4E00\u4E2Aspring-boot-autoconfigure\u5305\uFF0C\u5728\u8FD9\u4E2A\u5305\u4E2D\u6709\u4E00\u4E2A\u81EA\u52A8\u914D\u7F6E\u7C7B<strong>DataSourceAutoConfiguration</strong>\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A</p><p><img src="'+u+'" alt="img"></p><p><img src="'+k+'" alt="image-20220321224323604"></p><p>\u6211\u4EEC\u53EF\u4EE5\u770B\u5230\u8FD9\u4E2A\u7C7B\u4E0A\u52A0\u5165\u4E86<strong>EnableConfigurationProperties</strong>\u8FD9\u4E2A\u6CE8\u89E3\uFF0C\u7EE7\u7EED\u8DDF\u8E2A\u6E90\u7801\u5230<strong>DataSourceProperties</strong>\u8FD9\u4E2A\u7C7B\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="'+r+'" alt="img"></p><p>\u53EF\u4EE5\u770B\u5230\u8FD9\u4E2A\u7C7B\u4E0A\u52A0\u5165\u4E86<strong>ConfigurationProperties</strong>\u6CE8\u89E3\uFF0C\u8FD9\u4E2A\u6CE8\u89E3\u7684\u4F5C\u7528\u5C31\u662F\u628Ayml\u6216\u8005properties\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684\u914D\u7F6E\u53C2\u6570\u4FE1\u606F\u5C01\u88C5\u5230<strong>ConfigurationProperties</strong>\u6CE8\u89E3\u6807\u6CE8\u7684bean(\u5373<strong>DataSourceProperties</strong>)\u7684\u76F8\u5E94\u5C5E\u6027\u4E0A</p><p>@<strong>EnableConfigurationProperties</strong>\u6CE8\u89E3\u7684\u4F5C\u7528\u662F\u4F7F@<strong>ConfigurationProperties</strong>\u6CE8\u89E3\u751F\u6548</p><h5 id="bean\u7684\u53D1\u73B0"><a class="header-anchor" href="#bean\u7684\u53D1\u73B0" aria-hidden="true">#</a> Bean\u7684\u53D1\u73B0</h5><p>\u6211\u4EEC\u9700\u8981\u4ECESpring Boot\u9879\u76EE\u7684\u542F\u52A8\u7C7B\u5F00\u59CB\u8DDF\u8E2A\uFF0C\u5728\u542F\u52A8\u7C7B\u4E0A\u6211\u4EEC\u4E00\u822C\u4F1A\u52A0\u5165SpringBootApplication\u6CE8\u89E3\uFF0C\u6B64\u6CE8\u89E3\u7684\u6E90\u7801\u5982\u4E0B\uFF1A</p><p><img src="'+d+'" alt="img"></p><p>\u91CD\u70B9\u4ECB\u7ECD\u5982\u4E0B\u4E09\u4E2A\u6CE8\u89E3\uFF1A</p><ul><li><p><strong>SpringBootConfiguration</strong>\uFF1A\u4F5C\u7528\u5C31\u76F8\u5F53\u4E8E<strong>Configuration</strong>\u6CE8\u89E3\uFF0C\u88AB\u6CE8\u89E3\u7684\u7C7B\u5C06\u6210\u4E3A\u4E00\u4E2Abean\u914D\u7F6E\u7C7B</p></li><li><p><strong>ComponentScan</strong>\uFF1A\u4F5C\u7528\u5C31\u662F\u81EA\u52A8\u626B\u63CF\u5E76\u52A0\u8F7D\u7B26\u5408\u6761\u4EF6\u7684\u7EC4\u4EF6\uFF0C\u6700\u7EC8\u5C06\u8FD9\u4E9Bbean\u52A0\u8F7D\u5230spring\u5BB9\u5668\u4E2D</p></li><li><p><strong>EnableAutoConfiguration</strong> \uFF1A\u8FD9\u4E2A\u6CE8\u89E3\u5F88\u91CD\u8981\uFF0C\u501F\u52A9@<strong>Import</strong>\u7684\u652F\u6301\uFF0C\u6536\u96C6\u548C\u6CE8\u518C\u4F9D\u8D56\u5305\u4E2D\u76F8\u5173\u7684bean\u5B9A\u4E49</p></li></ul><p>\u7EE7\u7EED\u8DDF\u8E2A<strong>EnableAutoConfiguration</strong>\u6CE8\u89E3\u6E90\u7801\uFF1A</p><p><img src="'+v+'" alt="img"></p><p>@<strong>EnableAutoConfiguration</strong>\u6CE8\u89E3\u5F15\u5165\u4E86@<strong>Import</strong>\u8FD9\u4E2A\u6CE8\u89E3</p><p><strong>Import</strong>\uFF1A\u5BFC\u5165\u9700\u8981\u81EA\u52A8\u914D\u7F6E\u7684\u7EC4\u4EF6\uFF0C\u6B64\u5904\u4E3A<strong>EnableAutoConfigurationImportSelector</strong>\u8FD9\u4E2A\u7C7B</p><p><strong>EnableAutoConfigurationImportSelector</strong>\u7C7B\u6E90\u7801\u5982\u4E0B\uFF1A</p><p><img src="'+m+'" alt="img"></p><p><strong>EnableAutoConfigurationImportSelector</strong>\u7EE7\u627F\u4E86<strong>AutoConfigurationImportSelector</strong>\u7C7B\uFF0C\u7EE7\u7EED\u8DDF\u8E2A<strong>AutoConfigurationImportSelector</strong>\u7C7B\u6E90\u7801\uFF1A</p><p><img src="'+g+'" alt="img"></p><p><strong>AutoConfigurationImportSelector</strong>\u7C7B\u7684getCandidateConfigurations\u65B9\u6CD5\u4E2D\u7684\u8C03\u7528\u4E86SpringFactoriesLoader\u7C7B\u7684loadFactoryNames\u65B9\u6CD5\uFF0C\u7EE7\u7EED\u8DDF\u8E2A\u6E90\u7801\uFF1A</p><p><img src="'+b+'" alt="img"></p><p><strong>SpringFactoriesLoader</strong>\u7684<strong>loadFactoryNames</strong>\u9759\u6001\u65B9\u6CD5\u53EF\u4EE5\u4ECE\u6240\u6709\u7684jar\u5305\u4E2D\u8BFB\u53D6META-INF/spring.factories\u6587\u4EF6\uFF0C\u800C\u81EA\u52A8\u914D\u7F6E\u7684\u7C7B\u5C31\u5728\u8FD9\u4E2A\u6587\u4EF6\u4E2D\u8FDB\u884C\u914D\u7F6E\uFF1A</p><p><img src="'+y+'" alt="img"></p><p>spring.factories\u6587\u4EF6\u5185\u5BB9\u5982\u4E0B\uFF1A</p><p><img src="'+h+`" alt="img"></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 2.2.2\u7248\u672C\u7684\u5DF2\u7ECF\u662F\u8FD9\u6837\u7684\u4E86</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="`+w+`" alt="image-20220321225250972"></p><p>\u8FD9\u6837Spring Boot\u5C31\u53EF\u4EE5\u52A0\u8F7D\u5230<strong>MybatisAutoConfiguration</strong>\u8FD9\u4E2A\u914D\u7F6E\u7C7B\u4E86</p><h5 id="bean\u7684\u52A0\u8F7D"><a class="header-anchor" href="#bean\u7684\u52A0\u8F7D" aria-hidden="true">#</a> Bean\u7684\u52A0\u8F7D</h5><p>\u5728Spring Boot\u5E94\u7528\u4E2D\u8981\u8BA9\u4E00\u4E2A\u666E\u901A\u7C7B\u4EA4\u7ED9Spring\u5BB9\u5668\u7BA1\u7406\uFF0C\u901A\u5E38\u6709\u4EE5\u4E0B\u65B9\u6CD5\uFF1A</p><ol><li><p>\u4F7F\u7528 @Configuration\u4E0E@Bean \u6CE8\u89E3</p></li><li><p>\u4F7F\u7528@Controller @Service @Repository @Component \u6CE8\u89E3\u6807\u6CE8\u8BE5\u7C7B\u5E76\u4E14\u542F\u7528@ComponentScan\u81EA\u52A8\u626B\u63CF</p></li><li><p>\u4F7F\u7528@Import \u65B9\u6CD5</p></li></ol><p>\u5176\u4E2DSpring Boot\u5B9E\u73B0\u81EA\u52A8\u914D\u7F6E\u4F7F\u7528\u7684\u662F@Import\u6CE8\u89E3\u8FD9\u79CD\u65B9\u5F0F\uFF0CAutoConfigurationImportSelector\u7C7B\u7684selectImports\u65B9\u6CD5\u8FD4\u56DE\u4E00\u7EC4\u4ECEMETA-INF/spring.factories\u6587\u4EF6\u4E2D\u8BFB\u53D6\u7684bean\u7684\u5168\u7C7B\u540D\uFF0C\u8FD9\u6837Spring Boot\u5C31\u53EF\u4EE5\u52A0\u8F7D\u5230\u8FD9\u4E9BBean\u5E76\u5B8C\u6210\u5B9E\u4F8B\u7684\u521B\u5EFA\u5DE5\u4F5C</p><h4 id="\u81EA\u52A8\u914D\u7F6E\u603B\u7ED3"><a class="header-anchor" href="#\u81EA\u52A8\u914D\u7F6E\u603B\u7ED3" aria-hidden="true">#</a> \u81EA\u52A8\u914D\u7F6E\u603B\u7ED3</h4><p>\u6211\u4EEC\u53EF\u4EE5\u5C06\u81EA\u52A8\u914D\u7F6E\u7684\u5173\u952E\u51E0\u6B65\u4EE5\u53CA\u76F8\u5E94\u7684\u6CE8\u89E3\u603B\u7ED3\u5982\u4E0B\uFF1A</p><ol><li><p>@Configuration\u4E0E@Bean\uFF1A\u57FA\u4E8EJava\u4EE3\u7801\u7684bean\u914D\u7F6E</p></li><li><p>@Conditional\uFF1A\u8BBE\u7F6E\u81EA\u52A8\u914D\u7F6E\u6761\u4EF6\u4F9D\u8D56</p></li><li><p>@EnableConfigurationProperties\u4E0E@ConfigurationProperties\uFF1A\u8BFB\u53D6\u914D\u7F6E\u6587\u4EF6\u8F6C\u6362\u4E3Abean</p></li><li><p>@EnableAutoConfiguration\u4E0E@Import\uFF1A\u5B9E\u73B0bean\u53D1\u73B0\u4E0E\u52A0\u8F7D</p></li></ol><h3 id="\u81EA\u5B9A\u4E49starter"><a class="header-anchor" href="#\u81EA\u5B9A\u4E49starter" aria-hidden="true">#</a> \u81EA\u5B9A\u4E49starter</h3><p>\u672C\u5C0F\u8282\u6211\u4EEC\u901A\u8FC7\u81EA\u5B9A\u4E49\u4E24\u4E2Astarter\u6765\u52A0\u5F3Astarter\u7684\u7406\u89E3\u548C\u5E94\u7528</p><h4 id="\u6848\u4F8B\u4E00"><a class="header-anchor" href="#\u6848\u4F8B\u4E00" aria-hidden="true">#</a> \u6848\u4F8B\u4E00</h4><h5 id="\u5F00\u53D1starter"><a class="header-anchor" href="#\u5F00\u53D1starter" aria-hidden="true">#</a> \u5F00\u53D1starter</h5><ol><li>\u521B\u5EFAstarter\u5DE5\u7A0Bhello-spring-boot-starter\u5E76\u914D\u7F6Epom.xml\u6587\u4EF6</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hello-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-autoconfigure<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u521B\u5EFA\u914D\u7F6E\u5C5E\u6027\u7C7BHelloProperties</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>context<span class="token punctuation">.</span>properties<span class="token punctuation">.</span></span><span class="token class-name">ConfigurationProperties</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * \u8BFB\u53D6\u914D\u7F6E\u7C7B\u8F6C\u6362\u4E3Aconfig
 */</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloProperties</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> address<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAddress</span><span class="token punctuation">(</span><span class="token class-name">String</span> address<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>address <span class="token operator">=</span> address<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;HelloProperties{&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;name=&#39;&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token string">&quot;, address=&#39;&quot;</span> <span class="token operator">+</span> address <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token char">&#39;}&#39;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u521B\u5EFA\u670D\u52A1\u7C7BHelloService</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloService</span> <span class="token punctuation">{</span><span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">HelloService</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> address<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>address <span class="token operator">=</span> address<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;\u4F60\u597D\uFF01\u6211\u7684\u540D\u5B57\u53EB &quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;\uFF0C\u6211\u6765\u81EA &quot;</span> <span class="token operator">+</span> address<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u521B\u5EFA\u81EA\u52A8\u914D\u7F6E\u7C7BHelloServiceAutoConfiguration</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">HelloService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>condition<span class="token punctuation">.</span></span><span class="token class-name">ConditionalOnMissingBean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>context<span class="token punctuation">.</span>properties<span class="token punctuation">.</span></span><span class="token class-name">EnableConfigurationProperties</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token class-name">HelloProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloServiceAutoConfiguration</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">HelloProperties</span> helloProperties<span class="token punctuation">;</span>

    <span class="token comment">//\u901A\u8FC7\u6784\u9020\u65B9\u6CD5\u6CE8\u5165\u914D\u7F6E\u5C5E\u6027\u5BF9\u8C61HelloProperties</span>
    <span class="token keyword">public</span> <span class="token class-name">HelloServiceAutoConfiguration</span><span class="token punctuation">(</span><span class="token class-name">HelloProperties</span> helloProperties<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>helloProperties <span class="token operator">=</span> helloProperties<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5B9E\u4F8B\u5316HelloService\u5E76\u8F7D\u5165Spring IoC\u5BB9\u5668</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@ConditionalOnMissingBean</span> <span class="token comment">// \u4EC5\u5728\u5F53\u524D\u4E0A\u4E0B\u6587\u4E2D\u4E0D\u5B58\u5728\u67D0\u4E2Abean\u65F6\uFF0C\u624D\u4F1A\u5B9E\u4F8B\u5316\u8FD9\u4E2ABean</span>
    <span class="token keyword">public</span> <span class="token class-name">HelloService</span> <span class="token function">helloService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">HelloService</span><span class="token punctuation">(</span>helloProperties<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>helloProperties<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>\u5728resources\u76EE\u5F55\u4E0B\u521B\u5EFAMETA-INF/spring.factories</li></ol><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">org.springframework.boot.autoconfigure.EnableAutoConfiguration</span><span class="token punctuation">=</span><span class="token value attr-value">\\
cn.example.demo.config.HelloServiceAutoConfiguration</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u81F3\u6B64starter\u5DF2\u7ECF\u5F00\u53D1\u5B8C\u6210\u4E86\uFF0C\u53EF\u4EE5\u5C06\u5F53\u524Dstarter\u5B89\u88C5\u5230\u672C\u5730maven\u4ED3\u5E93\u4F9B\u5176\u4ED6\u5E94\u7528\u6765\u4F7F\u7528</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> \u76F4\u63A5install</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="`+f+`" alt="image-20220321231356309"></p><h5 id="\u4F7F\u7528starter"><a class="header-anchor" href="#\u4F7F\u7528starter" aria-hidden="true">#</a> \u4F7F\u7528starter</h5><ol><li>\u521B\u5EFAmaven\u5DE5\u7A0Bmyapp\u5E76\u914D\u7F6Epom.xml\u6587\u4EF6</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>myapp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hello-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u521B\u5EFAapplication.yml\u6587\u4EF6</li></ol><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>
<span class="token key atrule">hello</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> xiaoming
  <span class="token key atrule">address</span><span class="token punctuation">:</span> beijing
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u521B\u5EFAHelloController</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">HelloService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{</span>
    <span class="token comment">//HelloService\u5728\u6211\u4EEC\u81EA\u5B9A\u4E49\u7684starter\u4E2D\u5DF2\u7ECF\u5B8C\u6210\u4E86\u81EA\u52A8\u914D\u7F6E\uFF0C\u6240\u4EE5\u6B64\u5904\u53EF\u4EE5\u76F4\u63A5\u6CE8\u5165</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">HelloService</span> helloService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/say&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> helloService<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u521B\u5EFA\u542F\u52A8\u7C7BHelloApplication</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">HelloApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>\u6267\u884C\u542F\u52A8\u7C7Bmain\u65B9\u6CD5\uFF0C\u8BBF\u95EE\u5730\u5740http://localhost:8080/hello/say</li></ol><p><img src="`+q+`" alt="image-20220321233138027"></p><h4 id="\u6848\u4F8B\u4E8C"><a class="header-anchor" href="#\u6848\u4F8B\u4E8C" aria-hidden="true">#</a> \u6848\u4F8B\u4E8C</h4><p>\u5728\u524D\u9762\u7684\u6848\u4F8B\u4E00\u4E2D\u6211\u4EEC\u901A\u8FC7\u5B9A\u4E49starter\uFF0C\u81EA\u52A8\u914D\u7F6E\u4E86\u4E00\u4E2AHelloService\u5B9E\u4F8B\u3002\u672C\u6848\u4F8B\u6211\u4EEC\u9700\u8981\u901A\u8FC7\u81EA\u52A8\u914D\u7F6E\u6765\u521B\u5EFA\u4E00\u4E2A\u62E6\u622A\u5668\u5BF9\u8C61\uFF0C\u901A\u8FC7\u6B64\u62E6\u622A\u5668\u5BF9\u8C61\u6765\u5B9E\u73B0\u8BB0\u5F55\u65E5\u5FD7\u529F\u80FD</p><p>\u6211\u4EEC\u53EF\u4EE5\u5728\u6848\u4F8B\u4E00\u7684\u57FA\u7840\u4E0A\u7EE7\u7EED\u5F00\u53D1\u6848\u4F8B\u4E8C</p><h5 id="\u5F00\u53D1starter-1"><a class="header-anchor" href="#\u5F00\u53D1starter-1" aria-hidden="true">#</a> \u5F00\u53D1starter</h5><ol><li>\u5728hello-spring-boot-starter\u7684pom.xml\u6587\u4EF6\u4E2D\u8FFD\u52A0\u5982\u4E0Bmaven\u5750\u6807</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hello-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-autoconfigure<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-configuration-processor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u81EA\u5B9A\u4E49MyLog\u6CE8\u89E3</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>log</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ElementType</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Retention</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RetentionPolicy</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Target</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>METHOD<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">MyLog</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * \u65B9\u6CD5\u63CF\u8FF0
     */</span>
    <span class="token class-name">String</span> <span class="token function">desc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u81EA\u5B9A\u4E49\u65E5\u5FD7\u62E6\u622A\u5668MyLogInterceptor</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>log</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>method<span class="token punctuation">.</span></span><span class="token class-name">HandlerMethod</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ModelAndView</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>handler<span class="token punctuation">.</span></span><span class="token class-name">HandlerInterceptorAdapter</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * \u65E5\u5FD7\u62E6\u622A\u5668
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyLogInterceptor</span> <span class="token keyword">extends</span> <span class="token class-name">HandlerInterceptorAdapter</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u7ED9\u6BCF\u4E00\u4E2A\u7EBF\u7A0B\u521B\u5EFA\u4E00\u4E2A\u72EC\u7ACB\u7684\u7A7A\u95F4\uFF0C\u5B58\u50A8\u65B9\u6CD5\u5F00\u59CB\u7684\u65F6\u95F4</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> startTimeThreadLocal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * \u4E4B\u524D\u6267\u884C
     *
     * <span class="token keyword">@param</span> <span class="token parameter">request</span>
     * <span class="token keyword">@param</span> <span class="token parameter">response</span>
     * <span class="token keyword">@param</span> <span class="token parameter">handler</span>
     * <span class="token keyword">@return</span>
     * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">Exception</span></span>
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">preHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">HandlerMethod</span> handlerMethod <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HandlerMethod</span><span class="token punctuation">)</span> handler<span class="token punctuation">;</span>
        <span class="token class-name">Method</span> method <span class="token operator">=</span> handlerMethod<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u83B7\u5F97\u88AB\u62E6\u622A\u7684\u65B9\u6CD5\u5BF9\u8C61</span>
        <span class="token class-name">MyLog</span> myLog <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">MyLog</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u83B7\u5F97\u65B9\u6CD5\u4E0A\u7684\u6CE8\u89E3</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>myLog <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//\u65B9\u6CD5\u4E0A\u52A0\u4E86MyLog\u6CE8\u89E3\uFF0C\u9700\u8981\u8FDB\u884C\u65E5\u5FD7\u8BB0\u5F55</span>
            <span class="token keyword">long</span> startTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            startTimeThreadLocal<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>startTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">postHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">,</span> <span class="token class-name">ModelAndView</span> modelAndView<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">HandlerMethod</span> handlerMethod <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HandlerMethod</span><span class="token punctuation">)</span> handler<span class="token punctuation">;</span>
        <span class="token class-name">Method</span> method <span class="token operator">=</span> handlerMethod<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u83B7\u5F97\u88AB\u62E6\u622A\u7684\u65B9\u6CD5\u5BF9\u8C61</span>
        <span class="token class-name">MyLog</span> myLog <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">MyLog</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u83B7\u5F97\u65B9\u6CD5\u4E0A\u7684\u6CE8\u89E3</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>myLog <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//\u65B9\u6CD5\u4E0A\u52A0\u4E86MyLog\u6CE8\u89E3\uFF0C\u9700\u8981\u8FDB\u884C\u65E5\u5FD7\u8BB0\u5F55</span>
            <span class="token keyword">long</span> endTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Long</span> startTime <span class="token operator">=</span> startTimeThreadLocal<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">long</span> optTime <span class="token operator">=</span> endTime <span class="token operator">-</span> startTime<span class="token punctuation">;</span>

            <span class="token class-name">String</span> requestUri <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> methodName <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">getDeclaringClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;.&quot;</span> <span class="token operator">+</span> method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> methodDesc <span class="token operator">=</span> myLog<span class="token punctuation">.</span><span class="token function">desc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u6C42uri\uFF1A&quot;</span> <span class="token operator">+</span> requestUri<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u6C42\u65B9\u6CD5\u540D\uFF1A&quot;</span> <span class="token operator">+</span> methodName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u65B9\u6CD5\u63CF\u8FF0\uFF1A&quot;</span> <span class="token operator">+</span> methodDesc<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u65B9\u6CD5\u6267\u884C\u65F6\u95F4\uFF1A&quot;</span> <span class="token operator">+</span> optTime <span class="token operator">+</span> <span class="token string">&quot;ms&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u521B\u5EFA\u81EA\u52A8\u914D\u7F6E\u7C7BMyLogAutoConfiguration\uFF0C\u7528\u4E8E\u81EA\u52A8\u914D\u7F6E\u62E6\u622A\u5668\u3001\u53C2\u6570\u89E3\u6790\u5668\u7B49web\u7EC4\u4EF6</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>log<span class="token punctuation">.</span></span><span class="token class-name">MyLogInterceptor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">InterceptorRegistry</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebMvcConfigurer</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * \u914D\u7F6E\u7C7B\uFF0C\u7528\u4E8E\u81EA\u52A8\u914D\u7F6E\u62E6\u622A\u5668\u3001\u53C2\u6570\u89E3\u6790\u5668\u7B49web\u7EC4\u4EF6
 */</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyLogAutoConfiguration</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * \u6CE8\u518C\u81EA\u5B9A\u4E49\u65E5\u5FD7\u62E6\u622A\u5668
     *
     * <span class="token keyword">@param</span> <span class="token parameter">registry</span>
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addInterceptors</span><span class="token punctuation">(</span><span class="token class-name">InterceptorRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyLogInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>\u5728spring.factories\u4E2D\u8FFD\u52A0MyLogAutoConfiguration\u914D\u7F6E</li></ol><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">org.springframework.boot.autoconfigure.EnableAutoConfiguration</span><span class="token punctuation">=</span><span class="token value attr-value">\\
com.example.demo.config.HelloServiceAutoConfiguration,\\
com.example.demo.config.MyLogAutoConfiguration</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6CE8\u610F\uFF1A\u6211\u4EEC\u5728hello-spring-boot-starter\u4E2D\u8FFD\u52A0\u4E86\u65B0\u7684\u5185\u5BB9\uFF0C\u9700\u8981\u91CD\u65B0\u6253\u5305\u5B89\u88C5\u5230maven\u4ED3\u5E93</p><h5 id="\u4F7F\u7528starter-1"><a class="header-anchor" href="#\u4F7F\u7528starter-1" aria-hidden="true">#</a> \u4F7F\u7528starter</h5><ol><li>\u5728myapp\u5DE5\u7A0B\u7684Controller\u65B9\u6CD5\u4E0A\u52A0\u5165@MyLog\u6CE8\u89E3</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{</span>
    <span class="token comment">//HelloService\u5728\u6211\u4EEC\u81EA\u5B9A\u4E49\u7684starter\u4E2D\u5DF2\u7ECF\u5B8C\u6210\u4E86\u81EA\u52A8\u914D\u7F6E\uFF0C\u6240\u4EE5\u6B64\u5904\u53EF\u4EE5\u76F4\u63A5\u6CE8\u5165</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">HelloService</span> helloService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/say&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@MyLog</span><span class="token punctuation">(</span>desc <span class="token operator">=</span> <span class="token string">&quot;sayHello\u65B9\u6CD5&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> helloService<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u8BBF\u95EE\u5730\u5740\uFF1Ahttp://localhost:8080/hello/say\uFF0C\u67E5\u770B\u63A7\u5236\u53F0\u8F93\u51FA\uFF1A</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>\u8BF7\u6C42uri\uFF1A/hello/say
\u8BF7\u6C42\u65B9\u6CD5\u540D\uFF1Acom.example.demo.controller.HelloController.sayHello
\u65B9\u6CD5\u63CF\u8FF0\uFF1AsayHello\u65B9\u6CD5
\u65B9\u6CD5\u6267\u884C\u65F6\u95F4\uFF1A24ms
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="lombok"><a class="header-anchor" href="#lombok" aria-hidden="true">#</a> lombok</h2><h3 id="lombok\u4ECB\u7ECD"><a class="header-anchor" href="#lombok\u4ECB\u7ECD" aria-hidden="true">#</a> lombok\u4ECB\u7ECD</h3><p>lombok\u662F\u4E00\u4E2A\u5F00\u6E90\u7684\u4EE3\u7801\u751F\u6210\u5E93\uFF0C\u80FD\u4EE5\u7B80\u5355\u7684\u6CE8\u89E3\u5F62\u5F0F\u6765\u7B80\u5316Java\u7C7B\u4E2D\u7684\u5927\u91CF\u6837\u677F\u4EE3\u7801\uFF0C\u63D0\u9AD8\u5F00\u53D1\u4EBA\u5458\u7684\u5F00\u53D1\u6548\u7387\u3002\u4F8B\u5982\u5F00\u53D1\u4E2D\u7ECF\u5E38\u9700\u8981\u5199\u7684javabean\uFF0C\u90FD\u9700\u8981\u82B1\u65F6\u95F4\u53BB\u6DFB\u52A0\u76F8\u5E94\u7684getter/setter\uFF0C\u4E5F\u8BB8\u8FD8\u8981\u53BB\u5199\u6784\u9020\u5668\u3001equals\u7B49\u65B9\u6CD5\uFF0C\u800C\u4E14\u9700\u8981\u7EF4\u62A4\uFF0C\u5F53\u5C5E\u6027\u591A\u65F6\u4F1A\u51FA\u73B0\u5927\u91CF\u7684getter/setter\u65B9\u6CD5\uFF0C\u8FD9\u4E9B\u663E\u5F97\u5F88\u5197\u957F\u4E5F\u6CA1\u6709\u592A\u591A\u6280\u672F\u542B\u91CF</p><p>lombok\u80FD\u901A\u8FC7\u6CE8\u89E3\u7684\u65B9\u5F0F\uFF0C\u5728\u7F16\u8BD1\u65F6\u81EA\u52A8\u4E3A\u5C5E\u6027\u751F\u6210\u6784\u9020\u5668\u3001getter/setter\u3001equals\u3001hashcode\u3001toString\u65B9\u6CD5\uFF0C\u4F7F\u4EE3\u7801\u770B\u8D77\u6765\u66F4\u7B80\u6D01</p><p>lombok\u5BF9\u5E94\u7684maven\u5750\u6807\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.18.10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5B89\u88C5lombok\u63D2\u4EF6"><a class="header-anchor" href="#\u5B89\u88C5lombok\u63D2\u4EF6" aria-hidden="true">#</a> \u5B89\u88C5lombok\u63D2\u4EF6</h3><p>\u8981\u4F7F\u7528lombok\u9700\u8981\u5728IDE\u4E2D\u5B89\u88C5\u5BF9\u5E94\u7684lombok\u63D2\u4EF6\u3002\u672C\u8BFE\u7A0B\u4F7F\u7528\u7684\u5F00\u53D1\u5DE5\u5177\u4E3AIntelliJ IDEA\uFF0C\u5B89\u88C5\u63D2\u4EF6\u8FC7\u7A0B\u5982\u4E0B\uFF1A</p><ol><li><p>\u6253\u5F00IntelliJ IDEA\u540E\u70B9\u51FB\u83DC\u5355\u680F\u4E2D\u7684File\u2013&gt;Settings\u8FDB\u5165\u5230\u8BBE\u7F6E\u9875\u9762</p></li><li><p>\u70B9\u51FB\u8BBE\u7F6E\u9875\u9762\u4E2D\u7684Plugins\u8FDB\u884C\u63D2\u4EF6\u7684\u5B89\u88C5\uFF0C\u5728\u53F3\u4FA7\u9009\u62E9Browse repositories\u2026\uFF0C\u7136\u540E\u5728\u641C\u7D22\u9875\u9762\u8F93\u5165lombok\uFF0C\u53EF\u4EE5\u67E5\u8BE2\u5230\u4E0B\u65B9\u7684Lombok Plugin\uFF0C\u9F20\u6807\u70B9\u51FBLombok Plugin\u53EF\u5728\u53F3\u4FA7\u770B\u5230Install\u6309\u94AE\uFF0C\u70B9\u51FB\u8BE5\u6309\u94AE\u4FBF\u53EF\u5B89\u88C5</p></li></ol><h3 id="lombok\u5E38\u7528\u6CE8\u89E3"><a class="header-anchor" href="#lombok\u5E38\u7528\u6CE8\u89E3" aria-hidden="true">#</a> lombok\u5E38\u7528\u6CE8\u89E3</h3><table><thead><tr><th>\u6CE8\u89E3</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td>@Setter</td><td>\u6CE8\u89E3\u5728\u7C7B\u6216\u5C5E\u6027\uFF0C\u6CE8\u89E3\u5728\u7C7B\u65F6\u4E3A\u6240\u6709\u5C5E\u6027\u751F\u6210setter\u65B9\u6CD5\uFF0C\u6CE8\u89E3\u5728\u5C5E\u6027\u4E0A\u65F6\u53EA\u4E3A\u8BE5\u5C5E\u6027\u751F\u6210setter\u65B9\u6CD5</td></tr><tr><td>@Getter</td><td>\u4F7F\u7528\u65B9\u6CD5\u540C@Setter\uFF0C\u533A\u522B\u5728\u4E8E\u751F\u6210\u7684\u662Fgetter\u65B9\u6CD5</td></tr><tr><td>@ToString</td><td>\u6CE8\u89E3\u5728\u7C7B\uFF0C\u6DFB\u52A0toString\u65B9\u6CD5</td></tr><tr><td>@EqualsAndHashCode</td><td>\u6CE8\u89E3\u5728\u7C7B\uFF0C\u751F\u6210hashCode\u548Cequals\u65B9\u6CD5</td></tr><tr><td>@NoArgsConstructor</td><td>\u6CE8\u89E3\u5728\u7C7B\uFF0C\u751F\u6210\u65E0\u53C2\u7684\u6784\u9020\u65B9\u6CD5</td></tr><tr><td>@RequiredArgsConstructor</td><td>\u6CE8\u89E3\u5728\u7C7B\uFF0C\u4E3A\u7C7B\u4E2D\u9700\u8981\u7279\u6B8A\u5904\u7406\u7684\u5C5E\u6027\u751F\u6210\u6784\u9020\u65B9\u6CD5\uFF0C\u6BD4\u5982final\u548C\u88AB@NonNull\u6CE8\u89E3\u7684\u5C5E\u6027</td></tr><tr><td>@AllArgsConstructor</td><td>\u6CE8\u89E3\u5728\u7C7B\uFF0C\u751F\u6210\u5305\u542B\u7C7B\u4E2D\u6240\u6709\u5C5E\u6027\u7684\u6784\u9020\u65B9\u6CD5</td></tr><tr><td>@Data</td><td>\u6CE8\u89E3\u5728\u7C7B\uFF0C\u751F\u6210setter/getter\u3001equals\u3001canEqual\u3001hashCode\u3001toString\u65B9\u6CD5\uFF0C\u5982\u4E3Afinal\u5C5E\u6027\uFF0C\u5219\u4E0D\u4F1A\u4E3A\u8BE5\u5C5E\u6027\u751F\u6210setter\u65B9\u6CD5</td></tr><tr><td>@Slf4j</td><td>\u6CE8\u89E3\u5728\u7C7B\uFF0C\u751F\u6210log\u53D8\u91CF\uFF0C\u7528\u4E8E\u8BB0\u5F55\u65E5\u5FD7</td></tr><tr><td>@Builder</td><td>\u5C06\u7C7B\u8F6C\u53D8\u4E3A\u5EFA\u9020\u8005\u6A21\u5F0F</td></tr></tbody></table><h3 id="lombok\u5165\u95E8\u6848\u4F8B"><a class="header-anchor" href="#lombok\u5165\u95E8\u6848\u4F8B" aria-hidden="true">#</a> lombok\u5165\u95E8\u6848\u4F8B</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>\u56E0\u4E3A\u4E4B\u524D\u4F7F\u7528\u8FC7lombok\uFF0C\u6240\u4EE5\u5C31\u4E0D\u81EA\u5DF1\u5728\u505A\u5165\u95E8\u6848\u4F8B\u4E86
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol><li>\u521B\u5EFAmaven\u5DE5\u7A0Blombok_demo\u5E76\u914D\u7F6Epom.xml\u6587\u4EF6</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>cn.itcast<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok_demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.18.10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u521B\u5EFAUser\u7C7B\u5E76\u52A0\u5165lombok\u63D0\u4F9B\u7684\u6CE8\u89E3</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>entity</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@Builder</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u521B\u5EFA\u6D4B\u8BD5\u7C7BTestLombok</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestLombok</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u65E0\u53C2\u6784\u9020\u65B9\u6CD5</span>
        <span class="token class-name">User</span> user1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">/*
         setter\u65B9\u6CD5
        */</span>
        user1<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;itcast&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user1<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">/*
         getter\u65B9\u6CD5
        */</span>
        <span class="token keyword">int</span> id <span class="token operator">=</span> user1<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> name <span class="token operator">=</span> user1<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> age <span class="token operator">=</span> user1<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5E26\u6709\u6240\u6709\u53C2\u6570\u7684\u6784\u9020\u65B9\u6CD5</span>
        <span class="token class-name">User</span> user2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;itheima&quot;</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5EFA\u9020\u8005\u6A21\u5F0F</span>
        <span class="token class-name">User</span> user3 <span class="token operator">=</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">&quot;boxuegu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">age</span><span class="token punctuation">(</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">/*
         toString\u65B9\u6CD5
        */</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user1<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user2<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user3<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6CE8\uFF1A\u53EF\u4EE5\u4F7F\u7528\u53CD\u7F16\u8BD1\u5DE5\u5177\u67E5\u770B\u751F\u6210\u7684class\u6587\u4EF6\u5185\u5BB9</p><h2 id="\u9879\u76EE\u642D\u5EFA"><a class="header-anchor" href="#\u9879\u76EE\u642D\u5EFA" aria-hidden="true">#</a> \u9879\u76EE\u642D\u5EFA</h2><h3 id="\u5BFC\u5165\u521D\u59CB\u5DE5\u7A0B"><a class="header-anchor" href="#\u5BFC\u5165\u521D\u59CB\u5DE5\u7A0B" aria-hidden="true">#</a> \u5BFC\u5165\u521D\u59CB\u5DE5\u7A0B</h3><p>\u9274\u4E8E\u65F6\u95F4\u5173\u7CFB\uFF0C\u6211\u4EEC\u4E0D\u518D\u624B\u52A8\u521B\u5EFA\u5DE5\u7A0B\uFF0C\u800C\u662F\u76F4\u63A5\u4ECE\u8BFE\u7A0B\u8D44\u6599\u4E2D\u63D0\u4F9B\u7684\u521D\u59CB\u5DE5\u7A0Bpinda-authority\u5BFC\u5165\u5373\u53EF</p><p>\u5BFC\u5165\u6B65\u9AA4\uFF1A</p><ol><li><p>\u5C06\u521D\u59CB\u5DE5\u7A0Bpinda-authority\u590D\u5236\u5230\u4EFB\u610F\u6CA1\u6709\u4E2D\u6587\u548C\u7A7A\u683C\u7684\u76EE\u5F55\u4E0B</p></li><li><p>\u6253\u5F00IDEA\uFF0C\u9009\u62E9Open\uFF0C\u9009\u62E9pinda-authority\u5DE5\u7A0B\u76EE\u5F55\u5373\u53EF</p></li></ol><p>\u5BFC\u5165\u7684\u9879\u76EE\u7ED3\u6784\u5982\u4E0B\uFF1A</p><p><img src="`+S+`" alt="img"></p><h3 id="\u9879\u76EE\u6A21\u5757\u4ECB\u7ECD"><a class="header-anchor" href="#\u9879\u76EE\u6A21\u5757\u4ECB\u7ECD" aria-hidden="true">#</a> \u9879\u76EE\u6A21\u5757\u4ECB\u7ECD</h3><p>\u54C1\u8FBE\u901A\u7528\u6743\u9650\u7CFB\u7EDF\u9879\u76EE\u6574\u4F53\u5DE5\u7A0B\u7ED3\u6784\u548C\u6A21\u5757\u529F\u80FD\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>pinda-authority              #\u805A\u5408\u5DE5\u7A0B\uFF0C\u7528\u4E8E\u805A\u5408pd-parent\u3001pd-apps\u3001pd-tools\u7B49\u6A21\u5757
\u251C\u2500\u2500 pd-parent				 # \u7236\u5DE5\u7A0B\uFF0Cnacos\u914D\u7F6E\u53CA\u4F9D\u8D56\u5305\u7BA1\u7406
\u251C\u2500\u2500 pd-apps					 # \u5E94\u7528\u76EE\u5F55
	\u251C\u2500\u2500 pd-auth				 # \u6743\u9650\u670D\u52A1\u7236\u5DE5\u7A0B
		\u251C\u2500\u2500 pd-auth-entity   # \u6743\u9650\u5B9E\u4F53
		\u251C\u2500\u2500 pa-auth-server   # \u6743\u9650\u670D\u52A1
	\u251C\u2500\u2500 pd-gateway			 # \u7F51\u5173\u670D\u52A1
\u2514\u2500\u2500 pd-tools				 # \u5DE5\u5177\u5DE5\u7A0B
	\u251C\u2500\u2500 pd-tools-common		 # \u57FA\u7840\u7EC4\u4EF6\uFF1A\u57FA\u7840\u914D\u7F6E\u7C7B\u3001\u51FD\u6570\u3001\u5E38\u91CF\u3001\u7EDF\u4E00\u5F02\u5E38\u5904\u7406\u3001undertow\u670D\u52A1\u5668
	\u251C\u2500\u2500 pd-tools-core		 # \u6838\u5FC3\u7EC4\u4EF6\uFF1A\u57FA\u7840\u5B9E\u4F53\u3001\u8FD4\u56DE\u5BF9\u8C61\u3001\u4E0A\u4E0B\u6587\u3001\u5F02\u5E38\u5904\u7406\u3001\u5206\u5E03\u5F0F\u9501\u3001\u51FD\u6570\u3001\u6811
	\u251C\u2500\u2500 pd-tools-databases	 # \u6570\u636E\u6E90\u7EC4\u4EF6\uFF1A\u6570\u636E\u6E90\u914D\u7F6E\u3001\u6570\u636E\u6743\u9650\u3001\u67E5\u8BE2\u6761\u4EF6\u7B49
	\u251C\u2500\u2500 pd-tools-dozer		 # \u5BF9\u8C61\u8F6C\u6362\uFF1Adozer\u914D\u7F6E\u3001\u5DE5\u5177
	\u251C\u2500\u2500 pd-tools-j2cache	 # \u7F13\u5B58\u7EC4\u4EF6\uFF1Aj2cache\u3001redis\u7F13\u5B58
	\u251C\u2500\u2500 pd-tools-jwt         # JWT\u7EC4\u4EF6\uFF1A\u914D\u7F6E\u3001\u5C5E\u6027\u3001\u5DE5\u5177
	\u251C\u2500\u2500 pd-tools-log	     # \u65E5\u5FD7\u7EC4\u4EF6\uFF1A\u65E5\u5FD7\u5B9E\u4F53\u3001\u4E8B\u4EF6\u3001\u62E6\u622A\u5668\u3001\u5DE5\u5177
	\u251C\u2500\u2500 pd-tools-swagger2	 # \u6587\u6863\u7EC4\u4EF6\uFF1Aknife4j\u6587\u6863
	\u251C\u2500\u2500 pd-tools-user        # \u7528\u6237\u4E0A\u4E0B\u6587\uFF1A\u7528\u6237\u6CE8\u89E3\u3001\u6A21\u578B\u548C\u5DE5\u5177\uFF0C\u5F53\u524D\u767B\u5F55\u7528\u6237\u4FE1\u606F\u6CE8\u5165\u6A21\u5757
	\u251C\u2500\u2500 pd-tools-validator	 # \u8868\u5355\u9A8C\u8BC1\uFF1A \u540E\u53F0\u8868\u5355\u89C4\u5219\u9A8C\u8BC1
	\u251C\u2500\u2500 pd-tools-xss		 # xss\u9632\u6CE8\u5165\u7EC4\u4EF6
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u9879\u76EE\u670D\u52A1\u6709\u4E24\u4E2A\uFF1A\u7F51\u5173\u670D\u52A1\u548C\u6743\u9650\u670D\u52A1\uFF1A</p><table><thead><tr><th>\u5E94\u7528</th><th>\u7AEF\u53E3</th><th>\u8BF4\u660E</th><th>\u542F\u52A8\u547D\u4EE4</th></tr></thead><tbody><tr><td>pd-gateway</td><td>8760</td><td>\u7F51\u5173\u670D\u52A1</td><td>java -jar pd-gateway.jar &amp;</td></tr><tr><td>pd-auth-server</td><td>8764</td><td>\u6743\u9650\u670D\u52A1</td><td>java -jar pd-auth-server.jar &amp;</td></tr></tbody></table><p>\u7531\u4E8E\u672C\u7CFB\u7EDF\u662F\u57FA\u4E8E\u5F53\u524D\u975E\u5E38\u6D41\u884C\u7684\u524D\u540E\u7AEF\u5206\u79BB\u5F00\u53D1\u65B9\u5F0F\u5F00\u53D1\uFF0C\u5176\u4E2D\u524D\u7AEF\u90E8\u5206\u662F\u7531\u4E13\u95E8\u7684\u524D\u7AEF\u5F00\u53D1\u4EBA\u5458\u8D1F\u8D23\uFF0C\u6211\u4EEC\u8BFE\u7A0B\u4E2D\u76F4\u63A5\u4F7F\u7528\u5373\u53EF</p><h3 id="\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3"><a class="header-anchor" href="#\u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3" aria-hidden="true">#</a> \u670D\u52A1\u6CE8\u518C\u4E2D\u5FC3</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> \u5355\u673A\u7248\u4E0D\u4F7F\u7528\u6570\u636E\u5E93\u7684\u7684nacos\u53EF\u4EE5\u53C2\u8003springcloud\u57FA\u7840\u4E2D\u7684\u7AE0\u8282</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>\u672C\u9879\u76EE\u4F7F\u7528Nacos\u6765\u4F5C\u4E3A\u670D\u52A1\u7684\u6CE8\u518C\u548C\u914D\u7F6E\u4E2D\u5FC3\u3002Nacos\u662F\u963F\u91CC\u5DF4\u5DF4\u5F00\u6E90\u7684\u4E00\u6B3E\u652F\u6301\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0\uFF0C\u914D\u7F6E\u7BA1\u7406\u4EE5\u53CA\u5FAE\u670D\u52A1\u7BA1\u7406\u7684\u7EC4\u4EF6\u3002\u7528\u6765\u53D6\u4EE3\u4EE5\u524D\u5E38\u7528\u7684\u6CE8\u518C\u4E2D\u5FC3\uFF08zookeeper , eureka\u7B49\u7B49\uFF09\uFF0C\u4EE5\u53CA\u914D\u7F6E\u4E2D\u5FC3\uFF08spring cloud config\u7B49\u7B49\uFF09\u3002Nacos\u662F\u96C6\u6210\u4E86\u6CE8\u518C\u4E2D\u5FC3\u548C\u914D\u7F6E\u4E2D\u5FC3\u7684\u529F\u80FD\uFF0C\u505A\u5230\u4E86\u4E8C\u5408\u4E00</p><p>\u5B89\u88C5\u548C\u914D\u7F6E\u8FC7\u7A0B\u5982\u4E0B\uFF1A</p><p>\u7B2C\u4E00\u6B65\uFF1A\u4E0B\u8F7DNacos\u5B89\u88C5\u5305\uFF0C\u5730\u5740https://github.com/alibaba/nacos/releases/download/1.1.4/nacos-server-1.1.4.zip</p><p>\u7B2C\u4E8C\u6B65\uFF1A\u5C06\u4E0B\u8F7D\u7684zip\u538B\u7F29\u6587\u4EF6\u89E3\u538B</p><p>\u7B2C\u4E09\u6B65\uFF1A\u4FEE\u6539\u914D\u7F6E\u6587\u4EF6\uFF1ANACOS_HOME/conf/application.properties</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">spring.datasource.platform</span><span class="token punctuation">=</span><span class="token value attr-value">mysql</span>
<span class="token key attr-name">db.num</span><span class="token punctuation">=</span><span class="token value attr-value">1</span>
<span class="token key attr-name">db.url.0</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://127.0.0.1:3306/nacos?characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=true</span>
<span class="token key attr-name">db.user</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">db.password</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6CE8\u610F\uFF1ANacos\u5728\u5B58\u50A8\u6570\u636E\u65F6\u65E2\u53EF\u4EE5\u4F7F\u7528\u5185\u7F6E\u6570\u636E\u5E93\u5B58\u50A8\uFF0C\u4E5F\u53EF\u4EE5\u901A\u8FC7\u7B2C\u4E09\u65B9\u6307\u5B9A\u7684\u6570\u636E\u5E93\u5B58\u50A8\u3002\u6211\u4EEC\u4E0A\u9762\u6307\u5B9A\u4E86\u4F7F\u7528MySQL\u6570\u636E\u5E93\u6765\u5B58\u50A8Nacos\u7684\u76F8\u5173\u6570\u636E\uFF0C\u6240\u4EE5\u9700\u8981\u914D\u7F6E\u6211\u4EEC\u4F7F\u7528\u7684MySQL\u6570\u636E\u5E93\u7684\u6570\u636E\u6E90\u4FE1\u606F\uFF0C\u8FD9\u4E2A\u53EF\u4EE5\u6839\u636E\u81EA\u5DF1\u7684MySQL\u6570\u636E\u5E93\u8FDB\u884C\u76F8\u5E94\u8C03\u6574\uFF0C\u4F8B\u5982MySQL\u7684\u5730\u5740\u3001\u7528\u6237\u540D\u3001\u5BC6\u7801\u7B49</p><p>\u7B2C\u56DB\u6B65\uFF1A\u521B\u5EFA\u6570\u636E\u5E93</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token identifier"><span class="token punctuation">\`</span>nacos<span class="token punctuation">\`</span></span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8mb4 <span class="token keyword">COLLATE</span> utf8mb4_general_ci<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u7B2C\u4E94\u6B65\uFF1A\u6267\u884CNACOS_HOME/conf/nacos-mysql.sql\u6570\u636E\u5E93\u811A\u672C\u6587\u4EF6\uFF0C\u5B8C\u6210\u540E\u53EF\u4EE5\u770B\u5230\u521B\u5EFA\u4E86\u5982\u4E0B\u8868</p><p><img src="`+x+'" alt="img"></p><p>\u7B2C\u516D\u6B65\uFF1A\u542F\u52A8Nacos\u670D\u52A1\uFF0C\u53CC\u51FBNACOS_HOME/bin/startup.cmd</p><p>\u7B2C\u4E03\u6B65\uFF1A\u8BBF\u95EENacos\u63A7\u5236\u53F0\uFF0C\u5730\u5740http://localhost:8848/nacos\uFF0C\u9ED8\u8BA4\u7528\u6237\u540D/\u5BC6\u7801\uFF1Anacos/nacos</p><p>\u7B2C\u516B\u6B65\uFF1A\u65B0\u5EFA\u547D\u540D\u7A7A\u95F4pinda-dev\uFF0C</p><p><img src="'+I+'" alt="img"></p><p><strong>\u6CE8\u610F</strong>\uFF0C\u547D\u540D\u7A7A\u95F4\u7684id\u9700\u8981\u66FF\u6362\u5230\u9879\u76EE\u6587\u4EF6<strong>pd-parent/pom.xml</strong>\u4E2D\u5BF9\u5E94\u7684nacos\u547D\u540D\u7A7A\u95F4\u7684id\uFF1A</p><p><img src="'+A+'" alt="img"></p><p>\u7B2C\u4E5D\u6B65\uFF1A\u5BFC\u5165\u914D\u7F6E\u6587\u4EF6\uFF0C\u9009\u62E9nacos\u914D\u7F6E\u4E2D\u5FC3\u7684\u547D\u540D\u7A7A\u95F4\uFF0C\u70B9\u51FB\u5BFC\u5165\u914D\u7F6E\u6309\u94AE\uFF0C\u9009\u62E9\u6587\u4EF6\uFF1Adocs/nacos/nacos_config_export_2020-03-23 17_31_42.zip\u3002\u5BFC\u5165\u5B8C\u6210\u540E\u5982\u4E0B\uFF1A</p><p><img src="'+j+`" alt="img"></p></blockquote><h3 id="redis"><a class="header-anchor" href="#redis" aria-hidden="true">#</a> Redis</h3><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> \u53EF\u4EE5\u76F4\u63A5\u53C2\u8003redis\u6587\u7AE0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>\u5728\u9879\u76EE\u5F00\u53D1\u9636\u6BB5\u6211\u4EEC\u4F7F\u7528windows\u7248\u7684Redis\uFF0C\u76F4\u63A5\u89E3\u538B\u6388\u8BFE\u8D44\u6599\u4E2Dredis-win32-win64.zip\u538B\u7F29\u6587\u4EF6\uFF0C\u7136\u540E\u53CC\u51FBREDIS_HOME/64bit/redis-server.exe\u542F\u52A8Redis\u670D\u52A1\u5373\u53EF\u4F7F\u7528</p></blockquote><h3 id="\u5F00\u53D1\u65B9\u5F0F\u4ECB\u7ECD"><a class="header-anchor" href="#\u5F00\u53D1\u65B9\u5F0F\u4ECB\u7ECD" aria-hidden="true">#</a> \u5F00\u53D1\u65B9\u5F0F\u4ECB\u7ECD</h3><p>\u901A\u8FC7\u524D\u9762\u5BFC\u5165\u7684\u521D\u59CB\u9879\u76EE\u53EF\u4EE5\u770B\u5230\uFF0Cpd-tools\u5DE5\u7A0B\u4E2D\u7684\u5404\u4E2A\u5B50\u6A21\u5757\u5DF2\u7ECF\u5B8C\u6210\u4E86\u5F00\u53D1\uFF0C\u8FD9\u4E9B\u5B50\u6A21\u5757\u5C5E\u4E8E\u9879\u76EE\u7684\u57FA\u7840\u7EC4\u4EF6\uFF0C\u4E3A\u6211\u4EEC\u540E\u7EED\u5F00\u53D1\u7F51\u5173\u670D\u52A1\u548C\u6743\u9650\u670D\u52A1\u63D0\u4F9B\u652F\u6301\uFF0C\u800C\u4E14\u6709\u4E00\u4E9B\u5B50\u6A21\u5757\u5728\u5176\u4ED6\u9879\u76EE\u4E2D\u4E5F\u53EF\u4EE5\u590D\u7528</p><p>\u7531\u4E8E\u8FD9\u4E9B\u5B50\u6A21\u5757\u4F1A\u6D89\u53CA\u5230\u4E00\u4E9B\u65B0\u6280\u672F\u6216\u8005\u6846\u67B6\uFF0C\u6240\u4EE5\u672C\u8BFE\u7A0B\u4F1A\u5148\u8BB2\u89E3\u8FD9\u4E9B\u65B0\u6280\u672F\u6216\u8005\u6846\u67B6\u7684\u4F7F\u7528\u65B9\u6CD5\uFF0C\u7136\u540E\u518D\u5E26\u9886\u5927\u5BB6\u901A\u8BFBpd-tools\u4E2D\u7684\u76F8\u5173\u6A21\u5757\u7684\u4EE3\u7801\u5B9E\u73B0\uFF0C\u4ECE\u800C\u4E86\u89E3\u6B64\u6A21\u5757\u7684\u4F5C\u7528\u548C\u5F00\u53D1\u8FC7\u7A0B</p><p>\u672C\u8BFE\u7A0B\u4F1A\u6309\u7167\u5982\u4E0B\u987A\u5E8F\u4ECB\u7ECDpd-tools\u4E2D\u7684\u5404\u4E2A\u6A21\u5757\uFF1A</p><ul><li>pd-tools-swagger2 # \u6587\u6863\u7EC4\u4EF6\uFF1Aknife4j\u6587\u6863</li><li>pd-tools-common # \u57FA\u7840\u7EC4\u4EF6\uFF1A\u57FA\u7840\u914D\u7F6E\u7C7B\u3001\u51FD\u6570\u3001\u5E38\u91CF\u3001\u7EDF\u4E00\u5F02\u5E38\u5904\u7406\u3001undertow\u670D\u52A1\u5668</li><li>pd-tools-core # \u6838\u5FC3\u7EC4\u4EF6\uFF1A\u57FA\u7840\u5B9E\u4F53\u3001\u8FD4\u56DE\u5BF9\u8C61\u3001\u4E0A\u4E0B\u6587\u3001\u5F02\u5E38\u5904\u7406\u3001\u5206\u5E03\u5F0F\u9501\u3001\u51FD\u6570\u3001\u6811</li><li>pd-tools-databases # \u6570\u636E\u6E90\u7EC4\u4EF6\uFF1A\u6570\u636E\u6E90\u914D\u7F6E\u3001\u6570\u636E\u6743\u9650\u3001\u67E5\u8BE2\u6761\u4EF6\u7B49</li><li>pd-tools-dozer # \u5BF9\u8C61\u8F6C\u6362\uFF1Adozer\u914D\u7F6E\u3001\u5DE5\u5177</li><li>pd-tools-j2cache # \u7F13\u5B58\u7EC4\u4EF6\uFF1Aj2cache\u3001redis\u7F13\u5B58</li><li>pd-tools-jwt # JWT\u7EC4\u4EF6\uFF1A\u914D\u7F6E\u3001\u5C5E\u6027\u3001\u5DE5\u5177</li><li>pd-tools-log # \u65E5\u5FD7\u7EC4\u4EF6\uFF1A\u65E5\u5FD7\u5B9E\u4F53\u3001\u4E8B\u4EF6\u3001\u62E6\u622A\u5668\u3001\u5DE5\u5177</li><li>pd-tools-user # \u7528\u6237\u4E0A\u4E0B\u6587\uFF1A\u7528\u6237\u6CE8\u89E3\u3001\u6A21\u578B\u548C\u5DE5\u5177\uFF0C\u5F53\u524D\u767B\u5F55\u7528\u6237\u4FE1\u606F\u6CE8\u5165\u6A21\u5757</li><li>pd-tools-validator # \u8868\u5355\u9A8C\u8BC1\uFF1A \u540E\u53F0\u8868\u5355\u89C4\u5219\u9A8C\u8BC1</li><li>pd-tools-xss # xss\u9632\u6CE8\u5165\u7EC4\u4EF6</li></ul><p>\u5B66\u4E60\u5B8C\u8FD9\u4E9B\u6A21\u5757\u4E4B\u540E\u5C31\u53EF\u4EE5\u5F00\u53D1\u540E\u9762\u7684\u7F51\u5173\u670D\u52A1\u548C\u6743\u9650\u670D\u52A1\u4E86</p><h2 id="pd-tools-swagger2"><a class="header-anchor" href="#pd-tools-swagger2" aria-hidden="true">#</a> pd-tools-swagger2</h2><p>pd-tools-swagger2\u6A21\u5757\u5B9A\u4F4D\u4E3A\u6587\u6863\u7EC4\u4EF6\uFF0C\u524D\u540E\u7AEF\u5F00\u53D1\u4EBA\u5458\u53EF\u4EE5\u67E5\u770B\u63A5\u53E3\u6587\u6863\uFF0C\u4E3A\u524D\u540E\u7AEF\u5F00\u53D1\u4EBA\u5458\u7684\u5F00\u53D1\u7EDF\u4E00\u63A5\u53E3\uFF0C\u65B9\u4FBF\u540E\u7EED\u7684\u524D\u540E\u7AEF\u8054\u8C03\u5BF9\u63A5\u5DE5\u4F5C</p><h3 id="swagger\u4ECB\u7ECD"><a class="header-anchor" href="#swagger\u4ECB\u7ECD" aria-hidden="true">#</a> swagger\u4ECB\u7ECD</h3><p>\u76F8\u4FE1\u65E0\u8BBA\u662F\u524D\u7AEF\u8FD8\u662F\u540E\u7AEF\u5F00\u53D1\uFF0C\u90FD\u6216\u591A\u6216\u5C11\u5730\u88AB\u63A5\u53E3\u6587\u6863\u6298\u78E8\u8FC7\u3002\u524D\u7AEF\u7ECF\u5E38\u62B1\u6028\u540E\u7AEF\u7ED9\u7684\u63A5\u53E3\u6587\u6863\u4E0E\u5B9E\u9645\u60C5\u51B5\u4E0D\u4E00\u81F4\u3002\u540E\u7AEF\u53C8\u89C9\u5F97\u7F16\u5199\u53CA\u7EF4\u62A4\u63A5\u53E3\u6587\u6863\u4F1A\u8017\u8D39\u4E0D\u5C11\u7CBE\u529B\uFF0C\u7ECF\u5E38\u6765\u4E0D\u53CA\u66F4\u65B0\u3002\u5176\u5B9E\u65E0\u8BBA\u662F\u524D\u7AEF\u8C03\u7528\u540E\u7AEF\uFF0C\u8FD8\u662F\u540E\u7AEF\u8C03\u7528\u540E\u7AEF\uFF0C\u90FD\u671F\u671B\u6709\u4E00\u4E2A\u597D\u7684\u63A5\u53E3\u6587\u6863\u3002\u4F46\u662F\u8FD9\u4E2A\u63A5\u53E3\u6587\u6863\u5BF9\u4E8E\u7A0B\u5E8F\u5458\u6765\u8BF4\uFF0C\u5C31\u8DDF\u6CE8\u91CA\u4E00\u6837\uFF0C\u7ECF\u5E38\u4F1A\u62B1\u6028\u522B\u4EBA\u5199\u7684\u4EE3\u7801\u6CA1\u6709\u5199\u6CE8\u91CA\uFF0C\u7136\u800C\u81EA\u5DF1\u5199\u8D77\u4EE3\u7801\u8D77\u6765\uFF0C\u6700\u8BA8\u538C\u7684\uFF0C\u4E5F\u662F\u5199\u6CE8\u91CA\u3002\u6240\u4EE5\u4EC5\u4EC5\u53EA\u901A\u8FC7\u5F3A\u5236\u6765\u89C4\u8303\u5927\u5BB6\u662F\u4E0D\u591F\u7684\uFF0C\u968F\u7740\u65F6\u95F4\u63A8\u79FB\uFF0C\u7248\u672C\u8FED\u4EE3\uFF0C\u63A5\u53E3\u6587\u6863\u5F80\u5F80\u5F88\u5BB9\u6613\u5C31\u8DDF\u4E0D\u4E0A\u4EE3\u7801\u4E86</p><p>\u4F7F\u7528Swagger\u4F60\u53EA\u9700\u8981\u6309\u7167\u5B83\u7684\u89C4\u8303\u53BB\u5B9A\u4E49\u63A5\u53E3\u53CA\u63A5\u53E3\u76F8\u5173\u7684\u4FE1\u606F\u3002\u518D\u901A\u8FC7Swagger\u884D\u751F\u51FA\u6765\u7684\u4E00\u7CFB\u5217\u9879\u76EE\u548C\u5DE5\u5177\uFF0C\u5C31\u53EF\u4EE5\u505A\u5230\u751F\u6210\u5404\u79CD\u683C\u5F0F\u7684\u63A5\u53E3\u6587\u6863\uFF0C\u751F\u6210\u591A\u79CD\u8BED\u8A00\u7684\u5BA2\u6237\u7AEF\u548C\u670D\u52A1\u7AEF\u7684\u4EE3\u7801\uFF0C\u4EE5\u53CA\u5728\u7EBF\u63A5\u53E3\u8C03\u8BD5\u9875\u9762\u7B49\u7B49\u3002\u8FD9\u6837\uFF0C\u5982\u679C\u6309\u7167\u65B0\u7684\u5F00\u53D1\u6A21\u5F0F\uFF0C\u5728\u5F00\u53D1\u65B0\u7248\u672C\u6216\u8005\u8FED\u4EE3\u7248\u672C\u7684\u65F6\u5019\uFF0C\u53EA\u9700\u8981\u66F4\u65B0Swagger\u63CF\u8FF0\u6587\u4EF6\uFF0C\u5C31\u53EF\u4EE5\u81EA\u52A8\u751F\u6210\u63A5\u53E3\u6587\u6863\u548C\u5BA2\u6237\u7AEF\u670D\u52A1\u7AEF\u4EE3\u7801\uFF0C\u505A\u5230\u8C03\u7528\u7AEF\u4EE3\u7801\u3001\u670D\u52A1\u7AEF\u4EE3\u7801\u4EE5\u53CA\u63A5\u53E3\u6587\u6863\u7684\u4E00\u81F4\u6027</p><p>\u4E3A\u4E86\u7B80\u5316swagger\u7684\u4F7F\u7528\uFF0CSpring\u6846\u67B6\u5BF9swagger\u8FDB\u884C\u4E86\u6574\u5408\uFF0C\u5EFA\u7ACB\u4E86Spring-swagger\u9879\u76EE\uFF0C\u540E\u9762\u6539\u6210\u4E86\u73B0\u5728\u7684Springfox\u3002\u901A\u8FC7\u5728\u9879\u76EE\u4E2D\u5F15\u5165Springfox\uFF0C\u53EF\u4EE5\u626B\u63CF\u76F8\u5173\u7684\u4EE3\u7801\uFF0C\u751F\u6210\u63CF\u8FF0\u6587\u4EF6\uFF0C\u8FDB\u800C\u751F\u6210\u4E0E\u4EE3\u7801\u4E00\u81F4\u7684\u63A5\u53E3\u6587\u6863\u548C\u5BA2\u6237\u7AEF\u4EE3\u7801</p><p>Springfox\u5BF9\u5E94\u7684maven\u5750\u6807\u5982\u4E0B\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.springfox<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>springfox-swagger-ui<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.9.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.springfox<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>springfox-swagger2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.9.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="swagger\u5E38\u7528\u6CE8\u89E3"><a class="header-anchor" href="#swagger\u5E38\u7528\u6CE8\u89E3" aria-hidden="true">#</a> swagger\u5E38\u7528\u6CE8\u89E3</h3><table><thead><tr><th>\u6CE8\u89E3</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td>@Api</td><td>\u7528\u5728\u8BF7\u6C42\u7684\u7C7B\u4E0A\uFF0C\u4F8B\u5982Controller\uFF0C\u8868\u793A\u5BF9\u7C7B\u7684\u8BF4\u660E</td></tr><tr><td>@ApiModel</td><td>\u7528\u5728\u7C7B\u4E0A\uFF0C\u901A\u5E38\u662F\u5B9E\u4F53\u7C7B\uFF0C\u8868\u793A\u4E00\u4E2A\u8FD4\u56DE\u54CD\u5E94\u6570\u636E\u7684\u4FE1\u606F</td></tr><tr><td>@ApiModelProperty</td><td>\u7528\u5728\u5C5E\u6027\u4E0A\uFF0C\u63CF\u8FF0\u54CD\u5E94\u7C7B\u7684\u5C5E\u6027</td></tr><tr><td>@ApiOperation</td><td>\u7528\u5728\u8BF7\u6C42\u7684\u65B9\u6CD5\u4E0A\uFF0C\u8BF4\u660E\u65B9\u6CD5\u7684\u7528\u9014\u3001\u4F5C\u7528</td></tr><tr><td>@ApiImplicitParams</td><td>\u7528\u5728\u8BF7\u6C42\u7684\u65B9\u6CD5\u4E0A\uFF0C\u8868\u793A\u4E00\u7EC4\u53C2\u6570\u8BF4\u660E</td></tr><tr><td>@ApiImplicitParam</td><td>\u7528\u5728@ApiImplicitParams\u6CE8\u89E3\u4E2D\uFF0C\u6307\u5B9A\u4E00\u4E2A\u8BF7\u6C42\u53C2\u6570\u7684\u5404\u4E2A\u65B9\u9762</td></tr></tbody></table><h3 id="swagger\u5165\u95E8\u6848\u4F8B"><a class="header-anchor" href="#swagger\u5165\u95E8\u6848\u4F8B" aria-hidden="true">#</a> swagger\u5165\u95E8\u6848\u4F8B</h3><ol><li>\u521B\u5EFAmaven\u5DE5\u7A0Bswagger_demo\u5E76\u914D\u7F6Epom.xml\u6587\u4EF6</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.demo.swagger<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>swagger_demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.springfox<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>springfox-swagger-ui<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.9.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.springfox<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>springfox-swagger2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.9.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u521B\u5EFAapplication.yml\u6587\u4EF6</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>server:
  port: 9000
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u521B\u5EFA\u5B9E\u4F53\u7C7BUser\u548CMenu</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>entity</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiModel</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiModelProperty</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@ApiModel</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">&quot;\u7528\u6237\u5B9E\u4F53&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u4E3B\u952E&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u59D3\u540D&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u5E74\u9F84&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u5730\u5740&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>entity</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiModel</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiModelProperty</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@ApiModel</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Menu</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u4E3B\u952E&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u83DC\u5355\u540D\u79F0&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u521B\u5EFAUserController\u548CMenuController</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>controller<span class="token punctuation">.</span>user</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Api</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiImplicitParam</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiImplicitParams</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiOperation</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/user&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Api</span><span class="token punctuation">(</span>tags <span class="token operator">=</span> <span class="token string">&quot;\u7528\u6237\u63A7\u5236\u5668&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/getUsers&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u67E5\u8BE2\u6240\u6709\u7528\u6237&quot;</span><span class="token punctuation">,</span> notes <span class="token operator">=</span> <span class="token string">&quot;\u67E5\u8BE2\u6240\u6709\u7528\u6237\u4FE1\u606F&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAllUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F20\u4E09&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setAddress</span><span class="token punctuation">(</span><span class="token string">&quot;\u5317\u4EAC&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> users <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        users<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> users<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/save&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u65B0\u589E\u7528\u6237&quot;</span><span class="token punctuation">,</span> notes <span class="token operator">=</span> <span class="token string">&quot;\u65B0\u589E\u7528\u6237\u4FE1\u606F&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@PutMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/update&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u4FEE\u6539\u7528\u6237&quot;</span><span class="token punctuation">,</span> notes <span class="token operator">=</span> <span class="token string">&quot;\u4FEE\u6539\u7528\u6237\u4FE1\u606F&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@DeleteMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/delete&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u5220\u9664\u7528\u6237&quot;</span><span class="token punctuation">,</span> notes <span class="token operator">=</span> <span class="token string">&quot;\u5220\u9664\u7528\u6237\u4FE1\u606F&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@ApiImplicitParams</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token annotation punctuation">@ApiImplicitParam</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;pageNum&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;\u9875\u7801&quot;</span><span class="token punctuation">,</span>
                    required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token string">&quot;Integer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@ApiImplicitParam</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;pageSize&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;\u6BCF\u9875\u6761\u6570&quot;</span><span class="token punctuation">,</span>
                    required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token string">&quot;Integer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u5206\u9875\u67E5\u8BE2\u7528\u6237\u4FE1\u606F&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;page/{pageNum}/{pageSize}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">findByPage</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> pageNum<span class="token punctuation">,</span>
                             <span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> pageSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>controller<span class="token punctuation">.</span>menu</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Menu</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Api</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiImplicitParam</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiImplicitParams</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiOperation</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/menu&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Api</span><span class="token punctuation">(</span>tags <span class="token operator">=</span> <span class="token string">&quot;\u83DC\u5355\u63A7\u5236\u5668&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MenuController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/getMenus&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u67E5\u8BE2\u6240\u6709\u83DC\u5355&quot;</span><span class="token punctuation">,</span> notes <span class="token operator">=</span> <span class="token string">&quot;\u67E5\u8BE2\u6240\u6709\u83DC\u5355\u4FE1\u606F&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Menu</span><span class="token punctuation">&gt;</span></span> <span class="token function">getMenus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Menu</span> menu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        menu<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        menu<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;itcast&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Menu</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>menu<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> list<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/save&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u65B0\u589E\u83DC\u5355&quot;</span><span class="token punctuation">,</span> notes <span class="token operator">=</span> <span class="token string">&quot;\u65B0\u589E\u83DC\u5355\u4FE1\u606F&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Menu</span> menu<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@PutMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/update&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u4FEE\u6539\u83DC\u5355&quot;</span><span class="token punctuation">,</span> notes <span class="token operator">=</span> <span class="token string">&quot;\u4FEE\u6539\u83DC\u5355\u4FE1\u606F&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Menu</span> menu<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@DeleteMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/delete&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u5220\u9664\u83DC\u5355&quot;</span><span class="token punctuation">,</span> notes <span class="token operator">=</span> <span class="token string">&quot;\u5220\u9664\u83DC\u5355\u4FE1\u606F&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@ApiImplicitParams</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token annotation punctuation">@ApiImplicitParam</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;pageNum&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;\u9875\u7801&quot;</span><span class="token punctuation">,</span>
                    required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token string">&quot;Integer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@ApiImplicitParam</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;pageSize&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;\u6BCF\u9875\u6761\u6570&quot;</span><span class="token punctuation">,</span>
                    required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token string">&quot;Integer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u5206\u9875\u67E5\u8BE2\u83DC\u5355\u4FE1\u606F&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;page/{pageNum}/{pageSize}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">findByPage</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> pageNum<span class="token punctuation">,</span>
                             <span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> pageSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>\u521B\u5EFA\u914D\u7F6E\u7C7BSwaggerAutoConfiguration</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">springfox<span class="token punctuation">.</span>documentation<span class="token punctuation">.</span>builders<span class="token punctuation">.</span></span><span class="token class-name">ApiInfoBuilder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">springfox<span class="token punctuation">.</span>documentation<span class="token punctuation">.</span>builders<span class="token punctuation">.</span></span><span class="token class-name">RequestHandlerSelectors</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">springfox<span class="token punctuation">.</span>documentation<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">ApiInfo</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">springfox<span class="token punctuation">.</span>documentation<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">Contact</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">springfox<span class="token punctuation">.</span>documentation<span class="token punctuation">.</span>spi<span class="token punctuation">.</span></span><span class="token class-name">DocumentationType</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">springfox<span class="token punctuation">.</span>documentation<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>web<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span></span><span class="token class-name">Docket</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">springfox<span class="token punctuation">.</span>documentation<span class="token punctuation">.</span>swagger2<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">EnableSwagger2</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableSwagger2</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SwaggerAutoConfiguration</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Docket</span> <span class="token function">createRestApi1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token class-name">Docket</span> docket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Docket</span><span class="token punctuation">(</span><span class="token class-name">DocumentationType</span><span class="token punctuation">.</span>SWAGGER_2<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">groupName</span><span class="token punctuation">(</span><span class="token string">&quot;\u7528\u6237\u63A5\u53E3\u7EC4&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token comment">// \u4E3A\u5F53\u524D\u8DEF\u5F84</span>
                <span class="token punctuation">.</span><span class="token function">apis</span><span class="token punctuation">(</span><span class="token class-name">RequestHandlerSelectors</span><span class="token punctuation">.</span><span class="token function">basePackage</span><span class="token punctuation">(</span><span class="token string">&quot;com.demo.swagger.controller.user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> docket<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Docket</span> <span class="token function">createRestApi2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Docket</span> docket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Docket</span><span class="token punctuation">(</span><span class="token class-name">DocumentationType</span><span class="token punctuation">.</span>SWAGGER_2<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">groupName</span><span class="token punctuation">(</span><span class="token string">&quot;\u83DC\u5355\u63A5\u53E3\u7EC4&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token comment">//\u4E3A\u5F53\u524D\u5305\u8DEF\u5F84</span>
                <span class="token punctuation">.</span><span class="token function">apis</span><span class="token punctuation">(</span><span class="token class-name">RequestHandlerSelectors</span><span class="token punctuation">.</span><span class="token function">basePackage</span><span class="token punctuation">(</span><span class="token string">&quot;com.demo.swagger.controller.menu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> docket<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6784\u5EFA api\u6587\u6863\u7684\u8BE6\u7EC6\u4FE1\u606F</span>
    <span class="token keyword">private</span> <span class="token class-name">ApiInfo</span> <span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ApiInfoBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token comment">//\u9875\u9762\u6807\u9898</span>
                <span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string">&quot;API\u63A5\u53E3\u6587\u6863&quot;</span><span class="token punctuation">)</span>
                <span class="token comment">//\u521B\u5EFA\u4EBA</span>
                <span class="token punctuation">.</span><span class="token function">contact</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Contact</span><span class="token punctuation">(</span><span class="token string">&quot;alden&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://www.github.com&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token comment">//\u7248\u672C\u53F7</span>
                <span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span><span class="token string">&quot;1.0&quot;</span><span class="token punctuation">)</span>
                <span class="token comment">//\u63CF\u8FF0</span>
                <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">&quot;API \u63CF\u8FF0&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li>\u521B\u5EFA\u542F\u52A8\u7C7BSwaggerDemoApplication</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>swagger</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SwaggerDemoApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SwaggerDemoApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="7"><li>\u6267\u884C\u542F\u52A8\u7C7Bmain\u65B9\u6CD5\u542F\u52A8\u9879\u76EE\uFF0C\u8BBF\u95EE\u5730\u5740\uFF1Ahttp://localhost:9000/swagger-ui.html</li></ol><p><img src="`+M+'" alt="image-20220322212447047"></p><p><img src="'+P+`" alt="image-20220322212705501"></p><h3 id="knife4j\u4ECB\u7ECD"><a class="header-anchor" href="#knife4j\u4ECB\u7ECD" aria-hidden="true">#</a> knife4j\u4ECB\u7ECD</h3><p>knife4j\u662F\u4E3AJava MVC\u6846\u67B6\u96C6\u6210Swagger\u751F\u6210Api\u6587\u6863\u7684\u589E\u5F3A\u89E3\u51B3\u65B9\u6848,\u524D\u8EAB\u662Fswagger-bootstrap-ui,\u53D6\u540Dknife4j\u662F\u5E0C\u671B\u5B83\u80FD\u50CF\u4E00\u628A\u5315\u9996\u4E00\u6837\u5C0F\u5DE7,\u8F7B\u91CF,\u5E76\u4E14\u529F\u80FD\u5F3A\u608D!\u5176\u5E95\u5C42\u662F\u5BF9Springfox\u7684\u5C01\u88C5\uFF0C\u4F7F\u7528\u65B9\u5F0F\u4E5F\u548CSpringfox\u4E00\u81F4\uFF0C\u53EA\u662F\u5BF9\u63A5\u53E3\u6587\u6863UI\u8FDB\u884C\u4E86\u4F18\u5316</p><p><strong>\u6838\u5FC3\u529F\u80FD</strong>\uFF1A</p><ul><li><strong>\u6587\u6863\u8BF4\u660E</strong>\uFF1A\u6839\u636ESwagger\u7684\u89C4\u8303\u8BF4\u660E\uFF0C\u8BE6\u7EC6\u5217\u51FA\u63A5\u53E3\u6587\u6863\u7684\u8BF4\u660E\uFF0C\u5305\u62EC\u63A5\u53E3\u5730\u5740\u3001\u7C7B\u578B\u3001\u8BF7\u6C42\u793A\u4F8B\u3001\u8BF7\u6C42\u53C2\u6570\u3001\u54CD\u5E94\u793A\u4F8B\u3001\u54CD\u5E94\u53C2\u6570\u3001\u54CD\u5E94\u7801\u7B49\u4FE1\u606F\uFF0C\u5BF9\u8BE5\u63A5\u53E3\u7684\u4F7F\u7528\u60C5\u51B5\u4E00\u76EE\u4E86\u7136</li><li><strong>\u5728\u7EBF\u8C03\u8BD5</strong>\uFF1A\u63D0\u4F9B\u5728\u7EBF\u63A5\u53E3\u8054\u8C03\u7684\u5F3A\u5927\u529F\u80FD\uFF0C\u81EA\u52A8\u89E3\u6790\u5F53\u524D\u63A5\u53E3\u53C2\u6570,\u540C\u65F6\u5305\u542B\u8868\u5355\u9A8C\u8BC1\uFF0C\u8C03\u7528\u53C2\u6570\u53EF\u8FD4\u56DE\u63A5\u53E3\u54CD\u5E94\u5185\u5BB9\u3001headers\u3001\u54CD\u5E94\u65F6\u95F4\u3001\u54CD\u5E94\u72B6\u6001\u7801\u7B49\u4FE1\u606F\uFF0C\u5E2E\u52A9\u5F00\u53D1\u8005\u5728\u7EBF\u8C03\u8BD5</li></ul><h3 id="knife4j\u5165\u95E8\u6848\u4F8B"><a class="header-anchor" href="#knife4j\u5165\u95E8\u6848\u4F8B" aria-hidden="true">#</a> knife4j\u5165\u95E8\u6848\u4F8B</h3><ol><li>\u521B\u5EFAmaven\u5DE5\u7A0Bknife4j_demo\u5E76\u914D\u7F6Epom.xml\u6587\u4EF6</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.demo.knife4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>knife4j_demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.github.xiaoymin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>knife4j-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u521B\u5EFA\u5B9E\u4F53\u7C7BUser\u548CMenu</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>knife4j<span class="token punctuation">.</span>entity</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiModel</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiModelProperty</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@ApiModel</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">&quot;\u7528\u6237\u5B9E\u4F53&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u4E3B\u952E&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u59D3\u540D&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u5E74\u9F84&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u5730\u5740&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>knife4j<span class="token punctuation">.</span>entity</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiModel</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiModelProperty</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@ApiModel</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">&quot;\u83DC\u5355\u5B9E\u4F53&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Menu</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u4E3B\u952E&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u83DC\u5355\u540D\u79F0&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u521B\u5EFAUserController\u548CMenuController</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>knife4j<span class="token punctuation">.</span>controller<span class="token punctuation">.</span>user</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>knife4j<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Api</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiImplicitParam</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiImplicitParams</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiOperation</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Api</span><span class="token punctuation">(</span>tags <span class="token operator">=</span> <span class="token string">&quot;\u7528\u6237\u63A7\u5236\u5668&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/getUsers&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u67E5\u8BE2\u6240\u6709\u7528\u6237&quot;</span><span class="token punctuation">,</span> notes <span class="token operator">=</span> <span class="token string">&quot;\u67E5\u8BE2\u6240\u6709\u7528\u6237\u4FE1\u606F&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAllUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;itcast&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setAddress</span><span class="token punctuation">(</span><span class="token string">&quot;bj&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> list<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/save&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u65B0\u589E\u7528\u6237&quot;</span><span class="token punctuation">,</span> notes <span class="token operator">=</span> <span class="token string">&quot;\u65B0\u589E\u7528\u6237\u4FE1\u606F&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@PutMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/update&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u4FEE\u6539\u7528\u6237&quot;</span><span class="token punctuation">,</span> notes <span class="token operator">=</span> <span class="token string">&quot;\u4FEE\u6539\u7528\u6237\u4FE1\u606F&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@DeleteMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/delete&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u5220\u9664\u7528\u6237&quot;</span><span class="token punctuation">,</span> notes <span class="token operator">=</span> <span class="token string">&quot;\u5220\u9664\u7528\u6237\u4FE1\u606F&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@ApiImplicitParams</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token annotation punctuation">@ApiImplicitParam</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;pageNum&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;\u9875\u7801&quot;</span><span class="token punctuation">,</span>
                    required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token string">&quot;Integer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@ApiImplicitParam</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;pageSize&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;\u6BCF\u9875\u6761\u6570&quot;</span><span class="token punctuation">,</span>
                    required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token string">&quot;Integer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u5206\u9875\u67E5\u8BE2\u7528\u6237\u4FE1\u606F&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;page/{pageNum}/{pageSize}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">findByPage</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> pageNum<span class="token punctuation">,</span>
                             <span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> pageSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>knife4j<span class="token punctuation">.</span>controller<span class="token punctuation">.</span>menu</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>knife4j<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Menu</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Api</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiImplicitParam</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiImplicitParams</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiOperation</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/menu&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Api</span><span class="token punctuation">(</span>tags <span class="token operator">=</span> <span class="token string">&quot;\u83DC\u5355\u63A7\u5236\u5668&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MenuController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/getMenus&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u67E5\u8BE2\u6240\u6709\u83DC\u5355&quot;</span><span class="token punctuation">,</span> notes <span class="token operator">=</span> <span class="token string">&quot;\u67E5\u8BE2\u6240\u6709\u83DC\u5355\u4FE1\u606F&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Menu</span><span class="token punctuation">&gt;</span></span> <span class="token function">getMenus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Menu</span> menu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        menu<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        menu<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;itcast&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Menu</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>menu<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> list<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/save&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u65B0\u589E\u83DC\u5355&quot;</span><span class="token punctuation">,</span> notes <span class="token operator">=</span> <span class="token string">&quot;\u65B0\u589E\u83DC\u5355\u4FE1\u606F&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Menu</span> menu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@PutMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/update&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u4FEE\u6539\u83DC\u5355&quot;</span><span class="token punctuation">,</span> notes <span class="token operator">=</span> <span class="token string">&quot;\u4FEE\u6539\u83DC\u5355\u4FE1\u606F&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Menu</span> menu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@DeleteMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/delete&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u5220\u9664\u83DC\u5355&quot;</span><span class="token punctuation">,</span> notes <span class="token operator">=</span> <span class="token string">&quot;\u5220\u9664\u83DC\u5355\u4FE1\u606F&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@ApiImplicitParams</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token annotation punctuation">@ApiImplicitParam</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;pageNum&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;\u9875\u7801&quot;</span><span class="token punctuation">,</span>
                    required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token string">&quot;Integer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@ApiImplicitParam</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;pageSize&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;\u6BCF\u9875\u6761\u6570&quot;</span><span class="token punctuation">,</span>
                    required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token string">&quot;Integer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u5206\u9875\u67E5\u8BE2\u83DC\u5355\u4FE1\u606F&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;page/{pageNum}/{pageSize}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">findByPage</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> pageNum<span class="token punctuation">,</span>
                             <span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> pageSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u521B\u5EFA\u914D\u7F6E\u5C5E\u6027\u7C7BSwaggerProperties</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>knife4j<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>


<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>context<span class="token punctuation">.</span>properties<span class="token punctuation">.</span></span><span class="token class-name">ConfigurationProperties</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">LinkedHashMap</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * \u914D\u7F6E\u5C5E\u6027\u7C7B\uFF0C\u7528\u4E8E\u5C01\u88C5\u63A5\u53E3\u6587\u6863\u76F8\u5173\u5C5E\u6027\uFF0C\u4ECE\u914D\u7F6E\u6587\u4EF6\u8BFB\u53D6\u4FE1\u606F\u5C01\u88C5\u6210\u5F53\u524D\u5BF9\u8C61
 */</span>
<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;pinda.swagger&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SwaggerProperties</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> title <span class="token operator">=</span> <span class="token string">&quot;\u5728\u7EBF\u6587\u6863&quot;</span><span class="token punctuation">;</span> <span class="token comment">//\u6807\u9898</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> group <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span> <span class="token comment">//\u81EA\u5B9A\u4E49\u7EC4\u540D</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> description <span class="token operator">=</span> <span class="token string">&quot;\u5728\u7EBF\u6587\u6863&quot;</span><span class="token punctuation">;</span> <span class="token comment">//\u63CF\u8FF0</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> version <span class="token operator">=</span> <span class="token string">&quot;1.0&quot;</span><span class="token punctuation">;</span> <span class="token comment">//\u7248\u672C</span>
    <span class="token keyword">private</span> <span class="token class-name">Contact</span> contact <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Contact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u8054\u7CFB\u4EBA</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> basePackage <span class="token operator">=</span> <span class="token string">&quot;com.demo.knife4j&quot;</span><span class="token punctuation">;</span> <span class="token comment">//swagger\u4F1A\u89E3\u6790\u7684\u5305\u8DEF\u5F84</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> basePath <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//swagger\u4F1A\u89E3\u6790\u7684url\u89C4\u5219</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> excludePath <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5728basePath\u57FA\u7840\u4E0A\u9700\u8981\u6392\u9664\u7684url\u89C4\u5219</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">DocketInfo</span><span class="token punctuation">&gt;</span></span> docket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u5206\u7EC4\u6587\u6863</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>group <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>group<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> title<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> group<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Data</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">DocketInfo</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> title <span class="token operator">=</span> <span class="token string">&quot;\u5728\u7EBF\u6587\u6863&quot;</span><span class="token punctuation">;</span> <span class="token comment">//\u6807\u9898</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> group <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span> <span class="token comment">//\u81EA\u5B9A\u4E49\u7EC4\u540D</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> description <span class="token operator">=</span> <span class="token string">&quot;\u5728\u7EBF\u6587\u6863&quot;</span><span class="token punctuation">;</span> <span class="token comment">//\u63CF\u8FF0</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> version <span class="token operator">=</span> <span class="token string">&quot;1.0&quot;</span><span class="token punctuation">;</span> <span class="token comment">//\u7248\u672C</span>
        <span class="token keyword">private</span> <span class="token class-name">Contact</span> contact <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Contact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u8054\u7CFB\u4EBA</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> basePackage <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span> <span class="token comment">//swagger\u4F1A\u89E3\u6790\u7684\u5305\u8DEF\u5F84</span>
        <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> basePath <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//swagger\u4F1A\u89E3\u6790\u7684url\u89C4\u5219</span>
        <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> excludePath <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5728basePath\u57FA\u7840\u4E0A\u9700\u8981\u6392\u9664\u7684url</span>

        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>group <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>group<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> title<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> group<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Data</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Contact</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token string">&quot;pinda&quot;</span><span class="token punctuation">;</span> <span class="token comment">//\u8054\u7CFB\u4EBA</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span> <span class="token comment">//\u8054\u7CFB\u4EBAurl</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> email <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span> <span class="token comment">//\u8054\u7CFB\u4EBAemail</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>\u521B\u5EFAapplication.yml\u6587\u4EF6</li></ol><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">7788</span>
<span class="token key atrule">pinda</span><span class="token punctuation">:</span>
  <span class="token key atrule">swagger</span><span class="token punctuation">:</span>
    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#\u662F\u5426\u542F\u7528swagger</span>
    <span class="token key atrule">docket</span><span class="token punctuation">:</span>
      <span class="token key atrule">user</span><span class="token punctuation">:</span>
        <span class="token key atrule">title</span><span class="token punctuation">:</span> \u7528\u6237\u6A21\u5757
        <span class="token key atrule">base-package</span><span class="token punctuation">:</span> com.demo.knife4j.controller.user
      <span class="token key atrule">menu</span><span class="token punctuation">:</span>
        <span class="token key atrule">title</span><span class="token punctuation">:</span> \u83DC\u5355\u6A21\u5757
        <span class="token key atrule">base-package</span><span class="token punctuation">:</span> com.demo.knife4j.controller.menu
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li>\u521B\u5EFA\u914D\u7F6E\u7C7BSwaggerAutoConfiguration</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>knife4j<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>common<span class="token punctuation">.</span>base<span class="token punctuation">.</span></span><span class="token class-name">Predicate</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>common<span class="token punctuation">.</span>base<span class="token punctuation">.</span></span><span class="token class-name">Predicates</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span></span><span class="token class-name">BeansException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span></span><span class="token class-name">BeanFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span></span><span class="token class-name">BeanFactoryAware</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">ConfigurableBeanFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>condition<span class="token punctuation">.</span></span><span class="token class-name">ConditionalOnMissingBean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>condition<span class="token punctuation">.</span></span><span class="token class-name">ConditionalOnProperty</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>context<span class="token punctuation">.</span>properties<span class="token punctuation">.</span></span><span class="token class-name">EnableConfigurationProperties</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">springfox<span class="token punctuation">.</span>documentation<span class="token punctuation">.</span>builders<span class="token punctuation">.</span></span><span class="token class-name">ApiInfoBuilder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">springfox<span class="token punctuation">.</span>documentation<span class="token punctuation">.</span>builders<span class="token punctuation">.</span></span><span class="token class-name">PathSelectors</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">springfox<span class="token punctuation">.</span>documentation<span class="token punctuation">.</span>builders<span class="token punctuation">.</span></span><span class="token class-name">RequestHandlerSelectors</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">springfox<span class="token punctuation">.</span>documentation<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">ApiInfo</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">springfox<span class="token punctuation">.</span>documentation<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">Contact</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">springfox<span class="token punctuation">.</span>documentation<span class="token punctuation">.</span>spi<span class="token punctuation">.</span></span><span class="token class-name">DocumentationType</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">springfox<span class="token punctuation">.</span>documentation<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>web<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span></span><span class="token class-name">Docket</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">springfox<span class="token punctuation">.</span>documentation<span class="token punctuation">.</span>swagger2<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">EnableSwagger2</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">LinkedList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;pinda.swagger.enabled&quot;</span><span class="token punctuation">,</span> havingValue <span class="token operator">=</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">,</span>
        matchIfMissing <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@EnableSwagger2</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token class-name">SwaggerProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SwaggerAutoConfiguration</span> <span class="token keyword">implements</span> <span class="token class-name">BeanFactoryAware</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">SwaggerProperties</span> swaggerProperties<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">BeanFactory</span> beanFactory<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@ConditionalOnMissingBean</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Docket</span><span class="token punctuation">&gt;</span></span> <span class="token function">createRestApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ConfigurableBeanFactory</span> configurableBeanFactory <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ConfigurableBeanFactory</span><span class="token punctuation">)</span> beanFactory<span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Docket</span><span class="token punctuation">&gt;</span></span> docketList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u6CA1\u6709\u5206\u7EC4</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>swaggerProperties<span class="token punctuation">.</span><span class="token function">getDocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Docket</span> docket <span class="token operator">=</span> <span class="token function">createDocket</span><span class="token punctuation">(</span>swaggerProperties<span class="token punctuation">)</span><span class="token punctuation">;</span>
            configurableBeanFactory<span class="token punctuation">.</span><span class="token function">registerSingleton</span><span class="token punctuation">(</span>swaggerProperties<span class="token punctuation">.</span><span class="token function">getTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> docket<span class="token punctuation">)</span><span class="token punctuation">;</span>
            docketList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>docket<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> docketList<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// \u5206\u7EC4\u521B\u5EFA</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> groupName <span class="token operator">:</span> swaggerProperties<span class="token punctuation">.</span><span class="token function">getDocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">SwaggerProperties<span class="token punctuation">.</span>DocketInfo</span> docketInfo <span class="token operator">=</span> swaggerProperties<span class="token punctuation">.</span><span class="token function">getDocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>groupName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">ApiInfo</span> apiInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ApiInfoBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token comment">//\u9875\u9762\u6807\u9898</span>
                    <span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span>docketInfo<span class="token punctuation">.</span><span class="token function">getTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token comment">//\u521B\u5EFA\u4EBA</span>
                    <span class="token punctuation">.</span><span class="token function">contact</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Contact</span><span class="token punctuation">(</span>docketInfo<span class="token punctuation">.</span><span class="token function">getContact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            docketInfo<span class="token punctuation">.</span><span class="token function">getContact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            docketInfo<span class="token punctuation">.</span><span class="token function">getContact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token comment">//\u7248\u672C\u53F7</span>
                    <span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span>docketInfo<span class="token punctuation">.</span><span class="token function">getVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token comment">//\u63CF\u8FF0</span>
                    <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span>docketInfo<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// base-path\u5904\u7406</span>
            <span class="token comment">// \u5F53\u6CA1\u6709\u914D\u7F6E\u4EFB\u4F55path\u7684\u65F6\u5019\uFF0C\u89E3\u6790/**</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>docketInfo<span class="token punctuation">.</span><span class="token function">getBasePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                docketInfo<span class="token punctuation">.</span><span class="token function">getBasePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Predicate</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> basePath <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> path <span class="token operator">:</span> docketInfo<span class="token punctuation">.</span><span class="token function">getBasePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                basePath<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">PathSelectors</span><span class="token punctuation">.</span><span class="token function">ant</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// exclude-path\u5904\u7406</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Predicate</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> excludePath <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> path <span class="token operator">:</span> docketInfo<span class="token punctuation">.</span><span class="token function">getExcludePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                excludePath<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">PathSelectors</span><span class="token punctuation">.</span><span class="token function">ant</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token class-name">Docket</span> docket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Docket</span><span class="token punctuation">(</span><span class="token class-name">DocumentationType</span><span class="token punctuation">.</span>SWAGGER_2<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">apiInfo</span><span class="token punctuation">(</span>apiInfo<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">groupName</span><span class="token punctuation">(</span>docketInfo<span class="token punctuation">.</span><span class="token function">getGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token comment">//\u4E3A\u5F53\u524D\u5305\u8DEF\u5F84</span>
                    <span class="token punctuation">.</span><span class="token function">apis</span><span class="token punctuation">(</span><span class="token class-name">RequestHandlerSelectors</span><span class="token punctuation">.</span><span class="token function">basePackage</span><span class="token punctuation">(</span>docketInfo<span class="token punctuation">.</span><span class="token function">getBasePackage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">paths</span><span class="token punctuation">(</span><span class="token class-name">Predicates</span><span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token class-name">Predicates</span><span class="token punctuation">.</span><span class="token function">not</span><span class="token punctuation">(</span><span class="token class-name">Predicates</span><span class="token punctuation">.</span><span class="token function">or</span><span class="token punctuation">(</span>excludePath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Predicates</span><span class="token punctuation">.</span><span class="token function">or</span><span class="token punctuation">(</span>basePath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            configurableBeanFactory<span class="token punctuation">.</span><span class="token function">registerSingleton</span><span class="token punctuation">(</span>groupName<span class="token punctuation">,</span> docket<span class="token punctuation">)</span><span class="token punctuation">;</span>
            docketList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>docket<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> docketList<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6784\u5EFA api\u6587\u6863\u7684\u8BE6\u7EC6\u4FE1\u606F</span>
    <span class="token keyword">private</span> <span class="token class-name">ApiInfo</span> <span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token class-name">SwaggerProperties</span> swaggerProperties<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ApiInfoBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token comment">//\u9875\u9762\u6807\u9898</span>
                <span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span>swaggerProperties<span class="token punctuation">.</span><span class="token function">getTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token comment">//\u521B\u5EFA\u4EBA</span>
                <span class="token punctuation">.</span><span class="token function">contact</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Contact</span><span class="token punctuation">(</span>swaggerProperties<span class="token punctuation">.</span><span class="token function">getContact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        swaggerProperties<span class="token punctuation">.</span><span class="token function">getContact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        swaggerProperties<span class="token punctuation">.</span><span class="token function">getContact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token comment">//\u7248\u672C\u53F7</span>
                <span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span>swaggerProperties<span class="token punctuation">.</span><span class="token function">getVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token comment">//\u63CF\u8FF0</span>
                <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span>swaggerProperties<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u521B\u5EFA\u63A5\u53E3\u6587\u6863\u5BF9\u8C61</span>
    <span class="token keyword">private</span> <span class="token class-name">Docket</span> <span class="token function">createDocket</span><span class="token punctuation">(</span><span class="token class-name">SwaggerProperties</span> swaggerProperties<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//API \u57FA\u7840\u4FE1\u606F</span>
        <span class="token class-name">ApiInfo</span> apiInfo <span class="token operator">=</span> <span class="token function">apiInfo</span><span class="token punctuation">(</span>swaggerProperties<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// base-path\u5904\u7406</span>
        <span class="token comment">// \u5F53\u6CA1\u6709\u914D\u7F6E\u4EFB\u4F55path\u7684\u65F6\u5019\uFF0C\u89E3\u6790/**</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>swaggerProperties<span class="token punctuation">.</span><span class="token function">getBasePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            swaggerProperties<span class="token punctuation">.</span><span class="token function">getBasePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Predicate</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> basePath <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> path <span class="token operator">:</span> swaggerProperties<span class="token punctuation">.</span><span class="token function">getBasePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            basePath<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">PathSelectors</span><span class="token punctuation">.</span><span class="token function">ant</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// exclude-path\u5904\u7406</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Predicate</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> excludePath <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> path <span class="token operator">:</span> swaggerProperties<span class="token punctuation">.</span><span class="token function">getExcludePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            excludePath<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">PathSelectors</span><span class="token punctuation">.</span><span class="token function">ant</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Docket</span><span class="token punctuation">(</span><span class="token class-name">DocumentationType</span><span class="token punctuation">.</span>SWAGGER_2<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">apiInfo</span><span class="token punctuation">(</span>apiInfo<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">groupName</span><span class="token punctuation">(</span>swaggerProperties<span class="token punctuation">.</span><span class="token function">getGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">apis</span><span class="token punctuation">(</span><span class="token class-name">RequestHandlerSelectors</span><span class="token punctuation">.</span><span class="token function">basePackage</span><span class="token punctuation">(</span>swaggerProperties<span class="token punctuation">.</span><span class="token function">getBasePackage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">paths</span><span class="token punctuation">(</span><span class="token class-name">Predicates</span><span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token class-name">Predicates</span><span class="token punctuation">.</span><span class="token function">not</span><span class="token punctuation">(</span><span class="token class-name">Predicates</span><span class="token punctuation">.</span><span class="token function">or</span><span class="token punctuation">(</span>excludePath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Predicates</span><span class="token punctuation">.</span><span class="token function">or</span><span class="token punctuation">(</span>basePath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBeanFactory</span><span class="token punctuation">(</span><span class="token class-name">BeanFactory</span> beanFactory<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>beanFactory <span class="token operator">=</span> beanFactory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="7"><li>\u521B\u5EFA\u542F\u52A8\u7C7BKnife4jDemoApplication</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>knife4j</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Knife4jDemoApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Knife4jDemoApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="8"><li>\u6267\u884C\u542F\u52A8\u7C7Bmain\u65B9\u6CD5\u542F\u52A8\u9879\u76EE\uFF0C\u8BBF\u95EE\u5730\u5740\uFF1Ahttp://localhost:7788/doc.html</li></ol><p><img src="`+L+`" alt="image-20220322221246413"></p><ol start="9"><li>\u5982\u679C\u63A5\u53E3\u6587\u6863\u4E0D\u5206\u7EC4\uFF0C\u6211\u4EEC\u53EF\u4EE5\u4FEE\u6539application.yml\u6587\u4EF6</li></ol><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">7788</span>
<span class="token key atrule">pinda</span><span class="token punctuation">:</span>
  <span class="token key atrule">swagger</span><span class="token punctuation">:</span>
    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#\u662F\u5426\u542F\u7528swagger</span>
    <span class="token key atrule">title</span><span class="token punctuation">:</span> test\u6A21\u5757
    <span class="token key atrule">base-package</span><span class="token punctuation">:</span> com.demo.knife4j.controller
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="10"><li>\u518D\u6B21\u8BBF\u95EE\u5730\u5740\uFF1Ahttp://localhost:7788/doc.html</li></ol><p><img src="`+C+`" alt="img"></p><p>\u53EF\u4EE5\u770B\u5230\u6240\u6709\u7684\u63A5\u53E3\u5728\u4E00\u4E2A\u5206\u7EC4\u4E2D</p><h3 id="pd-tools-swagger2\u4F7F\u7528"><a class="header-anchor" href="#pd-tools-swagger2\u4F7F\u7528" aria-hidden="true">#</a> pd-tools-swagger2\u4F7F\u7528</h3><p>\u901A\u8FC7\u4E0A\u9762\u7684\u5165\u95E8\u6848\u4F8B\u6211\u4EEC\u5DF2\u7ECF\u5B8C\u6210\u4E86\u63A5\u53E3\u6587\u6863\u7684\u76F8\u5173\u5F00\u53D1\uFF0C\u800Cpd-tools-swagger2\u6A21\u5757\u5C31\u662F\u4F7F\u7528\u8FD9\u79CD\u65B9\u5F0F\u5F00\u53D1\u7684\uFF0C\u5E76\u4E14\u6309\u7167Spring boot starter\u7684\u89C4\u8303\u5728/resources/META-INF\u4E2D\u63D0\u4F9Bspring.factories\u6587\u4EF6\uFF0C\u5185\u5BB9\u5982\u4E0B\uFF1A</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">org.springframework.boot.autoconfigure.EnableAutoConfiguration</span><span class="token punctuation">=</span><span class="token value attr-value">\\
    com.itheima.pinda.swagger2.SwaggerAutoConfiguration</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u6837\u6211\u4EEC\u5728\u5176\u4ED6\u6A21\u5757\u4E2D\u5982\u679C\u9700\u8981\u4F7F\u7528swagger\u63A5\u53E3\u6587\u6863\u529F\u80FD\uFF0C\u53EA\u9700\u8981\u5F15\u5165\u8FD9\u4E2Astarter\u5E76\u4E14\u5728application.yml\u4E2D\u8FDB\u884Cswagger\u7684\u76F8\u5173\u914D\u7F6E\u5373\u53EF\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">pinda</span><span class="token punctuation">:</span>
  <span class="token key atrule">swagger</span><span class="token punctuation">:</span>
    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#\u662F\u5426\u542F\u7528swagger</span>
    <span class="token key atrule">docket</span><span class="token punctuation">:</span>
      <span class="token key atrule">user</span><span class="token punctuation">:</span>
        <span class="token key atrule">title</span><span class="token punctuation">:</span> \u7528\u6237\u6A21\u5757
        <span class="token key atrule">base-package</span><span class="token punctuation">:</span> cn.itcast.controller.user
      <span class="token key atrule">menu</span><span class="token punctuation">:</span>
        <span class="token key atrule">title</span><span class="token punctuation">:</span> \u83DC\u5355\u6A21\u5757
        <span class="token key atrule">base-package</span><span class="token punctuation">:</span> cn.itcast.controller.menu
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u5177\u4F53\u4F7F\u7528\u8FC7\u7A0B"><a class="header-anchor" href="#\u5177\u4F53\u4F7F\u7528\u8FC7\u7A0B" aria-hidden="true">#</a> \u5177\u4F53\u4F7F\u7528\u8FC7\u7A0B</h4><ol><li>\u521B\u5EFAmaven\u5DE5\u7A0BmySwaggerApp\u5E76\u914D\u7F6Epom.xml</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.2.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mySwaggerApp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--\u5F15\u5165\u6211\u4EEC\u81EA\u5DF1\u5B9A\u4E49\u7684swagger\u57FA\u7840\u6A21\u5757--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>pd-tools-swagger2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u521B\u5EFAUser\u5B9E\u4F53\u7C7B</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>entity</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiModel</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiModelProperty</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@ApiModel</span><span class="token punctuation">(</span>description <span class="token operator">=</span> <span class="token string">&quot;\u7528\u6237\u5B9E\u4F53&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u4E3B\u952E&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u59D3\u540D&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u5E74\u9F84&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u5730\u5740&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u521B\u5EFAUserController</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Api</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiImplicitParam</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiImplicitParams</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiOperation</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Api</span><span class="token punctuation">(</span>tags <span class="token operator">=</span> <span class="token string">&quot;\u7528\u6237\u63A7\u5236\u5668&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/getUsers&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u67E5\u8BE2\u6240\u6709\u7528\u6237&quot;</span><span class="token punctuation">,</span> notes <span class="token operator">=</span> <span class="token string">&quot;\u67E5\u8BE2\u6240\u6709\u7528\u6237\u4FE1\u606F&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAllUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;itcast&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setAddress</span><span class="token punctuation">(</span><span class="token string">&quot;bj&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> list<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/save&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u65B0\u589E\u7528\u6237&quot;</span><span class="token punctuation">,</span> notes <span class="token operator">=</span> <span class="token string">&quot;\u65B0\u589E\u7528\u6237\u4FE1\u606F&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@PutMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/update&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u4FEE\u6539\u7528\u6237&quot;</span><span class="token punctuation">,</span> notes <span class="token operator">=</span> <span class="token string">&quot;\u4FEE\u6539\u7528\u6237\u4FE1\u606F&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@DeleteMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/delete&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u5220\u9664\u7528\u6237&quot;</span><span class="token punctuation">,</span> notes <span class="token operator">=</span> <span class="token string">&quot;\u5220\u9664\u7528\u6237\u4FE1\u606F&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@ApiImplicitParams</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token annotation punctuation">@ApiImplicitParam</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;pageNum&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;\u9875\u7801&quot;</span><span class="token punctuation">,</span>
                    required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token string">&quot;Integer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@ApiImplicitParam</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;pageSize&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;\u6BCF\u9875\u6761\u6570&quot;</span><span class="token punctuation">,</span>
                    required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token string">&quot;Integer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u5206\u9875\u67E5\u8BE2\u7528\u6237\u4FE1\u606F&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;page/{pageNum}/{pageSize}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">findByPage</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> pageNum<span class="token punctuation">,</span>
                             <span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> pageSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u521B\u5EFAapplication.yml</li></ol><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>
<span class="token key atrule">pinda</span><span class="token punctuation">:</span>
  <span class="token key atrule">swagger</span><span class="token punctuation">:</span>
    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">title</span><span class="token punctuation">:</span> \u5728\u7EBF\u63A5\u53E3\u6587\u6863
    <span class="token key atrule">base-package</span><span class="token punctuation">:</span> com.itheima.controller
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>\u521B\u5EFA\u542F\u52A8\u7C7B</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MySwaggerApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">MySwaggerApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li>\u542F\u52A8\u9879\u76EE\uFF0C\u8BBF\u95EE\u5730\u5740\uFF1Ahttp://localhost:8080/doc.html</li></ol><p><img src="`+T+`" alt="img"></p><h4 id="\u5B9E\u73B0\u539F\u7406"><a class="header-anchor" href="#\u5B9E\u73B0\u539F\u7406" aria-hidden="true">#</a> \u5B9E\u73B0\u539F\u7406</h4><p>\u5F85\u5B8C\u6210</p><h2 id="pd-tools-dozer"><a class="header-anchor" href="#pd-tools-dozer" aria-hidden="true">#</a> pd-tools-dozer</h2><p>pd-tools-dozer\u6A21\u5757\u5B9A\u4F4D\u4E3A\u5BF9\u8C61\u8F6C\u6362\uFF0C\u5176\u672C\u8D28\u5C31\u662F\u4E00\u4E2ASpring Boot starter\uFF0C\u5176\u4ED6\u6A21\u5757\u53EF\u4EE5\u76F4\u63A5\u5BFC\u5165\u6B64\u6A21\u5757\u5C31\u53EF\u4EE5\u76F4\u63A5\u5B8C\u6210\u5BF9\u8C61\u8F6C\u6362\u4E86</p><h3 id="dozer\u4ECB\u7ECD"><a class="header-anchor" href="#dozer\u4ECB\u7ECD" aria-hidden="true">#</a> dozer\u4ECB\u7ECD</h3><p>Dozer\u662FJava Bean\u5230Java Bean\u6620\u5C04\u5668\uFF0C\u5B83\u4EE5\u9012\u5F52\u65B9\u5F0F\u5C06\u6570\u636E\u4ECE\u4E00\u4E2A\u5BF9\u8C61\u590D\u5236\u5230\u53E6\u4E00\u4E2A\u5BF9\u8C61\u3002 dozer\u662F\u7528\u6765\u5BF9\u4E24\u4E2A\u5BF9\u8C61\u4E4B\u95F4\u5C5E\u6027\u8F6C\u6362\u7684\u5DE5\u5177\uFF0C\u6709\u4E86\u8FD9\u4E2A\u5DE5\u5177\u4E4B\u540E\uFF0C\u6211\u4EEC\u5C06\u4E00\u4E2A\u5BF9\u8C61\u7684\u6240\u6709\u5C5E\u6027\u503C\u8F6C\u7ED9\u53E6\u4E00\u4E2A\u5BF9\u8C61\u65F6\uFF0C\u5C31\u4E0D\u9700\u8981\u518D\u53BB\u5199\u91CD\u590D\u7684\u8C03\u7528set\u548Cget\u65B9\u6CD5\u4E86\u3002dozer\u5176\u5B9E\u662F\u5BF9\u6211\u4EEC\u719F\u77E5\u7684beanutils\u7684\u5C01\u88C5</p><p>dozer\u7684maven\u5750\u6807\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.github.dozermapper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>dozer-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>6.5.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E3A\u4E86\u7B80\u5316\u4F7F\u7528\u65B9\u5F0F\uFF0Cdozer\u8FD8\u63D0\u4F9B\u4E86starter\uFF0C\u5176maven\u5750\u6807\u4E3A\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.github.dozermapper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>dozer-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>6.5.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="dozer\u5165\u95E8\u6848\u4F8B"><a class="header-anchor" href="#dozer\u5165\u95E8\u6848\u4F8B" aria-hidden="true">#</a> dozer\u5165\u95E8\u6848\u4F8B</h3><ol><li>\u521B\u5EFAmaven\u5DE5\u7A0Bdozer_demo\u5E76\u914D\u7F6Epom.xml\u6587\u4EF6</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.2.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>cn.itcast<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>dozer_demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.github.dozermapper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>dozer-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>6.5.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u521B\u5EFAUserDTO\u548CUserEntity</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>dto</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>
<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDTO</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> userId<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> userName<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> userAge<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> birthday<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>entity</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>
<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserEntity</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> birthday<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u5728resources/dozer/\u76EE\u5F55\u4E0B\u521B\u5EFAdozer\u7684\u5168\u5C40\u914D\u7F6E\u6587\u4EF6global.dozer.xml</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappings</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://dozermapper.github.io/schema/bean-mapping<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://dozermapper.github.io/schema/bean-mapping 
                              http://dozermapper.github.io/schema/bean-mapping.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--
    \u5168\u5C40\u914D\u7F6E:
    &lt;date-format&gt;\u8868\u793A\u65E5\u671F\u683C\u5F0F
     --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>date-format</span><span class="token punctuation">&gt;</span></span>yyyy-MM-dd<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>date-format</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappings</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6CE8\uFF1A\u5168\u5C40\u914D\u7F6E\u6587\u4EF6\u540D\u79F0\u53EF\u4EE5\u4EFB\u610F</p><ol start="4"><li>\u5728resources/dozer/\u76EE\u5F55\u4E0B\u521B\u5EFAdozer\u7684\u6620\u5C04\u6587\u4EF6biz.dozer.xml</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappings</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://dozermapper.github.io/schema/bean-mapping<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://dozermapper.github.io/schema/bean-mapping
                             http://dozermapper.github.io/schema/bean-mapping.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--\u63CF\u8FF0\u4E24\u4E2A\u7C7B\u4E2D\u5C5E\u6027\u7684\u5BF9\u5E94\u5173\u7CFB\uFF0C\u5BF9\u4E8E\u4E24\u4E2A\u7C7B\u4E2D\u540C\u540D\u7684\u5C5E\u6027\u53EF\u4EE5\u4E0D\u6620\u5C04--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapping</span> <span class="token attr-name">date-format</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>yyyy-MM-dd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class-a</span><span class="token punctuation">&gt;</span></span>com.itheima.entity.UserEntity<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class-a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class-b</span><span class="token punctuation">&gt;</span></span>com.itheima.dto.UserDTO<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class-b</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">&gt;</span></span>id<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">&gt;</span></span>userId<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>field</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">&gt;</span></span>name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">&gt;</span></span>userName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>field</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">&gt;</span></span>age<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">&gt;</span></span>userAge<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>field</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapping</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!--
	\u53EF\u4EE5\u4F7F\u7528map-id\u6307\u5B9A\u6620\u5C04\u7684\u6807\u8BC6\uFF0C\u5728\u7A0B\u5E8F\u4E2D\u901A\u8FC7\u6B64\u6807\u8BC6\u6765\u786E\u5B9A\u4F7F\u7528\u5F53\u524D\u8FD9\u4E2A\u6620\u5C04\u5173\u7CFB
	--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapping</span> <span class="token attr-name">date-format</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>yyyy-MM-dd<span class="token punctuation">&quot;</span></span> <span class="token attr-name">map-id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class-a</span><span class="token punctuation">&gt;</span></span>com.itheima.entity.UserEntity<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class-a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class-b</span><span class="token punctuation">&gt;</span></span>com.itheima.dto.UserDTO<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class-b</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">&gt;</span></span>id<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">&gt;</span></span>userId<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>field</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">&gt;</span></span>name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">&gt;</span></span>userName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>field</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">&gt;</span></span>age<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">&gt;</span></span>userAge<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>field</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapping</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappings</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6CE8\uFF1A\u6620\u5C04\u6587\u4EF6\u540D\u79F0\u53EF\u4EE5\u4EFB\u610F</p><ol start="5"><li>\u7F16\u5199application.yml\u6587\u4EF6</li></ol><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">dozer</span><span class="token punctuation">:</span>
  <span class="token key atrule">mappingFiles</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> classpath<span class="token punctuation">:</span>dozer/global.dozer.xml
    <span class="token punctuation">-</span> classpath<span class="token punctuation">:</span>dozer/biz.dozer.xml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li>\u7F16\u5199\u542F\u52A8\u7C7BDozerApp</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DozerApp</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">DozerApp</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="7"><li>\u7F16\u5199\u5355\u5143\u6D4B\u8BD5DozerTest</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>test</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>dozermapper<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">DozerBeanMapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>dozermapper<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">DozerBeanMapperBuilder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>dozermapper<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">Mapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>dozermapper<span class="token punctuation">.</span>core<span class="token punctuation">.</span>metadata<span class="token punctuation">.</span></span><span class="token class-name">MappingMetadata</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span></span><span class="token class-name">DozerApp</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">UserDTO</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">UserEntity</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runner<span class="token punctuation">.</span></span><span class="token class-name">RunWith</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">SpringBootTest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span></span><span class="token class-name">SpringRunner</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SpringBootTest</span><span class="token punctuation">(</span>classes <span class="token operator">=</span> <span class="token class-name">DozerApp</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DozerTest</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">Mapper</span> mapper<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDozer1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">UserDTO</span> userDTO <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserDTO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userDTO<span class="token punctuation">.</span><span class="token function">setUserId</span><span class="token punctuation">(</span><span class="token string">&quot;100&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userDTO<span class="token punctuation">.</span><span class="token function">setUserName</span><span class="token punctuation">(</span><span class="token string">&quot;itcast&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userDTO<span class="token punctuation">.</span><span class="token function">setUserAge</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userDTO<span class="token punctuation">.</span><span class="token function">setAddress</span><span class="token punctuation">(</span><span class="token string">&quot;bj&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userDTO<span class="token punctuation">.</span><span class="token function">setBirthday</span><span class="token punctuation">(</span><span class="token string">&quot;2010-11-20&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">UserEntity</span> user <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>userDTO<span class="token punctuation">,</span> <span class="token class-name">UserEntity</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDozer2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">UserDTO</span> userDTO <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserDTO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userDTO<span class="token punctuation">.</span><span class="token function">setUserId</span><span class="token punctuation">(</span><span class="token string">&quot;100&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userDTO<span class="token punctuation">.</span><span class="token function">setUserName</span><span class="token punctuation">(</span><span class="token string">&quot;itcast&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userDTO<span class="token punctuation">.</span><span class="token function">setUserAge</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userDTO<span class="token punctuation">.</span><span class="token function">setAddress</span><span class="token punctuation">(</span><span class="token string">&quot;bj&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userDTO<span class="token punctuation">.</span><span class="token function">setBirthday</span><span class="token punctuation">(</span><span class="token string">&quot;2010-11-20&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">UserEntity</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserEntity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token string">&quot;200&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mapper<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>userDTO<span class="token punctuation">,</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDozer3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">UserDTO</span> userDTO <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserDTO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userDTO<span class="token punctuation">.</span><span class="token function">setUserId</span><span class="token punctuation">(</span><span class="token string">&quot;100&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userDTO<span class="token punctuation">.</span><span class="token function">setUserName</span><span class="token punctuation">(</span><span class="token string">&quot;itcast&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userDTO<span class="token punctuation">.</span><span class="token function">setUserAge</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userDTO<span class="token punctuation">.</span><span class="token function">setAddress</span><span class="token punctuation">(</span><span class="token string">&quot;bj&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">UserEntity</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserEntity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mapper<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>userDTO<span class="token punctuation">,</span>user<span class="token punctuation">,</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="pd-tools-dozer\u4F7F\u7528"><a class="header-anchor" href="#pd-tools-dozer\u4F7F\u7528" aria-hidden="true">#</a> pd-tools-dozer\u4F7F\u7528</h3><p>\u5728pd-tools-dozer\u6A21\u5757\u4E2D\u4E3A\u4E86\u8FDB\u4E00\u6B65\u7B80\u5316\u64CD\u4F5C\uFF0C\u5C01\u88C5\u4E86\u4E00\u4E2A\u5DE5\u5177\u7C7BDozerUtils\uFF0C\u5176\u5185\u90E8\u4F7F\u7528\u7684\u5C31\u662FMapper\u5BF9\u8C61\u8FDB\u884C\u7684\u64CD\u4F5C\u3002\u5E76\u4E14\u6309\u7167Spring Boot starter\u7684\u89C4\u8303\u7F16\u5199/resources/META-INF/spring.factories\u6587\u4EF6\uFF0C\u5185\u5BB9\u5982\u4E0B\uFF1A</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">org.springframework.boot.autoconfigure.EnableAutoConfiguration</span><span class="token punctuation">=</span><span class="token value attr-value">\\
    com.itheima.pinda.dozer.DozerAutoConfiguration</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728\u914D\u7F6E\u7C7BDozerAutoConfiguration\u4E2D\u5B8C\u6210DozerUtils\u5BF9\u8C61\u7684\u521B\u5EFA\uFF0C\u8FD9\u6837\u5176\u4ED6\u7684\u7A0B\u5E8F\u5982\u679C\u9700\u8981\u4F7F\u7528dozer\u8FDB\u884C\u5BF9\u8C61\u8F6C\u6362\uFF0C\u53EA\u9700\u8981\u5F15\u5165\u8FD9\u4E2A\u6A21\u5757\u7684maven\u5750\u6807\u5E76\u4E14\u63D0\u4F9B\u5BF9\u5E94\u7684\u6620\u5C04\u6587\u4EF6\u5C31\u53EF\u4EE5\u5728\u7A0B\u5E8F\u4E2D\u76F4\u63A5\u6CE8\u5165DozerUtils\u5BF9\u8C61\u8FDB\u884C\u64CD\u4F5C\u4E86</p><p><strong>\u5177\u4F53\u4F7F\u7528\u8FC7\u7A0B\uFF1A</strong></p><ol><li>\u521B\u5EFAmaven\u5DE5\u7A0BmyDozerApp\u5E76\u914D\u7F6Epom.xml</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 
                             http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.2.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>myDozerApp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--\u5F15\u5165\u6211\u4EEC\u81EA\u5DF1\u5B9A\u4E49\u7684dozer\u57FA\u7840\u6A21\u5757--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>pd-tools-dozer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u521B\u5EFAUserEntity\u548CUserDTO</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>entity</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserEntity</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>dto</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDTO</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u521B\u5EFAUserController</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">UserDTO</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">UserEntity</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pinda<span class="token punctuation">.</span>dozer<span class="token punctuation">.</span></span><span class="token class-name">DozerUtils</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">DozerUtils</span> dozerUtils<span class="token punctuation">;</span> <span class="token comment">//\u5728pd-tools-dozer\u4E2D\u5DF2\u7ECF\u5B8C\u6210\u4E86\u81EA\u52A8\u914D\u7F6E\uFF0C\u53EF\u4EE5\u76F4\u63A5\u6CE8\u5165</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/mapper&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">UserEntity</span> <span class="token function">mapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">UserDTO</span> userDTO <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserDTO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userDTO<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userDTO<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;itcast&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userDTO<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">UserEntity</span> userEntity <span class="token operator">=</span> dozerUtils<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>userDTO<span class="token punctuation">,</span> <span class="token class-name">UserEntity</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> userEntity<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u521B\u5EFAapplication.yml</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>server:
  port: 8080
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>\u521B\u5EFA\u542F\u52A8\u7C7B</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyDozerApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">MyDozerApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li>\u542F\u52A8\u9879\u76EE\uFF0C\u8BBF\u95EE\u5730\u5740\uFF1Ahttp://localhost:8080/user/mapper</li></ol><p><img src="`+O+`" alt="img"></p><p>\u6CE8\u610F\uFF1A\u7531\u4E8E\u5F53\u524D\u6211\u4EEC\u521B\u5EFA\u7684UserEntity\u548CUserDTO\u4E2D\u7684\u5C5E\u6027\u5B8C\u5168\u4E00\u81F4\uFF0C\u6240\u4EE5\u5E76\u6CA1\u6709\u63D0\u4F9B\u6620\u5C04\u6587\u4EF6\uFF0C\u5982\u679C\u8FD9\u4E24\u4E2A\u7C7B\u4E2D\u7684\u5C5E\u6027\u5B58\u5728\u4E0D\u4E00\u81F4\u7684\u60C5\u51B5\uFF0C\u9700\u8981\u521B\u5EFA\u6620\u5C04\u6587\u4EF6\u8FDB\u884C\u6620\u5C04\uFF0C\u5E76\u4E14\u8FD8\u9700\u8981\u5728application.yml\u4E2D\u914D\u7F6E\u6620\u5C04\u6587\u4EF6\u7684\u4F4D\u7F6E\uFF0C\u4F8B\u5982\uFF1A</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">dozer</span><span class="token punctuation">:</span>
  <span class="token key atrule">mappingFiles</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> classpath<span class="token punctuation">:</span>dozer/biz.dozer.xml  <span class="token comment">#\u6307\u5B9Adozer\u7684\u6620\u5C04\u6587\u4EF6\u4F4D\u7F6E</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="pd-tools-validator"><a class="header-anchor" href="#pd-tools-validator" aria-hidden="true">#</a> pd-tools-validator</h2><p>pd-tools-validator\u6A21\u5757\u5B9A\u4F4D\u4E3A\u540E\u7AEF\u8868\u5355\u6570\u636E\u6821\u9A8C\uFF0C\u5176\u4ED6\u6A21\u5757\u53EF\u4EE5\u76F4\u63A5\u5F15\u5165pd-tools-validator\u7684maven\u5750\u6807\u5C31\u53EF\u4EE5\u4F7F\u7528\u5176\u63D0\u4F9B\u7684\u8868\u5355\u6821\u9A8C\u529F\u80FD\u3002pd-tools-validator\u5E95\u5C42\u57FA\u4E8Ehibernate-validator\u5B9E\u73B0</p><h3 id="hibernate-validator\u4ECB\u7ECD"><a class="header-anchor" href="#hibernate-validator\u4ECB\u7ECD" aria-hidden="true">#</a> hibernate-validator\u4ECB\u7ECD</h3><p>\u65E9\u671F\u7684\u7F51\u7AD9\uFF0C\u7528\u6237\u8F93\u5165\u4E00\u4E2A\u90AE\u7BB1\u5730\u5740\uFF0C\u9700\u8981\u5C06\u90AE\u7BB1\u5730\u5740\u53D1\u9001\u5230\u670D\u52A1\u7AEF\uFF0C\u670D\u52A1\u7AEF\u8FDB\u884C\u6821\u9A8C\uFF0C\u6821\u9A8C\u6210\u529F\u540E\uFF0C\u7ED9\u524D\u7AEF\u4E00\u4E2A\u54CD\u5E94</p><p>\u6709\u4E86JavaScript\u540E\uFF0C\u6821\u9A8C\u5DE5\u4F5C\u53EF\u4EE5\u653E\u5728\u524D\u7AEF\u53BB\u6267\u884C\u3002\u90A3\u4E48\u4E3A\u4EC0\u4E48\u8FD8\u9700\u8981\u670D\u52A1\u7AEF\u6821\u9A8C\u5462\uFF1F \u56E0\u4E3A\u524D\u7AEF\u4F20\u6765\u7684\u6570\u636E\u4E0D\u53EF\u4FE1\u3002\u524D\u7AEF\u5F88\u5BB9\u6613\u83B7\u53D6\u5230\u540E\u7AEF\u7684\u63A5\u53E3\uFF0C\u5982\u679C\u6709\u4EBA\u76F4\u63A5\u8C03\u7528\u63A5\u53E3\uFF0C\u5C31\u53EF\u80FD\u4F1A\u51FA\u73B0\u975E\u6CD5\u6570\u636E\uFF0C\u6240\u4EE5\u670D\u52A1\u7AEF\u4E5F\u8981\u6570\u636E\u6821\u9A8C</p><p>\u603B\u7684\u6765\u8BF4\uFF1A</p><ul><li>\u524D\u7AEF\u6821\u9A8C\uFF1A\u4E3B\u8981\u662F\u63D0\u9AD8\u7528\u6237\u4F53\u9A8C</li><li>\u540E\u7AEF\u6821\u9A8C\uFF1A\u4E3B\u8981\u662F\u4FDD\u8BC1\u6570\u636E\u5B89\u5168\u53EF\u9760</li></ul><p>\u6821\u9A8C\u53C2\u6570\u57FA\u672C\u4E0A\u662F\u4E00\u4E2A\u4F53\u529B\u6D3B\uFF0C\u800C\u4E14\u5197\u4F59\u4EE3\u7801\u7E41\u591A\uFF0C\u4E5F\u5F71\u54CD\u4EE3\u7801\u7684\u53EF\u8BFB\u6027\uFF0C\u6211\u4EEC\u9700\u8981\u4E00\u4E2A\u6BD4\u8F83\u4F18\u96C5\u7684\u65B9\u5F0F\u6765\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\u3002Hibernate Validator \u6846\u67B6\u521A\u597D\u89E3\u51B3\u4E86\u8FD9\u4E2A\u95EE\u9898\uFF0C\u53EF\u4EE5\u4EE5\u5F88\u4F18\u96C5\u7684\u65B9\u5F0F\u5B9E\u73B0\u53C2\u6570\u7684\u6821\u9A8C\uFF0C\u8BA9\u4E1A\u52A1\u4EE3\u7801\u548C\u6821\u9A8C\u903B\u8F91\u5206\u5F00,\u4E0D\u518D\u7F16\u5199\u91CD\u590D\u7684\u6821\u9A8C\u903B\u8F91</p><p>hibernate-validator\u4F18\u52BF\uFF1A</p><ul><li>\u9A8C\u8BC1\u903B\u8F91\u4E0E\u4E1A\u52A1\u903B\u8F91\u4E4B\u95F4\u8FDB\u884C\u4E86\u5206\u79BB\uFF0C\u964D\u4F4E\u4E86\u7A0B\u5E8F\u8026\u5408\u5EA6</li><li>\u7EDF\u4E00\u4E14\u89C4\u8303\u7684\u9A8C\u8BC1\u65B9\u5F0F\uFF0C\u65E0\u9700\u4F60\u518D\u6B21\u7F16\u5199\u91CD\u590D\u7684\u9A8C\u8BC1\u4EE3\u7801</li><li>\u4F60\u5C06\u66F4\u4E13\u6CE8\u4E8E\u4F60\u7684\u4E1A\u52A1\uFF0C\u5C06\u8FD9\u4E9B\u7E41\u7410\u7684\u4E8B\u60C5\u7EDF\u7EDF\u4E22\u5728\u4E00\u8FB9</li></ul><p>hibernate-validator\u7684maven\u5750\u6807\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.hibernate<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hibernate-validator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>6.0.18.Final<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="hibernate-validator\u5E38\u7528\u6CE8\u89E3"><a class="header-anchor" href="#hibernate-validator\u5E38\u7528\u6CE8\u89E3" aria-hidden="true">#</a> hibernate-validator\u5E38\u7528\u6CE8\u89E3</h3><p>hibernate-validator\u63D0\u4F9B\u7684\u6821\u9A8C\u65B9\u5F0F\u4E3A\u5728\u7C7B\u7684\u5C5E\u6027\u4E0A\u52A0\u5165\u76F8\u5E94\u7684\u6CE8\u89E3\u6765\u8FBE\u5230\u6821\u9A8C\u7684\u76EE\u7684\u3002hibernate-validator\u63D0\u4F9B\u7684\u7528\u4E8E\u6821\u9A8C\u7684\u6CE8\u89E3\u5982\u4E0B\uFF1A</p><table><thead><tr><th>\u6CE8\u89E3</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td>@AssertTrue</td><td>\u7528\u4E8Eboolean\u5B57\u6BB5\uFF0C\u8BE5\u5B57\u6BB5\u53EA\u80FD\u4E3Atrue</td></tr><tr><td>@AssertFalse</td><td>\u7528\u4E8Eboolean\u5B57\u6BB5\uFF0C\u8BE5\u5B57\u6BB5\u53EA\u80FD\u4E3Afalse</td></tr><tr><td>@CreditCardNumber</td><td>\u5BF9\u4FE1\u7528\u5361\u53F7\u8FDB\u884C\u4E00\u4E2A\u5927\u81F4\u7684\u9A8C\u8BC1</td></tr><tr><td>@DecimalMax</td><td>\u53EA\u80FD\u5C0F\u4E8E\u6216\u7B49\u4E8E\u8BE5\u503C</td></tr><tr><td>@DecimalMin</td><td>\u53EA\u80FD\u5927\u4E8E\u6216\u7B49\u4E8E\u8BE5\u503C</td></tr><tr><td>@Email</td><td>\u68C0\u67E5\u662F\u5426\u662F\u4E00\u4E2A\u6709\u6548\u7684email\u5730\u5740</td></tr><tr><td>@Future</td><td>\u68C0\u67E5\u8BE5\u5B57\u6BB5\u7684\u65E5\u671F\u662F\u5426\u662F\u5C5E\u4E8E\u5C06\u6765\u7684\u65E5\u671F</td></tr><tr><td>@Length(min=,max=)</td><td>\u68C0\u67E5\u6240\u5C5E\u7684\u5B57\u6BB5\u7684\u957F\u5EA6\u662F\u5426\u5728min\u548Cmax\u4E4B\u95F4,\u53EA\u80FD\u7528\u4E8E\u5B57\u7B26\u4E32</td></tr><tr><td>@Max</td><td>\u8BE5\u5B57\u6BB5\u7684\u503C\u53EA\u80FD\u5C0F\u4E8E\u6216\u7B49\u4E8E\u8BE5\u503C</td></tr><tr><td>@Min</td><td>\u8BE5\u5B57\u6BB5\u7684\u503C\u53EA\u80FD\u5927\u4E8E\u6216\u7B49\u4E8E\u8BE5\u503C</td></tr><tr><td>@NotNull</td><td>\u4E0D\u80FD\u4E3Anull</td></tr><tr><td>@NotBlank</td><td>\u4E0D\u80FD\u4E3A\u7A7A\uFF0C\u68C0\u67E5\u65F6\u4F1A\u5C06\u7A7A\u683C\u5FFD\u7565</td></tr><tr><td>@NotEmpty</td><td>\u4E0D\u80FD\u4E3A\u7A7A\uFF0C\u8FD9\u91CC\u7684\u7A7A\u662F\u6307\u7A7A\u5B57\u7B26\u4E32</td></tr><tr><td>@Pattern(regex=)</td><td>\u88AB\u6CE8\u91CA\u7684\u5143\u7D20\u5FC5\u987B\u7B26\u5408\u6307\u5B9A\u7684\u6B63\u5219\u8868\u8FBE\u5F0F</td></tr><tr><td>@URL(protocol=,host,port)</td><td>\u68C0\u67E5\u662F\u5426\u662F\u4E00\u4E2A\u6709\u6548\u7684URL\uFF0C\u5982\u679C\u63D0\u4F9B\u4E86protocol\uFF0Chost\u7B49\uFF0C\u5219\u8BE5URL\u8FD8\u9700\u6EE1\u8DB3\u63D0\u4F9B\u7684\u6761\u4EF6</td></tr></tbody></table><h3 id="hibernate-validator\u5165\u95E8\u6848\u4F8B"><a class="header-anchor" href="#hibernate-validator\u5165\u95E8\u6848\u4F8B" aria-hidden="true">#</a> hibernate-validator\u5165\u95E8\u6848\u4F8B</h3><ol><li>\u521B\u5EFAmaven\u5DE5\u7A0Bhibernate-validator_demo\u5E76\u914D\u7F6Epom.xml\u6587\u4EF6</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 
                             http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.2.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>cn.itcast<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hibernate-validator_demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--
		spring-boot-starter-web\u4E2D\u5DF2\u7ECF\u4F9D\u8D56\u4E86hibernate-validator
		--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--
		&lt;dependency&gt;
              &lt;groupId&gt;org.hibernate&lt;/groupId&gt;
              &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;
              &lt;version&gt;6.0.18.Final&lt;/version&gt;
        &lt;/dependency&gt;
		--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6CE8\u610F\uFF1Aspring-boot-starter-web\u4E2D\u5DF2\u7ECF\u4F9D\u8D56\u4E86hibernate-validator\uFF0C\u6240\u4EE5\u65E0\u9700\u518D\u6B21\u5BFC\u5165</p><ol start="2"><li>\u521B\u5EFAUser\u7C7B</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>entity</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>hibernate<span class="token punctuation">.</span>validator<span class="token punctuation">.</span>constraints<span class="token punctuation">.</span></span><span class="token class-name">Length</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>validation<span class="token punctuation">.</span>constraints<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@NotNull</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">&quot;\u7528\u6237id\u4E0D\u80FD\u4E3A\u7A7A&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@NotEmpty</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">&quot;\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Length</span><span class="token punctuation">(</span>max <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">,</span> message <span class="token operator">=</span> <span class="token string">&quot;\u7528\u6237\u540D\u957F\u5EA6\u4E0D\u80FD\u8D85\u8FC750&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Max</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">,</span>message <span class="token operator">=</span> <span class="token string">&quot;\u5E74\u9F84\u6700\u5927\u4E3A80&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Min</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">,</span>message <span class="token operator">=</span> <span class="token string">&quot;\u5E74\u9F84\u6700\u5C0F\u4E3A18&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Pattern</span><span class="token punctuation">(</span>regexp <span class="token operator">=</span> <span class="token string">&quot;[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\\\\.[a-zA-Z0-9_-]+)+$&quot;</span><span class="token punctuation">,</span>
             message <span class="token operator">=</span> <span class="token string">&quot;\u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u521B\u5EFAUserController</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>validation<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Validated</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>validation<span class="token punctuation">.</span>constraints<span class="token punctuation">.</span></span><span class="token class-name">NotBlank</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Validated</span> <span class="token comment">//\u5F00\u542F\u6821\u9A8C\u529F\u80FD</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u7B80\u5355\u6570\u636E\u7C7B\u578B\u6821\u9A8C</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/delete&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NotBlank</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">&quot;id\u4E0D\u80FD\u4E3A\u7A7A&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;delete...&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5BF9\u8C61\u5C5E\u6027\u6821\u9A8C</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/save&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Validated</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;save...&quot;</span> <span class="token operator">+</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u521B\u5EFAapplication.yml</li></ol><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9100</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>\u521B\u5EFA\u542F\u52A8\u7C7B</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HibernateValidatorApp</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">HibernateValidatorApp</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u542F\u52A8\u9879\u76EE\uFF0C\u8BBF\u95EE\u5730\u5740\uFF1Ahttp://localhost:9100/user/save\uFF0C\u901A\u8FC7\u63A7\u5236\u53F0\u8F93\u51FA\u53EF\u4EE5\u770B\u5230\u5DF2\u7ECF\u53EF\u4EE5\u8FDB\u884C\u6570\u636E\u6821\u9A8C\u4E86\uFF0C\u5982\u4E0B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>Field error <span class="token keyword">in</span> object <span class="token string">&#39;user&#39;</span> on field <span class="token string">&#39;age&#39;</span><span class="token builtin class-name">:</span> rejected value <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span> codes <span class="token punctuation">[</span>Min.user.age,Min.age,Min.int,Min<span class="token punctuation">]</span><span class="token punctuation">;</span> arguments <span class="token punctuation">[</span>org.springframework.context.support.DefaultMessageSourceResolvable: codes <span class="token punctuation">[</span>user.age,age<span class="token punctuation">]</span><span class="token punctuation">;</span> arguments <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> default message <span class="token punctuation">[</span>age<span class="token punctuation">]</span>,18<span class="token punctuation">]</span><span class="token punctuation">;</span> default message <span class="token punctuation">[</span>\u5E74\u9F84\u6700\u5C0F\u4E3A18<span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token number">2020</span>-03-02 <span class="token number">16</span>:44:35.504  WARN <span class="token number">14896</span> --- <span class="token punctuation">[</span>nio-9100-exec-3<span class="token punctuation">]</span> .w.s.m.s.DefaultHandlerExceptionResolver <span class="token builtin class-name">:</span> Resolved <span class="token punctuation">[</span>org.springframework.validation.BindException: org.springframework.validation.BeanPropertyBindingResult: <span class="token number">3</span> errors
Field error <span class="token keyword">in</span> object <span class="token string">&#39;user&#39;</span> on field <span class="token string">&#39;id&#39;</span><span class="token builtin class-name">:</span> rejected value <span class="token punctuation">[</span>null<span class="token punctuation">]</span><span class="token punctuation">;</span> codes <span class="token punctuation">[</span>NotNull.user.id,NotNull.id,NotNull.java.lang.Integer,NotNull<span class="token punctuation">]</span><span class="token punctuation">;</span> arguments <span class="token punctuation">[</span>org.springframework.context.support.DefaultMessageSourceResolvable: codes <span class="token punctuation">[</span>user.id,id<span class="token punctuation">]</span><span class="token punctuation">;</span> arguments <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> default message <span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> default message <span class="token punctuation">[</span>\u7528\u6237id\u4E0D\u80FD\u4E3A\u7A7A<span class="token punctuation">]</span>
Field error <span class="token keyword">in</span> object <span class="token string">&#39;user&#39;</span> on field <span class="token string">&#39;age&#39;</span><span class="token builtin class-name">:</span> rejected value <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> codes <span class="token punctuation">[</span>Min.user.age,Min.age,Min.int,Min<span class="token punctuation">]</span><span class="token punctuation">;</span> arguments <span class="token punctuation">[</span>org.springframework.context.support.DefaultMessageSourceResolvable: codes <span class="token punctuation">[</span>user.age,age<span class="token punctuation">]</span><span class="token punctuation">;</span> arguments <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> default message <span class="token punctuation">[</span>age<span class="token punctuation">]</span>,18<span class="token punctuation">]</span><span class="token punctuation">;</span> default message <span class="token punctuation">[</span>\u5E74\u9F84\u6700\u5C0F\u4E3A18<span class="token punctuation">]</span>
Field error <span class="token keyword">in</span> object <span class="token string">&#39;user&#39;</span> on field <span class="token string">&#39;username&#39;</span><span class="token builtin class-name">:</span> rejected value <span class="token punctuation">[</span>null<span class="token punctuation">]</span><span class="token punctuation">;</span> codes <span class="token punctuation">[</span>NotEmpty.user.username,NotEmpty.username,NotEmpty.java.lang.String,NotEmpty<span class="token punctuation">]</span><span class="token punctuation">;</span> arguments <span class="token punctuation">[</span>org.springframework.context.support.DefaultMessageSourceResolvable: codes <span class="token punctuation">[</span>user.username,username<span class="token punctuation">]</span><span class="token punctuation">;</span> arguments <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> default message <span class="token punctuation">[</span>username<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> default message <span class="token punctuation">[</span>\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A<span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6D4F\u89C8\u5668\u9875\u9762\u76F4\u63A5\u62A5\u9519\uFF1A</p><p><img src="`+E+`" alt="img"></p><ol start="6"><li>\u4E3A\u4E86\u80FD\u591F\u5728\u9875\u9762\u53CB\u597D\u7684\u663E\u793A\u6570\u636E\u6821\u9A8C\u7ED3\u679C\uFF0C\u53EF\u4EE5\u901A\u8FC7\u5168\u5C40\u5F02\u5E38\u5904\u7406\u6765\u89E3\u51B3\uFF0C\u521B\u5EFA\u5168\u5C40\u5F02\u5E38\u5904\u7406\u7C7B</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Controller</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>validation<span class="token punctuation">.</span></span><span class="token class-name">BindException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ControllerAdvice</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ExceptionHandler</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ResponseBody</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>validation<span class="token punctuation">.</span></span><span class="token class-name">ConstraintViolation</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>validation<span class="token punctuation">.</span></span><span class="token class-name">ConstraintViolationException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Set</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * \u5168\u5C40\u5F02\u5E38\u5904\u7406
 */</span>
<span class="token annotation punctuation">@ControllerAdvice</span><span class="token punctuation">(</span>annotations <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">RestController</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">Controller</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExceptionConfiguration</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ConstraintViolationException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span><span class="token class-name">BindException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">validateException</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>ex <span class="token keyword">instanceof</span> <span class="token class-name">ConstraintViolationException</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">ConstraintViolationException</span> constraintViolationException <span class="token operator">=</span> 
                <span class="token punctuation">(</span><span class="token class-name">ConstraintViolationException</span><span class="token punctuation">)</span>ex<span class="token punctuation">;</span>
            <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ConstraintViolation</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> violations <span class="token operator">=</span> 
                constraintViolationException<span class="token punctuation">.</span><span class="token function">getConstraintViolations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">ConstraintViolation</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> next <span class="token operator">=</span> violations<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            msg <span class="token operator">=</span> next<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>ex <span class="token keyword">instanceof</span> <span class="token class-name">BindException</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">BindException</span> bindException <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">BindException</span><span class="token punctuation">)</span>ex<span class="token punctuation">;</span>
            msg <span class="token operator">=</span> bindException<span class="token punctuation">.</span><span class="token function">getBindingResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFieldError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDefaultMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> msg<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u91CD\u542F\u7A0B\u5E8F\u53EF\u4EE5\u53D1\u73B0\u6B64\u65F6\u9875\u9762\u53EF\u4EE5\u53CB\u597D\u7684\u663E\u793A\u6821\u9A8C\u4FE1\u606F\u4E86\uFF1A</p><p><img src="`+R+`" alt="img"></p><p>\u901A\u8FC7\u63A7\u5236\u53F0\u7684\u8F93\u51FA\u53EF\u4EE5\u770B\u5230\uFF0C\u6821\u9A8C\u6846\u67B6\u5C06\u6211\u4EEC\u7684\u591A\u4E2A\u5C5E\u6027\u90FD\u8FDB\u884C\u4E86\u6570\u636E\u6821\u9A8C\uFF08\u9ED8\u8BA4\u884C\u4E3A\uFF09\uFF0C\u5982\u679C\u6211\u4EEC\u5E0C\u671B\u53EA\u8981\u6709\u4E00\u4E2A\u5C5E\u6027\u6821\u9A8C\u5931\u8D25\u5C31\u76F4\u63A5\u8FD4\u56DE\u63D0\u793A\u4FE1\u606F\uFF0C\u540E\u9762\u7684\u5C5E\u6027\u4E0D\u518D\u8FDB\u884C\u6821\u9A8C\u4E86\u8BE5\u5982\u4F55\u5B9E\u73B0\u5462\uFF1F</p><ol start="7"><li>\u521B\u5EFAValidatorConfiguration\u7C7B\uFF0C\u6307\u5B9A\u6821\u9A8C\u65F6\u4F7F\u7528\u5FEB\u901F\u5931\u8D25\u8FD4\u56DE\u6A21\u5F0F</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>hibernate<span class="token punctuation">.</span>validator<span class="token punctuation">.</span></span><span class="token class-name">HibernateValidator</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>validation<span class="token punctuation">.</span>beanvalidation<span class="token punctuation">.</span></span><span class="token class-name">MethodValidationPostProcessor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>validation<span class="token punctuation">.</span></span><span class="token class-name">Validation</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>validation<span class="token punctuation">.</span></span><span class="token class-name">Validator</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>validation<span class="token punctuation">.</span></span><span class="token class-name">ValidatorFactory</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ValidatorConfiguration</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Validator</span> <span class="token function">validator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ValidatorFactory</span> validatorFactory <span class="token operator">=</span> 
            <span class="token class-name">Validation</span><span class="token punctuation">.</span><span class="token function">byProvider</span><span class="token punctuation">(</span><span class="token class-name">HibernateValidator</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token comment">//\u5FEB\u901F\u5931\u8D25\u8FD4\u56DE\u6A21\u5F0F</span>
                <span class="token punctuation">.</span><span class="token function">addProperty</span><span class="token punctuation">(</span><span class="token string">&quot;hibernate.validator.fail_fast&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">buildValidatorFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> validatorFactory<span class="token punctuation">.</span><span class="token function">getValidator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * \u5F00\u542F\u5FEB\u901F\u8FD4\u56DE
     * \u5982\u679C\u53C2\u6570\u6821\u9A8C\u6709\u5F02\u5E38\uFF0C\u76F4\u63A5\u629B\u5F02\u5E38\uFF0C\u4E0D\u4F1A\u8FDB\u5165\u5230 controller\uFF0C\u4F7F\u7528\u5168\u5C40\u5F02\u5E38\u62E6\u622A\u8FDB\u884C\u62E6\u622A
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">MethodValidationPostProcessor</span> <span class="token function">methodValidationPostProcessor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">MethodValidationPostProcessor</span> postProcessor <span class="token operator">=</span> 
            <span class="token keyword">new</span> <span class="token class-name">MethodValidationPostProcessor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token doc-comment comment">/**\u8BBE\u7F6Evalidator\u6A21\u5F0F\u4E3A\u5FEB\u901F\u5931\u8D25\u8FD4\u56DE*/</span>
        postProcessor<span class="token punctuation">.</span><span class="token function">setValidator</span><span class="token punctuation">(</span><span class="token function">validator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> postProcessor<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6CE8\u610F\uFF1A\u4E0A\u9762\u521B\u5EFA\u7684\u7C7B\u5E76\u4E0D\u662F\u914D\u7F6E\u7C7B\uFF0C\u6240\u4EE5\u5230\u76EE\u524D\u4E3A\u6B62\u5FEB\u901F\u5931\u8D25\u8FD4\u56DE\u6A21\u5F0F\u5E76\u4E0D\u4F1A\u751F\u6548\uFF0C\u4E3A\u4E86\u4F7F\u5176\u751F\u6548\u9700\u8981\u521B\u5EFA\u4E00\u4E2A\u6CE8\u89E3\u7528\u4E8E\u63A7\u5236\u6B64\u6A21\u5F0F\u7684\u5F00\u542F</p><ol start="8"><li>\u521B\u5EFA\u6CE8\u89E3EnableFormValidator\u7528\u4E8E\u63A7\u5236\u5FEB\u901F\u5931\u8D25\u8FD4\u56DE\u6A21\u5F0F\u7684\u5F00\u542F</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Import</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ElementType</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Retention</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RetentionPolicy</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Target</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * \u5728\u542F\u52A8\u7C7B\u4E0A\u6DFB\u52A0\u8BE5\u6CE8\u89E3\u6765\u542F\u52A8\u8868\u5355\u9A8C\u8BC1\u529F\u80FD---\u5FEB\u901F\u5931\u8D25\u8FD4\u56DE\u6A21\u5F0F
 */</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">ValidatorConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">EnableFormValidator</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="9"><li>\u5728\u542F\u52A8\u7C7B\u4E0A\u52A0\u5165EnableFormValidator\u6CE8\u89E3\uFF0C\u5F00\u542F\u5FEB\u901F\u5931\u8D25\u8FD4\u56DE\u6A21\u5F0F</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">EnableFormValidator</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableFormValidator</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HibernateValidatorApp</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">HibernateValidatorApp</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u901A\u8FC7\u63A7\u5236\u53F0\u7684\u8F93\u51FA\u53EF\u4EE5\u770B\u5230\uFF0C\u867D\u7136\u6211\u4EEC\u8F93\u5165\u7684\u6570\u636E\u6709\u591A\u4E2A\u90FD\u4E0D\u7B26\u5408\u6821\u9A8C\u89C4\u5219\uFF0C\u4F46\u662F\u53EA\u6709\u4E00\u4E2A\u6821\u9A8C\u5931\u8D25\u5F02\u5E38\u4FE1\u606F\uFF0C\u8FD9\u8BF4\u660E\u5DF2\u7ECF\u5F00\u542F\u4E86\u5FEB\u901F\u5931\u8D25\u8FD4\u56DE\u6A21\u5F0F</p><h3 id="pd-tools-validator\u4F7F\u7528"><a class="header-anchor" href="#pd-tools-validator\u4F7F\u7528" aria-hidden="true">#</a> pd-tools-validator\u4F7F\u7528</h3><p>pd-tools-validator\u7684\u5B9E\u73B0\u548C\u6211\u4EEC\u4E0A\u9762\u7684\u5165\u95E8\u6848\u4F8B\u662F\u4E00\u81F4\u7684\uFF0C\u53EA\u662F\u6CA1\u6709\u63D0\u4F9B\u5168\u5C40\u5F02\u5E38\u5904\u7406\uFF0C\u8FD9\u662F\u56E0\u4E3A\u4E0D\u540C\u7684\u7CFB\u7EDF\u5BF9\u4E8E\u6821\u9A8C\u7ED3\u679C\u7684\u5904\u7406\u65B9\u5F0F\u53EF\u80FD\u4E0D\u4E00\u6837\uFF0C\u6240\u4EE5\u9700\u8981\u5404\u4E2A\u7CFB\u7EDF\u81EA\u5DF1\u8FDB\u884C\u4E2A\u6027\u5316\u7684\u5904\u7406\uFF0C\u800Cpd-tools-validator\u53EA\u662F\u63D0\u4F9B\u6570\u636E\u6821\u9A8C\u529F\u80FD</p><p><strong>\u5177\u4F53\u4F7F\u7528\u8FC7\u7A0B\uFF1A</strong></p><ol><li>\u521B\u5EFAmaven\u5DE5\u7A0B\u5E76\u914D\u7F6Epom.xml\u6587\u4EF6</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 
                             http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.2.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>myHibernateValidatorApp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>pd-tools-validator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u521B\u5EFAUser\u7C7B</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>entity</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>hibernate<span class="token punctuation">.</span>validator<span class="token punctuation">.</span>constraints<span class="token punctuation">.</span></span><span class="token class-name">Length</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>validation<span class="token punctuation">.</span>constraints<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@NotNull</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">&quot;\u7528\u6237id\u4E0D\u80FD\u4E3A\u7A7A&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@NotEmpty</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">&quot;\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Length</span><span class="token punctuation">(</span>max <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">,</span> message <span class="token operator">=</span> <span class="token string">&quot;\u7528\u6237\u540D\u957F\u5EA6\u4E0D\u80FD\u8D85\u8FC750&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Max</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">,</span>message <span class="token operator">=</span> <span class="token string">&quot;\u5E74\u9F84\u6700\u5927\u4E3A80&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Min</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">,</span>message <span class="token operator">=</span> <span class="token string">&quot;\u5E74\u9F84\u6700\u5C0F\u4E3A18&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Pattern</span><span class="token punctuation">(</span>regexp <span class="token operator">=</span> <span class="token string">&quot;[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\\\\.[a-zA-Z0-9_-]+)+$&quot;</span><span class="token punctuation">,</span>
             message <span class="token operator">=</span> <span class="token string">&quot;\u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u521B\u5EFAUserController</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>validation<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Validated</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>validation<span class="token punctuation">.</span>constraints<span class="token punctuation">.</span></span><span class="token class-name">NotBlank</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Validated</span> <span class="token comment">//\u5F00\u542F\u6821\u9A8C\u529F\u80FD</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u7B80\u5355\u6570\u636E\u7C7B\u578B\u6821\u9A8C</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/delete&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NotBlank</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">&quot;id\u4E0D\u80FD\u4E3A\u7A7A&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;delete...&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5BF9\u8C61\u5C5E\u6027\u6821\u9A8C</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/save&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Validated</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;save...&quot;</span> <span class="token operator">+</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u521B\u5EFAapplication.yml</li></ol><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>\u521B\u5EFA\u542F\u52A8\u7C7B</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pinda<span class="token punctuation">.</span>validator<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">EnableFormValidator</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableFormValidator</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyHibernateValidatorApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">MyHibernateValidatorApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li>\u542F\u52A8\u9879\u76EE\uFF0C\u8BBF\u95EE\u5730\u5740\uFF1Ahttp://localhost:9000/user/save\uFF0C\u53EF\u4EE5\u770B\u5230\u63A7\u5236\u53F0\u8F93\u51FA\uFF1A</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">2020</span>-03-11 <span class="token number">16</span>:40:30.288  WARN <span class="token number">17428</span> --- <span class="token punctuation">[</span>nio-9000-exec-4<span class="token punctuation">]</span> .w.s.m.s.DefaultHandlerExceptionResolver <span class="token builtin class-name">:</span> Resolved <span class="token punctuation">[</span>org.springframework.validation.BindException: org.springframework.validation.BeanPropertyBindingResult: <span class="token number">1</span> errors
Field error <span class="token keyword">in</span> object <span class="token string">&#39;user&#39;</span> on field <span class="token string">&#39;age&#39;</span><span class="token builtin class-name">:</span> rejected value <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> codes <span class="token punctuation">[</span>Min.user.age,Min.age,Min.int,Min<span class="token punctuation">]</span><span class="token punctuation">;</span> arguments <span class="token punctuation">[</span>org.springframework.context.support.DefaultMessageSourceResolvable: codes <span class="token punctuation">[</span>user.age,age<span class="token punctuation">]</span><span class="token punctuation">;</span> arguments <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> default message <span class="token punctuation">[</span>age<span class="token punctuation">]</span>,18<span class="token punctuation">]</span><span class="token punctuation">;</span> default message <span class="token punctuation">[</span>\u5E74\u9F84\u6700\u5C0F\u4E3A18<span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u9875\u9762\u6548\u679C\uFF1A</p><p><img src="`+U+`" alt="img"></p><p>\u8FD9\u8BF4\u660E\u5DF2\u7ECF\u5F00\u59CB\u8FDB\u884C\u8F93\u5165\u6821\u9A8C\u4E86\uFF0C\u800C\u4E14\u6839\u636E\u63A7\u5236\u53F0\u8F93\u51FA\u53EF\u4EE5\u770B\u51FA\u5DF2\u7ECF\u5F00\u542F\u5FEB\u901F\u5931\u8D25\u8FD4\u56DE\u6A21\u5F0F</p><p>\u4E3A\u4E86\u80FD\u591F\u7ED9\u9875\u9762\u4E00\u4E2A\u53CB\u597D\u7684\u63D0\u793A\uFF0C\u4E5F\u53EF\u4EE5\u52A0\u5165\u5168\u5C40\u5F02\u5E38\u5904\u7406</p><h2 id="pd-tools-xss"><a class="header-anchor" href="#pd-tools-xss" aria-hidden="true">#</a> pd-tools-xss</h2><p>pd-tools-xss\u6A21\u5757\u5B9A\u4F4D\u4E3A\u9632\u8DE8\u7AD9\u811A\u672C\u653B\u51FB\uFF08XSS\uFF09\uFF0C\u901A\u8FC7\u5BF9\u7528\u6237\u5728\u9875\u9762\u8F93\u5165\u7684 HTML / CSS / JavaScript \u7B49\u5185\u5BB9\u8FDB\u884C\u68C0\u9A8C\u548C\u6E05\u7406\uFF0C\u786E\u4FDD\u8F93\u5165\u5185\u5BB9\u7B26\u5408\u5E94\u7528\u89C4\u8303\uFF0C\u4FDD\u969C\u7CFB\u7EDF\u7684\u5B89\u5168</p><h3 id="xss\u4ECB\u7ECD"><a class="header-anchor" href="#xss\u4ECB\u7ECD" aria-hidden="true">#</a> XSS\u4ECB\u7ECD</h3><p>XSS\uFF1A\u8DE8\u7AD9\u811A\u672C\u653B\u51FB(Cross Site Scripting)\uFF0C\u4E3A\u4E0D\u548C CSS\u6DF7\u6DC6\uFF0C\u6545\u5C06\u8DE8\u7AD9\u811A\u672C\u653B\u51FB\u7F29\u5199\u4E3AXSS\u3002XSS\u662F\u6307\u6076\u610F\u653B\u51FB\u8005\u5F80Web\u9875\u9762\u91CC\u63D2\u5165\u6076\u610FScript\u4EE3\u7801\uFF0C\u5F53\u7528\u6237\u6D4F\u89C8\u8BE5\u9875\u65F6\uFF0C\u5D4C\u5165\u5176\u4E2DWeb\u91CC\u9762\u7684Script\u4EE3\u7801\u4F1A\u88AB\u6267\u884C\uFF0C\u4ECE\u800C\u8FBE\u5230\u6076\u610F\u653B\u51FB\u7528\u6237\u7684\u76EE\u7684\u3002\u6709\u70B9\u7C7B\u4F3C\u4E8Esql\u6CE8\u5165</p><p>XSS\u653B\u51FB\u539F\u7406\uFF1A</p><p>HTML\u662F\u4E00\u79CD\u8D85\u6587\u672C\u6807\u8BB0\u8BED\u8A00\uFF0C\u901A\u8FC7\u5C06\u4E00\u4E9B\u5B57\u7B26\u7279\u6B8A\u5730\u5BF9\u5F85\u6765\u533A\u522B\u6587\u672C\u548C\u6807\u8BB0\uFF0C\u4F8B\u5982\uFF0C\u5C0F\u4E8E\u7B26\u53F7\uFF08&lt;\uFF09\u88AB\u770B\u4F5C\u662FHTML\u6807\u7B7E\u7684\u5F00\u59CB\uFF0C\u4E4B\u95F4\u7684\u5B57\u7B26\u662F\u9875\u9762\u7684\u6807\u9898\u7B49\u7B49\u3002\u5F53\u52A8\u6001\u9875\u9762\u4E2D\u63D2\u5165\u7684\u5185\u5BB9\u542B\u6709\u8FD9\u4E9B\u7279\u6B8A\u5B57\u7B26\u65F6\uFF0C\u7528\u6237\u6D4F\u89C8\u5668\u4F1A\u5C06\u5176\u8BEF\u8BA4\u4E3A\u662F\u63D2\u5165\u4E86HTML\u6807\u7B7E\uFF0C\u5F53\u8FD9\u4E9BHTML\u6807\u7B7E\u5F15\u5165\u4E86\u4E00\u6BB5JavaScript\u811A\u672C\u65F6\uFF0C\u8FD9\u4E9B\u811A\u672C\u7A0B\u5E8F\u5C31\u5C06\u4F1A\u5728\u7528\u6237\u6D4F\u89C8\u5668\u4E2D\u6267\u884C\u3002\u6240\u4EE5\uFF0C\u5F53\u8FD9\u4E9B\u7279\u6B8A\u5B57\u7B26\u4E0D\u80FD\u88AB\u52A8\u6001\u9875\u9762\u68C0\u67E5\u6216\u68C0\u67E5\u51FA\u73B0\u5931\u8BEF\u65F6\uFF0C\u5C31\u5C06\u4F1A\u4EA7\u751FXSS\u6F0F\u6D1E</p><h3 id="antisamy\u4ECB\u7ECD"><a class="header-anchor" href="#antisamy\u4ECB\u7ECD" aria-hidden="true">#</a> AntiSamy\u4ECB\u7ECD</h3><p>AntiSamy\u662FOWASP\u7684\u4E00\u4E2A\u5F00\u6E90\u9879\u76EE\uFF0C\u901A\u8FC7\u5BF9\u7528\u6237\u8F93\u5165\u7684 HTML / CSS / JavaScript \u7B49\u5185\u5BB9\u8FDB\u884C\u68C0\u9A8C\u548C\u6E05\u7406\uFF0C\u786E\u4FDD\u8F93\u5165\u7B26\u5408\u5E94\u7528\u89C4\u8303\u3002AntiSamy\u88AB\u5E7F\u6CDB\u5E94\u7528\u4E8EWeb\u670D\u52A1\u5BF9\u5B58\u50A8\u578B\u548C\u53CD\u5C04\u578BXSS\u7684\u9632\u5FA1\u4E2D</p><p>AntiSamy\u7684maven\u5750\u6807\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.owasp.antisamy<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>antisamy<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.5.7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="antisamy\u5165\u95E8\u6848\u4F8B"><a class="header-anchor" href="#antisamy\u5165\u95E8\u6848\u4F8B" aria-hidden="true">#</a> AntiSamy\u5165\u95E8\u6848\u4F8B</h3><ol><li>\u521B\u5EFAmaven\u5DE5\u7A0BantiSamy_demo\u5E76\u914D\u7F6Epom.xml\u6587\u4EF6</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 
                             http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.2.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>cn.itcast<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>antiSamy_demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.owasp.antisamy<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>antisamy<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.5.7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u521B\u5EFAapplication.yml</li></ol><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u521B\u5EFA\u7B56\u7565\u6587\u4EF6/resources/antisamy-test.xml\uFF0C\u6587\u4EF6\u5185\u5BB9\u53EF\u4EE5\u4ECEantisamy\u7684jar\u5305\u4E2D\u83B7\u53D6</li></ol><p>\u6CE8\uFF1AAntiSamy\u5BF9\u201C\u6076\u610F\u4EE3\u7801\u201D\u7684\u8FC7\u6EE4\u4F9D\u8D56\u4E8E\u7B56\u7565\u6587\u4EF6\u3002\u7B56\u7565\u6587\u4EF6\u89C4\u5B9A\u4E86AntiSamy\u5BF9\u5404\u4E2A\u6807\u7B7E\u3001\u5C5E\u6027\u7684\u5904\u7406\u65B9\u6CD5\uFF0C\u7B56\u7565\u6587\u4EF6\u5B9A\u4E49\u7684\u4E25\u683C\u4E0E\u5426\uFF0C\u51B3\u5B9A\u4E86AntiSamy\u5BF9XSS\u6F0F\u6D1E\u7684\u9632\u5FA1\u6548\u679C\u3002\u5728AntiSamy\u7684jar\u5305\u4E2D\uFF0C\u5305\u542B\u4E86\u51E0\u4E2A\u5E38\u7528\u7684\u7B56\u7565\u6587\u4EF6</p><p><img src="`+B+`" alt="img"></p><ol start="4"><li>\u521B\u5EFAUser\u5B9E\u4F53\u7C7B</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>entity</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>\u521B\u5EFAUserController</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/save&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;UserController save.... &quot;</span> <span class="token operator">+</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> user<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li>\u521B\u5EFA/resources/static/index.html\u9875\u9762</li></ol><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/user/save<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            id:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
            name:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
            age:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="7"><li>\u521B\u5EFA\u542F\u52A8\u7C7B</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AntiSamyApp</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">AntiSamyApp</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6B64\u65F6\u6211\u4EEC\u53EF\u4EE5\u542F\u52A8\u9879\u76EE\u8FDB\u884C\u8BBF\u95EE\uFF0C\u4F46\u662F\u8FD8\u6CA1\u6709\u8FDB\u884C\u53C2\u6570\u7684\u8FC7\u6EE4\uFF0C\u6240\u4EE5\u5982\u679C\u6211\u4EEC\u8F93\u5165\u4EFB\u610F\u53C2\u6570\u90FD\u53EF\u4EE5\u6B63\u5E38\u4F20\u9012\u5230Controller\u4E2D\uFF0C\u8FD9\u5728\u5B9E\u9645\u9879\u76EE\u4E2D\u662F\u975E\u5E38\u4E0D\u5B89\u5168\u7684\u3002\u4E3A\u4E86\u5BF9\u6211\u4EEC\u8F93\u5165\u7684\u6570\u636E\u8FDB\u884C\u8FC7\u6EE4\u6E05\u7406\uFF0C\u9700\u8981\u901A\u8FC7\u8FC7\u6EE4\u5668\u6765\u5B9E\u73B0</p><ol start="8"><li>\u521B\u5EFA\u8FC7\u6EE4\u5668\uFF0C\u7528\u4E8E\u8FC7\u6EE4\u6240\u6709\u63D0\u4EA4\u5230\u670D\u52A1\u5668\u7684\u8BF7\u6C42\u53C2\u6570</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>filter</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>wrapper<span class="token punctuation">.</span></span><span class="token class-name">XssRequestWrapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token comment">/*
*\u8FC7\u6EE4\u6240\u6709\u63D0\u4EA4\u5230\u670D\u52A1\u5668\u7684\u8BF7\u6C42\u53C2\u6570
*/</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XssFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> servletRequest<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> servletResponse<span class="token punctuation">,</span> 
                         <span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
        <span class="token class-name">HttpServletRequest</span> request <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">)</span>servletRequest<span class="token punctuation">;</span>
        <span class="token comment">//\u4F20\u5165\u91CD\u5199\u540E\u7684Request</span>
        filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">XssRequestWrapper</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">,</span>servletResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6CE8\u610F\uFF1A\u901A\u8FC7\u4E0A\u9762\u7684\u8FC7\u6EE4\u5668\u53EF\u4EE5\u53D1\u73B0\u6211\u4EEC\u5E76\u6CA1\u6709\u5728\u8FC7\u6EE4\u5668\u4E2D\u76F4\u63A5\u8FDB\u884C\u8BF7\u6C42\u53C2\u6570\u7684\u8FC7\u6EE4\u6E05\u7406\uFF0C\u800C\u662F\u76F4\u63A5\u653E\u884C\u4E86\uFF0C\u90A3\u4E48\u6211\u4EEC\u8FD8\u600E\u4E48\u8FDB\u884C\u8BF7\u6C42\u53C2\u6570\u7684\u8FC7\u6EE4\u6E05\u7406\u5462\uFF1F\u5176\u5B9E\u8FC7\u6EE4\u6E05\u7406\u7684\u5DE5\u4F5C\u662F\u5728\u53E6\u5916\u4E00\u4E2A\u7C7BXssRequestWrapper\u4E2D\u8FDB\u884C\u7684\uFF0C\u5F53\u4E0A\u9762\u7684\u8FC7\u6EE4\u5668\u653E\u884C\u65F6\u9700\u8981\u8C03\u7528filterChain.doFilter()\u65B9\u6CD5\uFF0C\u6B64\u65B9\u6CD5\u9700\u8981\u4F20\u5165\u8BF7\u6C42Request\u5BF9\u8C61\uFF0C\u6B64\u65F6\u6211\u4EEC\u53EF\u4EE5\u5C06\u5F53\u524D\u7684request\u5BF9\u8C61\u8FDB\u884C\u5305\u88C5\uFF0C\u800CXssRequestWrapper\u5C31\u662FRequest\u5BF9\u8C61\u7684\u5305\u88C5\u7C7B\uFF0C\u5728\u8FC7\u6EE4\u5668\u653E\u884C\u65F6\u4F1A\u81EA\u52A8\u8C03\u7528\u5305\u88C5\u7C7B\u7684getParameterValues\u65B9\u6CD5\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5728\u5305\u88C5\u7C7B\u7684getParameterValues\u65B9\u6CD5\u4E2D\u8FDB\u884C\u7EDF\u4E00\u7684\u8BF7\u6C42\u53C2\u6570\u8FC7\u6EE4\u6E05\u7406</p><ol start="9"><li>\u521B\u5EFAXssRequestWrapper\u7C7B</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>wrapper</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>owasp<span class="token punctuation">.</span>validator<span class="token punctuation">.</span>html<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequestWrapper</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XssRequestWrapper</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServletRequestWrapper</span> <span class="token punctuation">{</span>
    <span class="token comment">/*
     * \u7B56\u7565\u6587\u4EF6 \u9700\u8981\u5C06\u8981\u4F7F\u7528\u7684\u7B56\u7565\u6587\u4EF6\u653E\u5230\u9879\u76EE\u8D44\u6E90\u6587\u4EF6\u8DEF\u5F84\u4E0B
    */</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> antiSamyPath <span class="token operator">=</span> <span class="token class-name">XssRequestWrapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span> <span class="token string">&quot;antisamy-test.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span>  <span class="token class-name">Policy</span> policy <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u6307\u5B9A\u7B56\u7565\u6587\u4EF6</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            policy <span class="token operator">=</span> <span class="token class-name">Policy</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span>antiSamyPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">PolicyException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * AntiSamy\u8FC7\u6EE4\u6570\u636E
     * <span class="token keyword">@param</span> <span class="token parameter">taintedHTML</span> \u9700\u8981\u8FDB\u884C\u8FC7\u6EE4\u7684\u6570\u636E
     * <span class="token keyword">@return</span> \u8FD4\u56DE\u8FC7\u6EE4\u540E\u7684\u6570\u636E
     * */</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">xssClean</span><span class="token punctuation">(</span> <span class="token class-name">String</span> taintedHTML<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">try</span><span class="token punctuation">{</span>
            <span class="token comment">// \u4F7F\u7528AntiSamy\u8FDB\u884C\u8FC7\u6EE4</span>
            <span class="token class-name">AntiSamy</span> antiSamy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AntiSamy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">CleanResults</span> cr <span class="token operator">=</span> antiSamy<span class="token punctuation">.</span><span class="token function">scan</span><span class="token punctuation">(</span> taintedHTML<span class="token punctuation">,</span> policy<span class="token punctuation">)</span><span class="token punctuation">;</span>
            taintedHTML <span class="token operator">=</span> cr<span class="token punctuation">.</span><span class="token function">getCleanHTML</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span> <span class="token class-name">ScanException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span> <span class="token class-name">PolicyException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> taintedHTML<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">XssRequestWrapper</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getParameterValues</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> values <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getParameterValues</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span> values <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> values<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> newArray <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Antisamy\u8FC7\u6EE4\u6E05\u7406\uFF0C\u6E05\u7406\u4E4B\u524D\u7684\u53C2\u6570\u503C\uFF1A&quot;</span> <span class="token operator">+</span> values<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// \u8FC7\u6EE4\u6E05\u7406</span>
            newArray<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">xssClean</span><span class="token punctuation">(</span>values<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Antisamy\u8FC7\u6EE4\u6E05\u7406\uFF0C\u6E05\u7406\u4E4B\u540E\u7684\u53C2\u6570\u503C\uFF1A&quot;</span> <span class="token operator">+</span> newArray<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> newArray<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="10"><li>\u4E3A\u4E86\u4F7F\u4E0A\u9762\u5B9A\u4E49\u7684\u8FC7\u6EE4\u5668\u751F\u6548\uFF0C\u9700\u8981\u521B\u5EFA\u914D\u7F6E\u7C7B\uFF0C\u7528\u4E8E\u521D\u59CB\u5316\u8FC7\u6EE4\u5668\u5BF9\u8C61</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>filter<span class="token punctuation">.</span></span><span class="token class-name">XssFilter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">FilterRegistrationBean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AntiSamyConfiguration</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * \u914D\u7F6E\u8DE8\u7AD9\u653B\u51FB\u8FC7\u6EE4\u5668
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">FilterRegistrationBean</span> <span class="token function">filterRegistrationBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">FilterRegistrationBean</span> filterRegistration <span class="token operator">=</span> 
            <span class="token keyword">new</span> <span class="token class-name">FilterRegistrationBean</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">XssFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filterRegistration<span class="token punctuation">.</span><span class="token function">addUrlPatterns</span><span class="token punctuation">(</span><span class="token string">&quot;/*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filterRegistration<span class="token punctuation">.</span><span class="token function">setOrder</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> filterRegistration<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u542F\u52A8\u9879\u76EE\uFF0C\u9875\u9762\u8F93\u5165\u975E\u6CD5\u6570\u636E\uFF0C\u53EF\u4EE5\u770B\u5230\u975E\u6CD5\u6570\u636E\u88AB\u6E05\u7406\u6389\u4E86</p><p>\u6CE8\u610F\uFF1A\u5F53\u524D\u6211\u4EEC\u5728\u8FDB\u884C\u8BF7\u6C42\u53C2\u6570\u8FC7\u6EE4\u65F6\u53EA\u662F\u5728\u5305\u88C5\u7C7B\u7684getParameterValues\u65B9\u6CD5\u4E2D\u8FDB\u884C\u4E86\u5904\u7406\uFF0C\u771F\u5B9E\u9879\u76EE\u4E2D\u53EF\u80FD\u7528\u6237\u63D0\u4EA4\u7684\u6570\u636E\u5728\u8BF7\u6C42\u5934\u4E2D\uFF0C\u4E5F\u53EF\u80FD\u7528\u6237\u63D0\u4EA4\u7684\u662Fjson\u6570\u636E\uFF0C\u6240\u4EE5\u5982\u679C\u8003\u8651\u6240\u6709\u60C5\u51B5\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5728\u5305\u88C5\u7C7B\u4E2D\u7684\u591A\u4E2A\u65B9\u6CD5\u4E2D\u90FD\u8FDB\u884C\u6E05\u7406\u5904\u7406\u5373\u53EF\uFF0C\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>wrapper</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>owasp<span class="token punctuation">.</span>validator<span class="token punctuation">.</span>html<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequestWrapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XssRequestWrapper</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServletRequestWrapper</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * \u7B56\u7565\u6587\u4EF6 \u9700\u8981\u5C06\u8981\u4F7F\u7528\u7684\u7B56\u7565\u6587\u4EF6\u653E\u5230\u9879\u76EE\u8D44\u6E90\u6587\u4EF6\u8DEF\u5F84\u4E0B
     * */</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> antiSamyPath <span class="token operator">=</span> <span class="token class-name">XssRequestWrapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span> <span class="token string">&quot;antisamy-ebay.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span>  <span class="token class-name">Policy</span> policy <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u6307\u5B9A\u7B56\u7565\u6587\u4EF6</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            policy <span class="token operator">=</span> <span class="token class-name">Policy</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span>antiSamyPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">PolicyException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * AntiSamy\u8FC7\u6EE4\u6570\u636E
     * <span class="token keyword">@param</span> <span class="token parameter">taintedHTML</span> \u9700\u8981\u8FDB\u884C\u8FC7\u6EE4\u7684\u6570\u636E
     * <span class="token keyword">@return</span> \u8FD4\u56DE\u8FC7\u6EE4\u540E\u7684\u6570\u636E
     * */</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">xssClean</span><span class="token punctuation">(</span> <span class="token class-name">String</span> taintedHTML<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">try</span><span class="token punctuation">{</span>
            <span class="token comment">// \u4F7F\u7528AntiSamy\u8FDB\u884C\u8FC7\u6EE4</span>
            <span class="token class-name">AntiSamy</span> antiSamy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AntiSamy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">CleanResults</span> cr <span class="token operator">=</span> antiSamy<span class="token punctuation">.</span><span class="token function">scan</span><span class="token punctuation">(</span> taintedHTML<span class="token punctuation">,</span> policy<span class="token punctuation">)</span><span class="token punctuation">;</span>
            taintedHTML <span class="token operator">=</span> cr<span class="token punctuation">.</span><span class="token function">getCleanHTML</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span> <span class="token class-name">ScanException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span> <span class="token class-name">PolicyException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> taintedHTML<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">XssRequestWrapper</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getParameterValues</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> values <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getParameterValues</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span> values <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> values<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> newArray <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// \u8FC7\u6EE4\u6E05\u7406</span>
            newArray<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">xssClean</span><span class="token punctuation">(</span>values<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> newArray<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token class-name">String</span> paramString<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span>paramString<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>str <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token function">xssClean</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token class-name">String</span> paramString<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span>paramString<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>str <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token function">xssClean</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token function">getParameterMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Map</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> requestMap <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getParameterMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> me <span class="token operator">:</span> requestMap<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> values <span class="token operator">=</span> me<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> values<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                values<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">xssClean</span><span class="token punctuation">(</span>values<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> requestMap<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="pd-tools-xss\u4F7F\u7528"><a class="header-anchor" href="#pd-tools-xss\u4F7F\u7528" aria-hidden="true">#</a> pd-tools-xss\u4F7F\u7528</h3><p>pd-tools-xss\u7684\u5B9E\u73B0\u548C\u6211\u4EEC\u4E0A\u9762\u7684\u5165\u95E8\u6848\u4F8B\u662F\u4E00\u81F4\u7684\uFF0C\u5E95\u5C42\u4E5F\u662F\u57FA\u4E8EAntiSamy\u5BF9\u8F93\u5165\u53C2\u6570\u8FDB\u884C\u68C0\u9A8C\u548C\u6E05\u7406\uFF0C\u786E\u4FDD\u8F93\u5165\u7B26\u5408\u5E94\u7528\u89C4\u8303</p><p>\u4E3A\u4E86\u65B9\u4FBF\u4F7F\u7528\uFF0Cpd-tools-xss\u5DF2\u7ECF\u5B9A\u4E49\u4E3A\u4E86starter\uFF0C\u5176\u4ED6\u5E94\u7528\u53EA\u9700\u8981\u5BFC\u5165\u5176maven\u5750\u6807\uFF0C\u4E0D\u9700\u8981\u989D\u5916\u8FDB\u884C\u4EFB\u4F55\u914D\u7F6E\u5C31\u53EF\u4EE5\u4F7F\u7528</p><p><strong>\u5177\u4F53\u4F7F\u7528\u8FC7\u7A0B\uFF1A</strong></p><ol><li>\u521B\u5EFAmaven\u5DE5\u7A0B\u5E76\u914D\u7F6Epom.xml\u6587\u4EF6</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 
                             http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.2.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>myXssApp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>pd-tools-xss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u521B\u5EFAXSSController</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/xss&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XSSController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/get&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">String</span> text<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;\u5904\u7406\u4E4B\u540E\u7684\u6587\u672C\u5185\u5BB9\u4E3A\uFF1A&quot;</span> <span class="token operator">+</span> text<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u521B\u5EFA\u542F\u52A8\u7C7B</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XssApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">XssApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u542F\u52A8\u9879\u76EE\uFF0C\u8BBF\u95EE\u5982\u4E0B\u5730\u5740\uFF1A</p><p><img src="`+_+'" alt="img"></p><p><img src="'+H+'" alt="img"></p><p>\u53EF\u4EE5\u770B\u5230\uFF0C\u5982\u679C\u8F93\u5165\u7684\u662F\u666E\u901A\u6587\u672C\u5219\u4E0D\u505A\u4EFB\u4F55\u5904\u7406\u3002\u5982\u679C\u8F93\u5165\u7684\u662F\u7279\u6B8A\u6807\u7B7E\u5219\u88AB\u6E05\u7406\u6389\u4E86</p><h2 id="pd-tools-log"><a class="header-anchor" href="#pd-tools-log" aria-hidden="true">#</a> pd-tools-log</h2><p>pd-tools-log\u6A21\u5757\u5B9A\u4F4D\u4E3A\u65E5\u5FD7\u6A21\u5757\uFF0C\u672C\u8D28\u4E5F\u662F\u4E00\u4E2Astarter\u3002\u63D0\u4F9B\u7684\u65E5\u5FD7\u529F\u80FD\u4E3B\u8981\u6709\u4E24\u4E2A\u65B9\u9762\uFF1A</p><ol><li><p>\u901A\u8FC7logback\u6846\u67B6\u53EF\u4EE5\u5728\u63A7\u5236\u53F0\u6216\u8005\u65E5\u5FD7\u6587\u4EF6\u8BB0\u5F55\u65E5\u5FD7\u4FE1\u606F</p></li><li><p>\u62E6\u622A\u7528\u6237\u8BF7\u6C42\uFF0C\u5C06\u64CD\u4F5C\u65E5\u5FD7\u4FDD\u5B58\u5230\u6570\u636E\u5E93</p></li></ol><p>pd-tools-log\u6D89\u53CA\u5230\u7684\u6280\u672F\u70B9\uFF1A</p><ol><li><p>\u5207\u9762Aspect\u3001\u5207\u70B9PointCut\u3001\u901A\u77E5Advice</p></li><li><p>Spring Event \u5F02\u6B65\u76D1\u542C\u4E8B\u4EF6</p></li><li><p>logback\u65E5\u5FD7\u7EC4\u4EF6</p></li><li><p>\u51FD\u6570\u5F0F\u63A5\u53E3</p></li><li><p>ThreadLocal</p></li></ol><h3 id="logback"><a class="header-anchor" href="#logback" aria-hidden="true">#</a> logback</h3><h4 id="logback\u4ECB\u7ECD"><a class="header-anchor" href="#logback\u4ECB\u7ECD" aria-hidden="true">#</a> logback\u4ECB\u7ECD</h4><p>Logback\u7EE7\u627F\u81EAlog4j\u3002Logback\u7684\u67B6\u6784\u975E\u5E38\u7684\u901A\u7528\uFF0C\u9002\u7528\u4E8E\u4E0D\u540C\u7684\u4F7F\u7528\u573A\u666F</p><p><img src="'+D+`" alt="img"></p><p>\u901A\u8FC7\u4E0A\u56FE\u53EF\u4EE5\u770B\u5230logback\u548CLog4j\u90FD\u662Fslf4j\u89C4\u8303\u7684\u5177\u4F53\u5B9E\u73B0\uFF0C\u6211\u4EEC\u5728\u7A0B\u5E8F\u4E2D\u76F4\u63A5\u8C03\u7528\u7684API\u5176\u5B9E\u90FD\u662Fslf4j\u7684api\uFF0C\u5E95\u5C42\u5219\u662F\u771F\u6B63\u7684\u65E5\u5FD7\u5B9E\u73B0\u7EC4\u4EF6\u2014logback\u6216\u8005log4j</p><p>Logback \u6784\u5EFA\u5728\u4E09\u4E2A\u4E3B\u8981\u7684\u7C7B\u4E0A\uFF1ALogger\uFF0CAppender \u548C Layout\u3002\u8FD9\u4E09\u4E2A\u4E0D\u540C\u7C7B\u578B\u7684\u7EC4\u4EF6\u4E00\u8D77\u4F5C\u7528\u80FD\u591F\u8BA9\u5F00\u53D1\u8005\u6839\u636E\u6D88\u606F\u7684\u7C7B\u578B\u4EE5\u53CA\u65E5\u5FD7\u7684\u7EA7\u522B\u6765\u6253\u5370\u65E5\u5FD7</p><p><strong>Logger</strong>\u4F5C\u4E3A\u65E5\u5FD7\u7684\u8BB0\u5F55\u5668\uFF0C\u628A\u5B83\u5173\u8054\u5230\u5E94\u7528\u7684\u5BF9\u5E94\u7684context\u540E\uFF0C\u4E3B\u8981\u7528\u4E8E\u5B58\u653E\u65E5\u5FD7\u5BF9\u8C61\uFF0C\u4E5F\u53EF\u4EE5\u5B9A\u4E49\u65E5\u5FD7\u7C7B\u578B\u3001\u7EA7\u522B\u3002\u5404\u4E2Alogger \u90FD\u88AB\u5173\u8054\u5230\u4E00\u4E2A LoggerContext\uFF0CLoggerContext\u8D1F\u8D23\u5236\u9020logger\uFF0C\u4E5F\u8D1F\u8D23\u4EE5\u6811\u7ED3\u6784\u6392\u5217\u5404 logger</p><p><strong>Appender</strong>\u4E3B\u8981\u7528\u4E8E\u6307\u5B9A\u65E5\u5FD7\u8F93\u51FA\u7684\u76EE\u7684\u5730\uFF0C\u76EE\u7684\u5730\u53EF\u4EE5\u662F\u63A7\u5236\u53F0\u3001\u6587\u4EF6\u3001 \u6570\u636E\u5E93\u7B49</p><p><strong>Layout</strong> \u8D1F\u8D23\u628A\u4E8B\u4EF6\u8F6C\u6362\u6210\u5B57\u7B26\u4E32\uFF0C\u8F93\u51FA\u683C\u5F0F\u5316\u7684\u65E5\u5FD7\u4FE1\u606F</p><p>logback\u7684maven\u5750\u6807\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>ch.qos.logback<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>logback-classic<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>ch.qos.logback<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>logback-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="logback\u5C42\u7EA7"><a class="header-anchor" href="#logback\u5C42\u7EA7" aria-hidden="true">#</a> logback\u5C42\u7EA7</h4><p>\u5728 logback\u4E2D\u6BCF\u4E00\u4E2A logger \u90FD\u4F9D\u9644\u5728 LoggerContext \u4E0A\uFF0C\u5B83\u8D1F\u8D23\u4EA7\u751F logger\uFF0C\u5E76\u4E14\u901A\u8FC7\u4E00\u4E2A<strong>\u6811\u72B6</strong>\u7684\u5C42\u7EA7\u7ED3\u6784\u6765\u8FDB\u884C\u7BA1\u7406\u3002</p><p>\u4E00\u4E2A Logger \u88AB\u5F53\u4F5C\u4E3A\u4E00\u4E2A\u5B9E\u4F53\uFF0C\u5B83\u4EEC\u7684\u547D\u540D\u662F\u5927\u5C0F\u5199\u654F\u611F\u7684\uFF0C\u5E76\u4E14\u9075\u5FAA\u4EE5\u4E0B\u89C4\u5219\uFF1A</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>\u5982\u679C\u4E00\u4E2Alogger\u7684\u540D\u5B57\u52A0\u4E0A\u4E00\u4E2A.\u4F5C\u4E3A\u53E6\u4E00\u4E2Alogger\u540D\u5B57\u7684\u524D\u7F00\uFF0C\u90A3\u4E48\u8BE5logger\u5C31\u662F\u53E6\u4E00\u4E2Alogger\u7684\u7956\u5148\u3002\u5982\u679C\u4E00\u4E2Alogger\u4E0E\u53E6\u4E00\u4E2Alogger\u4E4B\u95F4\u6CA1\u6709\u5176\u5B83\u7684logger\uFF0C\u5219\u8BE5logger\u5C31\u662F\u53E6\u4E00\u4E2Alogger\u7684\u7236\u7EA7

\u4E3E\u4F8B\uFF1A
\u540D\u4E3Acn.itcast\u7684logger\u662F\u540D\u4E3Acn.itcast.service\u7684logger\u7684\u7236\u7EA7
\u540D\u4E3Acn\u7684logger\u662F\u540D\u4E3Acn.itcast\u7684logger\u7684\u7236\u7EA7\uFF0C\u662F\u540D\u4E3Acn.itcast.service\u7684logger\u7684\u7956\u5148
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728logback\u4E2D\u6709\u4E00\u4E2Aroot logger\uFF0C\u5B83\u662Flogger\u5C42\u6B21\u7ED3\u6784\u7684\u6700\u9AD8\u5C42\uFF0C\u5B83\u662F\u4E00\u4E2A\u7279\u6B8A\u7684logger\uFF0C\u56E0\u4E3A\u5B83\u662F\u6BCF\u4E00\u4E2A\u5C42\u6B21\u7ED3\u6784\u7684\u4E00\u90E8\u5206</p><h4 id="logback\u65E5\u5FD7\u8F93\u51FA\u7B49\u7EA7"><a class="header-anchor" href="#logback\u65E5\u5FD7\u8F93\u51FA\u7B49\u7EA7" aria-hidden="true">#</a> logback\u65E5\u5FD7\u8F93\u51FA\u7B49\u7EA7</h4><p>logback\u7684\u65E5\u5FD7\u8F93\u51FA\u7B49\u7EA7\u5206\u4E3A\uFF1ATRACE, DEBUG, INFO, WARN, ERROR</p><p>\u5982\u679C\u4E00\u4E2A\u7ED9\u5B9A\u7684logger\u6CA1\u6709\u6307\u5B9A\u4E00\u4E2A\u65E5\u5FD7\u8F93\u51FA\u7B49\u7EA7\uFF0C\u90A3\u4E48\u5B83\u5C31\u4F1A\u7EE7\u627F\u79BB\u5B83\u6700\u8FD1\u7684\u4E00\u4E2A\u7956\u5148\u7684\u5C42\u7EA7</p><p>\u4E3A\u4E86\u786E\u4FDD\u6240\u6709\u7684logger\u90FD\u6709\u4E00\u4E2A\u65E5\u5FD7\u8F93\u51FA\u7B49\u7EA7\uFF0Croot logger\u4F1A\u6709\u4E00\u4E2A\u9ED8\u8BA4\u8F93\u51FA\u7B49\u7EA7 \u2014 DEBUG</p><h4 id="logback\u521D\u59CB\u5316\u6B65\u9AA4"><a class="header-anchor" href="#logback\u521D\u59CB\u5316\u6B65\u9AA4" aria-hidden="true">#</a> logback\u521D\u59CB\u5316\u6B65\u9AA4</h4><ol><li>logback\u4F1A\u5728\u7C7B\u8DEF\u5F84\u4E0B\u5BFB\u627E\u540D\u4E3Alogback-test.xml\u7684\u6587\u4EF6</li><li>\u5982\u679C\u6CA1\u6709\u627E\u5230\uFF0Clogback\u4F1A\u7EE7\u7EED\u5BFB\u627E\u540D\u4E3Alogback.groovy\u7684\u6587\u4EF6</li><li>\u5982\u679C\u6CA1\u6709\u627E\u5230\uFF0Clogback\u4F1A\u7EE7\u7EED\u5BFB\u627E\u540D\u4E3Alogback.xml\u7684\u6587\u4EF6</li><li>\u5982\u679C\u6CA1\u6709\u627E\u5230\uFF0C\u5C06\u4F1A\u5728\u7C7B\u8DEF\u5F84\u4E0B\u5BFB\u627E\u6587\u4EF6META-INFO/services/ch.qos.logback.classic.spi.Configurator\uFF0C\u8BE5\u6587\u4EF6\u7684\u5185\u5BB9\u4E3A\u5B9E\u73B0\u4E86Configurator\u63A5\u53E3\u7684\u5B9E\u73B0\u7C7B\u7684\u5168\u9650\u5B9A\u7C7B\u540D</li><li>\u5982\u679C\u4EE5\u4E0A\u90FD\u6CA1\u6709\u6210\u529F\uFF0Clogback\u4F1A\u901A\u8FC7BasicConfigurator\u4E3A\u81EA\u5DF1\u8FDB\u884C\u914D\u7F6E\uFF0C\u5E76\u4E14\u65E5\u5FD7\u5C06\u4F1A\u5168\u90E8\u5728\u63A7\u5236\u53F0\u6253\u5370\u51FA\u6765</li></ol><p>\u6700\u540E\u4E00\u6B65\u7684\u76EE\u7684\u662F\u4E3A\u4E86\u4FDD\u8BC1\u5728\u6240\u6709\u7684\u914D\u7F6E\u6587\u4EF6\u90FD\u6CA1\u6709\u88AB\u627E\u5230\u7684\u60C5\u51B5\u4E0B\uFF0C\u63D0\u4F9B\u4E00\u4E2A\u9ED8\u8BA4\u7684\u914D\u7F6E</p><h4 id="logback\u5165\u95E8\u6848\u4F8B"><a class="header-anchor" href="#logback\u5165\u95E8\u6848\u4F8B" aria-hidden="true">#</a> logback\u5165\u95E8\u6848\u4F8B</h4><h5 id="\u6848\u4F8B\u4E00-1"><a class="header-anchor" href="#\u6848\u4F8B\u4E00-1" aria-hidden="true">#</a> \u6848\u4F8B\u4E00</h5><p>\u672C\u6848\u4F8B\u662F\u4E00\u4E2Alogback\u7B80\u5355\u5E94\u7528\uFF0C\u5E76\u4E14\u4E0D\u63D0\u4F9B\u914D\u7F6E\u6587\u4EF6\u800C\u4F7F\u7528\u5176\u63D0\u4F9B\u7684\u9ED8\u8BA4\u914D\u7F6E</p><ol><li>\u521B\u5EFAmaven\u5DE5\u7A0Blogback_demo\u5E76\u914D\u7F6Epom.xml\u6587\u4EF6</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 
                             http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>cn.itcast<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>logback_demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>ch.qos.logback<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>logback-classic<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>ch.qos.logback<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>logback-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u7F16\u5199\u5355\u5143\u6D4B\u8BD5</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>logback</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">ch<span class="token punctuation">.</span>qos<span class="token punctuation">.</span>logback<span class="token punctuation">.</span>classic<span class="token punctuation">.</span></span><span class="token class-name">Level</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">ch<span class="token punctuation">.</span>qos<span class="token punctuation">.</span>logback<span class="token punctuation">.</span>classic<span class="token punctuation">.</span></span><span class="token class-name">LoggerContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">ch<span class="token punctuation">.</span>qos<span class="token punctuation">.</span>logback<span class="token punctuation">.</span>core<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">StatusPrinter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Logger</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">LoggerFactory</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
* logback\u4F7F\u7528\u65B9\u6CD5
*/</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LogbackTest</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u7B80\u5355\u4F7F\u7528</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token string">&quot;cn.itcast.logback.HelloWorld&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;debug ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6253\u5370\u65E5\u5FD7\u5185\u90E8\u72B6\u6001</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token string">&quot;cn.itcast.logback.HelloWorld&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;debug ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u6253\u5370\u5185\u90E8\u7684\u72B6\u6001</span>
        <span class="token class-name">LoggerContext</span> lc <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">LoggerContext</span><span class="token punctuation">)</span><span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getILoggerFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">StatusPrinter</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>lc<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/*
    * \u65E5\u5FD7\u8F93\u51FA\u7EA7\u522B\uFF1AERROR &gt; WARN &gt; INFO &gt; DEBUG &gt; TRACE
    * */</span>

    <span class="token comment">//\u6D4B\u8BD5\u9ED8\u8BA4\u7684\u65E5\u5FD7\u8F93\u51FA\u7EA7\u522B</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token string">&quot;cn.itcast.logback.HelloWorld&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;error ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;warn ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;info ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;debug ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u56E0\u4E3A\u9ED8\u8BA4\u7684\u8F93\u51FA\u7EA7\u522B\u4E3Adebug\uFF0C\u6240\u4EE5\u8FD9\u4E00\u6761\u65E5\u5FD7\u4E0D\u4F1A\u8F93\u51FA</span>
        logger<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">&quot;trace ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u8BBE\u7F6E\u65E5\u5FD7\u8F93\u51FA\u7EA7\u522B</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name"><span class="token namespace">ch<span class="token punctuation">.</span>qos<span class="token punctuation">.</span>logback<span class="token punctuation">.</span>classic<span class="token punctuation">.</span></span>Logger</span> logger <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">ch<span class="token punctuation">.</span>qos<span class="token punctuation">.</span>logback<span class="token punctuation">.</span>classic<span class="token punctuation">.</span></span>Logger</span><span class="token punctuation">)</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token string">&quot;cn.itcast.logback.HelloWorld&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">setLevel</span><span class="token punctuation">(</span><span class="token class-name">Level</span><span class="token punctuation">.</span>WARN<span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;error ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;warn ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;info ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;debug ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">&quot;trace ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6D4B\u8BD5Logger\u7684\u7EE7\u627F</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name"><span class="token namespace">ch<span class="token punctuation">.</span>qos<span class="token punctuation">.</span>logback<span class="token punctuation">.</span>classic<span class="token punctuation">.</span></span>Logger</span> logger <span class="token operator">=</span> 
            <span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">ch<span class="token punctuation">.</span>qos<span class="token punctuation">.</span>logback<span class="token punctuation">.</span>classic<span class="token punctuation">.</span></span>Logger</span><span class="token punctuation">)</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token string">&quot;cn.itcast&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">setLevel</span><span class="token punctuation">(</span><span class="token class-name">Level</span><span class="token punctuation">.</span>INFO<span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;error ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;warn ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;info ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;debug ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">&quot;trace ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// &quot;cn.itcast.logback&quot; \u4F1A\u7EE7\u627F &quot;cn.itcast&quot; \u7684\u6709\u6548\u7EA7\u522B</span>
        <span class="token class-name">Logger</span> barLogger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token string">&quot;cn.itcast.logback&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u8FD9\u6761\u65E5\u5FD7\u4F1A\u6253\u5370\uFF0C\u56E0\u4E3A INFO &gt;= INFO</span>
        barLogger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\u5B50\u7EA7\u4FE1\u606F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u8FD9\u6761\u65E5\u5FD7\u4E0D\u4F1A\u6253\u5370\uFF0C\u56E0\u4E3A DEBUG &lt; INFO</span>
        barLogger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u5B50\u7EA7\u8C03\u8BD5\u4FE1\u606F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//Logger\u83B7\u53D6\uFF0C\u6839\u636E\u540C\u4E00\u4E2A\u540D\u79F0\u83B7\u5F97\u7684logger\u90FD\u662F\u540C\u4E00\u4E2A\u5B9E\u4F8B</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test6</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Logger</span> logger1 <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token string">&quot;cn.itcast&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Logger</span> logger2 <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token string">&quot;cn.itcast&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>logger1 <span class="token operator">==</span> logger2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u53C2\u6570\u5316\u65E5\u5FD7</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test7</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token string">&quot;cn.itcast&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;hello {}&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u6848\u4F8B\u4E8C-1"><a class="header-anchor" href="#\u6848\u4F8B\u4E8C-1" aria-hidden="true">#</a> \u6848\u4F8B\u4E8C</h5><p>\u672C\u6848\u4F8B\u662Flogback\u4E2DSpring Boot\u9879\u76EE\u4E2D\u7684\u5E94\u7528</p><ol><li>\u521B\u5EFAmaven\u5DE5\u7A0Bspringboot_logback_demo\u5E76\u914D\u7F6Epom\u6587\u4EF6</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 
                             http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.2.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>cn.itcast<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>springboot_logback_demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>ch.qos.logback<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>logback-classic<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>ch.qos.logback<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>logback-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u5728resources\u4E0B\u7F16\u5199logback\u914D\u7F6E\u6587\u4EF6logback-base.xml\u548Clogback-spring.xml</li></ol><p>logback-base.xml</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>included</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>contextName</span><span class="token punctuation">&gt;</span></span>logback<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>contextName</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 
		name\u7684\u503C\u662F\u53D8\u91CF\u7684\u540D\u79F0\uFF0Cvalue\u7684\u503C\u65F6\u53D8\u91CF\u5B9A\u4E49\u7684\u503C
		\u5B9A\u4E49\u53D8\u91CF\u540E\uFF0C\u53EF\u4EE5\u4F7F\u201C\${}\u201D\u6765\u4F7F\u7528\u53D8\u91CF
	--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>log.path<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>d:\\\\logs<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!-- \u5F69\u8272\u65E5\u5FD7 --&gt;</span>
    <span class="token comment">&lt;!-- \u5F69\u8272\u65E5\u5FD7\u4F9D\u8D56\u7684\u6E32\u67D3\u7C7B --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>conversionRule</span> 
              <span class="token attr-name">conversionWord</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>clr<span class="token punctuation">&quot;</span></span> 
              <span class="token attr-name">converterClass</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.boot.logging.logback.ColorConverter<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>conversionRule</span> 
              <span class="token attr-name">conversionWord</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">converterClass</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.boot.logging.logback.WhitespaceThrowableProxyConverter<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>conversionRule</span> <span class="token attr-name">conversionWord</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wEx<span class="token punctuation">&quot;</span></span> <span class="token attr-name">converterClass</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.boot.logging.logback.ExtendedWhitespaceThrowableProxyConverter<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!-- \u5F69\u8272\u65E5\u5FD7\u683C\u5F0F --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>CONSOLE_LOG_PATTERN<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${CONSOLE_LOG_PATTERN:-%clr(%d{yyyy-MM-dd HH:mm:ss.SSS}){faint} %clr(\${LOG_LEVEL_PATTERN:-%5p}) %clr(\${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n\${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!--\u8F93\u51FA\u5230\u63A7\u5236\u53F0--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>LOG_CONSOLE<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ch.qos.logback.core.ConsoleAppender<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Pattern</span><span class="token punctuation">&gt;</span></span>\${CONSOLE_LOG_PATTERN}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Pattern</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- \u8BBE\u7F6E\u5B57\u7B26\u96C6 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>charset</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>charset</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--\u8F93\u51FA\u5230\u6587\u4EF6--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>LOG_FILE<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ch.qos.logback.core.rolling.RollingFileAppender<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- \u6B63\u5728\u8BB0\u5F55\u7684\u65E5\u5FD7\u6587\u4EF6\u7684\u8DEF\u5F84\u53CA\u6587\u4EF6\u540D --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>file</span><span class="token punctuation">&gt;</span></span>\${log.path}/logback.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>file</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--\u65E5\u5FD7\u6587\u4EF6\u8F93\u51FA\u683C\u5F0F--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">&gt;</span></span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>charset</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>charset</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- \u65E5\u5FD7\u8BB0\u5F55\u5668\u7684\u6EDA\u52A8\u7B56\u7565\uFF0C\u6309\u65E5\u671F\uFF0C\u6309\u5927\u5C0F\u8BB0\u5F55 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rollingPolicy</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ch.qos.logback.core.rolling.TimeBasedRollingPolicy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- \u6BCF\u5929\u65E5\u5FD7\u5F52\u6863\u8DEF\u5F84\u4EE5\u53CA\u683C\u5F0F --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fileNamePattern</span><span class="token punctuation">&gt;</span></span>\${log.path}/info/log-info-%d{yyyy-MM-dd}.%i.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fileNamePattern</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>timeBasedFileNamingAndTriggeringPolicy</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxFileSize</span><span class="token punctuation">&gt;</span></span>100MB<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxFileSize</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>timeBasedFileNamingAndTriggeringPolicy</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--\u65E5\u5FD7\u6587\u4EF6\u4FDD\u7559\u5929\u6570--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxHistory</span><span class="token punctuation">&gt;</span></span>15<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxHistory</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rollingPolicy</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>included</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>logback-spring.xml</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--\u5F15\u5165\u5176\u4ED6\u914D\u7F6E\u6587\u4EF6--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logback-base.xml<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!--
    &lt;logger&gt;\u7528\u6765\u8BBE\u7F6E\u67D0\u4E00\u4E2A\u5305\u6216\u8005\u5177\u4F53\u7684\u67D0\u4E00\u4E2A\u7C7B\u7684\u65E5\u5FD7\u6253\u5370\u7EA7\u522B\u3001
    \u4EE5\u53CA\u6307\u5B9A&lt;appender&gt;\u3002&lt;logger&gt;\u4EC5\u6709\u4E00\u4E2Aname\u5C5E\u6027\uFF0C
    \u4E00\u4E2A\u53EF\u9009\u7684level\u548C\u4E00\u4E2A\u53EF\u9009\u7684addtivity\u5C5E\u6027\u3002
    name:\u7528\u6765\u6307\u5B9A\u53D7\u6B64logger\u7EA6\u675F\u7684\u67D0\u4E00\u4E2A\u5305\u6216\u8005\u5177\u4F53\u7684\u67D0\u4E00\u4E2A\u7C7B\u3002
    level:\u7528\u6765\u8BBE\u7F6E\u6253\u5370\u7EA7\u522B\uFF0C\u5927\u5C0F\u5199\u65E0\u5173\uFF1ATRACE, DEBUG, INFO, WARN, ERROR, ALL \u548C OFF\uFF0C
          \u5982\u679C\u672A\u8BBE\u7F6E\u6B64\u5C5E\u6027\uFF0C\u90A3\u4E48\u5F53\u524Dlogger\u5C06\u4F1A\u7EE7\u627F\u4E0A\u7EA7\u7684\u7EA7\u522B\u3002
    addtivity:\u662F\u5426\u5411\u4E0A\u7EA7logger\u4F20\u9012\u6253\u5370\u4FE1\u606F\u3002\u9ED8\u8BA4\u662Ftrue\u3002
     --&gt;</span>

    <span class="token comment">&lt;!--\u5F00\u53D1\u73AF\u5883--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>springProfile</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dev<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itcast.controller<span class="token punctuation">&quot;</span></span> <span class="token attr-name">additivity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>debug<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>LOG_CONSOLE<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>logger</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>springProfile</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--\u751F\u4EA7\u73AF\u5883--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>springProfile</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pro<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itcast.controller<span class="token punctuation">&quot;</span></span> <span class="token attr-name">additivity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>LOG_FILE<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>logger</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>springProfile</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--
    root\u8282\u70B9\u662F\u5FC5\u9009\u8282\u70B9\uFF0C\u7528\u6765\u6307\u5B9A\u6700\u57FA\u7840\u7684\u65E5\u5FD7\u8F93\u51FA\u7EA7\u522B\uFF0C\u53EA\u6709\u4E00\u4E2Alevel\u5C5E\u6027
    level:\u8BBE\u7F6E\u6253\u5370\u7EA7\u522B\uFF0C\u5927\u5C0F\u5199\u65E0\u5173\uFF1ATRACE, DEBUG, INFO, WARN, ERROR, ALL \u548C OFF \u9ED8\u8BA4\u662FDEBUG
    \u53EF\u4EE5\u5305\u542B\u96F6\u4E2A\u6216\u591A\u4E2A\u5143\u7D20\uFF0C\u6807\u8BC6\u8FD9\u4E2Aappender\u5C06\u4F1A\u6DFB\u52A0\u5230\u8FD9\u4E2Alogger\u3002
    --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>LOG_CONSOLE<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>LOG_FILE<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>root</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u7F16\u5199application.yml</li></ol><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9000</span>
<span class="token key atrule">logging</span><span class="token punctuation">:</span>
  <span class="token comment">#\u5728Spring Boot\u9879\u76EE\u4E2D\u9ED8\u8BA4\u52A0\u8F7D\u7C7B\u8DEF\u5F84\u4E0B\u7684logback-spring.xml\u6587\u4EF6</span>
  <span class="token key atrule">config</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>logback<span class="token punctuation">-</span>spring.xml
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">profiles</span><span class="token punctuation">:</span>
    <span class="token key atrule">active</span><span class="token punctuation">:</span> dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u521B\u5EFAUserController</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Logger</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">LoggerFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>
    <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">UserController</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/get&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        logger<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">&quot;trace...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;debug...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;info...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;warn...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;error...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>\u521B\u5EFA\u542F\u52A8\u7C7B</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LogbackApp</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">LogbackApp</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u542F\u52A8\u9879\u76EE\uFF0C\u8BBF\u95EE\u5730\u5740\uFF1Ahttp://localhost:9000/user/get</p><p>\u53EF\u4EE5\u770B\u5230\u63A7\u5236\u53F0\u5DF2\u7ECF\u5F00\u59CB\u8F93\u51FA\u65E5\u5FD7\u4FE1\u606F</p><p>\u4FEE\u6539application.yml\u6587\u4EF6\u4E2D\u7684\u5F00\u53D1\u6A21\u5F0F\u4E3Apro\uFF0C\u91CD\u542F\u9879\u76EE\u8FD9\u65E5\u5FD7\u8F93\u51FA\u5230\u4E86\u6587\u4EF6\u4E2D</p><h3 id="spring-event"><a class="header-anchor" href="#spring-event" aria-hidden="true">#</a> Spring Event</h3><h4 id="spring-event\u4ECB\u7ECD"><a class="header-anchor" href="#spring-event\u4ECB\u7ECD" aria-hidden="true">#</a> Spring Event\u4ECB\u7ECD</h4><p>Spring Event\u662FSpring\u7684\u4E8B\u4EF6\u901A\u77E5\u673A\u5236\uFF0C\u53EF\u4EE5\u5C06\u76F8\u4E92\u8026\u5408\u7684\u4EE3\u7801\u89E3\u8026\uFF0C\u4ECE\u800C\u65B9\u4FBF\u529F\u80FD\u7684\u4FEE\u6539\u4E0E\u6DFB\u52A0\u3002Spring Event\u662F\u76D1\u542C\u8005\u6A21\u5F0F\u7684\u4E00\u4E2A\u5177\u4F53\u5B9E\u73B0</p><p>\u76D1\u542C\u8005\u6A21\u5F0F\u5305\u542B\u4E86\u76D1\u542C\u8005Listener\u3001\u4E8B\u4EF6Event\u3001\u4E8B\u4EF6\u53D1\u5E03\u8005EventPublish\uFF0C\u8FC7\u7A0B\u5C31\u662FEventPublish\u53D1\u5E03\u4E00\u4E2A\u4E8B\u4EF6\uFF0C\u88AB\u76D1\u542C\u8005\u6355\u83B7\u5230\uFF0C\u7136\u540E\u6267\u884C\u4E8B\u4EF6\u76F8\u5E94\u7684\u65B9\u6CD5</p><p>Spring Event\u7684\u76F8\u5173API\u5728spring-context\u5305\u4E2D</p><h4 id="spring-event\u5165\u95E8\u6848\u4F8B"><a class="header-anchor" href="#spring-event\u5165\u95E8\u6848\u4F8B" aria-hidden="true">#</a> Spring Event\u5165\u95E8\u6848\u4F8B</h4><ol><li>\u521B\u5EFAmaven\u5DE5\u7A0Bspringevent_demo\u5E76\u914D\u7F6Epom.xml\u6587\u4EF6</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 
                             http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.2.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>cn.itcast<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>springevent_demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u521B\u5EFAOptLogDTO\u7C7B\uFF0C\u7528\u4E8E\u5C01\u88C5\u64CD\u4F5C\u65E5\u5FD7\u4FE1\u606F</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>dto</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OptLogDTO</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> requestIp<span class="token punctuation">;</span> <span class="token comment">//\u64CD\u4F5CIP</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> type<span class="token punctuation">;</span> <span class="token comment">//\u65E5\u5FD7\u7C7B\u578B LogType{OPT:\u64CD\u4F5C\u7C7B\u578B;EX:\u5F02\u5E38\u7C7B\u578B}</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> userName<span class="token punctuation">;</span> <span class="token comment">//\u64CD\u4F5C\u4EBA</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> description<span class="token punctuation">;</span> <span class="token comment">//\u64CD\u4F5C\u63CF\u8FF0</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u521B\u5EFA\u4E8B\u4EF6\u7C7BSysLogEvent</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>event</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">OptLogDTO</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ApplicationEvent</span></span><span class="token punctuation">;</span>
<span class="token doc-comment comment">/**
* \u5B9A\u4E49\u7CFB\u7EDF\u65E5\u5FD7\u4E8B\u4EF6
*/</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SysLogEvent</span> <span class="token keyword">extends</span> <span class="token class-name">ApplicationEvent</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">SysLogEvent</span><span class="token punctuation">(</span><span class="token class-name">OptLogDTO</span> optLogDTO<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>optLogDTO<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u521B\u5EFA\u76D1\u542C\u5668\u7C7BSysLogListener</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>listener</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">OptLogDTO</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>event<span class="token punctuation">.</span></span><span class="token class-name">SysLogEvent</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>event<span class="token punctuation">.</span></span><span class="token class-name">EventListener</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>scheduling<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Async</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
* \u5F02\u6B65\u76D1\u542C\u65E5\u5FD7\u4E8B\u4EF6
*/</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SysLogListener</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Async</span><span class="token comment">//\u5F02\u6B65\u5904\u7406</span>
    <span class="token annotation punctuation">@EventListener</span><span class="token punctuation">(</span><span class="token class-name">SysLogEvent</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">saveSysLog</span><span class="token punctuation">(</span><span class="token class-name">SysLogEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">OptLogDTO</span> sysLog <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">OptLogDTO</span><span class="token punctuation">)</span> event<span class="token punctuation">.</span><span class="token function">getSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> id <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u76D1\u542C\u5230\u65E5\u5FD7\u64CD\u4F5C\u4E8B\u4EF6\uFF1A&quot;</span> <span class="token operator">+</span> sysLog <span class="token operator">+</span> <span class="token string">&quot; \u7EBF\u7A0Bid\uFF1A&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u5C06\u65E5\u5FD7\u4FE1\u606F\u4FDD\u5B58\u5230\u6570\u636E\u5E93...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>\u521B\u5EFAController\uFF0C\u7528\u4E8E\u53D1\u5E03\u4E8B\u4EF6</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>dto<span class="token punctuation">.</span></span><span class="token class-name">OptLogDTO</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>event<span class="token punctuation">.</span></span><span class="token class-name">SysLogEvent</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ApplicationContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ApplicationEvent</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/getUser&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//\u6784\u9020\u64CD\u4F5C\u65E5\u5FD7\u4FE1\u606F</span>
        <span class="token class-name">OptLogDTO</span> logInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OptLogDTO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logInfo<span class="token punctuation">.</span><span class="token function">setRequestIp</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logInfo<span class="token punctuation">.</span><span class="token function">setUserName</span><span class="token punctuation">(</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logInfo<span class="token punctuation">.</span><span class="token function">setType</span><span class="token punctuation">(</span><span class="token string">&quot;OPT&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logInfo<span class="token punctuation">.</span><span class="token function">setDescription</span><span class="token punctuation">(</span><span class="token string">&quot;\u67E5\u8BE2\u7528\u6237\u4FE1\u606F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
        <span class="token comment">//\u6784\u9020\u4E8B\u4EF6\u5BF9\u8C61</span>
        <span class="token class-name">ApplicationEvent</span> event <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SysLogEvent</span><span class="token punctuation">(</span>logInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">//\u53D1\u5E03\u4E8B\u4EF6</span>
        applicationContext<span class="token punctuation">.</span><span class="token function">publishEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">long</span> id <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u53D1\u5E03\u4E8B\u4EF6,\u7EBF\u7A0Bid\uFF1A&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li>\u521B\u5EFA\u542F\u52A8\u7C7B</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>scheduling<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">EnableAsync</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableAsync</span><span class="token comment">//\u542F\u7528\u5F02\u6B65\u5904\u7406</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringEventApp</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringEventApp</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u542F\u52A8\u9879\u76EE\u5E76\u8BBF\u95EEController\u53EF\u4EE5\u53D1\u73B0\u76D1\u542C\u5668\u89E6\u53D1\u4E86</p><h3 id="pd-tools-log\u4F7F\u7528"><a class="header-anchor" href="#pd-tools-log\u4F7F\u7528" aria-hidden="true">#</a> pd-tools-log\u4F7F\u7528</h3><p>pd-tools-log\u7684\u5F00\u53D1\u6B65\u9AA4\u4E3A\uFF1A</p><ol><li><p>\u5B9A\u4E49\u65E5\u5FD7\u64CD\u4F5C\u4E8B\u4EF6\u7C7BSysLogEvent</p></li><li><p>\u5B9A\u4E49@SysLog\u6CE8\u89E3\uFF0C\u7528\u4E8E\u5728Controller\u7684\u65B9\u6CD5\u4E0A\u6807\u6CE8\u5F53\u524D\u65B9\u6CD5\u9700\u8981\u8FDB\u884C\u64CD\u4F5C\u65E5\u5FD7\u7684\u4FDD\u5B58\u5904\u7406</p></li><li><p>\u5B9A\u4E49\u5207\u9762\u7C7BSysLogAspect</p></li><li><p>\u5728\u5207\u9762\u7C7BSysLogAspect\u4E2D\u5B9A\u4E49\u5207\u70B9\uFF0C\u62E6\u622AController\u4E2D\u6DFB\u52A0@SysLog\u6CE8\u89E3\u7684\u65B9\u6CD5</p></li><li><p>\u5728\u5207\u9762\u7C7BSysLogAspect\u4E2D\u5B9A\u4E49\u524D\u7F6E\u901A\u77E5\uFF0C\u5728\u524D\u7F6E\u901A\u77E5\u65B9\u6CD5recordLog\u4E2D\u6536\u96C6\u64CD\u4F5C\u65E5\u5FD7\u76F8\u5173\u4FE1\u606F\u5C01\u88C5\u4E3AOptLogDTO\u5BF9\u8C61\u5E76\u4FDD\u5B58\u5230ThreadLocal\u4E2D</p></li><li><p>\u5728\u5207\u9762\u7C7BSysLogAspect\u4E2D\u5B9A\u4E49\u540E\u7F6E\u901A\u77E5\uFF0C\u5728\u540E\u7F6E\u901A\u77E5\u65B9\u6CD5doAfterReturning\u4E2D\u901A\u8FC7ThreadLocal \u83B7\u53D6OptLogDTO\u5E76\u7EE7\u7EED\u8BBE\u7F6E\u5176\u4ED6\u7684\u64CD\u4F5C\u4FE1\u606F\u5230OptLogDTO</p></li><li><p>\u5728\u5207\u9762\u7C7BSysLogAspect\u7684\u540E\u7F6E\u901A\u77E5\u65B9\u6CD5doAfterReturning\u4E2D\u53D1\u5E03\u4E8B\u4EF6SysLogEvent</p></li><li><p>\u5B9A\u4E49\u76D1\u542C\u5668SysLogListener\uFF0C\u76D1\u542C\u65E5\u5FD7\u53D1\u5E03\u4E8B\u4EF6SysLogEvent</p></li><li><p>\u5B9A\u4E49\u914D\u7F6E\u7C7BLogAutoConfiguration\uFF0C\u7528\u4E8E\u81EA\u52A8\u914D\u7F6E\u5207\u9762SysLogAspect\u5BF9\u8C61</p></li><li><p>\u5B9A\u4E49starter\u6240\u9700\u7684META-INF/spring.factories\u6587\u4EF6\uFF0C\u5E76\u914D\u7F6E\u81EA\u52A8\u914D\u7F6E\u7C7BLogAutoConfiguration</p></li></ol><p><strong>\u95EE\u9898\u601D\u8003\uFF1A</strong></p><p>\u901A\u8FC7\u5206\u6790pd-tools-log\u7684\u4EE3\u7801\u53EF\u4EE5\u53D1\u73B0\uFF0C\u5B83\u53EA\u662F\u5C06\u65E5\u5FD7\u4FE1\u606F\u8FDB\u884C\u6536\u96C6\u7136\u540E\u53D1\u5E03\u65E5\u5FD7\u4E8B\u4EF6\uFF0C\u6700\u540E\u901A\u8FC7\u76D1\u542C\u5668\u6765\u76D1\u542C\u65E5\u5FD7\u4E8B\u4EF6\uFF0C\u5E76\u6CA1\u6709\u771F\u6B63\u5C06\u65E5\u5FD7\u4FE1\u606F\u4FDD\u5B58\u5230\u6570\u636E\u5E93\uFF0C\u8FD9\u662F\u4E3A\u4EC0\u4E48\u5462\uFF1F</p><p>\u8FD9\u662F\u56E0\u4E3A\u4E0D\u540C\u7684\u7CFB\u7EDF\u5BF9\u4E8E\u64CD\u4F5C\u65E5\u5FD7\u7684\u5904\u7406\u65B9\u5F0F\u53EF\u80FD\u4E0D\u540C\uFF0C\u6BD4\u5982\u6709\u7684\u7CFB\u7EDF\u53EF\u80FD\u5C06\u65E5\u5FD7\u4FDD\u5B58\u5230\u6570\u636E\u5E93\uFF0C\u6709\u7684\u7CFB\u7EDF\u53EF\u80FD\u5C06\u65E5\u5FD7\u4FDD\u5B58\u5230\u6587\u4EF6\u3002pd-tools-log\u4F5C\u4E3A\u901A\u7528\u7684\u65E5\u5FD7\u7EC4\u4EF6\u4E0D\u53EF\u80FD\u5C06\u5177\u4F53\u7684\u65E5\u5FD7\u5904\u7406\u903B\u8F91\u9650\u5236\u6B7B\uFF0C\u6240\u4EE5\u4ED6\u53EA\u662F\u5C06\u65E5\u5FD7\u4FE1\u606F\u8FDB\u884C\u6536\u96C6\uFF0C\u5177\u4F53\u7684\u5904\u7406\u65B9\u5F0F\u9700\u8981\u4EA4\u7ED9\u6211\u4EEC\u7684\u5E94\u7528\u7CFB\u7EDF\u6765\u5B8C\u6210</p><p><strong>\u5177\u4F53\u4F7F\u7528\u8FC7\u7A0B\uFF1A</strong></p><ol><li>\u521B\u5EFAmaven\u5DE5\u7A0BmyLogApp\u5E76\u914D\u7F6Epom.xml\u6587\u4EF6</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 
                             http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.2.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>myLogApp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>pd-tools-log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-config<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u521B\u5EFAlogback\u914D\u7F6E\u6587\u4EF6logback-base.xml\u548Clogback-spring.xml</li></ol><p>logback-base.xml</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>included</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>contextName</span><span class="token punctuation">&gt;</span></span>logback<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>contextName</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--
		name\u7684\u503C\u662F\u53D8\u91CF\u7684\u540D\u79F0\uFF0Cvalue\u7684\u503C\u65F6\u53D8\u91CF\u5B9A\u4E49\u7684\u503C
		\u5B9A\u4E49\u53D8\u91CF\u540E\uFF0C\u53EF\u4EE5\u4F7F\u201C\${}\u201D\u6765\u4F7F\u7528\u53D8\u91CF
	--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>log.path<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>d:\\\\logs<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!-- \u5F69\u8272\u65E5\u5FD7 --&gt;</span>
    <span class="token comment">&lt;!-- \u5F69\u8272\u65E5\u5FD7\u4F9D\u8D56\u7684\u6E32\u67D3\u7C7B --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>conversionRule</span>
            <span class="token attr-name">conversionWord</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>clr<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">converterClass</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.boot.logging.logback.ColorConverter<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>conversionRule</span>
            <span class="token attr-name">conversionWord</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">converterClass</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.boot.logging.logback.WhitespaceThrowableProxyConverter<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>conversionRule</span> <span class="token attr-name">conversionWord</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wEx<span class="token punctuation">&quot;</span></span> <span class="token attr-name">converterClass</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.boot.logging.logback.ExtendedWhitespaceThrowableProxyConverter<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!-- \u5F69\u8272\u65E5\u5FD7\u683C\u5F0F --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>CONSOLE_LOG_PATTERN<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${CONSOLE_LOG_PATTERN:-%clr(%d{yyyy-MM-dd HH:mm:ss.SSS}){faint} %clr(\${LOG_LEVEL_PATTERN:-%5p}) %clr(\${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n\${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!--\u8F93\u51FA\u5230\u63A7\u5236\u53F0--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>LOG_CONSOLE<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ch.qos.logback.core.ConsoleAppender<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Pattern</span><span class="token punctuation">&gt;</span></span>\${CONSOLE_LOG_PATTERN}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Pattern</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- \u8BBE\u7F6E\u5B57\u7B26\u96C6 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>charset</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>charset</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--\u8F93\u51FA\u5230\u6587\u4EF6--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>LOG_FILE<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ch.qos.logback.core.rolling.RollingFileAppender<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- \u6B63\u5728\u8BB0\u5F55\u7684\u65E5\u5FD7\u6587\u4EF6\u7684\u8DEF\u5F84\u53CA\u6587\u4EF6\u540D --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>file</span><span class="token punctuation">&gt;</span></span>\${log.path}/logback.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>file</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--\u65E5\u5FD7\u6587\u4EF6\u8F93\u51FA\u683C\u5F0F--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">&gt;</span></span>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>charset</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>charset</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- \u65E5\u5FD7\u8BB0\u5F55\u5668\u7684\u6EDA\u52A8\u7B56\u7565\uFF0C\u6309\u65E5\u671F\uFF0C\u6309\u5927\u5C0F\u8BB0\u5F55 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rollingPolicy</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ch.qos.logback.core.rolling.TimeBasedRollingPolicy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- \u6BCF\u5929\u65E5\u5FD7\u5F52\u6863\u8DEF\u5F84\u4EE5\u53CA\u683C\u5F0F --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fileNamePattern</span><span class="token punctuation">&gt;</span></span>\${log.path}/info/log-info-%d{yyyy-MM-dd}.%i.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fileNamePattern</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>timeBasedFileNamingAndTriggeringPolicy</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxFileSize</span><span class="token punctuation">&gt;</span></span>100MB<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxFileSize</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>timeBasedFileNamingAndTriggeringPolicy</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--\u65E5\u5FD7\u6587\u4EF6\u4FDD\u7559\u5929\u6570--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maxHistory</span><span class="token punctuation">&gt;</span></span>15<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maxHistory</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rollingPolicy</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>included</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>logback-spring.xml</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--\u5F15\u5165\u5176\u4ED6\u914D\u7F6E\u6587\u4EF6--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logback-base.xml<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

    <span class="token comment">&lt;!--\u5F00\u53D1\u73AF\u5883--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>springProfile</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dev<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.itheima<span class="token punctuation">&quot;</span></span> <span class="token attr-name">additivity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>debug<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>LOG_CONSOLE<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>logger</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>springProfile</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--\u751F\u4EA7\u73AF\u5883--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>springProfile</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pro<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.itheima<span class="token punctuation">&quot;</span></span> <span class="token attr-name">additivity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>LOG_FILE<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>logger</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>springProfile</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>LOG_CONSOLE<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>LOG_FILE<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>root</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u7F16\u5199application.yml</li></ol><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>
<span class="token key atrule">pinda</span><span class="token punctuation">:</span>
  <span class="token key atrule">log</span><span class="token punctuation">:</span>
    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">logging</span><span class="token punctuation">:</span>
  <span class="token comment">#\u5728Spring Boot\u9879\u76EE\u4E2D\u9ED8\u8BA4\u52A0\u8F7D\u7C7B\u8DEF\u5F84\u4E0B\u7684logback-spring.xml\u6587\u4EF6</span>
  <span class="token key atrule">config</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>logback<span class="token punctuation">-</span>spring.xml
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">profiles</span><span class="token punctuation">:</span>
    <span class="token key atrule">active</span><span class="token punctuation">:</span> dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u521B\u5EFAUserController</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pinda<span class="token punctuation">.</span>log<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">SysLog</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Api</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiImplicitParam</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiImplicitParams</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiOperation</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Api</span><span class="token punctuation">(</span>tags <span class="token operator">=</span> <span class="token string">&quot;\u7528\u6237\u63A7\u5236\u5668&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@SysLog</span><span class="token punctuation">(</span><span class="token string">&quot;\u5206\u9875\u67E5\u8BE2\u7528\u6237&quot;</span><span class="token punctuation">)</span><span class="token comment">//\u8BB0\u5F55\u64CD\u4F5C\u65E5\u5FD7</span>
    <span class="token annotation punctuation">@ApiImplicitParams</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token annotation punctuation">@ApiImplicitParam</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;pageNum&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;\u9875\u7801&quot;</span><span class="token punctuation">,</span>
                    required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token string">&quot;Integer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@ApiImplicitParam</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;pageSize&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;\u6BCF\u9875\u6761\u6570&quot;</span><span class="token punctuation">,</span>
                    required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token string">&quot;Integer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;\u5206\u9875\u67E5\u8BE2\u7528\u6237\u4FE1\u606F&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;page/{pageNum}/{pageSize}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">findByPage</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> pageNum<span class="token punctuation">,</span>
                             <span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> pageSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>\u521B\u5EFALogService</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pinda<span class="token punctuation">.</span>log<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">OptLogDTO</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Service</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LogService</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u5C06\u65E5\u5FD7\u4FE1\u606F\u4FDD\u5B58\u5230\u6570\u636E\u5E93</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">saveLog</span><span class="token punctuation">(</span><span class="token class-name">OptLogDTO</span> optLogDTO<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//\u6B64\u5904\u53EA\u662F\u5C06\u65E5\u5FD7\u4FE1\u606F\u8FDB\u884C\u8F93\u51FA\uFF0C\u5B9E\u9645\u9879\u76EE\u4E2D\u53EF\u4EE5\u5C06\u65E5\u5FD7\u4FE1\u606F\u4FDD\u5B58\u5230\u6570\u636E\u5E93</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;\u4FDD\u5B58\u65E5\u5FD7\u4FE1\u606F\uFF1A&quot;</span> <span class="token operator">+</span> optLogDTO<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li>\u521B\u5EFA\u914D\u7F6E\u7C7B</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pinda<span class="token punctuation">.</span>log<span class="token punctuation">.</span>event<span class="token punctuation">.</span></span><span class="token class-name">SysLogListener</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">LogService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>condition<span class="token punctuation">.</span></span><span class="token class-name">ConditionalOnMissingBean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>

<span class="token comment">/*
*\u65E5\u5FD7\u914D\u7F6E\u7C7B
*/</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LogAutoConfiguration</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u81EA\u52A8\u914D\u7F6E\u65E5\u5FD7\u76D1\u542C\u5668\u7EC4\u4EF6</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@ConditionalOnMissingBean</span>
    <span class="token keyword">public</span> <span class="token class-name">SysLogListener</span> <span class="token function">sysLogListener</span><span class="token punctuation">(</span><span class="token class-name">LogService</span> logService<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SysLogListener</span><span class="token punctuation">(</span>optLogDTO <span class="token operator">-&gt;</span> logService<span class="token punctuation">.</span><span class="token function">saveLog</span><span class="token punctuation">(</span>optLogDTO<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="7"><li>\u7F16\u5199\u542F\u52A8\u7C7B</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyLogApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">MyLogApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u542F\u52A8\u9879\u76EE\uFF0C\u8BBF\u95EE\u5730\u5740\uFF1Ahttp://localhost:8080/user/page/1/10</p><p>\u53EF\u4EE5\u770B\u5230LogService\u7684saveLog\u65B9\u6CD5\u5DF2\u7ECF\u88AB\u8C03\u7528\u4E86</p><h2 id="pd-tools-jwt"><a class="header-anchor" href="#pd-tools-jwt" aria-hidden="true">#</a> pd-tools-jwt</h2><p>pd-tools-jwt\u6A21\u5757\u7684\u5B9A\u4F4D\u662F\u5BF9\u4E8Ejwt\u4EE4\u724C\u76F8\u5173\u64CD\u4F5C\u8FDB\u884C\u5C01\u88C5\uFF0C\u4E3A\u8BA4\u8BC1\u3001\u9274\u6743\u63D0\u4F9B\u652F\u6491</p><p>\u63D0\u4F9B\u7684\u529F\u80FD\uFF1A\u751F\u6210jwt token\u3001\u89E3\u6790jwt token</p><h3 id="\u8BA4\u8BC1\u673A\u5236\u4ECB\u7ECD"><a class="header-anchor" href="#\u8BA4\u8BC1\u673A\u5236\u4ECB\u7ECD" aria-hidden="true">#</a> \u8BA4\u8BC1\u673A\u5236\u4ECB\u7ECD</h3><h4 id="http-basic-auth"><a class="header-anchor" href="#http-basic-auth" aria-hidden="true">#</a> HTTP Basic Auth</h4><p>HTTP Basic Auth \u662F\u4E00\u79CD\u7B80\u5355\u7684\u767B\u5F55\u8BA4\u8BC1\u65B9\u5F0F\uFF0CWeb\u6D4F\u89C8\u5668\u6216\u5176\u4ED6\u5BA2\u6237\u7AEF\u7A0B\u5E8F\u5728\u8BF7\u6C42\u65F6\u63D0\u4F9B\u7528\u6237\u540D\u548C\u5BC6\u7801\uFF0C\u901A\u5E38\u7528\u6237\u540D\u548C\u5BC6\u7801\u4F1A\u901A\u8FC7HTTP\u5934\u4F20\u9012\u3002\u7B80\u5355\u70B9\u8BF4\u5C31\u662F\u6BCF\u6B21\u8BF7\u6C42\u65F6\u90FD\u63D0\u4F9B\u7528\u6237\u7684username\u548Cpassword</p><p>\u8FD9\u79CD\u65B9\u5F0F\u662F\u5148\u628A\u7528\u6237\u540D\u3001\u5192\u53F7\u3001\u5BC6\u7801\u62FC\u63A5\u8D77\u6765\uFF0C\u5E76\u5C06\u5F97\u51FA\u7684\u7ED3\u679C\u5B57\u7B26\u4E32\u7528Base64\u7B97\u6CD5\u7F16\u7801</p><p>\u4F8B\u5982\uFF0C\u63D0\u4F9B\u7684\u7528\u6237\u540D\u662F <code>bill</code> \u3001\u53E3\u4EE4\u662F <code>123456</code> \uFF0C\u5219\u62FC\u63A5\u540E\u7684\u7ED3\u679C\u5C31\u662F <code>bill:123456</code> \uFF0C\u7136\u540E\u518D\u5C06\u5176\u7528Base64\u7F16\u7801\uFF0C\u5F97\u5230 <code>YmlsbDoxMjM0NTY=</code> \u3002\u6700\u7EC8\u5C06Base64\u7F16\u7801\u7684\u5B57\u7B26\u4E32\u53D1\u9001\u51FA\u53BB\uFF0C\u7531\u63A5\u6536\u8005\u89E3\u7801\u5F97\u5230\u4E00\u4E2A\u7531\u5192\u53F7\u5206\u9694\u7684\u7528\u6237\u540D\u548C\u53E3\u4EE4\u7684\u5B57\u7B26\u4E32</p><p><strong>\u4F18\u70B9\uFF1A</strong></p><p>\u57FA\u672C\u4E0A\u6240\u6709\u6D41\u884C\u7684\u7F51\u9875\u6D4F\u89C8\u5668\u90FD\u652F\u6301\u57FA\u672C\u8BA4\u8BC1</p><p><strong>\u7F3A\u70B9\uFF1A</strong></p><p>\u7531\u4E8E\u7528\u6237\u540D\u548C\u5BC6\u7801\u90FD\u662FBase64\u7F16\u7801\u7684\uFF0C\u800CBase64\u7F16\u7801\u662F\u53EF\u9006\u7684\uFF0C\u6240\u4EE5\u7528\u6237\u540D\u548C\u5BC6\u7801\u53EF\u4EE5\u8BA4\u4E3A\u662F\u660E\u6587\u3002\u6240\u4EE5\u53EA\u6709\u5728\u5BA2\u6237\u7AEF\u548C\u670D\u52A1\u5668\u4E3B\u673A\u4E4B\u95F4\u7684\u8FDE\u63A5\u662F\u5B89\u5168\u53EF\u4FE1\u7684\u524D\u63D0\u4E0B\u624D\u53EF\u4EE5\u4F7F\u7528</p><h4 id="cookie-session-auth"><a class="header-anchor" href="#cookie-session-auth" aria-hidden="true">#</a> Cookie-Session Auth</h4><p>Cookie-session \u8BA4\u8BC1\u673A\u5236\u662F\u901A\u8FC7\u6D4F\u89C8\u5668\u5E26\u4E0A\u6765Cookie\u5BF9\u8C61\u6765\u4E0E\u670D\u52A1\u5668\u7AEF\u7684session\u5BF9\u8C61\u5339\u914D\u6765\u5B9E\u73B0\u72B6\u6001\u7BA1\u7406</p><p>\u7B2C\u4E00\u6B21\u8BF7\u6C42\u8BA4\u8BC1\u5728\u670D\u52A1\u7AEF\u521B\u5EFA\u4E00\u4E2ASession\u5BF9\u8C61\uFF0C\u540C\u65F6\u5728\u7528\u6237\u7684\u6D4F\u89C8\u5668\u7AEF\u521B\u5EFA\u4E86\u4E00\u4E2ACookie\u5BF9\u8C61\uFF1B\u5F53\u6211\u4EEC\u5173\u95ED\u6D4F\u89C8\u5668\u7684\u65F6\u5019\uFF0Ccookie\u4F1A\u88AB\u5220\u9664\u3002\u4F46\u53EF\u4EE5\u901A\u8FC7\u4FEE\u6539cookie \u7684expire time\u4F7Fcookie\u5728\u4E00\u5B9A\u65F6\u95F4\u5185\u6709\u6548</p><p><strong>\u4F18\u70B9\uFF1A</strong></p><p>\u76F8\u5BF9HTTP Basic Auth\u66F4\u52A0\u5B89\u5168</p><p><strong>\u7F3A\u70B9\uFF1A</strong></p><p>\u8FD9\u79CD\u57FA\u4E8Ecookie-session\u7684\u8BA4\u8BC1\u4F7F\u5E94\u7528\u672C\u8EAB\u5F88\u96BE\u5F97\u5230\u6269\u5C55\uFF0C\u968F\u7740\u4E0D\u540C\u5BA2\u6237\u7AEF\u7528\u6237\u7684\u589E\u52A0\uFF0C\u72EC\u7ACB\u7684\u670D\u52A1\u5668\u5DF2\u65E0\u6CD5\u627F\u8F7D\u66F4\u591A\u7684\u7528\u6237\uFF0C\u800C\u8FD9\u65F6\u5019\u57FA\u4E8Esession\u8BA4\u8BC1\u5E94\u7528\u7684\u95EE\u9898\u5C31\u4F1A\u66B4\u9732\u51FA\u6765</p><h4 id="oauth"><a class="header-anchor" href="#oauth" aria-hidden="true">#</a> OAuth</h4><p>OAuth \u662F\u4E00\u4E2A\u5173\u4E8E\u6388\u6743\uFF08authorization\uFF09\u7684\u5F00\u653E\u7F51\u7EDC\u6807\u51C6\u3002\u5141\u8BB8\u7528\u6237\u63D0\u4F9B\u4E00\u4E2A\u4EE4\u724C\uFF0C\u800C\u4E0D\u662F\u7528\u6237\u540D\u548C\u5BC6\u7801\u6765\u8BBF\u95EE\u4ED6\u4EEC\u5B58\u653E\u5728\u7279\u5B9A\u670D\u52A1\u63D0\u4F9B\u8005\u7684\u6570\u636E\u3002\u73B0\u5728\u7684\u7248\u672C\u662F2.0\u7248</p><p>\u4E25\u683C\u6765\u8BF4\uFF0COAuth2\u4E0D\u662F\u4E00\u4E2A\u6807\u51C6\u534F\u8BAE\uFF0C\u800C\u662F\u4E00\u4E2A\u5B89\u5168\u7684\u6388\u6743\u6846\u67B6\u3002\u5B83\u8BE6\u7EC6\u63CF\u8FF0\u4E86\u7CFB\u7EDF\u4E2D\u4E0D\u540C\u89D2\u8272\u3001\u7528\u6237\u3001\u670D\u52A1\u524D\u7AEF\u5E94\u7528\uFF08\u6BD4\u5982API\uFF09\uFF0C\u4EE5\u53CA\u5BA2\u6237\u7AEF\uFF08\u6BD4\u5982\u7F51\u7AD9\u6216\u79FB\u52A8App\uFF09\u4E4B\u95F4\u600E\u4E48\u5B9E\u73B0\u76F8\u4E92\u8BA4\u8BC1</p><p>OAuth\u6D41\u7A0B\u5982\u4E0B\u56FE\uFF1A</p><p><img src="`+N+'" alt="img"></p><p><strong>\u4F18\u70B9\uFF1A</strong></p><ul><li>\u5FEB\u901F\u5F00\u53D1\uFF0C\u4EE3\u7801\u91CF\u5C0F\uFF0C\u7EF4\u62A4\u5DE5\u4F5C\u5C11</li><li>\u5982\u679CAPI\u8981\u88AB\u4E0D\u540C\u7684App\u4F7F\u7528\uFF0C\u5E76\u4E14\u6BCF\u4E2AApp\u4F7F\u7528\u7684\u65B9\u5F0F\u4E5F\u4E0D\u4E00\u6837\uFF0C\u4F7F\u7528OAuth2\u662F\u4E2A\u4E0D\u9519\u7684\u9009\u62E9</li></ul><p><strong>\u7F3A\u70B9\uFF1A</strong></p><p>OAuth2\u662F\u4E00\u4E2A\u5B89\u5168\u6846\u67B6\uFF0C\u63CF\u8FF0\u4E86\u5728\u5404\u79CD\u4E0D\u540C\u573A\u666F\u4E0B\uFF0C\u591A\u4E2A\u5E94\u7528\u4E4B\u95F4\u7684\u6388\u6743\u95EE\u9898\u3002\u6709\u6D77\u91CF\u7684\u8D44\u6599\u9700\u8981\u5B66\u4E60\uFF0C\u8981\u5B8C\u5168\u7406\u89E3\u9700\u8981\u82B1\u8D39\u5927\u91CF\u65F6\u95F4\u3002OAuth2\u4E0D\u662F\u4E00\u4E2A\u4E25\u683C\u7684\u6807\u51C6\u534F\u8BAE\uFF0C\u56E0\u6B64\u5728\u5B9E\u65BD\u8FC7\u7A0B\u4E2D\u66F4\u5BB9\u6613\u51FA\u9519</p><h4 id="token-auth"><a class="header-anchor" href="#token-auth" aria-hidden="true">#</a> Token Auth</h4><p>\u57FA\u4E8Etoken\u7684\u8BA4\u8BC1\u9274\u6743\u673A\u5236\u7C7B\u4F3C\u4E8Ehttp\u534F\u8BAE\uFF0C\u4E5F\u662F\u65E0\u72B6\u6001\u7684\u3002\u8FD9\u79CD\u65B9\u5F0F\u4E0D\u9700\u8981\u5728\u670D\u52A1\u7AEF\u53BB\u4FDD\u7559\u7528\u6237\u7684\u8BA4\u8BC1\u4FE1\u606F\u6216\u8005\u4F1A\u8BDD\u4FE1\u606F\u3002\u8FD9\u5C31\u610F\u5473\u7740\u57FA\u4E8Etoken\u8BA4\u8BC1\u673A\u5236\u7684\u5E94\u7528\u4E0D\u9700\u8981\u53BB\u8003\u8651\u7528\u6237\u5728\u54EA\u4E00\u53F0\u670D\u52A1\u5668\u767B\u5F55\u4E86\uFF0C\u8FD9\u5C31\u4E3A\u5E94\u7528\u7684\u6269\u5C55\u63D0\u4F9B\u4E86\u4FBF\u5229</p><p>\u8FD9\u4E2Atoken\u5FC5\u987B\u8981\u5728\u6BCF\u6B21\u8BF7\u6C42\u65F6\u4F20\u9012\u7ED9\u670D\u52A1\u7AEF\uFF0C\u5B83\u5E94\u8BE5\u4FDD\u5B58\u5728\u8BF7\u6C42\u5934\u4E2D\uFF0CToken Auth \u6D41\u7A0B\u5982\u4E0B\u56FE\uFF1A</p><p><img src="'+F+'" alt="img"></p><p><strong>\u4F18\u70B9\uFF1A</strong></p><ul><li>\u652F\u6301\u8DE8\u57DF\u8BBF\u95EE</li><li>Token\u673A\u5236\u5728\u670D\u52A1\u7AEF\u4E0D\u9700\u8981\u5B58\u50A8session\u4FE1\u606F\uFF1AToken \u81EA\u8EAB\u5305\u542B\u4E86\u6240\u6709\u767B\u5F55\u7528\u6237\u7684\u4FE1\u606F\uFF0C\u53EA\u9700\u8981\u5728\u5BA2\u6237\u7AEF\u7684cookie\u6216\u672C\u5730\u4ECB\u8D28\u5B58\u50A8\u72B6\u6001\u4FE1\u606F</li><li>\u53BB\u8026\uFF1A\u4E0D\u9700\u8981\u7ED1\u5B9A\u5230\u4E00\u4E2A\u7279\u5B9A\u7684\u8EAB\u4EFD\u9A8C\u8BC1\u65B9\u6848\u3002Token\u53EF\u4EE5\u5728\u4EFB\u4F55\u5730\u65B9\u751F\u6210\uFF0C\u53EA\u8981\u5728\u4F60\u7684API\u88AB\u8C03\u7528\u7684\u65F6\u5019\uFF0C\u4F60\u53EF\u4EE5\u8FDB\u884CToken\u751F\u6210\u8C03\u7528\u5373\u53EF</li><li>\u66F4\u9002\u7528\u4E8E\u79FB\u52A8\u5E94\u7528\uFF1ACookie\u662F\u4E0D\u88AB\u5BA2\u6237\u7AEF\uFF08iOS, Android\uFF0CWindows 8\u7B49\uFF09\u652F\u6301\u7684</li><li>\u57FA\u4E8E\u6807\u51C6\u5316\uFF1AAPI\u53EF\u4EE5\u91C7\u7528\u6807\u51C6\u5316\u7684 JSON Web Token (JWT)\u3002\u8FD9\u4E2A\u6807\u51C6\u5DF2\u7ECF\u5B58\u5728\u591A\u4E2A\u540E\u7AEF\u5E93\uFF08.NET, Ruby, Java,Python, PHP\uFF09\u548C\u591A\u5BB6\u516C\u53F8\u7684\u652F\u6301\uFF08\u5982\uFF1AFirebase,Google, Microsoft\uFF09</li></ul><p><strong>\u7F3A\u70B9\uFF1A</strong></p><ul><li>\u5360\u5E26\u5BBD\uFF1A\u6B63\u5E38\u60C5\u51B5\u4E0B\u8981\u6BD4 session_id \u66F4\u5927\uFF0C\u9700\u8981\u6D88\u8017\u66F4\u591A\u6D41\u91CF\uFF0C\u6324\u5360\u66F4\u591A\u5E26\u5BBD\uFF0C\u5047\u5982\u4F60\u7684\u7F51\u7AD9\u6BCF\u6708\u6709 10 \u4E07\u6B21\u7684\u6D4F\u89C8\u5668\uFF0C\u5C31\u610F\u5473\u7740\u8981\u591A\u5F00\u9500\u51E0\u5341\u5146\u7684\u6D41\u91CF\u3002\u542C\u8D77\u6765\u5E76\u4E0D\u591A\uFF0C\u4F46\u65E5\u79EF\u6708\u7D2F\u4E5F\u662F\u4E0D\u5C0F\u4E00\u7B14\u5F00\u9500\u3002\u5B9E\u9645\u4E0A\uFF0C\u8BB8\u591A\u4EBA\u4F1A\u5728 JWT \u4E2D\u5B58\u50A8\u7684\u4FE1\u606F\u4F1A\u66F4\u591A</li><li>\u65E0\u6CD5\u5728\u670D\u52A1\u7AEF\u6CE8\u9500\uFF0C\u56E0\u4E3A\u670D\u52A1\u7AEF\u662F\u65E0\u72B6\u6001\u7684\uFF0C\u5E76\u6CA1\u6709\u4FDD\u5B58\u5BA2\u6237\u7AEF\u7528\u6237\u767B\u5F55\u4FE1\u606F</li><li>\u5BF9\u4E8E\u6709\u7740\u4E25\u683C\u6027\u80FD\u8981\u6C42\u7684 Web \u5E94\u7528\u5E76\u4E0D\u7406\u60F3\uFF0C\u5C24\u5176\u5BF9\u4E8E\u5355\u7EBF\u7A0B\u73AF\u5883</li></ul><h3 id="jwt"><a class="header-anchor" href="#jwt" aria-hidden="true">#</a> JWT</h3><h4 id="jwt\u4ECB\u7ECD"><a class="header-anchor" href="#jwt\u4ECB\u7ECD" aria-hidden="true">#</a> JWT\u4ECB\u7ECD</h4><p>JWT\u5168\u79F0\u4E3AJSON Web Token\uFF0C\u662F\u76EE\u524D\u6700\u6D41\u884C\u7684\u8DE8\u57DF\u8EAB\u4EFD\u9A8C\u8BC1\u89E3\u51B3\u65B9\u6848\u3002JWT\u662F\u4E3A\u4E86\u5728\u7F51\u7EDC\u5E94\u7528\u73AF\u5883\u95F4\u4F20\u9012\u58F0\u660E\u800C\u5236\u5B9A\u7684\u4E00\u79CD\u57FA\u4E8EJSON\u7684\u5F00\u653E\u6807\u51C6</p><p>JWT\u7279\u522B\u9002\u7528\u4E8E\u5206\u5E03\u5F0F\u7AD9\u70B9\u7684\u5355\u70B9\u767B\u5F55\uFF08SSO\uFF09\u573A\u666F\u3002JWT\u7684\u58F0\u660E\u4E00\u822C\u88AB\u7528\u6765\u5728\u8EAB\u4EFD\u63D0\u4F9B\u8005\u548C\u670D\u52A1\u63D0\u4F9B\u8005\u95F4\u4F20\u9012\u88AB\u8BA4\u8BC1\u7684\u7528\u6237\u8EAB\u4EFD\u4FE1\u606F\uFF0C\u4EE5\u4FBF\u4E8E\u4ECE\u8D44\u6E90\u670D\u52A1\u5668\u83B7\u53D6\u8D44\u6E90\uFF0C\u4E5F\u53EF\u88AB\u52A0\u5BC6</p><h4 id="jwt\u7684\u6570\u636E\u7ED3\u6784"><a class="header-anchor" href="#jwt\u7684\u6570\u636E\u7ED3\u6784" aria-hidden="true">#</a> JWT\u7684\u6570\u636E\u7ED3\u6784</h4><p>JWT\u5176\u5B9E\u5C31\u662F\u4E00\u4E2A\u5F88\u957F\u7684\u5B57\u7B26\u4E32\uFF0C\u5B57\u7B26\u4E4B\u95F4\u901A\u8FC7\u201D.\u201D\u5206\u9694\u7B26\u5206\u4E3A\u4E09\u4E2A\u5B50\u4E32\uFF0C\u5404\u5B57\u4E32\u4E4B\u95F4\u6CA1\u6709\u6362\u884C\u7B26\u3002\u6BCF\u4E00\u4E2A\u5B50\u4E32\u8868\u793A\u4E86\u4E00\u4E2A\u529F\u80FD\u5757\uFF0C\u603B\u5171\u6709\u4E09\u4E2A\u90E8\u5206\uFF1A<strong>JWT\u5934(header)</strong>\u3001<strong>\u6709\u6548\u8F7D\u8377(payload)</strong>\u3001<strong>\u7B7E\u540D(signature)</strong>\uFF0C\u5982\u4E0B\u56FE\u6240\u793A\uFF1A</p><p><img src="'+V+`" alt="img"></p><h5 id="jwt\u5934"><a class="header-anchor" href="#jwt\u5934" aria-hidden="true">#</a> JWT\u5934</h5><p>JWT\u5934\u662F\u4E00\u4E2A\u63CF\u8FF0JWT\u5143\u6570\u636E\u7684JSON\u5BF9\u8C61\uFF0C\u901A\u5E38\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span><span class="token property">&quot;alg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;HS256&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;typ&quot;</span><span class="token operator">:</span> <span class="token string">&quot;JWT&quot;</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>alg\uFF1A\u8868\u793A\u7B7E\u540D\u4F7F\u7528\u7684\u7B97\u6CD5\uFF0C\u9ED8\u8BA4\u4E3AHMAC SHA256\uFF08\u5199\u4E3AHS256\uFF09</p><p>typ\uFF1A\u8868\u793A\u4EE4\u724C\u7684\u7C7B\u578B\uFF0CJWT\u4EE4\u724C\u7EDF\u4E00\u5199\u4E3AJWT</p><p>\u6700\u540E\uFF0C\u4F7F\u7528Base64 URL\u7B97\u6CD5\u5C06\u4E0A\u8FF0JSON\u5BF9\u8C61\u8F6C\u6362\u4E3A\u5B57\u7B26\u4E32</p><h5 id="\u6709\u6548\u8F7D\u8377"><a class="header-anchor" href="#\u6709\u6548\u8F7D\u8377" aria-hidden="true">#</a> \u6709\u6548\u8F7D\u8377</h5><p>\u6709\u6548\u8F7D\u8377\uFF0C\u662FJWT\u7684\u4E3B\u4F53\u5185\u5BB9\u90E8\u5206\uFF0C\u4E5F\u662F\u4E00\u4E2AJSON\u5BF9\u8C61\uFF0C\u5305\u542B\u9700\u8981\u4F20\u9012\u7684\u6570\u636E</p><p>\u6709\u6548\u8F7D\u8377\u90E8\u5206\u89C4\u5B9A\u6709\u5982\u4E0B\u4E03\u4E2A\u9ED8\u8BA4\u5B57\u6BB5\u4F9B\u9009\u62E9\uFF1A</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>iss\uFF1A\u53D1\u884C\u4EBA
exp\uFF1A\u5230\u671F\u65F6\u95F4
sub\uFF1A\u4E3B\u9898
aud\uFF1A\u7528\u6237
nbf\uFF1A\u5728\u6B64\u4E4B\u524D\u4E0D\u53EF\u7528
iat\uFF1A\u53D1\u5E03\u65F6\u95F4
jti\uFF1AJWT ID\u7528\u4E8E\u6807\u8BC6\u8BE5JWT
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u9664\u4EE5\u4E0A\u9ED8\u8BA4\u5B57\u6BB5\u5916\uFF0C\u8FD8\u53EF\u4EE5\u81EA\u5B9A\u4E49\u79C1\u6709\u5B57\u6BB5\u3002</p><p>\u6700\u540E\uFF0C\u540C\u6837\u4F7F\u7528Base64 URL\u7B97\u6CD5\u5C06\u6709\u6548\u8F7D\u8377\u90E8\u5206JSON\u5BF9\u8C61\u8F6C\u6362\u4E3A\u5B57\u7B26\u4E32</p><h5 id="\u7B7E\u540D"><a class="header-anchor" href="#\u7B7E\u540D" aria-hidden="true">#</a> \u7B7E\u540D</h5><p>\u7B7E\u540D\u5B9E\u9645\u4E0A\u662F\u4E00\u4E2A\u52A0\u5BC6\u7684\u8FC7\u7A0B\uFF0C\u662F\u5BF9\u4E0A\u9762\u4E24\u90E8\u5206\u6570\u636E\u901A\u8FC7\u6307\u5B9A\u7684\u7B97\u6CD5\u751F\u6210\u54C8\u5E0C\uFF0C\u4EE5\u786E\u4FDD\u6570\u636E\u4E0D\u4F1A\u88AB\u7BE1\u6539</p><p>\u9996\u5148\u9700\u8981\u6307\u5B9A\u4E00\u4E2A\u5BC6\u7801\uFF08secret\uFF09\uFF0C\u8BE5\u5BC6\u7801\u4EC5\u4EC5\u4FDD\u5B58\u5728\u670D\u52A1\u5668\u4E2D\uFF0C\u5E76\u4E14\u4E0D\u80FD\u5411\u7528\u6237\u516C\u5F00\u3002\u7136\u540E\u4F7F\u7528JWT\u5934\u4E2D\u6307\u5B9A\u7684\u7B7E\u540D\u7B97\u6CD5\uFF08\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u4E3AHMAC SHA256\uFF09\uFF0C\u6839\u636E\u4EE5\u4E0B\u516C\u5F0F\u751F\u6210\u7B7E\u540D\u54C8\u5E0C\uFF1A</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>HMACSHA256(base64UrlEncode(header) + &quot;.&quot; + base64UrlEncode(payload),secret)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5728\u8BA1\u7B97\u51FA\u7B7E\u540D\u54C8\u5E0C\u540E\uFF0CJWT\u5934\uFF0C\u6709\u6548\u8F7D\u8377\u548C\u7B7E\u540D\u54C8\u5E0C\u7684\u4E09\u4E2A\u90E8\u5206\u7EC4\u5408\u6210\u4E00\u4E2A\u5B57\u7B26\u4E32\uFF0C\u6BCF\u4E2A\u90E8\u5206\u7528\u201D.\u201D\u5206\u9694\uFF0C\u5C31\u6784\u6210\u6574\u4E2AJWT\u5BF9\u8C61</p><h4 id="jwt\u7B7E\u540D\u7B97\u6CD5"><a class="header-anchor" href="#jwt\u7B7E\u540D\u7B97\u6CD5" aria-hidden="true">#</a> JWT\u7B7E\u540D\u7B97\u6CD5</h4><p>JWT\u7B7E\u540D\u7B97\u6CD5\u4E2D\uFF0C\u4E00\u822C\u6709\u4E24\u4E2A\u9009\u62E9\uFF1AHS256\u548CRS256</p><p>HS256 (\u5E26\u6709 SHA-256 \u7684 HMAC )\u662F\u4E00\u79CD\u5BF9\u79F0\u52A0\u5BC6\u7B97\u6CD5, \u53CC\u65B9\u4E4B\u95F4\u4EC5\u5171\u4EAB\u4E00\u4E2A\u5BC6\u94A5\u3002\u7531\u4E8E\u4F7F\u7528\u76F8\u540C\u7684\u5BC6\u94A5\u751F\u6210\u7B7E\u540D\u548C\u9A8C\u8BC1\u7B7E\u540D, \u56E0\u6B64\u5FC5\u987B\u6CE8\u610F\u786E\u4FDD\u5BC6\u94A5\u4E0D\u88AB\u6CC4\u5BC6</p><p>RS256 (\u91C7\u7528SHA-256 \u7684 RSA \u7B7E\u540D) \u662F\u4E00\u79CD\u975E\u5BF9\u79F0\u52A0\u5BC6\u7B97\u6CD5, \u5B83\u4F7F\u7528\u516C\u5171/\u79C1\u94A5\u5BF9: JWT\u7684\u63D0\u4F9B\u65B9\u91C7\u7528\u79C1\u94A5\u751F\u6210\u7B7E\u540D, JWT \u7684\u4F7F\u7528\u65B9\u83B7\u53D6\u516C\u94A5\u4EE5\u9A8C\u8BC1\u7B7E\u540D</p><h4 id="jjwt\u4ECB\u7ECD"><a class="header-anchor" href="#jjwt\u4ECB\u7ECD" aria-hidden="true">#</a> jjwt\u4ECB\u7ECD</h4><p>jjwt\u662F\u4E00\u4E2A\u63D0\u4F9BJWT\u521B\u5EFA\u548C\u9A8C\u8BC1\u7684Java\u5E93\u3002\u6C38\u8FDC\u514D\u8D39\u548C\u5F00\u6E90(Apache License\uFF0C\u7248\u672C2.0)\uFF0CJJWT\u5F88\u5BB9\u6613\u4F7F\u7528\u548C\u7406\u89E3</p><p>jjwt\u7684maven\u5750\u6807\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.jsonwebtoken<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jjwt<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.9.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="jwt\u5165\u95E8\u6848\u4F8B"><a class="header-anchor" href="#jwt\u5165\u95E8\u6848\u4F8B" aria-hidden="true">#</a> jwt\u5165\u95E8\u6848\u4F8B</h3><p>\u672C\u6848\u4F8B\u4E2D\u4F1A\u901A\u8FC7jjwt\u6765\u751F\u6210\u548C\u89E3\u6790JWT\u4EE4\u724C</p><ol><li>\u521B\u5EFAmaven\u5DE5\u7A0Bjwt_demo\u5E76\u914D\u7F6Epom.xml\u6587\u4EF6</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 
                             http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>cn.itcast<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jwt_demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.jsonwebtoken<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jjwt<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.9.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>cn.hutool<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hutool-all<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u7F16\u5199\u5355\u5143\u6D4B\u8BD5</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>test</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>hutool<span class="token punctuation">.</span>core<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileUtil</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>jsonwebtoken<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">DataInputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span>spec<span class="token punctuation">.</span></span><span class="token class-name">PKCS8EncodedKeySpec</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span>spec<span class="token punctuation">.</span></span><span class="token class-name">X509EncodedKeySpec</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JwtTest</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u751F\u6210jwt\uFF0C\u4E0D\u4F7F\u7528\u7B7E\u540D</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//\u6DFB\u52A0\u6784\u6210JWT\u7684\u53C2\u6570</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> headMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        headMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;alg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u4E0D\u4F7F\u7528\u7B7E\u540D\u7B97\u6CD5</span>
        headMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;typ&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;JWT&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Map</span> body <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        body<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;userId&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        body<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;xiaoming&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        body<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;role&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> jwt <span class="token operator">=</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span>headMap<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setClaims</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token string">&quot;jwt001&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jwt<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u89E3\u6790jwt</span>
        <span class="token class-name">Jwt</span> result <span class="token operator">=</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">parser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>jwt<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> jwtBody <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Header</span> header <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jwtBody<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>header<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u751F\u6210jwt\u65F6\u4F7F\u7528\u7B7E\u540D\u7B97\u6CD5\u751F\u6210\u7B7E\u540D\u90E8\u5206----\u57FA\u4E8EHS256\u7B7E\u540D\u7B97\u6CD5</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//\u6DFB\u52A0\u6784\u6210JWT\u7684\u53C2\u6570</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> headMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        headMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;alg&quot;</span><span class="token punctuation">,</span> <span class="token class-name">SignatureAlgorithm</span><span class="token punctuation">.</span>HS256<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u4F7F\u7528HS256\u7B7E\u540D\u7B97\u6CD5</span>
        headMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;typ&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;JWT&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Map</span> body <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        body<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;userId&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        body<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;xiaoming&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        body<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;role&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> jwt <span class="token operator">=</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span>headMap<span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">setClaims</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token string">&quot;jwt001&quot;</span><span class="token punctuation">)</span>
            			<span class="token punctuation">.</span><span class="token function">signWith</span><span class="token punctuation">(</span><span class="token class-name">SignatureAlgorithm</span><span class="token punctuation">.</span>HS256<span class="token punctuation">,</span><span class="token string">&quot;itcast&quot;</span><span class="token punctuation">)</span>
            			<span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jwt<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u89E3\u6790jwt</span>
        <span class="token class-name">Jwt</span> result <span class="token operator">=</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">parser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setSigningKey</span><span class="token punctuation">(</span><span class="token string">&quot;itcast&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>jwt<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> jwtBody <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Header</span> header <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jwtBody<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>header<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u751F\u6210jwt\u65F6\u4F7F\u7528\u7B7E\u540D\u7B97\u6CD5\u751F\u6210\u7B7E\u540D\u90E8\u5206----\u57FA\u4E8ERS256\u7B7E\u540D\u7B97\u6CD5</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token comment">//\u6DFB\u52A0\u6784\u6210JWT\u7684\u53C2\u6570</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> headMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        headMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;alg&quot;</span><span class="token punctuation">,</span> <span class="token class-name">SignatureAlgorithm</span><span class="token punctuation">.</span>RS256<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u4F7F\u7528RS256\u7B7E\u540D\u7B97\u6CD5</span>
        headMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;typ&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;JWT&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Map</span> body <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        body<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;userId&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        body<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;xiaoming&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        body<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;role&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> jwt <span class="token operator">=</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span>headMap<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setClaims</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token string">&quot;jwt001&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">signWith</span><span class="token punctuation">(</span><span class="token class-name">SignatureAlgorithm</span><span class="token punctuation">.</span>RS256<span class="token punctuation">,</span><span class="token function">getPriKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jwt<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u89E3\u6790jwt</span>
        <span class="token class-name">Jwt</span> result <span class="token operator">=</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">parser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setSigningKey</span><span class="token punctuation">(</span><span class="token function">getPubKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>jwt<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> jwtBody <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Header</span> header <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jwtBody<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>header<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u83B7\u53D6\u79C1\u94A5</span>
    <span class="token keyword">public</span> <span class="token class-name">PrivateKey</span> <span class="token function">getPriKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token class-name">InputStream</span> resourceAsStream <span class="token operator">=</span> 
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;pri.key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">DataInputStream</span> dis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataInputStream</span><span class="token punctuation">(</span>resourceAsStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> keyBytes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span>resourceAsStream<span class="token punctuation">.</span><span class="token function">available</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        dis<span class="token punctuation">.</span><span class="token function">readFully</span><span class="token punctuation">(</span>keyBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">PKCS8EncodedKeySpec</span> spec <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PKCS8EncodedKeySpec</span><span class="token punctuation">(</span>keyBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">KeyFactory</span> kf <span class="token operator">=</span> <span class="token class-name">KeyFactory</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">&quot;RSA&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> kf<span class="token punctuation">.</span><span class="token function">generatePrivate</span><span class="token punctuation">(</span>spec<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u83B7\u53D6\u516C\u94A5</span>
    <span class="token keyword">public</span> <span class="token class-name">PublicKey</span> <span class="token function">getPubKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token class-name">InputStream</span> resourceAsStream <span class="token operator">=</span> 
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;pub.key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">DataInputStream</span> dis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataInputStream</span><span class="token punctuation">(</span>resourceAsStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> keyBytes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span>resourceAsStream<span class="token punctuation">.</span><span class="token function">available</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        dis<span class="token punctuation">.</span><span class="token function">readFully</span><span class="token punctuation">(</span>keyBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">X509EncodedKeySpec</span> spec <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">X509EncodedKeySpec</span><span class="token punctuation">(</span>keyBytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">KeyFactory</span> kf <span class="token operator">=</span> <span class="token class-name">KeyFactory</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">&quot;RSA&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> kf<span class="token punctuation">.</span><span class="token function">generatePublic</span><span class="token punctuation">(</span>spec<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u751F\u6210\u81EA\u5DF1\u7684 \u79D8\u94A5/\u516C\u94A5 \u5BF9</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
        <span class="token comment">//\u81EA\u5B9A\u4E49 \u968F\u673A\u5BC6\u7801,  \u8BF7\u4FEE\u6539\u8FD9\u91CC</span>
        <span class="token class-name">String</span> password <span class="token operator">=</span> <span class="token string">&quot;itcast&quot;</span><span class="token punctuation">;</span>

        <span class="token class-name">KeyPairGenerator</span> keyPairGenerator <span class="token operator">=</span> <span class="token class-name">KeyPairGenerator</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">&quot;RSA&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SecureRandom</span> secureRandom <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SecureRandom</span><span class="token punctuation">(</span>password<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        keyPairGenerator<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">,</span> secureRandom<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">KeyPair</span> keyPair <span class="token operator">=</span> keyPairGenerator<span class="token punctuation">.</span><span class="token function">genKeyPair</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> publicKeyBytes <span class="token operator">=</span> keyPair<span class="token punctuation">.</span><span class="token function">getPublic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getEncoded</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> privateKeyBytes <span class="token operator">=</span> keyPair<span class="token punctuation">.</span><span class="token function">getPrivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getEncoded</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">writeBytes</span><span class="token punctuation">(</span>publicKeyBytes<span class="token punctuation">,</span> <span class="token string">&quot;d:\\\\pub.key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">writeBytes</span><span class="token punctuation">(</span>privateKeyBytes<span class="token punctuation">,</span> <span class="token string">&quot;d:\\\\pri.key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="pd-tools-jwt\u4F7F\u7528"><a class="header-anchor" href="#pd-tools-jwt\u4F7F\u7528" aria-hidden="true">#</a> pd-tools-jwt\u4F7F\u7528</h3><p>pd-tools-jwt\u5E95\u5C42\u662F\u57FA\u4E8Ejjwt\u8FDB\u884Cjwt\u4EE4\u724C\u7684\u751F\u6210\u548C\u89E3\u6790\u7684\u3002\u4E3A\u4E86\u65B9\u4FBF\u4F7F\u7528\uFF0C\u5728pd-tools-jwt\u6A21\u5757\u4E2D\u5C01\u88C5\u4E86\u4E24\u4E2A\u5DE5\u5177\u7C7B\uFF1AJwtTokenServerUtils\u548CJwtTokenClientUtils</p><p>JwtTokenServerUtils\u4E3B\u8981\u662F\u63D0\u4F9B\u7ED9\u6743\u9650\u670D\u52A1\u7684\uFF0C\u7C7B\u4E2D\u5305\u542B\u751F\u6210jwt\u548C\u89E3\u6790jwt\u4E24\u4E2A\u65B9\u6CD5</p><p>JwtTokenClientUtils\u4E3B\u8981\u662F\u63D0\u4F9B\u7ED9\u7F51\u5173\u670D\u52A1\u7684\uFF0C\u7C7B\u4E2D\u53EA\u6709\u4E00\u4E2A\u89E3\u6790jwt\u7684\u65B9\u6CD5</p><p>\u9700\u8981\u6CE8\u610F\u7684\u662Fpd-tools-jwt\u5E76\u4E0D\u662Fstarter\uFF0C\u6240\u4EE5\u5982\u679C\u53EA\u662F\u5728\u9879\u76EE\u4E2D\u5F15\u5165\u4ED6\u7684maven\u5750\u6807\u5E76\u4E0D\u80FD\u76F4\u63A5\u4F7F\u7528\u5176\u63D0\u4F9B\u7684\u5DE5\u5177\u7C7B\u3002\u9700\u8981\u5728\u542F\u52A8\u7C7B\u4E0A\u52A0\u5165pd-tools-jwt\u6A21\u5757\u4E2D\u5B9A\u4E49\u7684\u6CE8\u89E3@EnableAuthServer\u6216\u8005@EnableAuthClient</p><p>pd-tools-jwt\u4F7F\u7528\u7684\u7B7E\u540D\u7B97\u6CD5\u4E3ARS256\uFF0C\u9700\u8981\u6211\u4EEC\u81EA\u5DF1\u7684\u5E94\u7528\u6765\u63D0\u4F9B\u4E00\u5BF9\u516C\u94A5\u548C\u79C1\u94A5\uFF0C\u7136\u540E\u5728application.yml\u4E2D\u8FDB\u884C\u914D\u7F6E\u5373\u53EF</p><p><strong>\u5177\u4F53\u4F7F\u7528\u8FC7\u7A0B\uFF1A</strong></p><ol><li>\u521B\u5EFAmaven\u5DE5\u7A0BmyJwtApp\u5E76\u914D\u7F6Epom.xml\u6587\u4EF6</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 
                             http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.2.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>myJwtApp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>pd-tools-jwt<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-config<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u521B\u5EFAresources/keys\u76EE\u5F55\uFF0C\u5C06\u901A\u8FC7RSA\u7B97\u6CD5\u751F\u6210\u7684\u516C\u94A5\u548C\u79C1\u94A5\u590D\u5236\u5230\u6B64\u76EE\u5F55\u4E0B</li></ol><p><img src="`+z+`" alt="img"></p><ol start="3"><li>\u521B\u5EFAapplication.yml\u6587\u4EF6</li></ol><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>
<span class="token comment"># JWT\u76F8\u5173\u914D\u7F6E</span>
<span class="token key atrule">authentication</span><span class="token punctuation">:</span>
  <span class="token key atrule">user</span><span class="token punctuation">:</span>
    <span class="token key atrule">expire</span><span class="token punctuation">:</span> <span class="token number">3600</span> <span class="token comment">#\u4EE4\u724C\u5931\u6548\u65F6\u95F4</span>
    <span class="token key atrule">priKey</span><span class="token punctuation">:</span> keys/pri.key <span class="token comment">#\u79C1\u94A5</span>
    <span class="token key atrule">pubKey</span><span class="token punctuation">:</span> keys/pub.key <span class="token comment">#\u516C\u94A5</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u521B\u5EFAUserController</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pinda<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>server<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">JwtTokenServerUtils</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pinda<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">JwtUserInfo</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pinda<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">Token</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">JwtTokenServerUtils</span> jwtTokenServerUtils<span class="token punctuation">;</span>

    <span class="token comment">//\u7528\u6237\u767B\u5F55\u529F\u80FD\uFF0C\u5982\u679C\u767B\u5F55\u6210\u529F\u5219\u7B7E\u53D1jwt\u4EE4\u724C\u7ED9\u5BA2\u6237\u7AEF</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Token</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">String</span> userName <span class="token operator">=</span> <span class="token string">&quot;admin&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> password <span class="token operator">=</span> <span class="token string">&quot;admin123&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">//\u67E5\u8BE2\u6570\u636E\u5E93\u8FDB\u884C\u7528\u6237\u540D\u5BC6\u7801\u6821\u9A8C...</span>

        <span class="token comment">//\u5982\u679C\u6821\u9A8C\u901A\u8FC7\uFF0C\u5219\u4E3A\u5BA2\u6237\u7AEF\u751F\u6210jwt\u4EE4\u724C</span>
        <span class="token class-name">JwtUserInfo</span> jwtUserInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JwtUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        jwtUserInfo<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span>userName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        jwtUserInfo<span class="token punctuation">.</span><span class="token function">setOrgId</span><span class="token punctuation">(</span><span class="token number">10L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        jwtUserInfo<span class="token punctuation">.</span><span class="token function">setUserId</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        jwtUserInfo<span class="token punctuation">.</span><span class="token function">setAccount</span><span class="token punctuation">(</span>userName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        jwtUserInfo<span class="token punctuation">.</span><span class="token function">setStationId</span><span class="token punctuation">(</span><span class="token number">20L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Token</span> token <span class="token operator">=</span> jwtTokenServerUtils<span class="token punctuation">.</span><span class="token function">generateUserToken</span><span class="token punctuation">(</span>jwtUserInfo<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5B9E\u9645\u5E94\u8BE5\u662F\u5728\u8FC7\u6EE4\u5668\u4E2D\u8FDB\u884Cjwt\u4EE4\u724C\u7684\u89E3\u6790</span>
        <span class="token class-name">JwtUserInfo</span> userInfo <span class="token operator">=</span> jwtTokenServerUtils<span class="token punctuation">.</span><span class="token function">getUserInfo</span><span class="token punctuation">(</span>token<span class="token punctuation">.</span><span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> token<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>\u521B\u5EFA\u542F\u52A8\u7C7B</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pinda<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>server<span class="token punctuation">.</span></span><span class="token class-name">EnableAuthServer</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableAuthServer</span> <span class="token comment">//\u542F\u7528jwt\u670D\u52A1\u7AEF\u8BA4\u8BC1\u529F\u80FD</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyJwtApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">MyJwtApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li>\u542F\u52A8\u9879\u76EE\uFF0C\u8BBF\u95EE\u5730\u5740\uFF1Ahttp://localhost:8080/user/login</li></ol><p><img src="`+W+`" alt="img"></p><p>\u53EF\u4EE5\u770B\u5230jwt\u4EE4\u724C\u5DF2\u7ECF\u751F\u6210\u4E86</p><h2 id="pd-tools-user"><a class="header-anchor" href="#pd-tools-user" aria-hidden="true">#</a> pd-tools-user</h2><p>pd-tools-user\u6A21\u5757\u7684\u4E3B\u8981\u529F\u80FD\u662F\u81EA\u52A8\u6CE8\u5165\u767B\u5F55\u4EBA\u4FE1\u606F\u3002\u5176\u4ED6\u5E94\u7528\u53EF\u4EE5\u901A\u8FC7\u672C\u6A21\u5757\u63D0\u4F9B\u7684@LoginUser\u6CE8\u89E3\u6765\u6CE8\u5165\u5F53\u524D\u7CFB\u7EDF\u767B\u5F55\u7528\u6237\u3002\u8981\u5B9E\u73B0\u6B64\u529F\u80FD\u9700\u8981\u4F7F\u7528\u5230Spring\u63D0\u4F9B\u7684\u53C2\u6570\u89E3\u6790\u5668\u7EC4\u4EF6</p><p>\u672C\u6A21\u5757\u6D89\u53CA\u5230\u7684\u6280\u672F\u70B9\uFF1A</p><ol><li><p>\u53C2\u6570\u89E3\u6790\u5668</p></li><li><p>\u62E6\u622A\u5668</p></li></ol><h3 id="\u53C2\u6570\u89E3\u6790\u5668\u4ECB\u7ECD"><a class="header-anchor" href="#\u53C2\u6570\u89E3\u6790\u5668\u4ECB\u7ECD" aria-hidden="true">#</a> \u53C2\u6570\u89E3\u6790\u5668\u4ECB\u7ECD</h3><p>\u53C2\u6570\u89E3\u6790\u5668\u5C5E\u4E8Espring-web\u5305\u4E2D\u63D0\u4F9B\u7684\u7EC4\u4EF6\uFF0Cspringmvc\u6846\u67B6\u4E2D\u5BF9\u5E94\u63D0\u4F9B\u4E86\u5F88\u591A\u53C2\u6570\u89E3\u6790\u5668\u3002\u4F8B\u5982\u6211\u4EEC\u5F00\u53D1\u7684Controller\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/save&quot;</span><span class="token punctuation">)</span>
    <span class="token comment">//\u6B64\u5904request\u5BF9\u8C61\u5C31\u662F\u901A\u8FC7Springmvc\u63D0\u4F9B\u7684\u53C2\u6570\u89E3\u6790\u5668\u5E2E\u6211\u4EEC\u6CE8\u5165\u7684</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">saveUser</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728\u4E0A\u9762\u7684saveUser\u65B9\u6CD5\u4E2D\uFF0C\u6211\u4EEC\u58F0\u660E\u4E86\u4E00\u4E2A\u7C7B\u578B\u4E3A<code>HttpServletRequest</code>\u7684\u53C2\u6570\uFF0C\u8FD9\u4E2A\u5BF9\u8C61\u5C31\u662F\u901A\u8FC7springmvc\u63D0\u4F9B\u7684<code>ServletRequestMethodArgumentResolver</code>\u8FD9\u4E2A\u53C2\u6570\u89E3\u6790\u5668\u5E2E\u6211\u4EEC\u6CE8\u5165\u7684\u3002\u540C\u6837\u5982\u679C\u6211\u4EEC\u9700\u8981\u4F7F\u7528HttpServletResponse\u5BF9\u8C61\uFF0C\u4E5F\u53EF\u4EE5\u76F4\u63A5\u5728\u65B9\u6CD5\u4E0A\u52A0\u5165\u8FD9\u4E2A\u53C2\u6570\u5373\u53EF\uFF0C\u6B64\u65F6springmvc\u4F1A\u901A\u8FC7ServletResponseMethodArgumentResolver\u8FD9\u4E2A\u53C2\u6570\u89E3\u6790\u5668\u5E2E\u6211\u4EEC\u6CE8\u5165</p><p>\u5728\u9879\u76EE\u5F00\u53D1\u4E2D\u6211\u4EEC\u4E5F\u53EF\u4EE5\u6839\u636E\u9700\u8981\u81EA\u5B9A\u4E49\u53C2\u6570\u89E3\u6790\u5668\uFF0C\u9700\u8981\u5B9E\u73B0<code>HandlerMethodArgumentResolver</code>\u63A5\u53E3\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">HandlerMethodArgumentResolver</span> <span class="token punctuation">{</span>
    <span class="token keyword">boolean</span> <span class="token function">supportsParameter</span><span class="token punctuation">(</span><span class="token class-name">MethodParameter</span> var1<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Nullable</span>
    <span class="token class-name">Object</span> <span class="token function">resolveArgument</span><span class="token punctuation">(</span><span class="token class-name">MethodParameter</span> var1<span class="token punctuation">,</span> 
                            <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">ModelAndViewContainer</span> var2<span class="token punctuation">,</span> 
                            <span class="token class-name">NativeWebRequest</span> var3<span class="token punctuation">,</span> 
                            <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">WebDataBinderFactory</span> var4<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53EF\u4EE5\u770B\u5230\u6B64\u63A5\u53E3\u5305\u542B\u4E24\u4E2A\u63A5\u53E3\u65B9\u6CD5\uFF1A<code>supportsParameter</code>\u548C<code>resolveArgument</code></p><p>\u5F53<code>supportsParameter</code>\u65B9\u6CD5\u8FD4\u56DEtrue\u65F6\uFF0C\u624D\u4F1A\u8C03\u7528<code>resolveArgument</code>\u65B9\u6CD5</p><h3 id="\u53C2\u6570\u89E3\u6790\u5668\u5165\u95E8\u6848\u4F8B"><a class="header-anchor" href="#\u53C2\u6570\u89E3\u6790\u5668\u5165\u95E8\u6848\u4F8B" aria-hidden="true">#</a> \u53C2\u6570\u89E3\u6790\u5668\u5165\u95E8\u6848\u4F8B</h3><p>\u672C\u6848\u4F8B\u8981\u5B9E\u73B0\u7684\u529F\u80FD\u4E3A\uFF1A\u901A\u8FC7\u5728Controller\u7684\u65B9\u6CD5\u53C2\u6570\u4E0A\u52A0\u5165@CurrentUser\u6CE8\u89E3\u6765\u6CE8\u5165\u5F53\u524D\u767B\u5F55\u7528\u6237\u5BF9\u8C61</p><ol><li>\u521B\u5EFAmaven\u5DE5\u7A0BargumentResolver_demo\u5E76\u914D\u7F6Epom.xml\u6587\u4EF6</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 
                             http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.2.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>cn.itcast<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>argumentResolver_demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u521B\u5EFAapplication.yml</li></ol><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u521B\u5EFAUser\u5B9E\u4F53\u7C7B</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>entity</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">AllArgsConstructor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Serializable</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u521B\u5EFAUserController</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/user&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u83B7\u53D6\u5F53\u524D\u7CFB\u7EDF\u767B\u5F55\u7528\u6237</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/getCurrentUser&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getCurrentUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> name <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;UserController getCurrentUser\u65B9\u6CD5...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> user<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>\u521B\u5EFA\u542F\u52A8\u7C7B</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArgumentResolverApp</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">ArgumentResolverApp</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6B64\u65F6\u53EF\u4EE5\u542F\u52A8\u9879\u76EE\u5E76\u4E14\u8BBF\u95EE\uFF1Ahttp://localhost:9000/user/getCurrentUser\uFF0C\u53EF\u4EE5\u53D1\u73B0\u867D\u7136\u80FD\u591F\u8BBF\u95EE\u6210\u529F\uFF0C\u4F46\u662Fuser\u5BF9\u8C61\u7684\u5C5E\u6027\u90FD\u662F\u7A7A\u7684\u3002\u4E3A\u4E86\u80FD\u591F\u83B7\u5F97\u5F53\u524D\u7CFB\u7EDF\u767B\u5F55\u7528\u6237\uFF0C\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7Spring\u63D0\u4F9B\u7684\u53C2\u6570\u89E3\u6790\u5668\u6765\u5B9E\u73B0</p><ol start="6"><li>\u521B\u5EFACurrentUser\u6CE8\u89E3</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>anno</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
* \u7ED1\u5B9A\u5F53\u524D\u767B\u5F55\u7528\u6237
*/</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>PARAMETER<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">CurrentUser</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="7"><li>\u521B\u5EFA\u53C2\u6570\u89E3\u6790\u5668\u7C7B\uFF0C\u9700\u8981\u5B9E\u73B0HandlerMethodArgumentResolver\u63A5\u53E3</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>resolver</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>anno<span class="token punctuation">.</span></span><span class="token class-name">CurrentUser</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">MethodParameter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">WebDataBinderFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>context<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">NativeWebRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>method<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">HandlerMethodArgumentResolver</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>method<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">ModelAndViewContainer</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * \u81EA\u5B9A\u4E49\u53C2\u6570\u89E3\u6790\u5668
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CurrentUserMethodArgumentResolver</span> <span class="token keyword">implements</span> <span class="token class-name">HandlerMethodArgumentResolver</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">CurrentUserMethodArgumentResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;CurrentUserMethodArgumentResolver\u81EA\u5B9A\u4E49\u53C2\u6570\u89E3\u6790\u5668\u521D\u59CB\u5316...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">supportsParameter</span><span class="token punctuation">(</span><span class="token class-name">MethodParameter</span> parameter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u5982\u679CController\u7684\u65B9\u6CD5\u53C2\u6570\u7C7B\u578B\u4E3AUser\u540C\u65F6\u8FD8\u52A0\u5165\u4E86CurrentUser\u6CE8\u89E3\uFF0C\u5219\u8FD4\u56DEtrue</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>parameter<span class="token punctuation">.</span><span class="token function">getParameterType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
                parameter<span class="token punctuation">.</span><span class="token function">hasParameterAnnotation</span><span class="token punctuation">(</span><span class="token class-name">CurrentUser</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u5F53supportsParameter\u65B9\u6CD5\u8FD4\u56DEtrue\u65F6\u6267\u884C\u6B64\u65B9\u6CD5</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">resolveArgument</span><span class="token punctuation">(</span><span class="token class-name">MethodParameter</span> parameter<span class="token punctuation">,</span> 
                                  <span class="token class-name">ModelAndViewContainer</span> mavContainer<span class="token punctuation">,</span>
                                  <span class="token class-name">NativeWebRequest</span> webRequest<span class="token punctuation">,</span> 
                                  <span class="token class-name">WebDataBinderFactory</span> binderFactory<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u53C2\u6570\u89E3\u6790\u5668...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u6B64\u5904\u76F4\u63A5\u6A21\u62DF\u4E86\u4E00\u4E2AUser\u5BF9\u8C61\uFF0C\u5B9E\u9645\u9879\u76EE\u4E2D\u53EF\u80FD\u9700\u8981\u4ECE\u8BF7\u6C42\u5934\u4E2D\u83B7\u53D6\u767B\u5F55\u7528\u6237\u7684\u4EE4\u724C\u7136\u540E\u8FDB\u884C\u89E3\u6790\uFF0C</span>
        <span class="token comment">//\u6700\u7EC8\u5C01\u88C5\u6210User\u5BF9\u8C61\u8FD4\u56DE\u5373\u53EF\uFF0C\u8FD9\u6837\u5728Controller\u7684\u65B9\u6CD5\u5F62\u53C2\u5C31\u53EF\u4EE5\u76F4\u63A5\u5F15\u7528\u5230User\u5BF9\u8C61\u4E86</span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">,</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">return</span> user<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="8"><li>\u521B\u5EFA\u914D\u7F6E\u7C7B\uFF0C\u7528\u4E8E\u6CE8\u518C\u81EA\u5B9A\u4E49\u53C2\u6570\u89E3\u6790\u5668</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>resolver<span class="token punctuation">.</span></span><span class="token class-name">CurrentUserMethodArgumentResolver</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>method<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">HandlerMethodArgumentResolver</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebMvcConfigurer</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArgumentResolverConfiguration</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">CurrentUserMethodArgumentResolver</span> <span class="token function">getCurrentUserMethodArgumentResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CurrentUserMethodArgumentResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token comment">//\u6CE8\u518C\u81EA\u5B9A\u4E49\u53C2\u6570\u89E3\u6790\u5668</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addArgumentResolvers</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">HandlerMethodArgumentResolver</span><span class="token punctuation">&gt;</span></span> resolvers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        resolvers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">getCurrentUserMethodArgumentResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="9"><li>\u4FEE\u6539UserController\uFF0C\u5728User\u53C2\u6570\u524D\u52A0\u5165@CurrentUser\u6CE8\u89E3</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>anno<span class="token punctuation">.</span></span><span class="token class-name">CurrentUser</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/user&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u83B7\u53D6\u5F53\u524D\u7CFB\u7EDF\u767B\u5F55\u7528\u6237</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/getCurrentUser&quot;</span><span class="token punctuation">)</span>
    <span class="token comment">//\u6CE8\u610F\uFF1A\u9700\u8981\u5728User\u53C2\u6570\u524D\u52A0\u5165CurrentUser\u6CE8\u89E3</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getCurrentUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@CurrentUser</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> name <span class="token operator">=</span> user<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;UserController getCurrentUser\u65B9\u6CD5...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> user<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u91CD\u65B0\u542F\u52A8\u9879\u76EE\u8BBF\u95EE\uFF0C\u53D1\u73B0user\u5BF9\u8C61\u7684\u5C5E\u6027\u5DF2\u7ECF\u6709\u503C\u4E86\uFF0C\u8FD9\u662F\u56E0\u4E3A\u6211\u4EEC\u5728Controller\u65B9\u6CD5\u7684User\u53C2\u6570\u524D\u52A0\u5165\u4E86@CurrentUser\u6CE8\u89E3\uFF0C\u5728\u6211\u4EEC\u8BBF\u95EEController\u7684\u65B9\u6CD5\u65F6Spring\u6846\u67B6\u4F1A\u8C03\u7528\u6211\u4EEC\u81EA\u5B9A\u4E49\u7684\u53C2\u6570\u89E3\u6790\u5668\u7684supportsParameter\u65B9\u6CD5\u6765\u5224\u65AD\u662F\u5426\u6267\u884CresolveArgument\u65B9\u6CD5\uFF0C\u5982\u679CController\u65B9\u6CD5\u7684\u53C2\u6570\u7C7B\u578B\u4E3AUser\u5E76\u4E14\u52A0\u5165\u4E86@CurrentUser\u6CE8\u89E3\u5219\u6267\u884CresolverArgument\u65B9\u6CD5\uFF0C\u6B64\u65B9\u6CD5\u7684\u8FD4\u56DE\u7ED3\u679C\u5C06\u8D4B\u503C\u7ED9\u6211\u4EEC\u7684Controller\u65B9\u6CD5\u4E2D\u58F0\u660E\u7684user\u53C2\u6570\uFF0C\u5373\u5B8C\u6210\u4E86\u53C2\u6570\u7ED1\u5B9A</p><h3 id="pd-tools-user\u4F7F\u7528"><a class="header-anchor" href="#pd-tools-user\u4F7F\u7528" aria-hidden="true">#</a> pd-tools-user\u4F7F\u7528</h3><p>pd-tools-user\u7684\u5B9E\u73B0\u548C\u6211\u4EEC\u4E0A\u9762\u7684\u5165\u95E8\u6848\u4F8B\u662F\u4E00\u81F4\u7684\uFF0C\u90FD\u662F\u901A\u8FC7\u81EA\u5B9A\u4E49\u53C2\u6570\u89E3\u6790\u5668\u6765\u4E3AController\u7684\u65B9\u6CD5\u6CE8\u5165\u5F53\u524D\u767B\u5F55\u7528\u6237\u5BF9\u8C61</p><p>\u5B9E\u73B0\u601D\u8DEF\uFF1A</p><ol><li><p>\u5B9A\u4E49LoginUser\u6CE8\u89E3\uFF0C\u7528\u4E8E\u6807\u6CE8\u5728Controller\u7684\u65B9\u6CD5\u53C2\u6570\u4E0A</p></li><li><p>\u81EA\u5B9A\u4E49\u62E6\u622A\u5668\uFF0C\u4ECE\u8BF7\u6C42\u5934\u4E2D\u83B7\u53D6\u7528\u6237\u4FE1\u606F\u5E76\u8BBE\u7F6E\u5230\u4E0A\u4E0B\u6587\uFF08\u901A\u8FC7ThreadLocal\u5B9E\u73B0\uFF09\u4E2D</p></li><li><p>\u81EA\u5B9A\u4E49\u53C2\u6570\u89E3\u6790\u5668\uFF0C\u4ECE\u4E0A\u4E0B\u6587\u4E2D\u83B7\u53D6\u7528\u6237\u4FE1\u606F\u5E76\u5C01\u88C5\u4E3ASysUser\u5BF9\u8C61\u7ED9Controller\u7684\u65B9\u6CD5\u53C2\u6570</p></li><li><p>\u5B9A\u4E49\u914D\u7F6E\u7C7B\uFF0C\u7528\u4E8E\u6CE8\u518C\u81EA\u5B9A\u4E49\u62E6\u622A\u5668\u548C\u53C2\u6570\u89E3\u6790\u5668</p></li></ol><p>\u6CE8\u610F\uFF1Apd-tools-user\u6A21\u5757\u5E76\u4E0D\u662Fstarter\uFF0C\u6240\u4EE5\u5982\u679C\u8981\u4F7F\u7528\u5176\u63D0\u4F9B\u7684\u529F\u80FD\uFF0C\u9700\u8981\u5728\u5E94\u7528\u7684\u542F\u52A8\u7C7B\u4E0A\u52A0\u5165@EnableLoginArgResolver\u6CE8\u89E3</p><p><strong>\u5177\u4F53\u4F7F\u7528\u8FC7\u7A0B\uFF1A</strong></p><ol><li>\u521B\u5EFAmaven\u5DE5\u7A0BmyCurrentUserApp\u5E76\u914D\u7F6Epom.xml\u6587\u4EF6</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 
                             http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.2.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>myCurrentUserApp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>pd-tools-user<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-config<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u7F16\u5199\u542F\u52A8\u7C7B</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pinda<span class="token punctuation">.</span>user<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">EnableLoginArgResolver</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableLoginArgResolver</span> <span class="token comment">//\u5F00\u542F\u81EA\u52A8\u767B\u5F55\u7528\u6237\u5BF9\u8C61\u6CE8\u5165</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyCurrentUserApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">MyCurrentUserApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u521B\u5EFAUserController</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pinda<span class="token punctuation">.</span>user<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">LoginUser</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pinda<span class="token punctuation">.</span>user<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">SysUser</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/getCurrentUser&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">SysUser</span> <span class="token function">getCurrentUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@LoginUser</span> <span class="token class-name">SysUser</span> user<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//\u6CE8\u5165\u5F53\u524D\u767B\u5F55\u7528\u6237</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> user<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u542F\u52A8\u9879\u76EE\uFF0C\u56E0\u4E3Apd-tools-user\u6A21\u5757\u9700\u8981\u4ECE\u8BF7\u6C42\u5934\u4E2D\u83B7\u53D6\u7528\u6237\u4FE1\u606F\uFF0C\u6240\u4EE5\u9700\u8981\u4F7F\u7528postman\u8FDB\u884C\u6D4B\u8BD5\uFF1A</p><p><img src="`+G+'" alt="img"></p><p>\u53EF\u4EE5\u901A\u8FC7debug\u65AD\u70B9\u8C03\u8BD5\u7684\u65B9\u5F0F\u6765\u8DDF\u8E2A\u7A0B\u5E8F\u7684\u6267\u884C\u8FC7\u7A0B</p><h2 id="pd-tools-core"><a class="header-anchor" href="#pd-tools-core" aria-hidden="true">#</a> pd-tools-core</h2><p>pd-tools-core\u662F\u6240\u6709\u6A21\u5757\u7684\u57FA\u7840\uFF0C\u5B9A\u4E49\u4E86\u4E00\u4E9B\u57FA\u7840\u7236\u7C7B\u4F9B\u5176\u4ED6\u6A21\u5757\u7EE7\u627F</p><p><img src="'+J+'" alt="img"></p><h2 id="pd-tools-common"><a class="header-anchor" href="#pd-tools-common" aria-hidden="true">#</a> pd-tools-common</h2><p>pd-tools-common\u6A21\u5757\u4E2D\u5B9A\u4E49\u4E86\u4E00\u4E9B\u516C\u5171\u7C7B\uFF0C\u4F8B\u5982BaseConfig\u57FA\u7840\u914D\u7F6E\u7C7B\u3001DefaultGlobalExceptionHandler\u5168\u5C40\u5F02\u5E38\u5904\u7406\u7C7B\u3001\u5404\u79CD\u7C7B\u578B\u8F6C\u6362\u5668\u7B49</p><p><img src="'+K+`" alt="img"></p><h3 id="\u5F02\u5E38\u5904\u7406\u4ECB\u7ECD"><a class="header-anchor" href="#\u5F02\u5E38\u5904\u7406\u4ECB\u7ECD" aria-hidden="true">#</a> \u5F02\u5E38\u5904\u7406\u4ECB\u7ECD</h3><p>\u8F6F\u4EF6\u5F00\u53D1\u8FC7\u7A0B\u4E2D\u4E0D\u53EF\u907F\u514D\u7684\u9700\u8981\u5904\u7406\u5404\u79CD\u5F02\u5E38\uFF0C\u4EE3\u7801\u4E2D\u4F1A\u51FA\u73B0\u5927\u91CF\u7684<code>try {...} catch {...} finally {...}</code> \u4EE3\u7801\u5757\uFF0C\u4E0D\u4EC5\u6709\u5927\u91CF\u7684\u5197\u4F59\u4EE3\u7801\uFF0C\u800C\u4E14\u8FD8\u5F71\u54CD\u4EE3\u7801\u7684\u53EF\u8BFB\u6027</p><p>Spring\u4ECE3.2\u7248\u672C\u5F00\u59CB\u589E\u52A0\u4E86\u4E00\u4E2A\u6CE8\u89E3<code>@ControllerAdvice</code>\uFF0C\u53EF\u4EE5\u4E0E<code>@ExceptionHandler</code>\u3001<code>@InitBinder</code>\u3001<code>@ModelAttribute</code> \u7B49\u6CE8\u89E3\u914D\u5957\u4F7F\u7528\uFF0C\u53EF\u4EE5\u7EDF\u4E00\u8FDB\u884C\u5F02\u5E38\u5904\u7406</p><h3 id="\u5F02\u5E38\u5904\u7406\u5165\u95E8\u6848\u4F8B"><a class="header-anchor" href="#\u5F02\u5E38\u5904\u7406\u5165\u95E8\u6848\u4F8B" aria-hidden="true">#</a> \u5F02\u5E38\u5904\u7406\u5165\u95E8\u6848\u4F8B</h3><ol><li>\u521B\u5EFAmaven\u5DE5\u7A0BexceptionHandler_demo\u5E76\u914D\u7F6Epom.xml\u6587\u4EF6</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 
                             http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.2.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>cn.itcast<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>exceptionHandler_demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u7F16\u5199UserController</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/get&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u521B\u5EFAapplication.yml</li></ol><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u521B\u5EFA\u542F\u52A8\u7C7B</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExceptionHandlerApp</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">ExceptionHandlerApp</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u542F\u52A8\u9879\u76EE\uFF0C\u8BBF\u95EE\u5730\u5740\uFF1Ahttp://localhost:9000/user/get</p><p><img src="`+X+`" alt="img"></p><p>\u53EF\u4EE5\u770B\u5230\u5F02\u5E38\u4FE1\u606F\u76F4\u63A5\u663E\u793A\u5230\u4E86\u9875\u9762\u4E0A\u3002\u63A5\u4E0B\u6765\u9700\u8981\u8FDB\u884C\u5F02\u5E38\u5904\u7406</p><ol start="5"><li>\u521B\u5EFA\u5F02\u5E38\u5904\u7406\u7C7B\uFF0C\u7EDF\u4E00\u8FDB\u884C\u5F02\u5E38\u5904\u7406</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>exception</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ControllerAdvice</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ExceptionHandler</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ResponseBody</span></span><span class="token punctuation">;</span>
<span class="token doc-comment comment">/**
 * \u5168\u5C40\u5F02\u5E38\u5904\u7406
 */</span>
<span class="token annotation punctuation">@ControllerAdvice</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GlobalExceptionHandler</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u5F02\u5E38\u5904\u7406\u65B9\u6CD5\uFF0CController\u53D1\u751F\u5F02\u5E38\u540E\u4F1A\u6267\u884C\u6B64\u65B9\u6CD5\uFF0C\u5728\u6B64\u8FDB\u884C\u7EDF\u4E00\u5904\u7406</span>
    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">Exception</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">handleException</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u7EDF\u4E00\u5904\u7406\u5F02\u5E38\u4FE1\u606F:&quot;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;\u7CFB\u7EDF\u9519\u8BEF&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li>\u91CD\u65B0\u542F\u52A8\u9879\u76EE\uFF0C\u8BBF\u95EE\u5730\u5740\uFF1Ahttp://localhost:9000/user/get</li></ol><p><img src="`+$+`" alt="img"></p><p>\u53EF\u4EE5\u770B\u5230\u9875\u9762\u4E2D\u4E0D\u518D\u663E\u793A\u5F02\u5E38\u4FE1\u606F\uFF0C\u800C\u662F\u6211\u4EEC\u5728\u5F02\u5E38\u5904\u7406\u7C7B\u4E2D\u8FD4\u56DE\u7684\u63D0\u793A\u4FE1\u606F</p><h3 id="pd-tools-common\u4F7F\u7528"><a class="header-anchor" href="#pd-tools-common\u4F7F\u7528" aria-hidden="true">#</a> pd-tools-common\u4F7F\u7528</h3><p>\u53EF\u4EE5\u5728\u4E0A\u9762\u5165\u95E8\u6848\u4F8B\u7684\u57FA\u7840\u4E0A\u7B80\u5355\u4FEE\u6539\u5373\u53EF</p><ol><li>\u4FEE\u6539pom.xml\u6587\u4EF6\uFF0C\u5F15\u5165pd-tools-common\u7684maven\u5750\u6807</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 
                             http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.2.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>cn.itcast<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>exceptionHandler_demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.itheima<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>pd-tools-common<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-config<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u4FEE\u6539\u5168\u5C40\u5F02\u5E38\u5904\u7406\u7C7B\uFF0C\u53EA\u9700\u8981\u7EE7\u627Fpd-tools-common\u4E2D\u63D0\u4F9B\u7684\u7236\u7C7B\u5373\u53EF</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>exception</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>pinda<span class="token punctuation">.</span>common<span class="token punctuation">.</span>handler<span class="token punctuation">.</span></span><span class="token class-name">DefaultGlobalExceptionHandler</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ControllerAdvice</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ResponseBody</span></span><span class="token punctuation">;</span>
<span class="token doc-comment comment">/**
 * \u5168\u5C40\u5F02\u5E38\u5904\u7406
 */</span>
<span class="token annotation punctuation">@ControllerAdvice</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GlobalExceptionHandler</span> <span class="token keyword">extends</span> <span class="token class-name">DefaultGlobalExceptionHandler</span><span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u91CD\u65B0\u542F\u52A8\u9879\u76EE\uFF0C\u8BBF\u95EE\u5730\u5740\uFF1Ahttp://localhost:9000/user/get</li></ol><p><img src="`+Z+'" alt="img"></p><h2 id="pd-tools-databases"><a class="header-anchor" href="#pd-tools-databases" aria-hidden="true">#</a> pd-tools-databases</h2><p>pd-tools-databases\u6A21\u5757\u4E2D\u63D0\u4F9B\u7684\u90FD\u662F\u8DDF\u6570\u636E\u5E93\u64CD\u4F5C\u76F8\u5173\u7684\u7C7B\u3002\u5176\u4ED6\u6A21\u5757\u53EF\u4EE5\u76F4\u63A5\u5F15\u5165maven\u5750\u6807\u5E76\u7EE7\u627F\u76F8\u5173\u7236\u7C7B\u5C31\u53EF\u4EE5\u590D\u7528\u5176\u63D0\u4F9B\u7684\u57FA\u7840\u914D\u7F6E</p><p><img src="'+Q+`" alt="img"></p><h2 id="pd-tools-j2cache"><a class="header-anchor" href="#pd-tools-j2cache" aria-hidden="true">#</a> pd-tools-j2cache</h2><p>pd-tools-j2cache\u6A21\u5757\u63D0\u4F9B\u7684\u529F\u80FD\u4E3A\u7F13\u5B58\u529F\u80FD\uFF0C\u5176\u672C\u8D28\u662F\u4E00\u4E2Astarter\uFF0C\u5176\u4ED6\u6A21\u5757\u5982\u679C\u9700\u8981\u4F7F\u7528\u7F13\u5B58\u529F\u80FD\u76F4\u63A5\u5F15\u5165maven\u5750\u6807\u5E76\u63D0\u4F9B\u76F8\u5E94\u914D\u7F6E\u6587\u4EF6\u5373\u53EF\u4F7F\u7528</p><h3 id="j2cache\u4ECB\u7ECD"><a class="header-anchor" href="#j2cache\u4ECB\u7ECD" aria-hidden="true">#</a> j2cache\u4ECB\u7ECD</h3><p>j2cache\u662FOSChina\u76EE\u524D\u6B63\u5728\u4F7F\u7528\u7684\u4E24\u7EA7\u7F13\u5B58\u6846\u67B6</p><p>j2cache\u7684\u4E24\u7EA7\u7F13\u5B58\u7ED3\u6784\uFF1A</p><ul><li>L1\uFF1A \u8FDB\u7A0B\u5185\u7F13\u5B58 caffeine/ehcache</li><li>L2\uFF1A \u96C6\u4E2D\u5F0F\u7F13\u5B58 Redis/Memcached</li></ul><p>j2cache\u5176\u5B9E\u5E76\u4E0D\u662F\u5728\u91CD\u590D\u9020\u8F6E\u5B50\uFF0C\u800C\u662F\u4F5C\u8D44\u6E90\u6574\u5408\uFF0C\u5373\u5C06Ehcache\u3001Caffeine\u3001redis\u3001Spring Cache\u7B49\u8FDB\u884C\u6574\u5408</p><p>\u7531\u4E8E\u5927\u91CF\u7684\u7F13\u5B58\u8BFB\u53D6\u4F1A\u5BFC\u81F4L2\u7684\u7F51\u7EDC\u6210\u4E3A\u6574\u4E2A\u7CFB\u7EDF\u7684\u74F6\u9888\uFF0C\u56E0\u6B64L1\u7684\u76EE\u6807\u662F\u964D\u4F4E\u5BF9L2\u7684\u8BFB\u53D6\u6B21\u6570\u3002\u8BE5\u7F13\u5B58\u6846\u67B6\u4E3B\u8981\u7528\u4E8E\u96C6\u7FA4\u73AF\u5883\u4E2D\u3002\u5355\u673A\u4E5F\u53EF\u4F7F\u7528\uFF0C\u7528\u4E8E\u907F\u514D\u5E94\u7528\u91CD\u542F\u5BFC\u81F4\u7684ehcache\u7F13\u5B58\u6570\u636E\u4E22\u5931</p><p>j2cache\u4ECE1.3.0\u7248\u672C\u5F00\u59CB\u652F\u6301JGroups\u548CRedis Pub/Sub\u4E24\u79CD\u65B9\u5F0F\u8FDB\u884C\u7F13\u5B58\u4E8B\u4EF6\u7684\u901A\u77E5</p><p>\u6570\u636E\u8BFB\u53D6\u987A\u5E8F -&gt; L1 -&gt; L2 -&gt; DB</p><p>\u4F7F\u7528j2cache\u9700\u8981\u5BFC\u5165\u7684maven\u5750\u6807\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>net.oschina.j2cache<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>j2cache-spring-boot2-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.8.0-release<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>net.oschina.j2cache<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>j2cache-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.8.0-release<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>slf4j-simple<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>slf4j-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="j2cache\u5165\u95E8\u6848\u4F8B"><a class="header-anchor" href="#j2cache\u5165\u95E8\u6848\u4F8B" aria-hidden="true">#</a> j2cache\u5165\u95E8\u6848\u4F8B</h3><ol><li>\u521B\u5EFAmaven\u5DE5\u7A0Bj2cache_demo\u5E76\u914D\u7F6Epom.xml\u6587\u4EF6</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 
                             http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.2.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>cn.itcast<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>j2cache_demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>net.oschina.j2cache<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>j2cache-spring-boot2-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.8.0-release<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>net.oschina.j2cache<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>j2cache-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.8.0-release<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>slf4j-simple<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>slf4j-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u521B\u5EFAapplication.yml</li></ol><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9000</span>
<span class="token comment"># redis \u901A\u7528\u914D\u7F6E\uFF0C \u4E0D\u540C\u7684\u73AF\u5883\uFF0C\u9700\u8981\u914D\u7F6E\u4E0D\u540C\u7684\u94FE\u63A5\u4FE1\u606F\uFF0C</span>
<span class="token comment"># \u53EA\u9700\u8981\u5C06\u8FD9\u6BB5\u4FE1\u606F\u590D\u5236\u5230\u5177\u4F53\u73AF\u5883\u7684\u914D\u7F6E\u6587\u4EF6\u4E2D\u8FDB\u884C\u4FEE\u6539\u5373\u53EF</span>
<span class="token comment"># \u5982\uFF1A\u590D\u5236\u5230pd-auth-server-dev.yml\u4E2D\u5C06\u6570\u636E\u5E93\u540D\u548Cip\u6539\u6389</span>
<span class="token key atrule">pinda</span><span class="token punctuation">:</span>
  <span class="token key atrule">redis</span><span class="token punctuation">:</span>
    <span class="token key atrule">ip</span><span class="token punctuation">:</span> 127.0.0.1
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>
    <span class="token key atrule">password</span><span class="token punctuation">:</span>
    <span class="token key atrule">database</span><span class="token punctuation">:</span> <span class="token number">0</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cache</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> GENERIC
  <span class="token key atrule">redis</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>pinda.redis.ip<span class="token punctuation">}</span>
    <span class="token key atrule">password</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>pinda.redis.password<span class="token punctuation">}</span>
    <span class="token key atrule">port</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>pinda.redis.port<span class="token punctuation">}</span>
    <span class="token key atrule">database</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>pinda.redis.database<span class="token punctuation">}</span>

<span class="token key atrule">j2cache</span><span class="token punctuation">:</span>
  <span class="token comment">#  config-location: /j2cache.properties</span>
  <span class="token key atrule">open-spring-cache</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">cache-clean-mode</span><span class="token punctuation">:</span> passive
  <span class="token key atrule">allow-null-values</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">redis-client</span><span class="token punctuation">:</span> lettuce <span class="token comment">#\u6307\u5B9Aredis\u5BA2\u6237\u7AEF\u4F7F\u7528lettuce\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528Jedis</span>
  <span class="token key atrule">l2-cache-open</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#\u5F00\u542F\u4E8C\u7EA7\u7F13\u5B58</span>
  <span class="token key atrule">broadcast</span><span class="token punctuation">:</span> net.oschina.j2cache.cache.support.redis.SpringRedisPubSubPolicy
  <span class="token comment">#  broadcast: jgroups</span>
  <span class="token key atrule">L1</span><span class="token punctuation">:</span> <span class="token comment">#\u6307\u5B9A\u4E00\u7EA7\u7F13\u5B58\u63D0\u4F9B\u8005\u4E3Acaffeine</span>
    <span class="token key atrule">provider_class</span><span class="token punctuation">:</span> caffeine 
  <span class="token key atrule">L2</span><span class="token punctuation">:</span> <span class="token comment">#\u6307\u5B9A\u4E8C\u7EA7\u7F13\u5B58\u63D0\u4F9B\u8005\u4E3Aredis</span>
    <span class="token key atrule">provider_class</span><span class="token punctuation">:</span> net.oschina.j2cache.cache.support.redis.SpringRedisProvider
    <span class="token key atrule">config_section</span><span class="token punctuation">:</span> lettuce
  <span class="token key atrule">sync_ttl_to_redis</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">default_cache_null_object</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">serialization</span><span class="token punctuation">:</span> fst
<span class="token key atrule">caffeine</span><span class="token punctuation">:</span>
  <span class="token key atrule">properties</span><span class="token punctuation">:</span> /caffeine.properties   <span class="token comment"># \u8FD9\u4E2A\u914D\u7F6E\u6587\u4EF6\u9700\u8981\u653E\u5728\u9879\u76EE\u4E2D</span>
<span class="token key atrule">lettuce</span><span class="token punctuation">:</span>
  <span class="token key atrule">mode</span><span class="token punctuation">:</span> single
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span>
  <span class="token key atrule">storage</span><span class="token punctuation">:</span> generic
  <span class="token key atrule">channel</span><span class="token punctuation">:</span> j2cache
  <span class="token key atrule">scheme</span><span class="token punctuation">:</span> redis
  <span class="token key atrule">hosts</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>pinda.redis.ip<span class="token punctuation">}</span><span class="token punctuation">:</span>$<span class="token punctuation">{</span>pinda.redis.port<span class="token punctuation">}</span>
  <span class="token key atrule">password</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>pinda.redis.password<span class="token punctuation">}</span>
  <span class="token key atrule">database</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>pinda.redis.database<span class="token punctuation">}</span>
  <span class="token key atrule">sentinelMasterId</span><span class="token punctuation">:</span>
  <span class="token key atrule">maxTotal</span><span class="token punctuation">:</span> <span class="token number">100</span>
  <span class="token key atrule">maxIdle</span><span class="token punctuation">:</span> <span class="token number">10</span>
  <span class="token key atrule">minIdle</span><span class="token punctuation">:</span> <span class="token number">10</span>
  <span class="token key atrule">timeout</span><span class="token punctuation">:</span> <span class="token number">10000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u521B\u5EFA/resources/caffeine.properties\u6587\u4EF6</li></ol><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment">#########################################</span>
<span class="token comment"># Caffeine configuration</span>
<span class="token comment"># [name] = size, xxxx[s|m|h|d]</span>
<span class="token comment">#########################################</span>
<span class="token key attr-name">default</span><span class="token punctuation">=</span><span class="token value attr-value">2000, 2h</span>
<span class="token key attr-name">rx</span><span class="token punctuation">=</span><span class="token value attr-value">50, 2h</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u521B\u5EFAMyController</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">net<span class="token punctuation">.</span>oschina<span class="token punctuation">.</span>j2cache<span class="token punctuation">.</span></span><span class="token class-name">CacheChannel</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">net<span class="token punctuation">.</span>oschina<span class="token punctuation">.</span>j2cache<span class="token punctuation">.</span></span><span class="token class-name">CacheObject</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/cache&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyController</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> key <span class="token operator">=</span> <span class="token string">&quot;myKey&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> region<span class="token operator">=</span><span class="token string">&quot;rx&quot;</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">CacheChannel</span> cacheChannel<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/getInfos&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">getInfos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">CacheObject</span> cacheObject <span class="token operator">=</span> cacheChannel<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>region<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>cacheObject<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//\u7F13\u5B58\u4E2D\u6CA1\u6709\u627E\u5230\uFF0C\u67E5\u8BE2\u6570\u636E\u5E93\u83B7\u5F97</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            data<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;info1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            data<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;info2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//\u653E\u5165\u7F13\u5B58</span>
            cacheChannel<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>region<span class="token punctuation">,</span>key<span class="token punctuation">,</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> data<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> cacheObject<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6E05\u7406\u6307\u5B9A\u7F13\u5B58</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/evict&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">evict</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        cacheChannel<span class="token punctuation">.</span><span class="token function">evict</span><span class="token punctuation">(</span>region<span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;evict success&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u68C0\u6D4B\u5B58\u5728\u90A3\u7EA7\u7F13\u5B58</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/check&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">int</span> check <span class="token operator">=</span> cacheChannel<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span>region<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;level:&quot;</span> <span class="token operator">+</span> check<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u68C0\u6D4B\u7F13\u5B58\u6570\u636E\u662F\u5426\u5B58\u5728</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/exists&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">boolean</span> exists <span class="token operator">=</span> cacheChannel<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span>region<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;exists:&quot;</span> <span class="token operator">+</span> exists<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//\u6E05\u7406\u6307\u5B9A\u533A\u57DF\u7684\u7F13\u5B58</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/clear&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        cacheChannel<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span>region<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;clear success&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>\u521B\u5EFA\u542F\u52A8\u7C7B</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>itcast</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">J2CacheApp</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">J2CacheApp</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6CE8\u610F\uFF1A\u7531\u4E8E\u6211\u4EEC\u5F53\u524D\u7B2C\u4E8C\u7EA7\u7F13\u5B58\u4F7F\u7528\u7684\u662Fredis\uFF0C\u6240\u4EE5\u9700\u8981\u542F\u52A8redis\u670D\u52A1\u624D\u80FD\u6B63\u5E38\u8FD0\u884C\u5165\u95E8\u6848\u4F8B</p><p>\u542F\u52A8\u9879\u76EE\uFF0C\u8BBF\u95EE\u5730\u5740\uFF1Ahttp://localhost:9000/cache/getInfos</p><p>\u53EF\u4EE5\u53D1\u73B0redis\u4E2D\u5DF2\u7ECF\u7F13\u5B58\u4E86\u6570\u636E\uFF1A</p><p><img src="`+Y+'" alt="img"></p><p>\u91CD\u542F\u9879\u76EE\uFF0C\u7531\u4E8Ej2cache\u7684\u4E00\u7EA7\u7F13\u5B58\uFF08caffeine\uFF09\u662F\u8FDB\u7A0B\u7EA7\u7F13\u5B58\uFF0C\u91CD\u542F\u540E\u4E00\u7EA7\u7F13\u5B58\u6D88\u5931\u3002\u4F46\u662F\u4E8C\u7EA7\u7F13\u5B58\uFF08redis\uFF09\u7684\u6570\u636E\u8FD8\u5B58\u5728\uFF0C\u518D\u6B21\u8BBF\u95EE\u4E0A\u9762\u5730\u5740\uFF0C\u901A\u8FC7debug\u65AD\u70B9\u8C03\u8BD5\u53EF\u4EE5\u770B\u5230\u7A0B\u5E8F\u4ECEredis\u4E2D\u83B7\u53D6\u4E86\u7F13\u5B58\u6570\u636E</p><h3 id="pd-tools-j2cache\u4F7F\u7528"><a class="header-anchor" href="#pd-tools-j2cache\u4F7F\u7528" aria-hidden="true">#</a> pd-tools-j2cache\u4F7F\u7528</h3><p>pd-tools-j2cache\u5176\u5B9E\u5C31\u662F\u4E00\u4E2Astarter\uFF0C\u6211\u4EEC\u7684\u5E94\u7528\u76F4\u63A5\u5F15\u5165\u5176maven\u5750\u6807\u5E76\u914D\u7F6Ej2cache\u7684\u914D\u7F6E\u6587\u4EF6\u5C31\u53EF\u4EE5\u5C06CacheChannel\u5BF9\u8C61\u76F4\u63A5\u6CE8\u5165\u5230\u6211\u4EEC\u7684\u7A0B\u5E8F\u4E2D\u8FDB\u884C\u7F13\u5B58\u6570\u636E\u64CD\u4F5C\u4E86</p><p>\u5177\u4F53\u4F7F\u7528\u8FC7\u7A0B\u548C\u5165\u95E8\u6848\u4F8B\u4E00\u81F4\uFF0C\u53EA\u9700\u8981\u66F4\u6362j2cache\u7684maven\u5750\u6807\u4E3Apd-tools-j2cache\u7684maven\u5750\u6807\u5373\u53EF</p><h2 id="\u6570\u636E\u6A21\u578B"><a class="header-anchor" href="#\u6570\u636E\u6A21\u578B" aria-hidden="true">#</a> \u6570\u636E\u6A21\u578B</h2><h3 id="\u6743\u9650\u6570\u636E\u6A21\u578B\u4ECB\u7ECD"><a class="header-anchor" href="#\u6743\u9650\u6570\u636E\u6A21\u578B\u4ECB\u7ECD" aria-hidden="true">#</a> \u6743\u9650\u6570\u636E\u6A21\u578B\u4ECB\u7ECD</h3><h3 id="\u5BFC\u5165\u8868\u7ED3\u6784"><a class="header-anchor" href="#\u5BFC\u5165\u8868\u7ED3\u6784" aria-hidden="true">#</a> \u5BFC\u5165\u8868\u7ED3\u6784</h3><h4 id="pd-common-login-log\u8868"><a class="header-anchor" href="#pd-common-login-log\u8868" aria-hidden="true">#</a> pd_common_login_log\u8868</h4><h4 id="pd-common-opt-log\u8868"><a class="header-anchor" href="#pd-common-opt-log\u8868" aria-hidden="true">#</a> pd_common_opt_log\u8868</h4><h4 id="pd-auth-menu\u8868"><a class="header-anchor" href="#pd-auth-menu\u8868" aria-hidden="true">#</a> pd_auth_menu\u8868</h4><h4 id="pd-auth-resource\u8868"><a class="header-anchor" href="#pd-auth-resource\u8868" aria-hidden="true">#</a> pd_auth_resource\u8868</h4><h4 id="pd-auth-role\u8868"><a class="header-anchor" href="#pd-auth-role\u8868" aria-hidden="true">#</a> pd_auth_role\u8868</h4><h4 id="pd-auth-user\u8868"><a class="header-anchor" href="#pd-auth-user\u8868" aria-hidden="true">#</a> pd_auth_user\u8868</h4><h4 id="pd-core-station\u8868"><a class="header-anchor" href="#pd-core-station\u8868" aria-hidden="true">#</a> pd_core_station\u8868</h4><h4 id="pd-core-org\u8868"><a class="header-anchor" href="#pd-core-org\u8868" aria-hidden="true">#</a> pd_core_org\u8868</h4><h4 id="pd-auth-user-role\u8868"><a class="header-anchor" href="#pd-auth-user-role\u8868" aria-hidden="true">#</a> pd_auth_user_role\u8868</h4><h4 id="pd-auth-role-org\u8868"><a class="header-anchor" href="#pd-auth-role-org\u8868" aria-hidden="true">#</a> pd_auth_role_org\u8868</h4><h4 id="pd-auth-role-authority\u8868"><a class="header-anchor" href="#pd-auth-role-authority\u8868" aria-hidden="true">#</a> pd_auth_role_authority\u8868</h4><h3 id="\u5BFC\u5165\u5B9E\u4F53\u7C7B"><a class="header-anchor" href="#\u5BFC\u5165\u5B9E\u4F53\u7C7B" aria-hidden="true">#</a> \u5BFC\u5165\u5B9E\u4F53\u7C7B</h3><h2 id="\u8BA4\u8BC1\u548C\u9274\u6743\u6D41\u7A0B"><a class="header-anchor" href="#\u8BA4\u8BC1\u548C\u9274\u6743\u6D41\u7A0B" aria-hidden="true">#</a> \u8BA4\u8BC1\u548C\u9274\u6743\u6D41\u7A0B</h2><h3 id="\u8BA4\u8BC1\u6D41\u7A0B"><a class="header-anchor" href="#\u8BA4\u8BC1\u6D41\u7A0B" aria-hidden="true">#</a> \u8BA4\u8BC1\u6D41\u7A0B</h3><h3 id="\u9274\u6743\u6D41\u7A0B"><a class="header-anchor" href="#\u9274\u6743\u6D41\u7A0B" aria-hidden="true">#</a> \u9274\u6743\u6D41\u7A0B</h3><h2 id="\u6743\u9650\u670D\u52A1\u5F00\u53D1"><a class="header-anchor" href="#\u6743\u9650\u670D\u52A1\u5F00\u53D1" aria-hidden="true">#</a> \u6743\u9650\u670D\u52A1\u5F00\u53D1</h2><h3 id="\u57FA\u7840\u73AF\u5883\u642D\u5EFA"><a class="header-anchor" href="#\u57FA\u7840\u73AF\u5883\u642D\u5EFA" aria-hidden="true">#</a> \u57FA\u7840\u73AF\u5883\u642D\u5EFA</h3><h4 id="\u914D\u7F6E\u6587\u4EF6"><a class="header-anchor" href="#\u914D\u7F6E\u6587\u4EF6" aria-hidden="true">#</a> \u914D\u7F6E\u6587\u4EF6</h4><h5 id="bootstrap-yml"><a class="header-anchor" href="#bootstrap-yml" aria-hidden="true">#</a> bootstrap.yml</h5><h5 id="logback-spring-xml"><a class="header-anchor" href="#logback-spring-xml" aria-hidden="true">#</a> logback-spring.xml</h5><h5 id="j2cache\u914D\u7F6E\u6587\u4EF6"><a class="header-anchor" href="#j2cache\u914D\u7F6E\u6587\u4EF6" aria-hidden="true">#</a> j2cache\u914D\u7F6E\u6587\u4EF6</h5><h5 id="\u5BC6\u94A5\u6587\u4EF6"><a class="header-anchor" href="#\u5BC6\u94A5\u6587\u4EF6" aria-hidden="true">#</a> \u5BC6\u94A5\u6587\u4EF6</h5><h5 id="spy-properties"><a class="header-anchor" href="#spy-properties" aria-hidden="true">#</a> spy.properties</h5><h5 id="dozer"><a class="header-anchor" href="#dozer" aria-hidden="true">#</a> dozer</h5><h4 id="\u914D\u7F6E\u7C7B"><a class="header-anchor" href="#\u914D\u7F6E\u7C7B" aria-hidden="true">#</a> \u914D\u7F6E\u7C7B</h4><h4 id="\u542F\u52A8\u7C7B"><a class="header-anchor" href="#\u542F\u52A8\u7C7B" aria-hidden="true">#</a> \u542F\u52A8\u7C7B</h4><h3 id="\u5F00\u53D1\u8BA4\u8BC1\u529F\u80FD"><a class="header-anchor" href="#\u5F00\u53D1\u8BA4\u8BC1\u529F\u80FD" aria-hidden="true">#</a> \u5F00\u53D1\u8BA4\u8BC1\u529F\u80FD</h3><h4 id="easy-captcha"><a class="header-anchor" href="#easy-captcha" aria-hidden="true">#</a> easy-captcha</h4><h4 id="\u5F00\u53D1\u9A8C\u8BC1\u7801\u63A5\u53E3"><a class="header-anchor" href="#\u5F00\u53D1\u9A8C\u8BC1\u7801\u63A5\u53E3" aria-hidden="true">#</a> \u5F00\u53D1\u9A8C\u8BC1\u7801\u63A5\u53E3</h4><h4 id="\u5F00\u53D1\u8BA4\u8BC1\u63A5\u53E3"><a class="header-anchor" href="#\u5F00\u53D1\u8BA4\u8BC1\u63A5\u53E3" aria-hidden="true">#</a> \u5F00\u53D1\u8BA4\u8BC1\u63A5\u53E3</h4><h3 id="\u5F00\u53D1\u64CD\u4F5C\u65E5\u5FD7\u529F\u80FD"><a class="header-anchor" href="#\u5F00\u53D1\u64CD\u4F5C\u65E5\u5FD7\u529F\u80FD" aria-hidden="true">#</a> \u5F00\u53D1\u64CD\u4F5C\u65E5\u5FD7\u529F\u80FD</h3><h3 id="\u5BFC\u5165\u5176\u4ED6\u529F\u80FD\u4EE3\u7801"><a class="header-anchor" href="#\u5BFC\u5165\u5176\u4ED6\u529F\u80FD\u4EE3\u7801" aria-hidden="true">#</a> \u5BFC\u5165\u5176\u4ED6\u529F\u80FD\u4EE3\u7801</h3><h2 id="\u7F51\u5173\u670D\u52A1\u5F00\u53D1"><a class="header-anchor" href="#\u7F51\u5173\u670D\u52A1\u5F00\u53D1" aria-hidden="true">#</a> \u7F51\u5173\u670D\u52A1\u5F00\u53D1</h2><h3 id="\u914D\u7F6E\u6587\u4EF6-1"><a class="header-anchor" href="#\u914D\u7F6E\u6587\u4EF6-1" aria-hidden="true">#</a> \u914D\u7F6E\u6587\u4EF6</h3><h4 id="bootstrap-yml-1"><a class="header-anchor" href="#bootstrap-yml-1" aria-hidden="true">#</a> bootstrap.yml</h4><h4 id="logback-spring-xml-1"><a class="header-anchor" href="#logback-spring-xml-1" aria-hidden="true">#</a> logback-spring.xml</h4><h4 id="j2cache\u914D\u7F6E\u6587\u4EF6-1"><a class="header-anchor" href="#j2cache\u914D\u7F6E\u6587\u4EF6-1" aria-hidden="true">#</a> j2cache\u914D\u7F6E\u6587\u4EF6</h4><h4 id="\u5BC6\u94A5\u6587\u4EF6-1"><a class="header-anchor" href="#\u5BC6\u94A5\u6587\u4EF6-1" aria-hidden="true">#</a> \u5BC6\u94A5\u6587\u4EF6</h4><h3 id="\u542F\u52A8\u7C7B-1"><a class="header-anchor" href="#\u542F\u52A8\u7C7B-1" aria-hidden="true">#</a> \u542F\u52A8\u7C7B</h3><h3 id="\u914D\u7F6E\u7C7B-1"><a class="header-anchor" href="#\u914D\u7F6E\u7C7B-1" aria-hidden="true">#</a> \u914D\u7F6E\u7C7B</h3><h3 id="api\u63A5\u53E3\u548C\u7194\u65AD\u5668"><a class="header-anchor" href="#api\u63A5\u53E3\u548C\u7194\u65AD\u5668" aria-hidden="true">#</a> API\u63A5\u53E3\u548C\u7194\u65AD\u5668</h3><h3 id="\u8FC7\u6EE4\u5668"><a class="header-anchor" href="#\u8FC7\u6EE4\u5668" aria-hidden="true">#</a> \u8FC7\u6EE4\u5668</h3><h4 id="basefilter"><a class="header-anchor" href="#basefilter" aria-hidden="true">#</a> BaseFilter</h4><h4 id="tokencontextfilter"><a class="header-anchor" href="#tokencontextfilter" aria-hidden="true">#</a> TokenContextFilter</h4><h4 id="accessfilter"><a class="header-anchor" href="#accessfilter" aria-hidden="true">#</a> AccessFilter</h4><h2 id="\u901A\u7528\u6743\u9650\u7CFB\u7EDF\u4F01\u4E1A\u5E94\u7528\u6307\u5357"><a class="header-anchor" href="#\u901A\u7528\u6743\u9650\u7CFB\u7EDF\u4F01\u4E1A\u5E94\u7528\u6307\u5357" aria-hidden="true">#</a> \u901A\u7528\u6743\u9650\u7CFB\u7EDF\u4F01\u4E1A\u5E94\u7528\u6307\u5357</h2><h3 id="\u65B0\u9879\u76EE\u5F00\u53D1"><a class="header-anchor" href="#\u65B0\u9879\u76EE\u5F00\u53D1" aria-hidden="true">#</a> \u65B0\u9879\u76EE\u5F00\u53D1</h3><h4 id="\u6570\u636E\u5E93\u73AF\u5883\u642D\u5EFA"><a class="header-anchor" href="#\u6570\u636E\u5E93\u73AF\u5883\u642D\u5EFA" aria-hidden="true">#</a> \u6570\u636E\u5E93\u73AF\u5883\u642D\u5EFA</h4><h4 id="\u540E\u7AEF\u4E1A\u52A1\u529F\u80FD\u5F00\u53D1"><a class="header-anchor" href="#\u540E\u7AEF\u4E1A\u52A1\u529F\u80FD\u5F00\u53D1" aria-hidden="true">#</a> \u540E\u7AEF\u4E1A\u52A1\u529F\u80FD\u5F00\u53D1</h4><h5 id="\u521B\u5EFA\u5DE5\u7A0B"><a class="header-anchor" href="#\u521B\u5EFA\u5DE5\u7A0B" aria-hidden="true">#</a> \u521B\u5EFA\u5DE5\u7A0B</h5><h5 id="pd-goods-entity\u5F00\u53D1"><a class="header-anchor" href="#pd-goods-entity\u5F00\u53D1" aria-hidden="true">#</a> pd-goods-entity\u5F00\u53D1</h5><h5 id="pd-goods-server\u5F00\u53D1"><a class="header-anchor" href="#pd-goods-server\u5F00\u53D1" aria-hidden="true">#</a> pd-goods-server\u5F00\u53D1</h5><h4 id="\u914D\u7F6E\u7F51\u5173\u8DEF\u7531\u89C4\u5219"><a class="header-anchor" href="#\u914D\u7F6E\u7F51\u5173\u8DEF\u7531\u89C4\u5219" aria-hidden="true">#</a> \u914D\u7F6E\u7F51\u5173\u8DEF\u7531\u89C4\u5219</h4><h4 id="\u524D\u7AEF\u5F00\u53D1"><a class="header-anchor" href="#\u524D\u7AEF\u5F00\u53D1" aria-hidden="true">#</a> \u524D\u7AEF\u5F00\u53D1</h4><h4 id="\u914D\u7F6E\u83DC\u5355\u548C\u8D44\u6E90\u6743\u9650"><a class="header-anchor" href="#\u914D\u7F6E\u83DC\u5355\u548C\u8D44\u6E90\u6743\u9650" aria-hidden="true">#</a> \u914D\u7F6E\u83DC\u5355\u548C\u8D44\u6E90\u6743\u9650</h4><h4 id="\u914D\u7F6E\u89D2\u8272"><a class="header-anchor" href="#\u914D\u7F6E\u89D2\u8272" aria-hidden="true">#</a> \u914D\u7F6E\u89D2\u8272</h4><h3 id="\u5DF2\u6709\u9879\u76EE\u96C6\u6210"><a class="header-anchor" href="#\u5DF2\u6709\u9879\u76EE\u96C6\u6210" aria-hidden="true">#</a> \u5DF2\u6709\u9879\u76EE\u96C6\u6210</h3><h4 id="tms\u8C03\u6574"><a class="header-anchor" href="#tms\u8C03\u6574" aria-hidden="true">#</a> TMS\u8C03\u6574</h4><h5 id="\u9875\u9762\u83DC\u5355"><a class="header-anchor" href="#\u9875\u9762\u83DC\u5355" aria-hidden="true">#</a> \u9875\u9762\u83DC\u5355</h5><h5 id="\u8BF7\u6C42\u5730\u5740"><a class="header-anchor" href="#\u8BF7\u6C42\u5730\u5740" aria-hidden="true">#</a> \u8BF7\u6C42\u5730\u5740</h5><h4 id="\u7F51\u5173\u8DEF\u7531\u914D\u7F6E"><a class="header-anchor" href="#\u7F51\u5173\u8DEF\u7531\u914D\u7F6E" aria-hidden="true">#</a> \u7F51\u5173\u8DEF\u7531\u914D\u7F6E</h4><h4 id="\u901A\u7528\u6743\u9650\u7CFB\u7EDF\u914D\u7F6E"><a class="header-anchor" href="#\u901A\u7528\u6743\u9650\u7CFB\u7EDF\u914D\u7F6E" aria-hidden="true">#</a> \u901A\u7528\u6743\u9650\u7CFB\u7EDF\u914D\u7F6E</h4><h5 id="\u83DC\u5355\u914D\u7F6E"><a class="header-anchor" href="#\u83DC\u5355\u914D\u7F6E" aria-hidden="true">#</a> \u83DC\u5355\u914D\u7F6E</h5><h5 id="\u8D44\u6E90\u6743\u9650\u914D\u7F6E"><a class="header-anchor" href="#\u8D44\u6E90\u6743\u9650\u914D\u7F6E" aria-hidden="true">#</a> \u8D44\u6E90\u6743\u9650\u914D\u7F6E</h5><h5 id="\u89D2\u8272\u914D\u7F6E"><a class="header-anchor" href="#\u89D2\u8272\u914D\u7F6E" aria-hidden="true">#</a> \u89D2\u8272\u914D\u7F6E</h5>',793);function an(tn,pn){return sn}var on=n(nn,[["render",an],["__file","\u54C1\u8FBE\u901A\u7528\u6743\u9650\u7CFB\u7EDF.html.vue"]]);export{on as default};
