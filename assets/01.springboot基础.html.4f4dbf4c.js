import{_ as e,r as o,o as c,a as l,b as n,d as t,F as i,c as p,e as s}from"./app.1b3ac386.js";var u="/naive-dafou-ui-dist/assets/image-20211207191117273.02c89280.png",k="/naive-dafou-ui-dist/assets/image-20211207191843442.cc1ba4ab.png",r="/naive-dafou-ui-dist/assets/image-20211207194735553.7c93915c.png",d="/naive-dafou-ui-dist/assets/image-20211207195247209.975c6eb5.png",v="/naive-dafou-ui-dist/assets/image-20211207200302654.63f3f3bb.png",m="/naive-dafou-ui-dist/assets/image-20211207201616965.32d621e3.png",g="/naive-dafou-ui-dist/assets/image-20211207220940510.2e540697.png",b="/naive-dafou-ui-dist/assets/1158841-20190707171658626-1389392187.86ee78fc.png",h="/naive-dafou-ui-dist/assets/image-20211208003828839.cc21f657.png",f="/naive-dafou-ui-dist/assets/image-20211208003701192.852e55f9.png",y="/naive-dafou-ui-dist/assets/image-20211208010813441.2debb3e1.png",w="/naive-dafou-ui-dist/assets/image-20211208011201158.0f25831b.png",q="/naive-dafou-ui-dist/assets/image-20211208031726302.5ecbf6a0.png",x="/naive-dafou-ui-dist/assets/image-20211208033127866.81f623b7.png",S="/naive-dafou-ui-dist/assets/image-20211208033145324.4835f384.png",C="/naive-dafou-ui-dist/assets/image-20211208033213047.335549e1.png",T="/naive-dafou-ui-dist/assets/image-20211208040626019.3ee6c583.png",j="/naive-dafou-ui-dist/assets/image-20211208041839675.b9b0e3e8.png",M="/naive-dafou-ui-dist/assets/image-20211208043058494.ac1e4f9a.png",A="/naive-dafou-ui-dist/assets/image-20211208053854453.1bf23586.png",E="/naive-dafou-ui-dist/assets/image-20211208064122951.1ce76779.png",R="/naive-dafou-ui-dist/assets/image-20211208151209610.64ae0a4b.png",I="/naive-dafou-ui-dist/assets/image-20211208152202580.a4cb50fc.png",_="/naive-dafou-ui-dist/assets/image-20211208181657086.8c1d2323.png",P="/naive-dafou-ui-dist/assets/image-20211208184419575.6893b490.png",B="/naive-dafou-ui-dist/assets/image-20211208185732467.763ed9d9.png",N="/naive-dafou-ui-dist/assets/image-20211208192810714.5cb9af95.png",F="/naive-dafou-ui-dist/assets/image-20211208221251914.c57c7ffa.png",V="/naive-dafou-ui-dist/assets/image-20211208230206815.5e613fe8.png";const O={},L=p('<h2 id="\u524D\u9762\u5B66\u4E60\u7684\u601D\u8003"><a class="header-anchor" href="#\u524D\u9762\u5B66\u4E60\u7684\u601D\u8003" aria-hidden="true">#</a> \u524D\u9762\u5B66\u4E60\u7684\u601D\u8003</h2><p>\u5B66\u4E60\u7684\u6574\u4E2A\u6D41\u7A0B\u4E0B\u6765\uFF1A</p><ul><li>javase OOP</li><li>Mysql \u6301\u4E45\u5316</li><li>html+css+js+jquery+\u6846\u67B6\uFF1A\u4E3A\u4EC0\u4E48\u524D\u7AEF\u754C\u9762\u8BBE\u8BA1\u7684\u4E0D\u597D\uFF0C\u6846\u67B6\u4E0D\u719F\u6089\uFF0Ccss\u4E0D\u597D</li><li>Javaweb\uFF1A\u53EF\u4EE5\u72EC\u7ACB\u5F00\u53D1mvc\u4E09\u5C42\u67B6\u6784\u7684\u539F\u59CB\u7F51\u7AD9</li><li>ssm\uFF1A\u6846\u67B6\uFF0C\u7B80\u5316\u4E86\u6211\u4EEC\u7684\u5F00\u53D1\u6D41\u7A0B\uFF0C\u914D\u7F6E\u4E5F\u5F00\u59CB\u590D\u6742</li><li>spring\u518D\u7B80\u5316\uFF1Aspringnboot\uFF0C\u5FAE\u670D\u52A1\u67B6\u6784\u4E5F\u5F00\u59CB\u6D41\u884C\u8D77\u6765</li></ul><h3 id="\u5B66\u4E60\u6982\u8FF0"><a class="header-anchor" href="#\u5B66\u4E60\u6982\u8FF0" aria-hidden="true">#</a> \u5B66\u4E60\u6982\u8FF0</h3><ol><li>springboot <ol><li>\u662F\u4EC0\u4E48</li><li>\u914D\u7F6E\u5982\u4F55\u7F16\u5199 yaml</li><li>\u81EA\u52A8\u88C5\u914D\u539F\u7406\uFF0C\u91CD\u8981\uFF0C\u8C08\u8D44</li><li>\u96C6\u6210web\u5F00\u53D1\uFF1A\u4E1A\u52A1\u7684\u6838\u5FC3</li><li>\u96C6\u6210\u6570\u636E\u5E93 Druid</li><li>\u5206\u5E03\u5F0F\u5F00\u53D1 Dubbo+zookeeper</li><li>swagger\u63A5\u53E3\u6587\u6863</li><li>\u4EFB\u52A1\u8C03\u5EA6</li><li>spring security</li></ol></li><li>linux</li><li>springcloud <ol><li>\u5FAE\u670D\u52A1</li><li>springcloud\u5165\u95E8</li><li>restful</li><li>eureka \u6CE8\u518C\u4E2D\u5FC3</li><li>\u8D1F\u8F7D\u5747\u8861 <ol><li>ribbon</li><li>feign</li></ol></li><li>hystrix \u670D\u52A1\u5BB9\u707E</li><li>zuul \u8DEF\u7531\u7F51\u5173</li><li>Springcloud config : git\u7ED3\u5408</li></ol></li></ol><h2 id="springboot\u6982\u8FF0"><a class="header-anchor" href="#springboot\u6982\u8FF0" aria-hidden="true">#</a> springboot\u6982\u8FF0</h2><h3 id="spring\u662F\u4EC0\u4E48"><a class="header-anchor" href="#spring\u662F\u4EC0\u4E48" aria-hidden="true">#</a> spring\u662F\u4EC0\u4E48</h3><p>\u4E3A\u4E86\u964D\u4F4E\u4F01\u4E1A\u7EA7\u5E94\u7528\u5F00\u53D1\u7684\u7B80\u6D01\u6027</p><ul><li>\u57FA\u4E8Epojo\u7684\u8F7B\u91CF\u7EA7\u548C\u6700\u5C0F\u4FB5\u5165\u6027\u7F16\u7A0B</li><li>\u901A\u8FC7ioc\u3001\u4F9D\u8D56\u6CE8\u5165\u548C\u9762\u5411\u89E3\u63A5\u53E3\u5B9E\u73B0\u677E\u8026\u5408</li><li>\u57FA\u4E8E\u5207\u9762aop\u548C\u60EF\u4F8B\u8FDB\u884C\u58F0\u660E\u5F0F\u7F16\u7A0B</li><li>\u901A\u8FC7\u5207\u9762\u548C\u6A21\u677F\u51CF\u5C11\u6837\u5F0F\u4EE3\u7801</li></ul><h3 id="springboot\u662F\u4EC0\u4E48"><a class="header-anchor" href="#springboot\u662F\u4EC0\u4E48" aria-hidden="true">#</a> springboot\u662F\u4EC0\u4E48</h3><p>\u5C31\u662F\u4E00\u4E2Ajavaweb\u7684\u5F00\u53D1\u6846\u67B6\uFF0C\u7EA6\u5B9A\u5927\u4E8E\u914D\u7F6E</p><p>\u6240\u6709\u7684\u6280\u672F\u6846\u67B6\u7684\u53D1\u5C55\u90FD\u662F\u9075\u5FAA\u4E00\u4E2A\u4E3B\u7EBF\u7684\u89C4\u5F8B\uFF0C\u4ECE\u4E00\u4E2A\u590D\u6742\u5E94\u7528\u573A\u666F\u884D\u751F\u51FA\u4E00\u79CD\u89C4\u8303\u6846\u67B6</p><p>springboot\u57FA\u4E8Espring\u5F00\u53D1\u7684\uFF0Cspringboot\u672C\u8EAB\u5E76\u4E0D\u63D0\u4F9Bspring\u6846\u67B6\u7684\u6838\u5FC3\u7279\u6027\u4EE5\u53CA\u6269\u5C55\u529F\u80FD\uFF0C\u53EA\u662F\u7528\u5FEB\u901F\u3001\u654F\u6377\u7684\u5F00\u53D1\u65B0\u4E00\u4EE3\u7684\u5F00\u53D1\u6846\u67B6\uFF0C\u540C\u65F6\u4ED6\u96C6\u6210\u4E86\u5927\u91CF\u7684\u7B2C\u4E09\u65B9\u914D\u7F6E\u5E93\uFF0C\u4F8B\u5982redis\u3001mongodb\u3001jpa\u3001rabbitMQ\u3001quratz\u7B49\u7B49\uFF0Cspringboot\u5E94\u7528\u4E2D\u8FD9\u4E9B\u7B2C\u4E09\u65B9\u5E93\u51E0\u4E4E\u53EF\u4EE5\u96F6\u914D\u7F6E\u7684\u5F00\u7BB1\u5373\u7528</p><p>springboot\u7684\u7279\u70B9\uFF1A</p><ul><li>\u4E3A\u6240\u6709spring\u5F00\u53D1\u8005\u66F4\u5FEB\u7684\u5165\u95E8</li><li>\u5F00\u7BB1\u5373\u7528\uFF0C\u63D0\u4F9B\u5404\u79CD\u9ED8\u8BA4\u7684\u914D\u7F6E\u6765\u7B80\u5316\u9879\u76EE\u914D\u7F6E</li><li>\u5185\u5D4C\u5F0F\u5BB9\u5668\u7B80\u5316web\u9879\u76EE</li><li>\u6CA1\u6709\u5197\u4F59\u7684\u4EE3\u7801\u751F\u6210\u548Cxml\u914D\u7F6E\u7684\u8981\u6C42</li></ul><h3 id="\u5FAE\u670D\u52A1"><a class="header-anchor" href="#\u5FAE\u670D\u52A1" aria-hidden="true">#</a> \u5FAE\u670D\u52A1</h3><h4 id="\u5FAE\u670D\u52A1\u662F\u4EC0\u4E48"><a class="header-anchor" href="#\u5FAE\u670D\u52A1\u662F\u4EC0\u4E48" aria-hidden="true">#</a> \u5FAE\u670D\u52A1\u662F\u4EC0\u4E48</h4><p>\u662F\u4E00\u79CD\u67B6\u6784\u98CE\u683C\uFF0C\u4ED6\u8981\u6C42\u6211\u4EEC\u5728\u5F00\u53D1\u4E00\u4E2A\u5E94\u7528\u7684\u624B\uFF0C\u8FD9\u4E2A\u5E94\u7528\u5FC5\u987B\u6784\u5EFA\u6210\u4E00\u7CFB\u5217\u5C0F\u670D\u52A1\u7684\u7EC4\u5408\uFF0C\u53EF\u4EE5\u901A\u8FC7http\uFF08\u53EA\u662F\u5176\u4E2D\u4E00\u79CD\uFF09\u7684\u65B9\u5F0F\u8FDB\u884C\u4E92\u901A\uFF0C\u662F\u548C\u5355\u4F53\u67B6\u6784\u5E94\u7528\u76F8\u533A\u522B\u7684\u5E94\u7528</p><p>\u4E1A\u52A1\uFF1Aservice\uFF1AuserService\u8F6C\u6210\u6A21\u5757userService\u6A21\u5757</p><p><img src="'+u+'" alt="image-20211207191117273"></p><ul><li>mvc\u4E09\u5C42\u67B6\u6784</li><li>mvvm\u67B6\u6784</li><li>\u5FAE\u670D\u52A1\u67B6\u6784</li></ul><h4 id="\u5355\u4F53\u5E94\u7528"><a class="header-anchor" href="#\u5355\u4F53\u5E94\u7528" aria-hidden="true">#</a> \u5355\u4F53\u5E94\u7528</h4><p>\u6211\u4EEC\u5C06\u4E00\u4E2A\u5E94\u7528\u4E2D\u7684\u6240\u6709\u7684\u5E94\u7528\u670D\u52A1\u90FD\u5C01\u88C5\u5728\u4E00\u4E2A\u5E94\u7528\u4E2D\uFF0C\u65E0\u8BBA\u662FERP\u3001CRM\u6216\u662F\u5176\u4ED6\u7684\u4EC0\u4E48\u7CFB\u7EDF\uFF0C\u90FD\u662F\u628A\u6570\u636E\u8BBF\u95EE\u3001web\u8BBF\u95EE\u7B49\u7B49\u5404\u4E2A\u529F\u80FD\u653E\u5230\u4E00\u4E2Awar\u5305\u4E0B</p><ul><li>\u8FD9\u6837\u505A\u7684\u597D\u5904\u662F\uFF1A\u6613\u4E8E\u5F00\u53D1\u548C\u6D4B\u8BD5\uFF0C\u65B9\u4FBF\u90E8\u7F72\uFF0C\u5F53\u9700\u8981\u6269\u5C55\u7684\u65F6\u5019\uFF0C\u53EA\u9700\u8981\u5C06war\u5305\u590D\u5236\u591A\u4EFD\uFF0C\u7136\u540E\u653E\u5230\u591A\u4E2A\u670D\u52A1\u5668\u4E0A\uFF0C\u518D\u505A\u4E2A\u8D1F\u8F7D\u5747\u8861\u5C31\u53EF\u4EE5\u4E86</li><li>\u7F3A\u70B9\uFF1A\u5BF9\u4FEE\u6539\u6765\u8BF4\u975E\u5E38\u56F0\u96BE</li></ul><h3 id="\u5FAE\u670D\u52A1\u67B6\u6784"><a class="header-anchor" href="#\u5FAE\u670D\u52A1\u67B6\u6784" aria-hidden="true">#</a> \u5FAE\u670D\u52A1\u67B6\u6784</h3><p>\u5C31\u662F\u6253\u7834\u4E4B\u524D\u7684all in one\u7684\u67B6\u6784\u65B9\u5F0F\uFF0C\u628A\u6BCF\u4E2A\u529F\u80FD\u5143\u7D20\u72EC\u7ACB\u5F00\u6765\uFF0C\u628A\u72EC\u7ACB\u51FA\u6765\u7684\u529F\u80FD\u5143\u7D20\u8FDB\u884C\u52A8\u6001\u7EC4\u5408\uFF0C\u9700\u8981\u7684\u529F\u80FD\u5143\u7D20\u624D\u62FF\u6765\u7EC4\u5408\uFF0C\u9700\u8981\u591A\u4E00\u4E9B\u65F6\u53EF\u4EE5\u6574\u5408\u591A\u4E2A\u529F\u80FD\u5143\u7D20\uFF0C\u6240\u4EE5\u5FAE\u670D\u52A1\u67B6\u6784\u662F\u5BF9\u529F\u80FD\u5143\u7D20\u8FDB\u884C\u590D\u5236\uFF0C\u800C\u6CA1\u6709\u5BF9\u6574\u4E2A\u5E94\u7528\u8FDB\u884C\u590D\u5236</p><p>\u8FD9\u6837\u505A\u7684\u597D\u5904\uFF1A</p><ul><li>\u8282\u7701\u4E86\u8C03\u7528\u8D44\u6E90</li><li>\u6BCF\u4E2A\u529F\u80FD\u5143\u7D20\u7684\u670D\u52A1\u90FD\u662F\u4E00\u4E2A\u53EF\u66FF\u6362\u7684\u3001\u53EF\u72EC\u7ACB\u5347\u7EA7\u7684\u8F6F\u4EF6\u4EE3\u7801</li></ul><p><img src="'+k+'" alt="image-20211207191843442"></p><h4 id="\u5982\u4F55\u6784\u5EFA\u5FAE\u670D\u52A1"><a class="header-anchor" href="#\u5982\u4F55\u6784\u5EFA\u5FAE\u670D\u52A1" aria-hidden="true">#</a> \u5982\u4F55\u6784\u5EFA\u5FAE\u670D\u52A1</h4><p>spring\u4E3A\u6211\u4EEC\u5E26\u6765\u4E86\u6784\u5EFA\u5927\u578B\u5206\u5E03\u5F0F\u5FAE\u670D\u52A1\u7684\u5168\u5957\u3001\u5168\u7A0B\u7684\u4EA7\u54C1</p><ul><li>\u6784\u5EFA\u4E00\u4E2A\u4E2A\u529F\u80FD\u72EC\u7ACB\u7684\u5FAE\u670D\u52A1\u5E94\u7528\u5355\u5143\uFF0C\u53EF\u4EE5\u4F7F\u7528springboot\uFF0C\u5E2E\u52A9\u6211\u4EEC\u6784\u5EFA\u4E00\u4E2A\u5E94\u7528</li><li>\u5927\u578B\u5206\u5E03\u5F0F\u7F51\u7EDC\u670D\u52A1\u7684\u8C03\u7528\uFF0C\u8FD9\u90E8\u5206\u7531spring cloud\u6765\u5B8C\u6210\uFF0C\u5B9E\u73B0\u5206\u5E03\u5F0F</li><li>\u5728\u5206\u5E03\u5F0F\u4E2D\u95F4\uFF0C\u8FDB\u884C\u6D41\u5F0F\u6570\u636E\u8BA1\u7B97\u3001\u6279\u5904\u7406\u3001\u6211\u4EEC\u6709spring cloud data flow</li><li>spring\u4E3A\u6211\u4EEC\u63D0\u4F9B\u4E86\u6574\u4E2A\u4ECE\u5F00\u59CB\u6784\u5EFA\u5E94\u7528\u5230\u5927\u578B\u5206\u5E03\u5F0F\u5E94\u7528\u7684\u5168\u6D41\u7A0B\u65B9\u6848</li></ul><p><img src="https://spring.io/images/cloud-diagram-dark-b902fd07e60945a9a8930ca01f86bdf3.svg" alt="Spring Cloud diagram"></p><h2 id="\u7B2C\u4E00\u4E2Aspringboot\u7A0B\u5E8F"><a class="header-anchor" href="#\u7B2C\u4E00\u4E2Aspringboot\u7A0B\u5E8F" aria-hidden="true">#</a> \u7B2C\u4E00\u4E2Aspringboot\u7A0B\u5E8F</h2><p>\u73AF\u5883\uFF1A</p><ul><li>jdk8</li><li>maven 3.8</li><li>springboot \u6700\u65B0\u7248</li><li>idea</li></ul><h3 id="\u521B\u5EFA\u65B9\u5F0F"><a class="header-anchor" href="#\u521B\u5EFA\u65B9\u5F0F" aria-hidden="true">#</a> \u521B\u5EFA\u65B9\u5F0F</h3><ol><li>\u5B98\u65B9\u63D0\u4F9B\u4E86\u5FEB\u901F\u751F\u6210\u7684\u7F51\u7AD9\uFF0Cidea\u96C6\u6210\u4E86\u8FD9\u4E2A\u7F51\u7AD9\uFF1Ahttps://start.spring.io/</li></ol><p><img src="'+r+'" alt="image-20211207194735553"></p><ol start="2"><li>idea\u65B9\u5F0F\u521B\u5EFAspringboot\u9879\u76EE</li></ol><p><img src="'+d+'" alt="image-20211207195247209"></p><p>\u521B\u5EFAHelloController\u63A7\u5236\u7C7B\uFF0C\u5E76\u521B\u5EFAhello action\uFF0C\u542F\u52A8\u8BBF\u95EE\uFF0C\u8FD4\u56DEhello world</p><p><img src="'+v+`" alt="image-20211207200302654"></p><p>pom.xml\u6587\u4EF6\u7684\u4E00\u4E9B\u4FE1\u606F\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.6.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- lookup parent from repository --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>springboot-demo-01<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.0.1-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>springboot-demo-01<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>Demo project for Spring Boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--\u6240\u6709\u7684springboot\u7684\u542F\u52A8\u5668--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!--\u6D4B\u8BD5\u65F6\u4F7F\u7528--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--web\u4F9D\u8D56\uFF1Atomcat dispatcherServlet web.xml\u914D\u7F6E\u7B49\u7EE7\u627F\u800C\u6765--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--maven\u6253\u5305\u7B49\u63D2\u4EF6--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E3B\u8981\u7531\u56DB\u4E2A\u90E8\u5206\uFF1A</p><ul><li>\u9879\u76EE\u5143\u6570\u636E\u4FE1\u606F\uFF1A\u521B\u5EFA\u7684\u65F6\u5019\u8F93\u5165\u7684project metadata\u90E8\u5206\uFF0C\u4E5F\u5C31\u662Fmaven\u9879\u76EE\u7684\u57FA\u672C\u5143\u7D20\uFF0C\u5305\u62EC\uFF1AgroupId\u3001artifactId\u3001version\u3001name\u3001description\u7B49</li><li>parent\uFF1A\u7EE7\u627F<code>spring-boot-starter-parent</code>\u7684\u4F9D\u8D56\u7BA1\u7406\uFF0C\u63A7\u5236\u7248\u672C\u4E0E\u6253\u5305\u7B49\u5185\u5BB9</li><li>dependencies\uFF1A\u9879\u76EE\u5177\u4F53\u4F9D\u8D56\uFF0C <ul><li>\u8FD9\u91CC\u5305\u542B\u4E86<code>spring-boot-starter-web</code>\u7528\u4E8E\u5B9E\u73B0http\u63A5\u53E3\uFF08\u8BE5\u4F9D\u8D56\u4E2D\u5305\u542B\u4E86spring mvc\uFF09\uFF0C\u5B98\u7F51\u5BF9\u5B83\u7684\u63CF\u8FF0\u662F\uFF1A\u4F7F\u7528spring mvc\u6784\u5EFAweb\uFF08\u5305\u62ECrestful\uFF09\u5E94\u7528\u7A0B\u5E8F\u7684\u5165\u95E8\u8005\uFF0C\u4F7F\u7528tomcat\u4F5C\u4E3A\u9ED8\u8BA4\u7684\u5D4C\u5165\u5F0F\u5BB9\u5668\uFF0C</li><li><code>spring-boot-starter-test</code>\u7528\u4E8E\u7F16\u5199\u5355\u5143\u6D4B\u8BD5\u7684\u4F9D\u8D56\u5305</li></ul></li><li>build\uFF1A\u6784\u5EFA\u914D\u7F6E\u90E8\u5206\uFF0C\u9ED8\u8BA4\u4F7F\u7528\u4E86<code>spring-boot-maven-plugin</code>\uFF0C\u914D\u5408<code>spring-boot-starter-parent</code>\u5C31\u53EF\u4EE5\u628Aspring boot\u5E94\u7528\u6253\u5305\u6210jar\u6765\u76F4\u63A5\u8FD0\u884C</li></ul><p><img src="`+m+`" alt="image-20211207201616965"></p><h2 id="\u81EA\u52A8\u88C5\u914D\u539F\u7406\u521D\u63A2"><a class="header-anchor" href="#\u81EA\u52A8\u88C5\u914D\u539F\u7406\u521D\u63A2" aria-hidden="true">#</a> \u81EA\u52A8\u88C5\u914D\u539F\u7406\u521D\u63A2</h2><h3 id="\u57FA\u672C\u6D41\u7A0B"><a class="header-anchor" href="#\u57FA\u672C\u6D41\u7A0B" aria-hidden="true">#</a> \u57FA\u672C\u6D41\u7A0B</h3><h4 id="pom-xml"><a class="header-anchor" href="#pom-xml" aria-hidden="true">#</a> pom.xml</h4><p>\u5B58\u653E\u4E86\u7EE7\u627F\u4E86\u7236\u9879\u76EE\u7684\u4F9D\u8D56</p><ul><li><code>spring-boot-dependencies</code>\u6838\u5FC3\u4F9D\u8D56\u5728\u7236\u5DE5\u7A0B\u4E2D</li><li>\u6211\u4EEC\u5728\u5199\u6216\u8005\u5F15\u5165\u4E00\u4E9Bspringboot\u4F9D\u8D56\u7684\u65F6\u5019\uFF0C\u4E0D\u9700\u8981\u6307\u5B9A\u7248\u672C\uFF0C\u56E0\u4E3A\u8FD9\u91CC\u5DF2\u7ECF\u5728\u5DE5\u7A0B\u4E2D\u5B9A\u4E49\u4E86</li></ul><h4 id="\u542F\u52A8\u5668"><a class="header-anchor" href="#\u542F\u52A8\u5668" aria-hidden="true">#</a> \u542F\u52A8\u5668</h4><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u6240\u6709\u7684springboot\u7684\u542F\u52A8\u5668--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--\u6D4B\u8BD5\u65F6\u4F7F\u7528--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--web\u4F9D\u8D56\uFF1Atomcat dispatcherServlet web.xml\u914D\u7F6E\u7B49\u7EE7\u627F\u800C\u6765--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u542F\u52A8\u5668\uFF0C\u8BF4\u767D\u4E86\u5C31\u662F\u4F60\u8981\u5728\u4EC0\u4E48\u573A\u666F\u4E0B\u4F7F\u7528springboot\uFF0C\u5F53\u6211\u4EEC\u5F15\u5165\u8FD9\u4E9B\u4F9D\u8D56\u4E4B\u540E\uFF0Cspringboot\u5728\u8FDB\u884C\u626B\u5305\u7684\u65F6\u5019\u626B\u63CF\u51FA\u8FD9\u4E9B\u4F9D\u8D56\uFF0C\u90A3\u4E48\u5C31\u4F1A\u628A\u8FD9\u4E9B\u573A\u666F\u4E2D\u7684\u4E00\u4E9B\u9ED8\u8BA4\u914D\u7F6E\u548C\u4E00\u4E9Bbean\u6CE8\u5165\u5230spring\u5BB9\u5668\u4E2D\u7ED9\u6211\u4EEC\u4F7F\u7528 <ul><li>\u6BD4\u5982\uFF1A<code>spring-boot-starter-web</code>\u5B83\u5C31\u4F1A\u5E2E\u6211\u4EEC\u5BFC\u5165web\u73AF\u5883\u6240\u6709\u7684\u4F9D\u8D56</li><li>springboot\u4F1A\u5C06\u6240\u6709\u7684\u529F\u80FD\u573A\u666F\u53D8\u6210\u4E00\u4E2A\u4E2A\u7684\u542F\u52A8\u5668</li></ul></li><li>\u6211\u4EEC\u8981\u4F7F\u7528\u4EC0\u4E48\u529F\u80FD\uFF0C\u5C31\u53EA\u9700\u8981\u627E\u5230\u5BF9\u5E94\u7684\u542F\u52A8\u5668\u5C31\u597D\u4E86</li></ul><h4 id="\u4E3B\u7A0B\u5E8F"><a class="header-anchor" href="#\u4E3B\u7A0B\u5E8F" aria-hidden="true">#</a> \u4E3B\u7A0B\u5E8F</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * @SpringBootApplication \u6807\u6CE8\u8FD9\u4E2A\u7C7B\u662F\u4E00\u4E2Aspringboot\u5E94\u7528
 */</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringbootDemo01Application</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token doc-comment comment">/**
         * \u5C06springboot\u5E94\u7528\u542F\u52A8
         */</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringbootDemo01Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u6CE8\u89E3"><a class="header-anchor" href="#\u6CE8\u89E3" aria-hidden="true">#</a> \u6CE8\u89E3</h5><p><code>@SpringBootApplication</code>\u4E2D\u7EE7\u627F\u4E86\u4E24\u4E2A\u6CE8\u89E3\uFF0C\u4E24\u4E2A\u6CE8\u89E3\u7684\u4E0B\u5206\u522B\u6709\u5404\u81EA\u7684\u4F7F\u7528\u65B9\u5F0F</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootConfiguration</span> <span class="token comment">// springboot\u914D\u7F6E</span>
	<span class="token operator">-</span> <span class="token annotation punctuation">@Configuration</span> <span class="token comment">// spring\u914D\u7F6E\u7C7B</span>
    <span class="token operator">-</span> <span class="token annotation punctuation">@Component</span> <span class="token comment">// \u8BF4\u660E\u8FD9\u4E5F\u662F\u4E00\u4E2Aspring\u7684\u7EC4\u4EF6</span>
<span class="token annotation punctuation">@EnableAutoConfiguration</span> <span class="token comment">// \u81EA\u52A8\u914D\u7F6E</span>
    <span class="token operator">-</span> <span class="token annotation punctuation">@AutoConfigurationPackage</span> <span class="token comment">// \u81EA\u52A8\u914D\u7F6E\u5305</span>
    	<span class="token operator">-</span> <span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">AutoConfigurationPackages<span class="token punctuation">.</span>Registrar</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token comment">// \u5BFC\u5165\u9009\u62E9\u5668</span>
    <span class="token operator">-</span> <span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">AutoConfigurationImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token comment">// \u83B7\u53D6\u6211\u4EEC\u9700\u8981\u5728\u54EA\u4E9B\u573A\u666F\u4F7F\u7528\uFF0C\u4E5F\u5C31\u662F\u6211\u4EEC\u5728pom\u6587\u4EF6\u4E2D\u5BFC\u5165\u4E86\u90A3\u4E9B\u4F9D\u8D56\u548C\u4E00\u4E9B\u4E0A\u4E0B\u6587\u73AF\u5883</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>AutoConfigurationPackages.Registrar</code>\u901A\u8FC7\u7EE7\u627F\u6211\u4EEC\u53EF\u4EE5\u770B\u5230</p><ul><li><code>ImportBeanDefinitionRegistrar</code>\u4E3B\u8981\u662FBean\u5B9A\u4E49\u6CE8\u518C\u5668</li><li><code>DeterminableImports</code>\u662F\u4FDD\u8BC1\u6CE8\u518C\u5230Bean\u5B9A\u4E49\u7684\u7C7B\u662F\u53EF\u4EE5\u6CE8\u5165\u5230spring\u5BB9\u5668\u7684\u5BF9\u8C61</li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * ImportBeanDefinitionRegistrar
**/</span>
<span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Registrar</span> <span class="token keyword">implements</span> <span class="token class-name">ImportBeanDefinitionRegistrar</span><span class="token punctuation">,</span> <span class="token class-name">DeterminableImports</span> <span class="token punctuation">{</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registerBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> metadata<span class="token punctuation">,</span> <span class="token class-name">BeanDefinitionRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">register</span><span class="token punctuation">(</span>registry<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">PackageImports</span><span class="token punctuation">(</span>metadata<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPackageNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">determineImports</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> metadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singleton</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PackageImports</span><span class="token punctuation">(</span>metadata<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728springboot\u542F\u52A8\u7684\u65F6\u5019\uFF0C\u4F1A\u628A\u6240\u6709\u7684\u573A\u666F\u7684\u6CE8\u518C\u5668\u548C\u914D\u7F6E\u4FE1\u606F\u90FD\u52A0\u8F7D\u8FDB\u6765\uFF0C\u7136\u540E\u5728<code>AutoConfigurationImportSelector</code>\u4E2D\u6839\u636E\u6211\u4EEC\u5728pom\u6587\u4EF6\u4E2D\u5F15\u5165\u4E86\u90A3\u4E9B\u4F9D\u8D56\u5728\u786E\u5B9A\u8981\u628A\u54EA\u4E9Bbean\u6CE8\u5165\u5230spring\u5BB9\u5668\u548C\u52A0\u8F7D\u54EA\u4E9B\u914D\u7F6E\u4FE1\u606F\u5230\u6211\u4EEC\u7684\u573A\u666F\u73AF\u5883\u4E2D</p><blockquote><p>\u8981\u4E0D\u7136\u4F60\u4EE5\u4E3A\u771F\u7684\u4E0D\u9700\u8981\u914D\u7F6E\uFF0C&quot;\u7EA6\u5B9A\u5927\u4E8E\u914D\u7F6E&quot;\u90FD\u662F\u522B\u4EBA\u5E2E\u4F60\u628A\u914D\u7F6E\u5148\u5B9A\u4E49\u597D\u4E86</p></blockquote><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
	 * Return the <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">AutoConfigurationEntry</span></span><span class="token punctuation">}</span> based on the <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">AnnotationMetadata</span></span><span class="token punctuation">}</span>
	 * of the importing <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">Configuration</span></span> @Configuration<span class="token punctuation">}</span> class.
	 * <span class="token keyword">@param</span> <span class="token parameter">annotationMetadata</span> the annotation metadata of the configuration class
	 * <span class="token keyword">@return</span> the auto-configurations that should be imported
	 * \u83B7\u53D6\u5019\u9009\u7684\u914D\u7F6E\uFF0C
	 */</span>
<span class="token keyword">protected</span> <span class="token class-name">AutoConfigurationEntry</span> <span class="token function">getAutoConfigurationEntry</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> annotationMetadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isEnabled</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> EMPTY_ENTRY<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token class-name">AnnotationAttributes</span> attributes <span class="token operator">=</span> <span class="token function">getAttributes</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> configurations <span class="token operator">=</span> <span class="token function">getCandidateConfigurations</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">,</span> attributes<span class="token punctuation">)</span><span class="token punctuation">;</span>
  configurations <span class="token operator">=</span> <span class="token function">removeDuplicates</span><span class="token punctuation">(</span>configurations<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> exclusions <span class="token operator">=</span> <span class="token function">getExclusions</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">,</span> attributes<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">checkExcludedClasses</span><span class="token punctuation">(</span>configurations<span class="token punctuation">,</span> exclusions<span class="token punctuation">)</span><span class="token punctuation">;</span>
  configurations<span class="token punctuation">.</span><span class="token function">removeAll</span><span class="token punctuation">(</span>exclusions<span class="token punctuation">)</span><span class="token punctuation">;</span>
  configurations <span class="token operator">=</span> <span class="token function">getConfigurationClassFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>configurations<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">fireAutoConfigurationImportEvents</span><span class="token punctuation">(</span>configurations<span class="token punctuation">,</span> exclusions<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AutoConfigurationEntry</span><span class="token punctuation">(</span>configurations<span class="token punctuation">,</span> exclusions<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u83B7\u53D6\u7684\u8FD9\u4E9B\u573A\u666F\u5728<code>org/springframework/boot/spring-boot-autoconfigure/2.6.1/spring-boot-autoconfigure-2.6.1.jar!/META-INF/spring.factories</code>\u4E2D\uFF0C\u4E5F\u5C31\u662F\u5728maven\u4F9D\u8D56\u4E2D</p><p><img src="`+g+`" alt="image-20211207220940510"></p><p>\u5176\u4E2D\uFF0C\u53EF\u4EE5\u770B\u5230\u6709\u5F88\u591A\u7684\u573A\u666F\uFF1A</p><p>\u5F53\u524D\u6B63\u5728\u4F7F\u7528\u7684\u573A\u666F<code>org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration</code></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnWebApplication</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">Type</span><span class="token punctuation">.</span>SERVLET<span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">Servlet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">DispatcherServlet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">WebMvcConfigurer</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token class-name">WebMvcConfigurationSupport</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@AutoConfigureOrder</span><span class="token punctuation">(</span><span class="token class-name">Ordered</span><span class="token punctuation">.</span>HIGHEST_PRECEDENCE <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@AutoConfigureAfter</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">DispatcherServletAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">TaskExecutionAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
		<span class="token class-name">ValidationAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebMvcAutoConfiguration</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>@ConditionalOnClass({ Servlet.class, DispatcherServlet.class, WebMvcConfigurer.class })</code>\u53EA\u6709\u5F53\u524D\u9879\u76EE\u4E2D\u5B58\u5728\u8FD9\u4E9B\u7C7B\u7684\u65F6\u5019\uFF08\u4E5F\u5C31\u662F\u6211\u4EEC\u5F15\u5165<code>spring-boot-starter-web</code>\uFF09\u7684\u65F6\u5019\uFF0C\u624D\u4F1A\u52A0\u8F7Dweb\u573A\u666F</li><li>\u6BCF\u4E00\u4E2A\u573A\u666F\u4E0B\u90FD\u6709\u4E00\u4E2A\u52A0\u8F7D\u5668\u548C\u4E00\u4E2A\u914D\u7F6E\u6587\u4EF6</li></ul><h6 id="\u7ED3\u8BBA"><a class="header-anchor" href="#\u7ED3\u8BBA" aria-hidden="true">#</a> \u7ED3\u8BBA</h6><p>springboot\u6240\u6709\u81EA\u52A8\u914D\u7F6E\u90FD\u662F\u5728\u542F\u52A8\u7684\u65F6\u5019\u626B\u63CF\u5E76\u52A0\u8F7D\uFF0C<code>spring.factories</code>\u6240\u6709\u7684\u81EA\u52A8\u914D\u7F6E\u7C7B\u90FD\u5728\u8FD9\u91CC\u9762\uFF0C\u4F46\u662F\u4E0D\u4E00\u5B9A\u751F\u6548\uFF0C\u8981\u5224\u65AD\u6761\u4EF6\u6210\u7ACB\uFF0C\u53EA\u8981\u5BFC\u5165\u4E86\u5BF9\u5E94\u7684starter\uFF0C\u5C31\u6709\u5BF9\u5E94\u7684\u542F\u52A8\u5668\u4E86\uFF0C\u6709\u4E86\u542F\u52A8\u5668\uFF0C\u6211\u4EEC\u81EA\u52A8\u88C5\u914D\u5C31\u4F1A\u751F\u6548\uFF0C\u7136\u540E\u6DFB\u52A0\u5230spring\u5BB9\u5668\u4E2D</p><ul><li>springboot\u5728\u542F\u52A8\u7684\u65F6\u5019\uFF0C\u4ECE\u7C7B\u8DEF\u5F84\u4E0B/META-INF/spring.facotories\u83B7\u53D6\u6307\u5B9A\u7684\u503C</li><li>\u5C06\u8FD9\u4E9B\u81EA\u52A8\u914D\u7F6E\u7684\u7C7B\u5BFC\u5165\u5BB9\u5668\uFF0C\u81EA\u52A8\u914D\u7F6E\u5C31\u4F1A\u751F\u6548\uFF0C\u5E2E\u6211\u4EEC\u8FDB\u884C\u81EA\u52A8\u914D\u7F6E</li><li>\u4EE5\u524D\u6211\u4EEC\u9700\u8981\u81EA\u52A8\u914D\u7F6E\u7684\u4E1C\u897F\uFF0C\u73B0\u5728springboot\u6211\u4EEC\u505A</li><li>\u6574\u5408javaee\uFF0C\u89E3\u51B3\u65B9\u6848\u548C\u81EA\u52A8\u914D\u7F6E\u7684\u4E1C\u897F\u90FD\u5728spring-boot-autoconfiguration-xxxx.jar\u8FD9\u4E2A\u5305\u4E0B</li><li>\u5B83\u4F1A\u628A\u6240\u6709\u9700\u8981\u5BFC\u5165\u7684\u7EC4\u4EF6\uFF0C\u4EE5\u7C7B\u540D\u7684\u65B9\u5F0F\u8FD4\u56DE\uFF0C\u8FD9\u4E9B\u7EC4\u4EF6\u5C31\u4F1A\u88AB\u6DFB\u52A0\u5230spring\u5BB9\u5668\u4E2D</li><li>spring.facotories\u4E2D\u5B58\u5728xxxAutoConfiguration\u7684\u6587\u4EF6\uFF0C\u5C31\u662F\u8FD9\u4E9B\u7C7B\u7ED9spring\u5BB9\u5668\u4E2D\u5BFC\u5165\u8FD9\u4E2A\u573A\u666F\u9700\u8981\u7684\u7EC4\u4EF6\u5E76\u81EA\u52A8\u914D\u7F6E<code>@Configuration</code></li></ul><h5 id="\u542F\u52A8\u5668\u8FD0\u884C\u6D41\u7A0B"><a class="header-anchor" href="#\u542F\u52A8\u5668\u8FD0\u884C\u6D41\u7A0B" aria-hidden="true">#</a> \u542F\u52A8\u5668\u8FD0\u884C\u6D41\u7A0B</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringbootDemo01Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8FD9\u4E2A\u7C7B\u4E3B\u8981\u505A\u4E86\u4EE5\u4E0B\u56DB\u4EF6\u4E8B\u60C5</p><ul><li>\u63A8\u65AD\u5E94\u7528\u7684\u7C7B\u578B\u662F\u666E\u901A\u7684\u9879\u76EE\u8FD8\u662Fweb\u9879\u76EE</li><li>\u67E5\u627E\u5E76\u52A0\u8F7D\u6240\u6709\u53EF\u7528\u521D\u59CB\u5316\u5668\uFF0C\u8BBE\u7F6E\u5230initializers\u5C5E\u6027\u4E2D</li><li>\u627E\u51FA\u6240\u6709\u7684\u5E94\u7528\u7A0B\u5E8F\u76D1\u542C\u5668\uFF0C\u8BBE\u7F6E\u5230listeners\u5C5E\u6027\u4E2D</li><li>\u63A8\u65AD\u5E76\u8BBE\u7F6Emain\u65B9\u6CD5\u7684\u5B9A\u4E49\u7C7B\uFF0C\u627E\u5230\u8FD0\u884C\u7684\u4E3B\u7C7B</li></ul><p><img src="`+b+`" alt="img"></p><h2 id="\u914D\u7F6E\u6587\u4EF6"><a class="header-anchor" href="#\u914D\u7F6E\u6587\u4EF6" aria-hidden="true">#</a> \u914D\u7F6E\u6587\u4EF6</h2><h3 id="yaml\u8BED\u6CD5"><a class="header-anchor" href="#yaml\u8BED\u6CD5" aria-hidden="true">#</a> yaml\u8BED\u6CD5</h3><h4 id="\u57FA\u7840"><a class="header-anchor" href="#\u57FA\u7840" aria-hidden="true">#</a> \u57FA\u7840</h4><p>springboot\u53EF\u4EE5\u901A\u8FC7<code>.properies</code>\u6216\u8005<code>.yaml</code>\u6587\u4EF6\u6765\u914D\u7F6E\uFF0Cspring\u5B98\u65B9\u63A8\u8350<code>.yaml</code>\u65B9\u5F0F\uFF0Cspringboot\u4F7F\u7528\u4E00\u4E2A\u5168\u5C40\u7684\u914D\u7F6E\u6587\u4EF6\uFF0C\u914D\u7F6E\u6587\u4EF6\u540D\u79F0\u662F\u56FA\u5B9A\u7684</p><ul><li>application.properties <ul><li>\u8BED\u6CD5\u7ED3\u6784\uFF1Akey=value</li></ul></li><li>application.yaml <ul><li>\u8BED\u6CD5\u7ED3\u6784\uFF1Akey: value</li></ul></li></ul><p>\u914D\u7F6E\u6587\u4EF6\u7684\u4F5C\u7528\uFF1A<strong>\u4FEE\u6539springboot\u81EA\u52A8\u914D\u7F6E\u7684\u9ED8\u8BA4\u503C\uFF0C\u56E0\u4E3Aspringboot\u5728\u5E95\u5C42\u90FD\u7ED9\u6211\u4EEC\u81EA\u52A8\u914D\u7F6E\u597D\u4E86</strong></p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment">## key: value</span>
<span class="token comment">## \u666E\u901A\u7684key-value</span>
<span class="token key atrule">name</span><span class="token punctuation">:</span> zhangsan

<span class="token comment">## \u5BF9\u8C61</span>
<span class="token key atrule">student1</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> zhangsan
  <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">18</span>
<span class="token comment">## \u5BF9\u8C61\u884C\u5185\u5199\u6CD5</span>
<span class="token key atrule">student2</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">name</span><span class="token punctuation">:</span> zhangsan<span class="token punctuation">,</span><span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">}</span>

<span class="token comment">## \u6570\u7EC4</span>
<span class="token key atrule">students1</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> zhangsan
  <span class="token punctuation">-</span> lisi
  <span class="token punctuation">-</span> wangwu
<span class="token comment">## \u884C\u5185\u5199\u6CD5</span>
<span class="token key atrule">students2</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>zhangsan<span class="token punctuation">,</span>lisi<span class="token punctuation">,</span>wangwu<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u5BF9\u7A7A\u683C\u7684\u8981\u6C42\u5341\u5206\u9AD8</strong></p><h4 id="\u6CE8\u5165\u5230\u5B9E\u4F53\u7C7B"><a class="header-anchor" href="#\u6CE8\u5165\u5230\u5B9E\u4F53\u7C7B" aria-hidden="true">#</a> \u6CE8\u5165\u5230\u5B9E\u4F53\u7C7B</h4><ol><li>\u7F16\u5199yaml\u6587\u4EF6\u5C5E\u6027</li></ol><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment">## city</span>
<span class="token key atrule">city</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> \u5E7F\u5DDE
  <span class="token key atrule">province</span><span class="token punctuation">:</span> \u5E7F\u4E1C
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u7F16\u5199\u5B9E\u4F53\u7C7B</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;city&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">City</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> province<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u6D4B\u8BD5\u4EE3\u7801</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">SpringbootDemo01ApplicationTests</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">User</span> city<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>city<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u8FD0\u884C\u7ED3\u679C</li></ol><p><img src="`+h+'" alt="image-20211208003828839"></p><ol start="5"><li>\u5982\u679C\u51FA\u73B0\u8FD9\u4E2A\u63D0\u793A\uFF0C\u53EF\u4EE5\u914D\u7F6E\u7136\u540E\u4EA7\u751F\u63D0\u793A\uFF0C\u4E5F\u53EF\u4EE5\u4E0D\u914D\u7F6E\uFF0C\u4E0D\u5F71\u54CD\u7A0B\u5E8F\u7684\u8FD0\u884C</li></ol><p><img src="'+f+`" alt="image-20211208003701192"></p><p>\u89E3\u51B3\u529E\u6CD5\uFF1A\u6DFB\u52A0\u4F9D\u8D56</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--Configuration Annotation Proessor not found--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-configuration-processor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li>\u5982\u679C\u4E0D\u4F7F\u7528<code>@ConfigurationProperties</code>\uFF0C\u4F7F\u7528<code>@Value</code>\u6CE8\u5165map\u3001list\u3001\u5BF9\u8C61\u4F1A\u5BFC\u81F4\u6CE8\u5165\u5931\u8D25</li></ol><p>\u867D\u7136\u7F51\u4E0A\u90FD\u8BF4\uFF0C\u8FD9\u6837\u53EF\u4EE5\u6CE8\u5165\uFF0C\u6211\u4EB2\u8EAB\u5B9E\u8DF5\u8FC7\u4E86\uFF0C\u80AF\u5B9A\u662F\u4E0D\u80FD\u7684\u3002\u4F1A\u629B\u51FA <code>Caused by: java.lang.IllegalArgumentException: Could not resolve placeholder &#39;user.map&#39; in value &quot;\${user.map}&quot;</code>\u5F02\u5E38\u3002\u8981\u60F3\u6CE8\u5165\u5FC5\u987B\u8981\u4F7F\u7528<code>@ConfigurationProperties</code>\uFF0C\u5373\u4F7F\u662F\u4F7F\u7528el\u8868\u8FBE\u5F0F</p><p><img src="`+y+'" alt="image-20211208010813441"></p><h4 id="\u603B\u7ED3"><a class="header-anchor" href="#\u603B\u7ED3" aria-hidden="true">#</a> \u603B\u7ED3</h4><p>yaml\u4E0Eproperties\u6BD4\u8F83</p><p><img src="'+w+`" alt="image-20211208011201158"></p><ul><li>cp\u53EA\u9700\u8981\u5199\u4E00\u6B21\u5373\u53EF\uFF0Cvalue\u6CE8\u89E3\u5219\u9700\u8981\u6BCF\u4E2A\u5B57\u6BB5\u90FD\u6DFB\u52A0</li><li>\u677E\u6563\u7ED1\u5B9A\uFF1A<code>val-ue</code>\u9A7C\u5CF0\u7ED1\u5B9A\u5230<code>valVe</code></li><li>JSR303\u6570\u636E\u6821\u9A8C\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5728\u5B57\u6BB5\u589E\u52A0\u4E00\u5C42\u8FC7\u6EE4\u5668\u9A8C\u8BC1\uFF0C\u53EF\u4EE5\u4FDD\u8BC1\u6570\u636E\u7684\u5408\u6CD5\u6027</li><li>\u590D\u6742\u7C7B\u578B\u7684\u5C01\u88C5\uFF0Cyaml\u4E2D\u53EF\u4EE5\u5C01\u88C5\u5BF9\u8C61\uFF0C\u4F7F\u7528<code>@Value</code>\u5C31\u4E0D\u652F\u6301</li></ul><p><strong>\u7ED3\u8BBA</strong></p><ul><li>\u914D\u7F6Eyaml\u548C\u914D\u7F6Eproperties\u90FD\u53EF\u4EE5\u83B7\u53D6\u5F97\u5230\u503C\uFF0C\u63A8\u8350yaml</li><li>\u5982\u679C\u6211\u4EEC\u5728\u67D0\u4E2A\u4E1A\u52A1\u4E2D\uFF0C\u53EA\u9700\u8981\u83B7\u53D6\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684\u67D0\u4E2A\u503C\uFF0C\u53EF\u4EE5\u4F7F\u7528@Value</li><li>\u5982\u679C\u8BF4\uFF0C\u6211\u4EEC\u4E13\u95E8\u7F16\u5199\u4E86\u4E00\u4E2AjavaBean\u6765\u548C\u914D\u7F6E\u6587\u4EF6\u8FDB\u884C\u6620\u5C04\uFF0C\u5C31\u76F4\u63A5\u4F7F\u7528<code>@ConfigurationProperties(prefix = &quot;city&quot;)</code></li></ul><h3 id="\u591A\u73AF\u5883\u914D\u7F6E"><a class="header-anchor" href="#\u591A\u73AF\u5883\u914D\u7F6E" aria-hidden="true">#</a> \u591A\u73AF\u5883\u914D\u7F6E</h3><p>\u5B9E\u73B0\u914D\u7F6E\u5207\u6362\u6709\u4E09\u79CD\uFF1A</p><ul><li>\u4E00\u662F\u540C\u4E00\u4E2A\u914D\u7F6E\u6587\u4EF6\u91CC\u9762\u5199\u4E0D\u540C\u7684\u914D\u7F6E\uFF0C\u7136\u540E\u5728\u4E3B\u914D\u7F6E\u4E2D\u9009\u62E9\u52A0\u8F7D\u54EA\u4E00\u79CD\u914D\u7F6E</li><li>\u4E8C\u662F\u76F4\u63A5\u5199\u591A\u4E2A\u914D\u7F6E\u6587\u4EF6\uFF0C\u5728\u4E3B\u914D\u7F6E\u6587\u4EF6\u91CC\u9762\u9009\u62E9\u914D\u7F6E\u54EA\u4E00\u79CD\u914D\u7F6E</li><li>\u4E09\u662F\u9879\u76EE\u4E0A\u7EBF\u4E4B\u540E\uFF0C\u76F4\u63A5\u901A\u8FC7\u547D\u4EE4\u7684\u65B9\u5F0F\uFF0C\u5C06\u914D\u7F6E\u4FEE\u6539\u4E3A\u6211\u4EEC\u9700\u8981\u7684\u914D\u7F6E\u7C7B\u578B</li></ul><h4 id="\u65B9\u5F0F\u4E00"><a class="header-anchor" href="#\u65B9\u5F0F\u4E00" aria-hidden="true">#</a> \u65B9\u5F0F\u4E00</h4><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment">## \u4E3B\u914D\u7F6E</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">profiles</span><span class="token punctuation">:</span>
    <span class="token key atrule">active</span><span class="token punctuation">:</span> dev <span class="token comment">## \u9009\u62E9\u5F00\u53D1\u73AF\u5883\u7684\u914D\u7F6E</span>
<span class="token punctuation">---</span>
<span class="token comment">## \u9009\u914D\u4E00</span>
<span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">2222</span> <span class="token comment">## \u914D\u7F6E\u7684\u6D4B\u8BD5\u73AF\u5883\u7684\u7AEF\u53E3</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">profiles</span><span class="token punctuation">:</span> test <span class="token comment">## \u6D4B\u8BD5\u73AF\u5883\u914D\u7F6E\u7684\u540D\u79F0</span>

<span class="token punctuation">---</span>
<span class="token comment">## \u9009\u914D\u4E8C</span>
<span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">1111</span> <span class="token comment">## \u914D\u7F6E\u7684\u5F00\u53D1\u73AF\u5883\u7684\u7AEF\u53E3</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">profiles</span><span class="token punctuation">:</span> dev <span class="token comment">## \u5F00\u53D1\u73AF\u5883\u914D\u7F6E\u7684\u540D\u79F0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u65B9\u5F0F\u4E8C"><a class="header-anchor" href="#\u65B9\u5F0F\u4E8C" aria-hidden="true">#</a> \u65B9\u5F0F\u4E8C</h4><ol><li>\u521B\u5EFA3\u4E2A\u914D\u7F6E\u6587\u4EF6\uFF0C\u4E3B\u914D\u7F6E\u6587\u4EF6\u6587\u4EF6\u540D\u4E3A<code>application.yml</code>\uFF0C\u6D4B\u8BD5\u73AF\u5883\u914D\u7F6E\u6587\u4EF6\u540D\u4E3A<code>application-test.yml</code>\uFF0C\u5F00\u53D1\u73AF\u5883\u914D\u7F6E\u6587\u4EF6\u540D\u4E3A<code>application-dev.yml</code></li><li>\u7136\u540E\u5728<code>application.yml</code>\u4E2D\u9009\u62E9\u8981\u4F7F\u7528\u7684\u73AF\u5883\uFF1A<code>test</code>\u4E3A\u6D4B\u8BD5\u73AF\u5883\uFF0C<code>dev</code>\u4E3A\u5F00\u53D1\u73AF\u5883</li></ol><h4 id="\u65B9\u5F0F\u4E09"><a class="header-anchor" href="#\u65B9\u5F0F\u4E09" aria-hidden="true">#</a> \u65B9\u5F0F\u4E09</h4><p>\u8FD9\u4E2A\u65B9\u5F0F\u7684\u524D\u63D0\u80AF\u5B9A\u662F\u6211\u4EEC\u914D\u7F6E\u4E86\u4E0A\u9762\u4E24\u79CD\u65B9\u5F0F\u7684\u5176\u4E2D\u4E00\u79CD\u7684\u524D\u63D0\u4E0B</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>java -jar projectName.jar --spring.profiles.active<span class="token operator">=</span>dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="\u914D\u7F6E\u6587\u4EF6\u4F4D\u7F6E"><a class="header-anchor" href="#\u914D\u7F6E\u6587\u4EF6\u4F4D\u7F6E" aria-hidden="true">#</a> \u914D\u7F6E\u6587\u4EF6\u4F4D\u7F6E</h3><p>\u73B0\u5728\u6211\u4EEC\u7684\u914D\u7F6E\u6587\u4EF6\u662F\u5728<code>resources/application.yaml</code>\uFF0C\u9664\u4E86\u8FD9\u4E2A\u4F4D\u7F6E\uFF0C\u5B98\u65B9\u914D\u7F6E\u4E2D\u8FD8\u53EF\u4EE5\u653E\u5728\uFF1A</p><ul><li>file:./config</li><li>file:./</li><li>classpath:/config/</li><li>classpath:/</li></ul><p>\u5176\u4E2D\uFF0Cfile\u8868\u793A\u6839\u76EE\u5F55\uFF0Cclasspath\u8868\u793Aresources\u76EE\u5F55\uFF0C\u4F18\u5148\u7EA7\uFF1Afile:./config &gt; file:./ &gt; classpath:/config/ &gt; classpath:/</p><h3 id="\u914D\u7F6E\u6587\u4EF6\u53EF\u4EE5\u5199\u4EC0\u4E48"><a class="header-anchor" href="#\u914D\u7F6E\u6587\u4EF6\u53EF\u4EE5\u5199\u4EC0\u4E48" aria-hidden="true">#</a> \u914D\u7F6E\u6587\u4EF6\u53EF\u4EE5\u5199\u4EC0\u4E48</h3><p>\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u67E5\u770B\u6E90\u4EE3\u7801\u7684\u65B9\u5F0F\uFF0C\u901A\u8FC7\u542F\u52A8\u5668\u4E2D\u88C5\u8F7D\u4E86\u4EC0\u4E48\u4E1C\u897F\u6765\u67E5\u770Bspringboot\u7684\u914D\u7F6E\u6587\u4EF6\u4E2D\u53EF\u4EE5\u5199\u914D\u7F6E</p><p>\u4E0A\u9762\u6211\u4EEC\u77E5\u9053springboot\u901A\u8FC7<code>org/springframework/boot/spring-boot-autoconfigure/2.6.1/spring-boot-autoconfigure-2.6.1.jar!/META-INF/spring.factories</code>\u4E2D\u7684\u81EA\u52A8\u6CE8\u5165\u914D\u7F6E\u7C7B\u6765\u6CE8\u5165\u6211\u4EEC\u9700\u8981\u7684bean\u5230spring\u5BB9\u5668\u4E2D</p><p>\u6211\u4EEC\u901A\u8FC7<code>HttpEncodingAutoConfiguration</code>\u6765\u770B\uFF0C\u5982\u679C\u5F15\u5165\u8FD9\u4E2A\u914D\u7F6E\uFF0C\u914D\u7F6E\u6587\u4EF6\u53EF\u4EE5\u5199\u4EC0\u4E48</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">EnableAutoConfiguration</span></span> Auto-configuration<span class="token punctuation">}</span> for configuring the encoding to use
 * in web applications.
 *
 * <span class="token keyword">@author</span> Stephane Nicoll
 * <span class="token keyword">@author</span> Brian Clozel
 * <span class="token keyword">@since</span> 2.0.0
 */</span>
<span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token class-name">ServerProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token comment">// \u5141\u8BB8\u81EA\u52A8\u914D\u7F6E\u7684\u53C2\u6570\u7C7B</span>
<span class="token annotation punctuation">@ConditionalOnWebApplication</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">ConditionalOnWebApplication<span class="token punctuation">.</span>Type</span><span class="token punctuation">.</span>SERVLET<span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token class-name">CharacterEncodingFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;server.servlet.encoding&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;enabled&quot;</span><span class="token punctuation">,</span> matchIfMissing <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token comment">// \u53EA\u6709\u5F00\u542F\u8FD9\u4E2A\u914D\u7F6E\u624D\u80FD\u4F7F\u7528\uFF0C\u9ED8\u8BA4\u662F\u5F00\u542F</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HttpEncodingAutoConfiguration</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Encoding</span> properties<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">HttpEncodingAutoConfiguration</span><span class="token punctuation">(</span><span class="token class-name">ServerProperties</span> properties<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>properties <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getEncoding</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * \u7F16\u7801\u8FC7\u6EE4\u5668\uFF0C\u4E5F\u5C31\u662F\u6211\u4EEC\u5728spring mvc\u4E2D\u5728web.xml\u4E2D\u914D\u7F6E\u7684\u8FC7\u6EE4\u5668
     *
     * <span class="token keyword">@return</span>
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@ConditionalOnMissingBean</span>
    <span class="token keyword">public</span> <span class="token class-name">CharacterEncodingFilter</span> <span class="token function">characterEncodingFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">CharacterEncodingFilter</span> filter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrderedCharacterEncodingFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filter<span class="token punctuation">.</span><span class="token function">setEncoding</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">.</span><span class="token function">getCharset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filter<span class="token punctuation">.</span><span class="token function">setForceRequestEncoding</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">.</span><span class="token function">shouldForce</span><span class="token punctuation">(</span><span class="token class-name">Encoding<span class="token punctuation">.</span>Type</span><span class="token punctuation">.</span>REQUEST<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filter<span class="token punctuation">.</span><span class="token function">setForceResponseEncoding</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">.</span><span class="token function">shouldForce</span><span class="token punctuation">(</span><span class="token class-name">Encoding<span class="token punctuation">.</span>Type</span><span class="token punctuation">.</span>RESPONSE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> filter<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * \u533A\u57DF\u5B57\u7B26\u96C6\u6620\u5C04\u5B9A\u5236\u5668
     *
     * <span class="token keyword">@return</span>
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">LocaleCharsetMappingsCustomizer</span> <span class="token function">localeCharsetMappingsCustomizer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">LocaleCharsetMappingsCustomizer</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">LocaleCharsetMappingsCustomizer</span>
            <span class="token keyword">implements</span> <span class="token class-name">WebServerFactoryCustomizer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ConfigurableServletWebServerFactory</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span> <span class="token class-name">Ordered</span> <span class="token punctuation">{</span>

        <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Encoding</span> properties<span class="token punctuation">;</span>

        <span class="token class-name">LocaleCharsetMappingsCustomizer</span><span class="token punctuation">(</span><span class="token class-name">Encoding</span> properties<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>properties <span class="token operator">=</span> properties<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">customize</span><span class="token punctuation">(</span><span class="token class-name">ConfigurableServletWebServerFactory</span> factory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">.</span><span class="token function">getMapping</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                factory<span class="token punctuation">.</span><span class="token function">setLocaleCharsetMappings</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">.</span><span class="token function">getMapping</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Conditional\u6CE8\u89E3\u6269\u5C55\uFF1A</p><p><img src="`+q+`" alt="image-20211208031726302"></p><p>\u5F53\u6211\u4EEC\u8981\u8BBE\u7F6E\u5F53\u524Dspringboot web\u5E94\u7528\u7684\u7AEF\u53E3\u7684\u65F6\u5019\uFF0C\u5728<code>application.yaml</code>\u4E2D\u914D\u7F6E</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F1A\u8986\u76D6<code>ServerProperties</code>\u4E2D\u9ED8\u8BA4\u7684\u914D\u7F6E</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;server&quot;</span><span class="token punctuation">,</span> ignoreUnknownFields <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServerProperties</span> <span class="token punctuation">{</span>

	<span class="token doc-comment comment">/**
	 * Server HTTP port.
	 */</span>
	<span class="token keyword">private</span> <span class="token class-name">Integer</span> port<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F53\u5E94\u7528\u542F\u52A8\u7684\u65F6\u5019<code>ServletWebServerFactoryCustomizer</code>\u81EA\u5B9A\u4E49\u5668\u4E2D\u7684\u65B9\u6CD5<code>customize</code>\u4F1A\u88AB\u8C03\u7528</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">customize</span><span class="token punctuation">(</span><span class="token class-name">ConfigurableServletWebServerFactory</span> factory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">PropertyMapper</span> map <span class="token operator">=</span> <span class="token class-name">PropertyMapper</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">alwaysApplyingWhenNonNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>serverProperties<span class="token operator">::</span><span class="token function">getPort</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>factory<span class="token operator">::</span><span class="token function">setPort</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>serverProperties<span class="token operator">::</span><span class="token function">getAddress</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>factory<span class="token operator">::</span><span class="token function">setAddress</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>serverProperties<span class="token punctuation">.</span><span class="token function">getServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">::</span><span class="token function">getContextPath</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>factory<span class="token operator">::</span><span class="token function">setContextPath</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>serverProperties<span class="token punctuation">.</span><span class="token function">getServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">::</span><span class="token function">getApplicationDisplayName</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>factory<span class="token operator">::</span><span class="token function">setDisplayName</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>serverProperties<span class="token punctuation">.</span><span class="token function">getServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">::</span><span class="token function">isRegisterDefaultServlet</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>factory<span class="token operator">::</span><span class="token function">setRegisterDefaultServlet</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>serverProperties<span class="token punctuation">.</span><span class="token function">getServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">::</span><span class="token function">getSession</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>factory<span class="token operator">::</span><span class="token function">setSession</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>serverProperties<span class="token operator">::</span><span class="token function">getSsl</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>factory<span class="token operator">::</span><span class="token function">setSsl</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>serverProperties<span class="token punctuation">.</span><span class="token function">getServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">::</span><span class="token function">getJsp</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>factory<span class="token operator">::</span><span class="token function">setJsp</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>serverProperties<span class="token operator">::</span><span class="token function">getCompression</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>factory<span class="token operator">::</span><span class="token function">setCompression</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>serverProperties<span class="token operator">::</span><span class="token function">getHttp2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>factory<span class="token operator">::</span><span class="token function">setHttp2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>serverProperties<span class="token operator">::</span><span class="token function">getServerHeader</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>factory<span class="token operator">::</span><span class="token function">setServerHeader</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>serverProperties<span class="token punctuation">.</span><span class="token function">getServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">::</span><span class="token function">getContextParameters</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>factory<span class="token operator">::</span><span class="token function">setInitParameters</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>serverProperties<span class="token punctuation">.</span><span class="token function">getShutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">to</span><span class="token punctuation">(</span>factory<span class="token operator">::</span><span class="token function">setShutdown</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">WebListenerRegistrar</span> registrar <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>webListenerRegistrars<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    registrar<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>factory<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cookieSameSiteSuppliers<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    factory<span class="token punctuation">.</span><span class="token function">setCookieSameSiteSuppliers</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cookieSameSiteSuppliers<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F53\u5E94\u7528\u542F\u52A8\u7684\u65F6\u5019\uFF0Cspringboot\u4F1A\u68C0\u6D4B\u5F53\u524D\u662F\u4EC0\u4E48\u573A\u666F\u4E0B\u7684\u542F\u52A8\u5668\uFF0C\u6BD4\u5982\u5F53\u524D\u662Fweb\u573A\u666F\uFF0C\u5C31\u4F1A\u4F7F\u7528<code>ServletWebServerApplicationContext</code>\u914D\u7F6Eweb\u73AF\u5883</p><blockquote><p>\u5176\u5B9E\u5C31\u662Fspring\u5BB9\u5668\uFF0C\u4EBA\u5BB6\u5B9A\u4E49\u4E86\u63A5\u53E3<code>AbstractApplicationContext</code>\uFF0C\u4EC0\u4E48\u4E5F\u4E0D\u505A\uFF0C\u5C31\u770B\u662F\u54EA\u4E2A\u6765\u5B9E\u73B0\u5B83\u7684\u63A5\u53E3\uFF0C\u8C01\u5B9E\u73B0\uFF0C\u6211\u5C31\u8C03\u7528\u8C01\u7684\u573A\u666F\u6765\u914D\u7F6E</p></blockquote><p>\u91CD\u70B9\u662Fspring\u6E90\u7801\u4E2D\u7684\u8FD9\u4E2A\u65B9\u6CD5\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">,</span> <span class="token class-name">IllegalStateException</span> <span class="token punctuation">{</span>
		<span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>startupShutdownMonitor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">StartupStep</span> contextRefresh <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>applicationStartup<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">&quot;spring.context.refresh&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Prepare this context for refreshing.</span>
			<span class="token function">prepareRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Tell the subclass to refresh the internal bean factory.</span>
			<span class="token class-name">ConfigurableListableBeanFactory</span> beanFactory <span class="token operator">=</span> <span class="token function">obtainFreshBeanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Prepare the bean factory for use in this context.</span>
			<span class="token function">prepareBeanFactory</span><span class="token punctuation">(</span>beanFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">try</span> <span class="token punctuation">{</span>
				<span class="token comment">// Allows post-processing of the bean factory in context subclasses.</span>
				<span class="token function">postProcessBeanFactory</span><span class="token punctuation">(</span>beanFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token class-name">StartupStep</span> beanPostProcess <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>applicationStartup<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">&quot;spring.context.beans.post-process&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">// Invoke factory processors registered as beans in the context.</span>
				<span class="token function">invokeBeanFactoryPostProcessors</span><span class="token punctuation">(</span>beanFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Register bean processors that intercept bean creation.</span>
				<span class="token function">registerBeanPostProcessors</span><span class="token punctuation">(</span>beanFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
				beanPostProcess<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Initialize message source for this context.</span>
				<span class="token function">initMessageSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Initialize event multicaster for this context.</span>
				<span class="token function">initApplicationEventMulticaster</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Initialize other special beans in specific context subclasses.</span>
				<span class="token function">onRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Check for listener beans and register them.</span>
				<span class="token function">registerListeners</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Instantiate all remaining (non-lazy-init) singletons.</span>
				<span class="token function">finishBeanFactoryInitialization</span><span class="token punctuation">(</span>beanFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Last step: publish corresponding event.</span>
				<span class="token function">finishRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">BeansException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isWarnEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					logger<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;Exception encountered during context initialization - &quot;</span> <span class="token operator">+</span>
							<span class="token string">&quot;cancelling refresh attempt: &quot;</span> <span class="token operator">+</span> ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// Destroy already created singletons to avoid dangling resources.</span>
				<span class="token function">destroyBeans</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Reset &#39;active&#39; flag.</span>
				<span class="token function">cancelRefresh</span><span class="token punctuation">(</span>ex<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// Propagate exception to caller.</span>
				<span class="token keyword">throw</span> ex<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">finally</span> <span class="token punctuation">{</span>
				<span class="token comment">// Reset common introspection caches in Spring&#39;s core, since we</span>
				<span class="token comment">// might not ever need metadata for singleton beans anymore...</span>
				<span class="token function">resetCommonCaches</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				contextRefresh<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u91CD\u70B9\u662Ftry\u4E2D\u76849\u4E2A\u65B9\u6CD5\u8C03\u7528\uFF0C\u592A\u590D\u6742\u4E86\uFF0C\u4E4B\u540E\u5B66spring\u6E90\u7801\u5728\u8865\u5145\u6216\u8005\u5199\u5230\u522B\u5904\u53BB</p><ul><li>postProcessBeanFactory \u5728\u540E\u7F6E\u6269\u5C55\u70B9\u5904\u7406bean\u5DE5\u5382\u7684\u9884\u5904\u7406\uFF0C\u6BD4\u5982\uFF0C\u5728\u6B64web\u5E94\u7528\u4E2D\uFF0C\u7ED9spring\u5BB9\u5668\u6DFB\u52A0\u4E09\u4E2A\u4F5C\u7528\u57DFscope\uFF1A <ul><li>request</li><li>session</li><li>application</li></ul></li><li>invokeBeanFactoryPostProcessors \u8C03\u7528</li><li>registerBeanPostProcessors</li><li>initMessageSource</li><li>initApplicationEventMulticaster</li><li>onRefresh</li><li>registerListeners</li><li>finishBeanFactoryInitialization</li><li>finishRefresh</li></ul><h4 id="\u603B\u7ED3-1"><a class="header-anchor" href="#\u603B\u7ED3-1" aria-hidden="true">#</a> \u603B\u7ED3</h4><p>\u5728\u6211\u4EEC\u7684\u914D\u7F6E\u6587\u4EF6\u80FD\u914D\u7F6E\u7684\u5C5E\u6027\uFF0C\u5B58\u5728\u4E00\u4E2A\u56FA\u6709\u7684\u89C4\u5F8B\uFF1AxxxAutoConfiguraton\u90FD\u4F1A\u548CxxxProperties\u914D\u7F6E\u6587\u4EF6\u7ED1\u5B9A\uFF0C\u7531xxxAutoConfiguraton\u53BB\u5E2E\u6211\u4EEC\u88C5\u914D\uFF0C\u5E76\u4E14\u6709\u9ED8\u8BA4\u503C\uFF0C\u800CxxxProperties\u53EF\u4EE5\u548C\u914D\u7F6E\u6587\u4EF6\u8FDB\u884C\u7ED1\u5B9A\uFF0C\u6211\u4EEC\u5C31\u53EF\u4EE5\u4F7F\u7528\u81EA\u5B9A\u4E49\u7684\u914D\u7F6E\u4E86</p><ul><li>springboot\u542F\u52A8\u4F1A\u52A0\u8F7D\u5927\u91CF\u7684\u81EA\u52A8\u914D\u7F6E\u7C7B</li><li>\u6211\u4EEC\u770B\u6211\u4EEC\u9700\u8981\u7684\u529F\u80FD\u6709\u6CA1\u6709\u5728springboot\u4E2D\u9ED8\u8BA4\u5199\u597D\u7684\u81EA\u52A8\u914D\u7F6E\u7C7B\u5F53\u4E2D</li><li>\u6211\u4EEC\u5728\u6765\u770B\u8FD9\u4E2A\u81EA\u52A8\u914D\u7F6E\u7C7B\u4E2D\u5230\u5E95\u914D\u7F6E\u4E86\u90A3\u4E9B\u7EC4\u4EF6\uFF0C\u53EA\u8981\u6211\u4EEC\u8981\u7528\u7684\u7EC4\u4EF6\u6709\u9ED8\u8BA4\u914D\u7F6E\uFF0C\u6211\u4EEC\u5C31\u4E0D\u7528\u624B\u52A8\u914D\u7F6E\u4E86\uFF0C\u9664\u975E\u662F\u81EA\u5B9A\u4E49\u5904\u7406</li><li>\u7ED9\u5BB9\u5668\u4E2D\u81EA\u52A8\u914D\u7F6E\u7C7B\u6DFB\u52A0\u7EC4\u4EF6\u7684\u65F6\u5019\uFF0C\u4F1A\u4ECEproperties\u7C7B\u4E2D\u83B7\u53D6\u67D0\u4E9B\u5C5E\u6027\u3002\u6211\u4EEC\u53EA\u9700\u8981\u5728\u914D\u7F6E\u6587\u4EF6\u4E2D\u6307\u5B9A\u8FD9\u4E9B\u5C5E\u6027\u7684\u503C\u5373\u53EF</li></ul><p>\u90A3\u4E48\u591A\u81EA\u52A8\u914D\u7F6E\u7C7B\uFF0C\u5FC5\u987B\u5728\u4E00\u5B9A\u6761\u4EF6\u4E0B\u624D\u80FD\u751F\u6548\uFF0C\u6211\u4EEC\u600E\u4E48\u77E5\u9053\u90A3\u4E9B\u81EA\u52A8\u914D\u7F6E\u7C7B\u751F\u6548\u4E86\u5462\uFF1F<strong>\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u542F\u7528<code>debug=true</code>\u5C5E\u6027\uFF0C\u6765\u8BA9\u63A7\u5236\u53F0\u8F93\u51FA\u81EA\u52A8\u914D\u7F6E\u62A5\u544A</strong></p><ul><li>Positive matches\uFF1A\u81EA\u52A8\u914D\u7F6E\u7C7B\u542F\u7528\uFF0C\u627E\u5230\u4E86\u8FD9\u4E2A\u573A\u666F\u7684\u81EA\u52A8\u914D\u7F6E\u7C7B</li><li>Negative matches\uFF1A\u81EA\u52A8\u914D\u7F6E\u7C7B\u4E0D\u542F\u7528\uFF0C\u4E5F\u5C31\u662F\u6CA1\u6709\u627E\u5230</li><li>Unconditional classes\uFF1A\u6CA1\u6709\u6761\u4EF6\u7684\u7C7B\uFF0C\u4E5F\u5C31\u662F\u867D\u7136\u627E\u5230\uFF0C\u4F46\u662F\u5728\u5F53\u524D\u7684\u5224\u5B9A\u4E0B\uFF0C\u4E0D\u4F7F\u7528\u8FD9\u4E2A\u573A\u666F</li></ul><p><img src="`+x+'" alt="image-20211208033127866"></p><p><img src="'+S+'" alt="image-20211208033145324"></p><p><img src="'+C+`" alt="image-20211208033213047"></p><h2 id="jsr303\u6821\u9A8C"><a class="header-anchor" href="#jsr303\u6821\u9A8C" aria-hidden="true">#</a> JSR303\u6821\u9A8C</h2><p>springboot\u4E2D\u53EF\u4EE5\u4F7F\u7528<code>@Validated</code>\u6765\u6821\u9A8C\u6570\u636E\uFF0C\u5982\u679C\u6570\u636E\u5F02\u5E38\u5219\u4F1A\u7EDF\u4E00\u629B\u51FA\u5F02\u5E38\uFF0C\u65B9\u4FBF\u5F02\u5E38\u4E2D\u5FC3\u7EDF\u4E00\u5904\u7406</p><blockquote><p>\u53C2\u7167\u94FE\u63A5\uFF1Ahttps://juejin.cn/post/6844904162480619534</p></blockquote><h3 id="\u7EA6\u675F\u6CE8\u89E3"><a class="header-anchor" href="#\u7EA6\u675F\u6CE8\u89E3" aria-hidden="true">#</a> \u7EA6\u675F\u6CE8\u89E3</h3><p>Bean Validation\u89C4\u8303\u5185\u5D4C\u7684\u7EA6\u675F\u6CE8\u89E3</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/19/1722a775b6615c5e~tplv-t2oaga2asx-watermark.awebp" alt="img"></p><h3 id="\u4F7F\u7528\u65B9\u5F0F"><a class="header-anchor" href="#\u4F7F\u7528\u65B9\u5F0F" aria-hidden="true">#</a> \u4F7F\u7528\u65B9\u5F0F</h3><ol><li>\u5F15\u5165\u4F9D\u8D56</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--validation--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-validation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u7ED9\u53C2\u6570\u5BF9\u8C61\u6DFB\u52A0\u6821\u9A8C\u6CE8\u89E3</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@NotBlank</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">&quot;\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Pattern</span><span class="token punctuation">(</span>regexp <span class="token operator">=</span> <span class="token string">&quot;^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$&quot;</span><span class="token punctuation">,</span> message <span class="token operator">=</span> <span class="token string">&quot;\u5BC6\u7801\u5FC5\u987B\u4E3A8~16\u4E2A\u5B57\u6BCD\u548C\u6570\u5B57\u7EC4\u5408&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Email</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> gender<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>Controller \u4E2D\u9700\u8981\u6821\u9A8C\u7684\u53C2\u6570Bean\u524D\u6DFB\u52A0 @Valid \u5F00\u542F\u6821\u9A8C\u529F\u80FD\uFF0C\u7D27\u8DDF\u5728\u6821\u9A8C\u7684Bean\u540E\u6DFB\u52A0\u4E00\u4E2ABindingResult\uFF0CBindingResult\u5C01\u88C5\u4E86\u524D\u9762Bean\u7684\u6821\u9A8C\u7ED3\u679C</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/save&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Result</span> save <span class="token punctuation">(</span><span class="token annotation punctuation">@Valid</span> <span class="token class-name">User</span> user <span class="token punctuation">,</span> <span class="token class-name">BindingResult</span> bindingResult<span class="token punctuation">)</span>  <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>bindingResult<span class="token punctuation">.</span><span class="token function">hasErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span> <span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            bindingResult<span class="token punctuation">.</span><span class="token function">getFieldErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span> <span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span> message <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token function">getDefaultMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">String</span> field <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token function">getField</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span> field <span class="token punctuation">,</span> message <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span> <span class="token number">400</span> <span class="token punctuation">,</span> <span class="token string">&quot;\u975E\u6CD5\u53C2\u6570 !&quot;</span> <span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5F02\u5E38\u7EDF\u4E00\u5904\u7406"><a class="header-anchor" href="#\u5F02\u5E38\u7EDF\u4E00\u5904\u7406" aria-hidden="true">#</a> \u5F02\u5E38\u7EDF\u4E00\u5904\u7406</h3><p>\u53C2\u6570\u6821\u9A8C\u4E0D\u901A\u8FC7\u65F6\uFF0C\u4F1A\u629B\u51FA BingBindException \u5F02\u5E38\uFF0C\u53EF\u4EE5\u5728\u7EDF\u4E00\u5F02\u5E38\u5904\u7406\u4E2D\uFF0C\u505A\u7EDF\u4E00\u5904\u7406\uFF0C\u8FD9\u6837\u5C31\u4E0D\u7528\u5728\u6BCF\u4E2A\u9700\u8981\u53C2\u6570\u6821\u9A8C\u7684\u5730\u65B9\u90FD\u7528 BindingResult \u83B7\u53D6\u6821\u9A8C\u7ED3\u679C\u4E86</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@RestControllerAdvice</span><span class="token punctuation">(</span>basePackages <span class="token operator">=</span> <span class="token string">&quot;com.example.springboot.controller&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GlobalExceptionControllerAdvice</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span>value<span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">MethodArgumentNotValidException</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">,</span> <span class="token class-name">BindException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">handleVaildException</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">BindingResult</span> bindingResult <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">MethodArgumentNotValidException</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            bindingResult <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">MethodArgumentNotValidException</span><span class="token punctuation">)</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBindingResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">BindException</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            bindingResult <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">BindException</span><span class="token punctuation">)</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBindingResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> errorMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bindingResult<span class="token punctuation">.</span><span class="token function">getFieldErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>fieldError<span class="token punctuation">)</span><span class="token operator">-&gt;</span>
                errorMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>fieldError<span class="token punctuation">.</span><span class="token function">getField</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>fieldError<span class="token punctuation">.</span><span class="token function">getDefaultMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token number">400</span> <span class="token punctuation">,</span> <span class="token string">&quot;\u975E\u6CD5\u53C2\u6570 !&quot;</span> <span class="token punctuation">,</span> errorMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5206\u7EC4\u89E3\u51B3\u6821\u9A8C"><a class="header-anchor" href="#\u5206\u7EC4\u89E3\u51B3\u6821\u9A8C" aria-hidden="true">#</a> \u5206\u7EC4\u89E3\u51B3\u6821\u9A8C</h3><p>\u65B0\u589E\u548C\u4FEE\u6539\u5BF9\u4E8E\u5B9E\u4F53\u7684\u6821\u9A8C\u89C4\u5219\u662F\u4E0D\u540C\u7684\uFF0C\u4F8B\u5982id\u662F\u81EA\u589E\u7684\u65F6\uFF0C\u65B0\u589E\u65F6id\u8981\u4E3A\u7A7A\uFF0C\u4FEE\u6539\u5219\u5FC5\u987B\u4E0D\u4E3A\u7A7A\uFF1B\u65B0\u589E\u548C\u4FEE\u6539\uFF0C\u82E5\u7528\u7684\u6070\u597D\u53C8\u662F\u540C\u4E00\u79CD\u5B9E\u4F53\uFF0C\u90A3\u5C31\u9700\u8981\u7528\u5230\u5206\u7EC4\u6821\u9A8C</p><ol><li>\u6821\u9A8C\u6CE8\u89E3\u90FD\u6709\u4E00\u4E2Agroups\u5C5E\u6027\uFF0C\u53EF\u4EE5\u5C06\u6821\u9A8C\u6CE8\u89E3\u5206\u7EC4\uFF0C\u6211\u4EEC\u770B\u4E0B@NotNull\u7684\u6E90\u7801</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span> METHOD<span class="token punctuation">,</span> FIELD<span class="token punctuation">,</span> ANNOTATION_TYPE<span class="token punctuation">,</span> CONSTRUCTOR<span class="token punctuation">,</span> PARAMETER<span class="token punctuation">,</span> TYPE_USE <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Repeatable</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Constraint</span><span class="token punctuation">(</span>validatedBy <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">NotNull</span> <span class="token punctuation">{</span>

	<span class="token class-name">String</span> <span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;{javax.validation.constraints.NotNull.message}&quot;</span><span class="token punctuation">;</span>

	<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">groups</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Payload</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">payload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span> METHOD<span class="token punctuation">,</span> FIELD<span class="token punctuation">,</span> ANNOTATION_TYPE<span class="token punctuation">,</span> CONSTRUCTOR<span class="token punctuation">,</span> PARAMETER<span class="token punctuation">,</span> TYPE_USE <span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span>RUNTIME<span class="token punctuation">)</span>
	<span class="token annotation punctuation">@Documented</span>
	<span class="token annotation punctuation">@interface</span> <span class="token class-name">List</span> <span class="token punctuation">{</span>

		<span class="token class-name">NotNull</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u4ECE\u6E90\u7801\u53EF\u4EE5\u770B\u51FA groups \u662F\u4E00\u4E2AClass&lt;?&gt;\u7C7B\u578B\u7684\u6570\u7EC4\uFF0C\u90A3\u4E48\u5C31\u53EF\u4EE5\u521B\u5EFA\u4E00\u4E2AGroups</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Groups</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Add</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">interface</span>  <span class="token class-name">Update</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u7ED9\u53C2\u6570\u5BF9\u8C61\u7684\u6821\u9A8C\u6CE8\u89E3\u6DFB\u52A0\u5206\u7EC4</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Null</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">&quot;\u65B0\u589E\u4E0D\u9700\u8981\u6307\u5B9Aid&quot;</span> <span class="token punctuation">,</span> groups <span class="token operator">=</span> <span class="token class-name">Groups<span class="token punctuation">.</span>Add</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@NotNull</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">&quot;\u4FEE\u6539\u9700\u8981\u6307\u5B9Aid&quot;</span> <span class="token punctuation">,</span> groups <span class="token operator">=</span> <span class="token class-name">Groups<span class="token punctuation">.</span>Update</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@NotBlank</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">&quot;\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@NotNull</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Pattern</span><span class="token punctuation">(</span>regexp <span class="token operator">=</span> <span class="token string">&quot;^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$&quot;</span><span class="token punctuation">,</span> message <span class="token operator">=</span> <span class="token string">&quot;\u5BC6\u7801\u5FC5\u987B\u4E3A8~16\u4E2A\u5B57\u6BCD\u548C\u6570\u5B57\u7EC4\u5408&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Email</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> gender<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>Controller \u4E2D\u539F\u5148\u7684@Valid\u4E0D\u80FD\u6307\u5B9A\u5206\u7EC4 \uFF0C\u9700\u8981\u66FF\u6362\u6210@Validated</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/save&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Result</span> save <span class="token punctuation">(</span><span class="token annotation punctuation">@Validated</span><span class="token punctuation">(</span><span class="token class-name">Groups<span class="token punctuation">.</span>Add</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span>  <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u81EA\u5B9A\u4E49\u6821\u9A8C\u6CE8\u89E3"><a class="header-anchor" href="#\u81EA\u5B9A\u4E49\u6821\u9A8C\u6CE8\u89E3" aria-hidden="true">#</a> \u81EA\u5B9A\u4E49\u6821\u9A8C\u6CE8\u89E3</h3><p>\u867D\u7136JSR303\u548Cspringboot-validator \u5DF2\u7ECF\u63D0\u4F9B\u4E86\u5F88\u591A\u6821\u9A8C\u6CE8\u89E3\uFF0C\u4F46\u662F\u5F53\u9762\u5BF9\u590D\u6742\u53C2\u6570\u6821\u9A8C\u65F6\uFF0C\u8FD8\u662F\u4E0D\u80FD\u6EE1\u8DB3\u6211\u4EEC\u7684\u8981\u6C42\uFF0C\u8FD9\u65F6\u5019\u6211\u4EEC\u5C31\u9700\u8981 \u81EA\u5B9A\u4E49\u6821\u9A8C\u6CE8\u89E3\u3002</p><p>\u4F8B\u5982User\u4E2D\u7684gender\uFF0C\u7528 1\u4EE3\u8868\u7537 2\u4EE3\u8868\u5973\uFF0C\u6211\u4EEC\u81EA\u5B9A\u4E49\u4E00\u4E2A\u6821\u9A8C\u6CE8\u89E3@ListValue\uFF0C\u6307\u5B9A\u53D6\u503C\u53EA\u80FD1\u548C2</p><ol><li>\u521B\u5EFA\u7EA6\u675F\u89C4\u5219</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Constraint</span><span class="token punctuation">(</span>validatedBy <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token class-name">ListValueConstraintValidator</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span> METHOD<span class="token punctuation">,</span> FIELD<span class="token punctuation">,</span> ANNOTATION_TYPE <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span>RUNTIME<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">ListValue</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> <span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>

    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">groups</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Payload</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">payload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">vals</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E00\u4E2A\u6807\u6CE8(annotation) \u662F\u901A\u8FC7@interface\u5173\u952E\u5B57\u6765\u5B9A\u4E49\u7684\u3002\u8FD9\u4E2A\u6807\u6CE8\u4E2D\u7684\u5C5E\u6027\u662F\u58F0\u660E\u6210\u7C7B\u4F3C\u65B9\u6CD5\u7684\u6837\u5F0F\u7684\u3002\u6839\u636EBean Validation API\u89C4\u8303\u7684\u8981\u6C42\uFF1A</p><ul><li>message\u5C5E\u6027, \u8FD9\u4E2A\u5C5E\u6027\u88AB\u7528\u6765\u5B9A\u4E49\u9ED8\u8BA4\u5F97\u6D88\u606F\u6A21\u7248, \u5F53\u8FD9\u4E2A\u7EA6\u675F\u6761\u4EF6\u88AB\u9A8C\u8BC1\u5931\u8D25\u7684\u65F6\u5019,\u901A\u8FC7 \u6B64\u5C5E\u6027\u6765\u8F93\u51FA\u9519\u8BEF\u4FE1\u606F</li><li>groups \u5C5E\u6027, \u7528\u4E8E\u6307\u5B9A\u8FD9\u4E2A\u7EA6\u675F\u6761\u4EF6\u5C5E\u4E8E\u54EA(\u4E9B)\u4E2A\u6821\u9A8C\u7EC4. \u8FD9\u4E2A\u7684\u9ED8\u8BA4\u503C\u5FC5\u987B\u662FClass&lt;?&gt;\u7C7B\u578B\u6570\u7EC4</li><li>payload \u5C5E\u6027, Bean Validation API \u7684\u4F7F\u7528\u8005\u53EF\u4EE5\u901A\u8FC7\u6B64\u5C5E\u6027\u6765\u7ED9\u7EA6\u675F\u6761\u4EF6\u6307\u5B9A\u4E25\u91CD\u7EA7\u522B. \u8FD9\u4E2A\u5C5E\u6027\u5E76\u4E0D\u88ABAPI\u81EA\u8EAB\u6240\u4F7F\u7528</li></ul><p>\u9664\u4E86\u8FD9\u4E09\u4E2A\u5F3A\u5236\u6027\u8981\u6C42\u7684\u5C5E\u6027(message, groups \u548C payload) \u4E4B\u5916\uFF0C\u6211\u4EEC\u8FD8\u6DFB\u52A0\u4E86\u4E00\u4E2A\u5C5E\u6027\u7528\u6765\u6307\u5B9A\u6240\u8981\u6C42\u7684\u503C\u3002\u6B64\u5C5E\u6027\u7684\u540D\u79F0vals\u5728annotation\u7684\u5B9A\u4E49\u4E2D\u6BD4\u8F83\u7279\u6B8A\uFF0C\u5982\u679C\u53EA\u6709\u8FD9\u4E2A\u5C5E\u6027\u88AB\u8D4B\u503C\u4E86\u7684\u8BDD\uFF0C\u90A3\u4E48\uFF0C\u5728\u4F7F\u7528\u6B64annotation\u5230\u65F6\u5019\u53EF\u4EE5\u5FFD\u7565\u6B64\u5C5E\u6027\u540D\u79F0</p><p>\u53E6\u5916\uFF0C \u6211\u4EEC\u8FD8\u7ED9\u8FD9\u4E2Aannotation\u6807\u6CE8\u4E86\u4E00\u4E9B\u5143\u6807\u6CE8( meta annotatioins)\uFF1A</p><ul><li>@Target({ METHOD, FIELD, ANNOTATION_TYPE }): \u8868\u793A\u6B64\u6CE8\u89E3\u53EF\u4EE5\u88AB\u7528\u5728\u65B9\u6CD5, \u5B57\u6BB5\u6216\u8005annotation\u58F0\u660E\u4E0A</li><li>@Retention(RUNTIME): \u8868\u793A\u8FD9\u4E2A\u6807\u6CE8\u4FE1\u606F\u662F\u5728\u8FD0\u884C\u671F\u901A\u8FC7\u53CD\u5C04\u88AB\u8BFB\u53D6\u7684</li><li>@Constraint(validatedBy = ListValueConstraintValidator.class): \u6307\u660E\u4F7F\u7528\u54EA\u4E2A\u6821\u9A8C\u5668(\u7C7B) \u53BB\u6821\u9A8C\u4F7F\u7528\u4E86\u6B64\u6807\u6CE8\u7684\u5143\u7D20</li><li>@Documented: \u8868\u793A\u5728\u5BF9\u4F7F\u7528\u4E86\u8BE5\u6CE8\u89E3\u7684\u7C7B\u8FDB\u884Cjavadoc\u64CD\u4F5C\u5230\u65F6\u5019, \u8FD9\u4E2A\u6807\u6CE8\u4F1A\u88AB\u6DFB\u52A0\u5230 javadoc\u5F53\u4E2D</li></ul><ol start="2"><li>\u521B\u5EFA\u7EA6\u675F\u6821\u9A8C\u5668</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>validation<span class="token punctuation">.</span></span><span class="token class-name">ConstraintValidator</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>validation<span class="token punctuation">.</span></span><span class="token class-name">ConstraintValidatorContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashSet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Set</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ListValueConstraintValidator</span> <span class="token keyword">implements</span> <span class="token class-name">ConstraintValidator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ListValue</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token doc-comment comment">/**
     * \u521D\u59CB\u5316\u65B9\u6CD5
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initialize</span><span class="token punctuation">(</span><span class="token class-name">ListValue</span> constraintAnnotation<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> vals <span class="token operator">=</span> constraintAnnotation<span class="token punctuation">.</span><span class="token function">vals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> val <span class="token operator">:</span> vals<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * \u5224\u65AD\u662F\u5426\u6821\u9A8C\u6210\u529F
     *
     * <span class="token keyword">@param</span> <span class="token parameter">value</span> \u9700\u8981\u6821\u9A8C\u7684\u503C
     * <span class="token keyword">@param</span> <span class="token parameter">context</span>
     * <span class="token keyword">@return</span>
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isValid</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> value<span class="token punctuation">,</span> <span class="token class-name">ConstraintValidatorContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> set<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ListValueConstraintValidator\u5B9A\u4E49\u4E86\u4E24\u4E2A\u6CDB\u578B\u53C2\u6570\uFF0C\u7B2C\u4E00\u4E2A\u662F\u8FD9\u4E2A\u6821\u9A8C\u5668\u6240\u670D\u52A1\u5230\u6807\u6CE8\u7C7B\u578B(\u5728\u6211\u4EEC\u7684\u4F8B\u5B50\u4E2D\u5373ListValue)\uFF0C\u7B2C\u4E8C\u4E2A\u8FD9\u4E2A\u6821\u9A8C\u5668\u6240\u652F\u6301\u5230\u88AB\u6821\u9A8C\u5143\u7D20\u7684\u7C7B\u578B (\u5373Integer)</p><p>\u5982\u679C\u4E00\u4E2A\u7EA6\u675F\u6807\u6CE8\u652F\u6301\u591A\u79CD\u7C7B\u578B\u7684\u88AB\u6821\u9A8C\u5143\u7D20\u7684\u8BDD\uFF0C\u90A3\u4E48\u9700\u8981\u4E3A\u6BCF\u4E2A\u6240\u652F\u6301\u7684\u7C7B\u578B\u5B9A\u4E49\u4E00\u4E2AConstraintValidator\uFF0C\u5E76\u4E14\u6CE8\u518C\u5230\u7EA6\u675F\u6807\u6CE8\u4E2D</p><p>\u8FD9\u4E2A\u9A8C\u8BC1\u5668\u7684\u5B9E\u73B0\u5C31\u5F88\u5E73\u5E38\u4E86\uFF0Cinitialize() \u65B9\u6CD5\u4F20\u8FDB\u6765\u4E00\u4E2A\u6240\u8981\u9A8C\u8BC1\u7684\u6807\u6CE8\u7C7B\u578B\u7684\u5B9E\u4F8B\uFF0C\u5728\u672C\u4F8B\u4E2D\uFF0C\u6211\u4EEC\u901A\u8FC7\u6B64\u5B9E\u4F8B\u6765\u83B7\u53D6\u5176vals\u5C5E\u6027\u7684\u503C\uFF0C\u5E76\u5C06\u5176\u4FDD\u5B58\u4E3ASet\u96C6\u5408\u4E2D\u4F9B\u4E0B\u4E00\u6B65\u4F7F\u7528</p><p>isValid()\u662F\u5B9E\u73B0\u771F\u6B63\u7684\u6821\u9A8C\u903B\u8F91\u7684\u5730\u65B9\uFF0C\u5224\u65AD\u4E00\u4E2A\u7ED9\u5B9A\u7684int\u5BF9\u4E8E<code>@ListValue</code>\u8FD9\u4E2A\u7EA6\u675F\u6761\u4EF6\u6765\u8BF4\u662F\u5426\u662F\u5408\u6CD5\u7684</p><ol start="3"><li>\u5728\u53C2\u6570\u5BF9\u8C61\u4E2D\u4F7F\u7528<code>@ListValue</code>\u6CE8\u89E3</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Null</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">&quot;\u65B0\u589E\u4E0D\u9700\u8981\u6307\u5B9Aid&quot;</span> <span class="token punctuation">,</span> groups <span class="token operator">=</span> <span class="token class-name">Groups<span class="token punctuation">.</span>Add</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@NotNull</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">&quot;\u4FEE\u6539\u9700\u8981\u6307\u5B9Aid&quot;</span> <span class="token punctuation">,</span> groups <span class="token operator">=</span> <span class="token class-name">Groups<span class="token punctuation">.</span>Update</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@NotBlank</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">&quot;\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@NotNull</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Pattern</span><span class="token punctuation">(</span>regexp <span class="token operator">=</span> <span class="token string">&quot;^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$&quot;</span><span class="token punctuation">,</span> message <span class="token operator">=</span> <span class="token string">&quot;\u5BC6\u7801\u5FC5\u987B\u4E3A8~16\u4E2A\u5B57\u6BCD\u548C\u6570\u5B57\u7EC4\u5408&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Email</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@ListValue</span><span class="token punctuation">(</span> message <span class="token operator">=</span> <span class="token string">&quot;\u6027\u522B\u5E94\u6307\u5B9A\u76F8\u5E94\u7684\u503C&quot;</span> <span class="token punctuation">,</span> vals <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">}</span> <span class="token punctuation">,</span> groups <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">Groups<span class="token punctuation">.</span>Add</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">,</span> <span class="token class-name">Groups<span class="token punctuation">.</span>Update</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> gender<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="springboot-web\u5F00\u53D1"><a class="header-anchor" href="#springboot-web\u5F00\u53D1" aria-hidden="true">#</a> springboot web\u5F00\u53D1</h2><blockquote><p>jar\uFF1Awebapp</p><p>\u81EA\u52A8\u88C5\u914D</p><p>springboot\u5230\u5E95\u5E2E\u6211\u4EEC\u914D\u7F6E\u4E86\u4EC0\u4E48\uFF1F\u6211\u4EEC\u80FD\u4E0D\u80FD\u4FEE\u6539\uFF1F\u80FD\u4FEE\u6539\u90A3\u4E9B\u4E1C\u897F\uFF1F\u80FD\u4E0D\u80FD\u6269\u5C55\uFF1F\u80AF\u5B9A\u53EF\u4EE5</p><ul><li>xxxAutoConfiguration \u5411\u5BB9\u5668\u4E2D\u81EA\u52A8\u914D\u7F6E\u7EC4\u4EF6</li><li>xxxProperties \u81EA\u52A8\u914D\u7F6E\u7C7B\uFF0C\u88C5\u914D\u914D\u7F6E\u6587\u4EF6\u4E2D\u81EA\u5B9A\u4E49\u7684\u4E00\u4E9B\u5185\u5BB9</li></ul><p>\u8981\u89E3\u51B3\u7684\u95EE\u9898\uFF1A</p><ul><li>\u5BFC\u5165\u9759\u6001\u8D44\u6E90</li><li>\u9996\u9875</li><li>jsp\uFF0C\u6A21\u677F\u5F15\u64CE</li><li>\u88C5\u914D\u6269\u5C55spring mvc</li><li>\u589E\u5220\u6539\u67E5</li><li>\u62E6\u622A\u5668</li><li>\u56FD\u9645\u5316</li></ul></blockquote><h3 id="\u5E38\u7528\u8BA2\u5236"><a class="header-anchor" href="#\u5E38\u7528\u8BA2\u5236" aria-hidden="true">#</a> \u5E38\u7528\u8BA2\u5236</h3><h4 id="\u9759\u6001\u8D44\u6E90\u5BFC\u5165"><a class="header-anchor" href="#\u9759\u6001\u8D44\u6E90\u5BFC\u5165" aria-hidden="true">#</a> \u9759\u6001\u8D44\u6E90\u5BFC\u5165</h4><h5 id="\u521B\u5EFAspringboot\u9879\u76EE"><a class="header-anchor" href="#\u521B\u5EFAspringboot\u9879\u76EE" aria-hidden="true">#</a> \u521B\u5EFAspringboot\u9879\u76EE</h5><p>\u52FE\u9009<code>spring web</code></p><p><img src="`+T+`" alt="image-20211208040626019"></p><h5 id="\u9759\u6001\u8D44\u6E90\u53EF\u653E\u4F4D\u7F6E"><a class="header-anchor" href="#\u9759\u6001\u8D44\u6E90\u53EF\u653E\u4F4D\u7F6E" aria-hidden="true">#</a> \u9759\u6001\u8D44\u6E90\u53EF\u653E\u4F4D\u7F6E</h5><p><code>WebMvcAutoConfiguration</code>\u4E0B\u7684<code>WebMvcAutoConfigurationAdapter</code>\u4E2D\u7684\u65B9\u6CD5<code>addResourceHandlers</code>\u662F\u7528\u4E8E\u914D\u7F6E\u9759\u6001\u8D44\u6E90\u7684</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addResourceHandlers</span><span class="token punctuation">(</span><span class="token class-name">ResourceHandlerRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u5982\u679C\u6211\u4EEC\u5728application.yaml\u4E2D\u81EA\u5DF1\u914D\u7F6E\u7684\u8BDD\uFF0C\u90A3\u4E48\u5B83\u5C31\u4F1A\u4F7F\u7528\u6211\u4EEC\u7684\u81EA\u5DF1\u7684\u914D\u7F6E\uFF0C\u4E0B\u9762\u7684\u914D\u7F6E\u5C31\u5931\u6548\u4E86</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>resourceProperties<span class="token punctuation">.</span><span class="token function">isAddMappings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// resourceProperties \u5C31\u662F\u8FD9\u51E0\u4E2A\uFF1AResources.CLASSPATH_RESOURCE_LOCATIONS = { &quot;classpath:/META-INF/resources/&quot;,&quot;classpath:/resources/&quot;, &quot;classpath:/static/&quot;, &quot;classpath:/public/&quot; };</span>
    <span class="token comment">// classpath\u5728\u6B64\u5904\u6307\u7684\u662Fresources\u4E0B\u7684\u76EE\u5F55\uFF0C\u4E5F\u5C31\u662F\u6253\u5305\u8FD0\u884C\u65F6\u7684\u9879\u76EE\u76EE\u5F55\uFF08classes\uFF09</span>
    logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Default resource handling disabled&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// \u6DFB\u52A0webjars\u4E0B\u7684\u9759\u6001\u8D44\u6E90</span>
  <span class="token function">addResourceHandler</span><span class="token punctuation">(</span>registry<span class="token punctuation">,</span> <span class="token string">&quot;/webjars/**&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;classpath:/META-INF/resources/webjars/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// \u6DFB\u52A0\u4E0A\u9762\u6CE8\u91CA\u4E2D\u4E2D\u7684\u56DB\u4E2A\u653E\u7F6E\u9759\u6001\u8D44\u6E90\u7684\u4F4D\u7F6E\uFF0C\u53EA\u8981\u662F\u8BF7\u6C42\u8DEF\u5F84\u4E2D\u7684\u4EFB\u610F\u8D44\u6E90\uFF08/**\uFF09\u53EA\u8981\u80FD\u548CResources.CLASSPATH_RESOURCE_LOCATIONS\u4E2D\u7684\u8FD9\u4E9B\u8D44\u6E90\u53EF\u4EE5\u5339\u914D\u5230\uFF0C\u5C31\u53EF\u4EE5\u5F97\u5230\u8FD9\u4E9B\u8D44\u6E90</span>
  <span class="token comment">// this.mvcProperties.getStaticPathPattern()\u662F/**</span>
  <span class="token function">addResourceHandler</span><span class="token punctuation">(</span>registry<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mvcProperties<span class="token punctuation">.</span><span class="token function">getStaticPathPattern</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>registration<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
    registration<span class="token punctuation">.</span><span class="token function">addResourceLocations</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>resourceProperties<span class="token punctuation">.</span><span class="token function">getStaticLocations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>servletContext <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">ServletContextResource</span> resource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServletContextResource</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>servletContext<span class="token punctuation">,</span> SERVLET_LOCATION<span class="token punctuation">)</span><span class="token punctuation">;</span>
      registration<span class="token punctuation">.</span><span class="token function">addResourceLocations</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>\u4F7F\u7528webjars\u5BFC\u5165\u9759\u6001\u8D44\u6E90\uFF08\u5E73\u65F6\u4E0D\u4F1A\u4F7F\u7528\uFF09</li></ol>`,207),D=n("p",null,[n("strong",null,"\u4EC0\u4E48\u662Fwebjars\uFF1F")],-1),H=n("p",null,"\u5B98\u7F51\uFF1Ahttps://www.webjars.org/",-1),W=n("p",null,[n("img",{src:j,alt:"image-20211208041839675"})],-1),z=n("p",null,[n("strong",null,"WebJars are client-side web libraries (e.g. jQuery & Bootstrap) packaged into JAR (Java Archive) files.")],-1),U=n("li",null,"Explicitly and easily manage the client-side dependencies in JVM-based web applications",-1),$=n("li",null,"Use JVM-based build tools (e.g. Maven, Gradle, sbt, ...) to download your client-side dependencies",-1),J=n("li",null,"Know which client-side dependencies you are using",-1),G=n("li",null,"Transitive dependencies are automatically resolved and optionally loaded via RequireJS",-1),Q=s("Deployed on "),Y={href:"http://search.maven.org/",target:"_blank",rel:"noopener noreferrer"},Z=s("Maven Central"),K=s("Public CDN, generously provided by: "),X={href:"http://www.jsdelivr.com/",target:"_blank",rel:"noopener noreferrer"},nn=s("jsdelivr"),sn=n("p",null,"\u7FFB\u8BD1\uFF1A",-1),an=n("p",null,"WebJars \u662F\u6253\u5305\u5230 JAR\uFF08Java \u5B58\u6863\uFF09\u6587\u4EF6\u4E2D\u7684\u5BA2\u6237\u7AEF Web \u5E93\uFF08\u4F8B\u5982 jQuery \u548C Bootstrap\uFF09\u3002",-1),tn=n("li",null,"\u660E\u786E\u4E14\u8F7B\u677E\u5730\u7BA1\u7406\u57FA\u4E8E JVM \u7684 Web \u5E94\u7528\u7A0B\u5E8F\u4E2D\u7684\u5BA2\u6237\u7AEF\u4F9D\u8D56\u9879",-1),pn=n("li",null,"\u4F7F\u7528\u57FA\u4E8E JVM \u7684\u6784\u5EFA\u5DE5\u5177\uFF08\u4F8B\u5982 Maven\u3001Gradle , sbt, ...) \u4E0B\u8F7D\u60A8\u7684\u5BA2\u6237\u7AEF\u4F9D\u8D56\u9879",-1),en=n("li",null,"\u4E86\u89E3\u60A8\u6B63\u5728\u4F7F\u7528\u54EA\u4E9B\u5BA2\u6237\u7AEF\u4F9D\u8D56\u9879",-1),on=n("li",null,"\u4F20\u9012\u4F9D\u8D56\u9879\u81EA\u52A8\u89E3\u6790\u5E76\u901A\u8FC7 RequireJS \u9009\u62E9\u6027\u52A0\u8F7D",-1),cn=s("\u90E8\u7F72\u5728 Maven Central\u2022 \u516C\u5171 CDN\uFF0C\u7531\u4EE5\u4E0B\u673A\u6784\u6177\u6168\u63D0\u4F9B\uFF1A"),ln={href:"http://www.jsdelivr.com/",target:"_blank",rel:"noopener noreferrer"},un=s("jsdelivr"),kn=p(`<p>\u4E5F\u5C31\u662F\u8BF4webjar\u5176\u5B9E\u5C31\u662F\uFF08\u5728\u672C\u9879\u76EE\uFF09\u901A\u8FC7maven\u5F15\u5165\u4F9D\u8D56\u7684\u65B9\u5F0F\u6765\u7BA1\u7406\u4E00\u4E9B\u9759\u6001\u8D44\u6E90\uFF0C\u6BD4\u5982\uFF1Ajs\u3001css\u7B49\u3002\u524D\u53F0\u5728\u5411\u540E\u7AEF\u8BF7\u6C42\u8D44\u6E90\u7684\u65F6\u5019\uFF0C\u53EA\u9700\u8981\u4F7F\u7528<code>/webjar/**</code>\u6765\u8BF7\u6C42\uFF0C\u6BD4\u5982\uFF1A</p><p>\u5728\u5F15\u5165jquery\u4E4B\u540E</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.webjars.npm<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jquery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.6.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+M+`" alt="image-20211208043058494"></p><p>\u518D\u4F7F\u7528<code>http://localhost:8080/webjars/jquery/3.6.0/dist/jquery.js</code>\u5C31\u53EF\u4EE5\u8BBF\u95EE\u5230\u8D44\u6E90</p><ol start="2"><li><code>/**</code>\u5339\u914D\u5230<code>Resources.CLASSPATH_RESOURCE_LOCATIONS</code></li></ol><p>classpath\u5728\u6B64\u5904\u6307\u7684\u662Fresources\u4E0B\u7684\u76EE\u5F55\uFF0C\u4E5F\u5C31\u662F\u6253\u5305\u8FD0\u884C\u65F6\u7684\u9879\u76EE\u76EE\u5F55\uFF08classes\uFF09</p><p>\u53EA\u8981\u662F\u8BF7\u6C42\u8DEF\u5F84\u4E2D\u7684\u4EFB\u610F\u8D44\u6E90\uFF08/**\uFF09\u53EA\u8981\u80FD\u548C<code>Resources.CLASSPATH_RESOURCE_LOCATIONS = { &quot;classpath:/META-INF/resources/&quot;,&quot;classpath:/resources/&quot;, &quot;classpath:/static/&quot;, &quot;classpath:/public/&quot; };</code>\u4E2D\u7684\u8FD9\u4E9B\u8D44\u6E90\u53EF\u4EE5\u5339\u914D\u5230\uFF0C\u5C31\u53EF\u4EE5\u5F97\u5230\u8FD9\u4E9B\u8D44\u6E90</p><ul><li>/META-INF/resources/ -&gt; resuources/META-INF/resources/</li><li>/resources/ -&gt; resources/resources/</li><li>/static/ -&gt; resources/static/</li><li>/public/ -&gt; resources/public/</li></ul><p>\u4F18\u5148\u7EA7\uFF1A<code>&quot;classpath:/META-INF/resources/&quot;,&quot;classpath:/resources/&quot;, &quot;classpath:/static/&quot;, &quot;classpath:/public/&quot;</code></p><ol start="3"><li>\u5982\u679C\u6211\u4EEC\u5728application.yaml\u4E2D\u81EA\u5DF1\u914D\u7F6E\u7684\u8BDD\uFF0C\u90A3\u4E48\u5B83\u5C31\u4F1A\u4F7F\u7528\u6211\u4EEC\u7684\u81EA\u5DF1\u7684\u914D\u7F6E\uFF0C\u4E0B\u9762\u7684\u914D\u7F6E\u5C31\u5931\u6548\u4E86</li></ol><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">mvc</span><span class="token punctuation">:</span>
    <span class="token key atrule">static-path-pattern</span><span class="token punctuation">:</span> /hello
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u9996\u9875\u548C\u56FE\u6807\u8BA2\u5236"><a class="header-anchor" href="#\u9996\u9875\u548C\u56FE\u6807\u8BA2\u5236" aria-hidden="true">#</a> \u9996\u9875\u548C\u56FE\u6807\u8BA2\u5236</h4><h5 id="\u9996\u9875\u8BA2\u5236"><a class="header-anchor" href="#\u9996\u9875\u8BA2\u5236" aria-hidden="true">#</a> \u9996\u9875\u8BA2\u5236</h5><p>\u6211\u4EEC\u8FD8\u662F\u770B<code>WebMvcAutoConfiguration</code>\u7684\u6E90\u7801</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">WelcomePageHandlerMapping</span> <span class="token function">welcomePageHandlerMapping</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">,</span>
                                                           <span class="token class-name">FormattingConversionService</span> mvcConversionService<span class="token punctuation">,</span> <span class="token class-name">ResourceUrlProvider</span> mvcResourceUrlProvider<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">WelcomePageHandlerMapping</span> welcomePageHandlerMapping <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WelcomePageHandlerMapping</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name">TemplateAvailabilityProviders</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">)</span><span class="token punctuation">,</span> applicationContext<span class="token punctuation">,</span> <span class="token function">getWelcomePage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>mvcProperties<span class="token punctuation">.</span><span class="token function">getStaticPathPattern</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  welcomePageHandlerMapping<span class="token punctuation">.</span><span class="token function">setInterceptors</span><span class="token punctuation">(</span><span class="token function">getInterceptors</span><span class="token punctuation">(</span>mvcConversionService<span class="token punctuation">,</span> mvcResourceUrlProvider<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  welcomePageHandlerMapping<span class="token punctuation">.</span><span class="token function">setCorsConfigurations</span><span class="token punctuation">(</span><span class="token function">getCorsConfigurations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> welcomePageHandlerMapping<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// ***</span>
<span class="token keyword">private</span> <span class="token class-name">Resource</span> <span class="token function">getWelcomePage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> location <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>resourceProperties<span class="token punctuation">.</span><span class="token function">getStaticLocations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Resource</span> indexHtml <span class="token operator">=</span> <span class="token function">getIndexHtml</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>indexHtml <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> indexHtml<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token class-name">ServletContext</span> servletContext <span class="token operator">=</span> <span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>servletContext <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">getIndexHtml</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ServletContextResource</span><span class="token punctuation">(</span>servletContext<span class="token punctuation">,</span> SERVLET_LOCATION<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token class-name">Resource</span> <span class="token function">getIndexHtml</span><span class="token punctuation">(</span><span class="token class-name">String</span> location<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">getIndexHtml</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>resourceLoader<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token doc-comment comment">/**
 * \u770B\u4F20\u5165\u7684\u53C2\u6570\u987A\u5E8F\uFF0C\u4F18\u5148\u7EA7\u81EA\u7136\u4E0D\u7528\u8BF4\u4E86
 * /META-INF/resources/
 * /resources/
 * /static/
 * /public/
 */</span>
<span class="token keyword">private</span> <span class="token class-name">Resource</span> <span class="token function">getIndexHtml</span><span class="token punctuation">(</span><span class="token class-name">Resource</span> location<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token class-name">Resource</span> resource <span class="token operator">=</span> location<span class="token punctuation">.</span><span class="token function">createRelative</span><span class="token punctuation">(</span><span class="token string">&quot;index.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>resource<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>resource<span class="token punctuation">.</span><span class="token function">getURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> resource<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E00\u822C\u9759\u6001\u8D44\u6E90\u90FD\u662F\u653E\u5728public\u6216\u8005static\u76EE\u5F55\u4E0B\uFF0C\u5176\u5B9E\u6211\u4EEC\u8FD9\u91CC\u4E5F\u53EF\u4EE5\u770B\u51FA\u6765\uFF0C\u5982\u679C\u662F\u60F3\u8981\u8BBF\u95EEhtml\u8D44\u6E90\uFF0C\u662F\u4E0D\u80FD\u653E\u5728tempaltes\u76EE\u5F55\u4E0B\u7684\uFF0Ctemplates\u90FD\u662F\u9700\u8981\u7ECF\u8FC7controller\u4E2D\u7684action\u6765\u8DF3\u8F6C\u7684</p><p><img src="`+A+`" alt="image-20211208053854453"></p><h5 id="\u56FE\u6807\u8BA2\u5236"><a class="header-anchor" href="#\u56FE\u6807\u8BA2\u5236" aria-hidden="true">#</a> \u56FE\u6807\u8BA2\u5236</h5><ol><li>springboot\u4E0D\u540C\u7248\u672C\u5BF9favicon\u7684\u652F\u6301</li></ol><p>\u5728\u65E9\u4E9B\u7248\u672C\u8FDB\u884C\u9ED8\u8BA4\u652F\u6301\uFF0C\u662F\u9ED8\u8BA4\u5F00\u542F\u7684</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">spring.mvc.favicon.enabled</span><span class="token punctuation">=</span><span class="token value attr-value">false ### \u5173\u95ED</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4F46\u5728Spring Boot\u9879\u76EE\u7684issues\u4E2D\u63D0\u51FA\uFF0C\u5982\u679C\u63D0\u4F9B\u9ED8\u8BA4\u7684Favicon\u53EF\u80FD\u4F1A\u5BFC\u81F4\u7F51\u7AD9\u4FE1\u606F\u6CC4\u9732\u3002\u5982\u679C\u7528\u6237\u4E0D\u8FDB\u884C\u81EA\u5B9A\u4E49\u7684Favicon\u7684\u8BBE\u7F6E\uFF0C\u800CSpring Boot\u9879\u76EE\u4F1A\u63D0\u4F9B\u9ED8\u8BA4\u7684\u4E0A\u56FE\u56FE\u6807\uFF0C\u90A3\u4E48\u52BF\u5FC5\u4F1A\u5BFC\u81F4\u6CC4\u9732\u7F51\u7AD9\u7684\u5F00\u53D1\u6846\u67B6</p><p>\u56E0\u6B64\uFF0C\u5728Spring Boot2.2.x\u4E2D\uFF0C\u5C06\u9ED8\u8BA4\u7684favicon.ico\u79FB\u9664\uFF0C\u540C\u65F6\u4E5F\u4E0D\u518D\u63D0\u4F9B\u4E0A\u8FF0application.properties\u4E2D\u7684\u5C5E\u6027\u914D\u7F6E</p><ol start="2"><li>\u81EA\u5B9A\u4E49favicon</li></ol><p>\u6B63\u5E38\u60C5\u51B5\u4E0B\uFF0C\u76F4\u63A5\u5C06\u547D\u540D\u4E3Afavicon.ico\u7684\u7F51\u7AD9\u56FE\u6807\u653E\u5728resources\u6216static\u76EE\u5F55\u5373\u53EF\u663E\u793A\uFF0C\u4F46\u5982\u679C\u4F7F\u7528\u7684\u7248\u672C\u65E0\u6CD5\u663E\u793A</p><p>\u9996\u5148\u6392\u9664\u6D4F\u89C8\u5668\u7F13\u5B58\u7684\u95EE\u9898\u3002\u5728\u64B0\u5199\u672C\u6587\u65F6\u591A\u6B21\u9047\u5230\u6D4F\u89C8\u5668\u7F13\u5B58\u5BFC\u81F4\u65E0\u6CD5\u5C55\u793A\u7684\u60C5\u51B5\u3002\u4E00\u822C\u64CD\u4F5C\u6B65\u9AA4\uFF0C\u6E05\u9664\u6D4F\u89C8\u5668\u7F13\u5B58\uFF0C\u91CD\u542F\u6D4F\u89C8\u5668\uFF0C\u5373\u53EF\u5C55\u793A</p><p>\u540C\u65F6\uFF0C\u5982\u679C\u9700\u8981\u5728\u9875\u9762\u4E2D\u901A\u8FC7\u4EE3\u7801\u8FDB\u884C\u5F15\u5165\u3002\u4E0B\u9762\u5C55\u793A\u4F7F\u7528Thymeleaf\u65F6\u7684\u5F15\u5165\u65B9\u5F0F\uFF1A</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>th</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.thymeleaf.org<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Hello Favicon<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/favicon.ico}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image/x-icon<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bookmark<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/favicon.ico}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image/x-icon<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Hello Favicon!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u4F7F\u7528\u5176\u4ED6\u524D\u7AEF\u6846\u67B6\uFF0C\u53EF\u4F7F\u7528\u5982\u4E0B\u65B9\u5F0F\uFF1A</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Hello Favicon<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/favicon.ico<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image/x-icon<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bookmark<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/favicon.ico<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image/x-icon<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Hello Favicon!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u5728\u6D4F\u89C8\u5668\u4E2D\u6253\u5F00\u7F51\u9875\u5E76\u6CA1\u6709\u5C55\u793A\u51FA\u6548\u679C\uFF0C\u5E76\u4E0D\u4EE3\u8868\u7A0B\u5E8F\u6CA1\u8D77\u6548\u3002\u8FD9\u65F6\uFF0C\u53EF\u91C7\u7528\u76F4\u63A5\u8BBF\u95EEfavicoin\u7684\u5F62\u5F0F\u6765\u9A8C\u8BC1\uFF0C\u53E6\u5916\uFF0C\u5728web\u9879\u76EE\u4E2D\uFF0C\u5982\u679C\u81EA\u5B9A\u4E49\u4E86Web\u76F8\u5173\u7EC4\u4EF6\u6216\u62E6\u622A\u5668\u4E5F\u6709\u53EF\u80FD\u5BFC\u81F4\u65E0\u6CD5\u663E\u793A\u6216404\uFF0C\u53EF\u5BF9\u5176\u8FDB\u884C\u6709\u9488\u5BF9\u6027\u7684\u6392\u67E5\uFF0C\u5F53\u51FA\u73B0\u8BBF\u95EE\u5931\u8D25\u7684\u65F6\u5019\uFF0C\u53EF\u4EE5\u5148\u67E5\u770Btarget\u76EE\u5F55\u4E0B\u662F\u5426\u6709favicon.ico\uFF0C\u5982\u679C\u6CA1\u6709\u5148\u6E05\u9664\u9879\u76EE\uFF0C\u7136\u540E\u5728\u91CD\u65B0\u542F\u52A8\u9879\u76EE</p><div class="language-http ext-http line-numbers-mode"><pre class="language-http"><code><span class="token header"><span class="token header-name keyword">http</span><span class="token punctuation">:</span><span class="token header-value">//localhost:8080/favicon.ico</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5728\u6D4F\u89C8\u5668\u8BBF\u95EE\u4E0A\u8FF0\u94FE\u63A5\uFF0C\u5982\u679C\u80FD\u591F\u5C55\u793A\u56FE\u6807\uFF0C\u5219\u8BF4\u660E\u5DF2\u7ECF\u53EF\u4EE5\u6B63\u5E38\u8BBF\u95EE\u4E86</p><h3 id="thymeleaf\u6A21\u677F\u5F15\u64CE"><a class="header-anchor" href="#thymeleaf\u6A21\u677F\u5F15\u64CE" aria-hidden="true">#</a> thymeleaf\u6A21\u677F\u5F15\u64CE</h3><p>\u4E3A\u4E86\u4F7F\u7528\u6237\u754C\u9762\u4E0E\u4E1A\u52A1\u6570\u636E\uFF08\u5185\u5BB9\uFF09\u5206\u79BB\u800C\u4EA7\u751F\u7684\uFF0C\u5B83\u53EF\u4EE5\u751F\u6210\u7279\u5B9A\u683C\u5F0F\u7684\u6587\u6863\uFF0C\u7528\u4E8E\u7F51\u7AD9\u7684\u6A21\u677F\u5F15\u64CE\u5C31\u4F1A\u751F\u6210\u4E00\u4E2A\u6807\u51C6\u7684html\u6587\u6863</p><p>\u73B0\u5728\u5728springboot\u4E0A\u4F7F\u7528\u7684\u6BD4\u8F83\u9891\u7E41\u7684\u6A21\u677F\u5F15\u64CE\u6709\uFF1A</p><ul><li>thymeleaf</li><li>freemaker</li></ul><p>\u6A21\u677F\u5F15\u64CE\u518D\u591A\u5176\u5B9E\u5B83\u4EEC\u7684\u601D\u60F3\u90FD\u662F\u4E00\u6837\u7684\uFF0C\u5C31\u662F\u901A\u8FC7\u89E3\u6790html\u6807\u7B7E\uFF0C\u5C06\u540E\u7AEF\u7ED9\u7684\u6570\u636E\u586B\u5145\u5230html\u4E0A\uFF0C\u5E76\u4F20\u7ED9\u524D\u7AEF\u6D4F\u89C8\u5668</p><p><img src="`+E+`" alt="image-20211208064122951"></p><h4 id="thymeleaf\u7684\u4F7F\u7528"><a class="header-anchor" href="#thymeleaf\u7684\u4F7F\u7528" aria-hidden="true">#</a> thymeleaf\u7684\u4F7F\u7528</h4><ol><li>\u5F15\u5165</li></ol><p>\u5BF9\u4E8Espringboot\u6765\u8BF4\uFF0C\u5176\u5B9E\u5C31\u662F\u4E00\u4E2Astarter\u7684\u4E8B</p><ul><li>\u5B98\u7F51\uFF1Ahttps://www.thymeleaf.org/</li><li>spring\u6587\u6863\u4E2D\u7684\u4F9D\u8D56\uFF1Ahttps://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using.build-systems.starters</li></ul><p>\u5BFC\u5165\u4F9D\u8D56</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-thymeleaf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>thymeleaf\u7684\u6240\u6709\u9875\u9762\u90FD\u662F\u5199\u5728templates\u76EE\u5F55\u4E0B\u3002</p><ol start="2"><li>\u914D\u7F6E</li></ol><p>\u6211\u4EEC\u73B0\u5728\u8FD8\u4E0D\u77E5\u9053thymeleaf\u6709\u4EC0\u4E48\u9ED8\u8BA4\u914D\u7F6E\u3001\u6211\u4EEC\u53EF\u4EE5\u914D\u7F6E\u4EC0\u4E48\u53C2\u6570\u7B49\uFF0C\u6240\u4EE5\u6211\u4EEC\u5148\u6765\u770B\u4E00\u4E0B\u5B83\u7684\u914D\u7F6E\u7C7B\u548C\u914D\u7F6E\u5C5E\u6027\u7C7B</p><p>ThymeleafAutoConfiguration</p><p><strong>ThymeleafProperties</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// \u9ED8\u8BA4\u7F16\u7801</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Charset</span> DEFAULT_ENCODING <span class="token operator">=</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8<span class="token punctuation">;</span>
<span class="token comment">// \u9ED8\u8BA4\u7684\u524D\u7F00</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> DEFAULT_PREFIX <span class="token operator">=</span> <span class="token string">&quot;classpath:/templates/&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// \u9ED8\u8BA4\u7684\u540E\u7F00</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> DEFAULT_SUFFIX <span class="token operator">=</span> <span class="token string">&quot;.html&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>springboot\u5B98\u65B9\u63D0\u4F9B\u7684\u914D\u7F6E\u5185\u5BB9\u5982\u4E0B</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment">## THYMELEAF (ThymeleafAutoConfiguration)</span>
<span class="token key attr-name">spring.thymeleaf.cache</span><span class="token punctuation">=</span><span class="token value attr-value">true ## Whether to enable template caching.</span>
<span class="token key attr-name">spring.thymeleaf.check-template</span><span class="token punctuation">=</span><span class="token value attr-value">true ## Whether to check that the template exists before rendering it.</span>
<span class="token key attr-name">spring.thymeleaf.check-template-location</span><span class="token punctuation">=</span><span class="token value attr-value">true ## Whether to check that the templates location exists.</span>
<span class="token key attr-name">spring.thymeleaf.enabled</span><span class="token punctuation">=</span><span class="token value attr-value">true ## Whether to enable Thymeleaf view resolution for Web frameworks.</span>
<span class="token key attr-name">spring.thymeleaf.enable-spring-el-compiler</span><span class="token punctuation">=</span><span class="token value attr-value">false ## Enable the SpringEL compiler in SpringEL expressions.</span>
<span class="token key attr-name">spring.thymeleaf.encoding</span><span class="token punctuation">=</span><span class="token value attr-value">UTF-8 ## Template files encoding.</span>
<span class="token key attr-name">spring.thymeleaf.excluded-view-names</span><span class="token punctuation">=</span> <span class="token value attr-value">## Comma-separated list of view names (patterns allowed) that should be excluded from resolution.</span>
<span class="token key attr-name">spring.thymeleaf.mode</span><span class="token punctuation">=</span><span class="token value attr-value">HTML ## Template mode to be applied to templates. See also Thymeleaf&#39;s TemplateMode enum.</span>
<span class="token key attr-name">spring.thymeleaf.prefix</span><span class="token punctuation">=</span><span class="token value attr-value">classpath:/templates/ ## Prefix that gets prepended to view names when building a URL.</span>
<span class="token key attr-name">spring.thymeleaf.reactive.chunked-mode-view-names</span><span class="token punctuation">=</span> <span class="token value attr-value">## Comma-separated list of view names (patterns allowed) that should be the only ones executed in CHUNKED mode when a max chunk size is set.</span>
<span class="token key attr-name">spring.thymeleaf.reactive.full-mode-view-names</span><span class="token punctuation">=</span> <span class="token value attr-value">## Comma-separated list of view names (patterns allowed) that should be executed in FULL mode even if a max chunk size is set.</span>
<span class="token key attr-name">spring.thymeleaf.reactive.max-chunk-size</span><span class="token punctuation">=</span><span class="token value attr-value">0 ## Maximum size of data buffers used for writing to the response, in bytes.</span>
<span class="token key attr-name">spring.thymeleaf.reactive.media-types</span><span class="token punctuation">=</span> <span class="token value attr-value">## Media types supported by the view technology.</span>
<span class="token key attr-name">spring.thymeleaf.servlet.content-type</span><span class="token punctuation">=</span><span class="token value attr-value">text/html ## Content-Type value written to HTTP responses.</span>
<span class="token key attr-name">spring.thymeleaf.suffix</span><span class="token punctuation">=</span><span class="token value attr-value">.html ## Suffix that gets appended to view names when building a URL.</span>
<span class="token key attr-name">spring.thymeleaf.template-resolver-order</span><span class="token punctuation">=</span> <span class="token value attr-value">## Order of the template resolver in the chain.</span>
<span class="token key attr-name">spring.thymeleaf.view-names</span><span class="token punctuation">=</span> <span class="token value attr-value">## Comma-separated list of view names (patterns allowed) that can be resolved.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u7684\u914D\u7F6E\u6709\u4E9B\u6211\u4EEC\u53EF\u80FD\u4E0D\u5E38\u4F7F\u7528\uFF0C\u56E0\u4E3ASpringboot\u5B98\u65B9\u505A\u4E86\u9ED8\u8BA4\u914D\u7F6E\u5927\u90E8\u5206\u80FD\u591F\u6EE1\u8DB3\u6211\u4EEC\u7684\u4F7F\u7528\u9700\u6C42\uFF0C\u4F46\u5982\u679C\u4F60\u7684\u9879\u76EE\u6709\u7279\u6B8A\u9700\u6C42\u4E5F\u9700\u8981\u59A5\u5584\u4F7F\u7528\u8FD9\u4E9B\u914D\u7F6E</p><p>\u6BD4\u5982<code>spring.thymeleaf.cache=false</code>\u662F\u5426\u5141\u8BB8\u9875\u9762\u7F13\u5B58\u7684\u914D\u7F6E\uFF0C\u6211\u4EEC\u5728\u5F00\u53D1\u65F6\u5019\u8981\u786E\u4FDD\u9875\u9762\u662F\u6700\u65B0\u7684\u6240\u4EE5\u9700\u8981\u7981\u7528\u7F13\u5B58\uFF1B\u800C\u5728\u4E0A\u7EBF\u8FD0\u8425\u65F6\u53EF\u80FD\u9875\u9762\u4E0D\u5E38\u6539\u52A8\u4E3A\u4E86\u51CF\u5C11\u670D\u52A1\u7AEF\u538B\u529B\u4EE5\u53CA\u63D0\u5347\u5BA2\u6237\u7AEF\u54CD\u5E94\u901F\u5EA6\u4F1A\u5141\u8BB8\u9875\u9762\u7F13\u5B58\u7684\u4F7F\u7528</p><p>\u518D\u6BD4\u5982\u5728\u5F00\u53D1\u867D\u7136\u6211\u4EEC\u5927\u90E8\u5206\u4F7F\u7528UTF-8\u591A\u4E00\u4E9B\uFF0C\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528<code>spring.thymeleaf.encoding=UTF-8</code>\u6765\u786E\u5B9A\u9875\u9762\u7684\u7F16\u7801\uFF0C\u4F46\u5982\u679C\u4F60\u7684\u9879\u76EE\u662FGBK\u7F16\u7801\u5C31\u9700\u8981\u5C06\u5B83\u6539\u6210GBK</p><p>\u53E6\u5916Springboot\u9ED8\u8BA4\u6A21\u677F\u5F15\u64CE\u6587\u4EF6\u662F\u653E\u5728templates\u76EE\u5F55\u4E0B\uFF1A<code>spring.thymeleaf.prefix=classpath:/templates/</code>,\u5982\u679C\u4F60\u6709\u9700\u6C42\u5C06\u6A21\u677F\u5F15\u64CE\u4E5F\u53EF\u4FEE\u6539\u914D\u7F6E\uFF0C\u5C06templates\u6539\u4E3A\u81EA\u5DF1\u9700\u8981\u7684\u76EE\u5F55\u3002\u540C\u7406\u5176\u4ED6\u7684\u914D\u7F6E\u5982\u679C\u9700\u8981\u81EA\u5B9A\u4E49\u5316\u4E5F\u53EF\u53C2\u7167\u4E0A\u9762\u914D\u7F6E\u8FDB\u884C\u4FEE\u6539</p><ol start="3"><li>\u521B\u5EFA\u4E00\u4E2Aaction\u548C\u5BF9\u5E94\u8981\u8DF3\u8F6C\u7684test.html\u6587\u4EF6</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/test&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ModelAndView</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">ModelAndView</span> modelAndView<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      	modelAndView<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u5F20\u4E09&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        modelAndView<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> modelAndView<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u521B\u5EFA\u5E76\u7F16\u5199html\u9875\u9762</li></ol><p>\u8981\u4F7F\u7528thymeleaf\u5C31\u8981\u5148\u5BFC\u5165\u8BED\u6CD5\u7EA6\u675F\u7684\u547D\u540D\u7A7A\u95F4</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>th</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.thymeleaf.org<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>th</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.thymeleaf.org<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--\u6240\u6709\u7684html\u5143\u7D20\u90FD\u53EF\u4EE5\u88ABthymeleaf\u63A5\u7BA1\uFF0Cth:xxx--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${name}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u90A3\u4E48\u5E26\u7740<code>th:text=&quot;\${name}&quot;</code>\u7684h1\u5143\u7D20\u7684\u5185\u5BB9\u5C31\u4F1A\u88AB\u6E32\u67D3\u6210\u6211\u4EEC\u7684\u6570\u636E</p><h4 id="thymeleaf\u7684\u57FA\u672C\u8BED\u6CD5"><a class="header-anchor" href="#thymeleaf\u7684\u57FA\u672C\u8BED\u6CD5" aria-hidden="true">#</a> thymeleaf\u7684\u57FA\u672C\u8BED\u6CD5</h4><h5 id="\u5E38\u7528\u6807\u7B7E"><a class="header-anchor" href="#\u5E38\u7528\u6807\u7B7E" aria-hidden="true">#</a> \u5E38\u7528\u6807\u7B7E</h5><p>Thymeleaf\u901A\u8FC7\u7279\u6B8A\u7684\u6807\u7B7E\u6765\u5BFB\u627E\u5C5E\u4E8EThymeleaf\u7684\u90E8\u5206\uFF0C\u5E76\u6E32\u67D3\u8BE5\u90E8\u5206\u5185\u5BB9\uFF0C\u800C\u9664\u4E86\u4E0A\u9762\u5C55\u793A\u8FC7\u7684<code>th:text</code>\u4E4B\u5916\u8FD8\u6709\u5F88\u591A\u5E38\u7528\u6807\u7B7E\uFF0C\u5E76\u4E14Thymeleaf\u4E5F\u4E3B\u8981\u901A\u8FC7\u6807\u7B7E\u6765\u8BC6\u522B\u66FF\u6362\u5BF9\u5E94\u4F4D\u7F6E\u5185\u5BB9\uFF0CThymeleaf\u6807\u7B7E\u6709\u5F88\u591A\u5F88\u591A\uFF0C\u529F\u80FD\u4E5F\u5F88\u4E30\u5BCC\uFF0C\u8FD9\u91CC\u5217\u4E3E\u4E00\u4E9B\u6BD4\u8F83\u5E38\u7528\u7684\u6807\u7B7E\u5982\u4E0B\uFF1A</p><table><thead><tr><th style="text-align:left;">\u6807\u7B7E</th><th style="text-align:left;">\u4F5C\u7528</th><th style="text-align:left;">\u793A\u4F8B</th></tr></thead><tbody><tr><td style="text-align:left;">th:id</td><td style="text-align:left;">\u66FF\u6362id</td><td style="text-align:left;"><code>&lt;input th:id=&quot;\${user.id}&quot;/&gt;</code></td></tr><tr><td style="text-align:left;">th:text</td><td style="text-align:left;">\u6587\u672C\u66FF\u6362</td><td style="text-align:left;"><code>&lt;p text:=&quot;\${user.name}&quot;&gt;bigsai&lt;/p&gt;</code></td></tr><tr><td style="text-align:left;">th:utext</td><td style="text-align:left;">\u652F\u6301html\u7684\u6587\u672C\u66FF\u6362</td><td style="text-align:left;"><code>&lt;p utext:=&quot;\${htmlcontent}&quot;&gt;content&lt;/p&gt;</code></td></tr><tr><td style="text-align:left;">th:object</td><td style="text-align:left;">\u66FF\u6362\u5BF9\u8C61</td><td style="text-align:left;"><code>&lt;div th:object=&quot;\${user}&quot;&gt;&lt;/div&gt;</code></td></tr><tr><td style="text-align:left;">th:value</td><td style="text-align:left;">\u66FF\u6362\u503C</td><td style="text-align:left;"><code>&lt;input th:value=&quot;\${user.name}&quot; &gt;</code></td></tr><tr><td style="text-align:left;">th:each</td><td style="text-align:left;">\u8FED\u4EE3</td><td style="text-align:left;"><code>&lt;tr th:each=&quot;student:\${user}&quot; &gt;</code></td></tr><tr><td style="text-align:left;">th:href</td><td style="text-align:left;">\u66FF\u6362\u8D85\u94FE\u63A5</td><td style="text-align:left;"><code>&lt;a th:href=&quot;@{index.html}&quot;&gt;\u8D85\u94FE\u63A5&lt;/a&gt;</code></td></tr><tr><td style="text-align:left;">th:src</td><td style="text-align:left;">\u66FF\u6362\u8D44\u6E90</td><td style="text-align:left;"><code>&lt;script type=&quot;text/javascript&quot; th:src=&quot;@{index.js}&quot;&gt;&lt;/script&gt;</code></td></tr></tbody></table><h5 id="\u8868\u8FBE\u5F0F"><a class="header-anchor" href="#\u8868\u8FBE\u5F0F" aria-hidden="true">#</a> \u8868\u8FBE\u5F0F</h5><p>\u6807\u51C6\u8868\u8FBE\u5F0F\u529F\u80FD\u7684\u5FEB\u901F\u6458\u8981\uFF0C\u6240\u6709\u7684\u8FD9\u4E9B\u8868\u8FBE\u5F0F\u90FD\u662F\u53EF\u4EE5\u7EC4\u5408\u6216\u8005\u5D4C\u5957\u7684\uFF1A</p><ul><li>\u7B80\u5355\u7684\u8868\u8FBE\uFF1A <ul><li>\u53D8\u91CF\u8868\u8FBE\u5F0F\uFF1A <code>\${...}</code></li><li>\u9009\u62E9\u53D8\u91CF\u8868\u8FBE\u5F0F\uFF1A <code>*{...}</code></li><li>\u6D88\u606F\u8868\u8FBE\uFF1A <code>#{...}</code></li><li>\u94FE\u63A5 URL \u8868\u8FBE\u5F0F\uFF1A <code>@{...}</code></li><li>\u7247\u6BB5\u8868\u8FBE\u5F0F\uFF1A <code>~{...}</code></li></ul></li><li>\u6587\u5B57 <ul><li>\u6587\u672C\u5B57\u9762\u91CF\uFF1A<code>&#39;one text&#39;</code>, <code>&#39;Another one!&#39;</code>,...</li><li>\u6570\u5B57\u5B57\u9762\u91CF\uFF1A<code>0</code>, <code>34</code>, <code>3.0</code>, <code>12.3</code>,...</li><li>\u5E03\u5C14\u6587\u5B57\uFF1A<code>true</code>,<code>false</code></li><li>\u7A7A\u5B57\u9762\u91CF\uFF1A <code>null</code></li><li>\u6587\u5B57\u6807\u8BB0\uFF1A<code>one</code>, <code>sometext</code>, <code>main</code>,...</li></ul></li><li>\u6587\u5B57\u64CD\u4F5C\uFF1A <ul><li>\u5B57\u7B26\u4E32\u8FDE\u63A5\uFF1A <code>+</code></li><li>\u5B57\u9762\u66FF\u6362\uFF1A <code>|The name is \${name}|</code></li></ul></li><li>\u7B97\u672F\u8FD0\u7B97\uFF1A <ul><li>\u4E8C\u5143\u8FD0\u7B97\u7B26\uFF1A<code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>,<code>%</code></li><li>\u51CF\u53F7\uFF08\u4E00\u5143\u8FD0\u7B97\u7B26\uFF09\uFF1A <code>-</code></li></ul></li><li>\u5E03\u5C14\u8FD0\u7B97\uFF1A <ul><li>\u4E8C\u5143\u8FD0\u7B97\u7B26\uFF1A<code>and</code>,<code>or</code></li><li>\u5E03\u5C14\u5426\u5B9A\uFF08\u4E00\u5143\u8FD0\u7B97\u7B26\uFF09\uFF1A<code>!</code>,<code>not</code></li></ul></li><li>\u6BD4\u8F83\u4E0E\u76F8\u7B49\uFF1A <ul><li>\u6BD4\u8F83\u5668\uFF1A<code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code>, <code>&lt;=</code>( <code>gt</code>, <code>lt</code>, <code>ge</code>, <code>le</code>)</li><li>\u7B49\u5F0F\u8FD0\u7B97\u7B26\uFF1A<code>==</code>, <code>!=</code>( <code>eq</code>, <code>ne</code>)</li></ul></li><li>\u6761\u4EF6\u8FD0\u7B97\u7B26\uFF1A <ul><li>\u5982\u679C-\u90A3\u4E48\uFF1A <code>(if) ? (then)</code></li><li>\u5982\u679C-\u90A3\u4E48-\u5176\u4ED6\uFF1A <code>(if) ? (then) : (else)</code></li><li>\u9ED8\u8BA4\uFF1A <code>(value) ?: (defaultvalue)</code></li></ul></li><li>\u7279\u6B8A\u4EE4\u724C\uFF1A <ul><li>\u65E0\u64CD\u4F5C\uFF1A <code>_</code></li></ul></li></ul><ol><li>\u94FE\u63A5\u8868\u8FBE\u5F0F\uFF1A<code>@{...}</code></li></ol><p>\u5728Thymeleaf \u4E2D\uFF0C\u5982\u679C\u60F3\u5F15\u5165\u94FE\u63A5\u6BD4\u5982link\uFF0Chref\uFF0Csrc\uFF0C\u9700\u8981\u4F7F\u7528<code>@{\u8D44\u6E90\u5730\u5740}</code>\u5F15\u5165\u8D44\u6E90\u3002\u5176\u4E2D\u8D44\u6E90\u5730\u5740\u53EF\u4EE5static\u76EE\u5F55\u4E0B\u7684\u9759\u6001\u8D44\u6E90\uFF0C\u4E5F\u53EF\u4EE5\u662F\u4E92\u8054\u7F51\u4E2D\u7684\u7EDD\u5BF9\u8D44\u6E90</p><ul><li>\u5F15\u5165css</li></ul><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{index.css}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>\u5F15\u5165js</li></ul><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{index.js}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>\u8D85\u94FE\u63A5</li></ul><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{index.html}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u8D85\u94FE\u63A5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>\u53D8\u91CF\u8868\u8FBE\u5F0F\uFF1A<code>\${...}</code></li></ol><p>\u5728Thymeleaf\u4E2D\u53EF\u4EE5\u901A\u8FC7\${\u2026}\u8FDB\u884C\u53D6\u503C\uFF0C\u8FD9\u70B9\u548CONGL\u8868\u8FBE\u5F0F\u8BED\u6CD5\u4E00\u81F4\u3002\u4F8B\u5982\u54B1\u4EEC\u521B\u5EFA\u8FD9\u4E48\u4E00\u4E2A\u5BF9\u8C61\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> detail<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7136\u540E\u521B\u5EFA\u4E00\u4E2Aaction\u5C06\u6570\u636E\u4F20\u8F93\u5230\u9875\u9762</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/test&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u666E\u901A\u5B57\u7B26\u4E32</span>
        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;desc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;TestController.test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u5BF9\u8C61</span>
        <span class="token keyword">final</span> <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F20\u4E09&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">&quot;\u6211\u662F\u5927\u50BB\u903C&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u96C6\u5408</span>
        <span class="token keyword">final</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F20\u4E091&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">&quot;\u6211\u662F\u5927\u50BB\u903C1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F20\u4E092&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">&quot;\u6211\u662F\u5927\u50BB\u903C2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F20\u4E093&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">&quot;\u6211\u662F\u5927\u50BB\u903C3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// map</span>
        <span class="token keyword">final</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;province&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u5E7F\u4E1C\u7701&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;city&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u5E7F\u5DDE\u5E02&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;map&quot;</span><span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u89C6\u56FE\u89E3\u6790\u63A5\u6536\u5230\u6570\u636E\u5E76\u89E3\u6790test.html\u586B\u5145\u6570\u636E</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>th</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.thymeleaf.org<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--\u6240\u6709\u7684html\u5143\u7D20\u90FD\u53EF\u4EE5\u88ABthymeleaf\u63A5\u7BA1\uFF0Cth:xxx--&gt;</span>
    \u5B57\u7B26\u4E32\uFF1A
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&#39;</span>\u6765\u81EA\uFF1A<span class="token punctuation">&#39;</span>+\${desc}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>
    \u5BF9\u8C61\uFF1A
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${user.name}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${user.age}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${user.detail}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>
    List\u96C6\u5408\uFF1A
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>one:\${list}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${one}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>
    Map\u76F4\u63A5\u53D6\u503C\uFF1A
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${map.get(<span class="token punctuation">&#39;</span>province<span class="token punctuation">&#39;</span>)}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> :
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${map.get(<span class="token punctuation">&#39;</span>city<span class="token punctuation">&#39;</span>)}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    Map\u904D\u5386\uFF1A
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>one:\${map}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${one.key}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> :
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${one.value}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7ED3\u679C\uFF1A</p><p><img src="`+R+`" alt="image-20211208151209610"></p><ol start="3"><li>\u9009\u62E9\u53D8\u91CF\u8868\u8FBE\u5F0F\uFF1A <code>*{...}</code></li></ol><p>\u53D8\u91CF\u8868\u8FBE\u5F0F\u4E0D\u4EC5\u53EF\u4EE5\u5199\u6210\${...}\uFF0C\u800C\u4E14\u8FD8\u53EF\u4EE5\u5199\u6210*{...}\u3002</p><p>\u4F46\u662F\uFF0C\u6709\u4E00\u4E2A\u91CD\u8981\u7684\u533A\u522B\uFF1A\u661F\u53F7\u8BED\u6CD5\u5BF9\u9009\u5B9A\u5BF9\u8C61\u800C\u4E0D\u662F\u6574\u4E2A\u4E0A\u4E0B\u6587\u8BC4\u4F30\u8868\u8FBE\u5F0F\u3002\u4E5F\u5C31\u662F\u8BF4\uFF0C\u53EA\u8981\u6CA1\u6709\u9009\u5B9A\u7684\u5BF9\u8C61\uFF0C\u7F8E\u5143(<code>\${\u2026}</code>)\u548C\u661F\u53F7(<code>*{...}</code>)\u7684\u8BED\u6CD5\u5C31\u5B8C\u5168\u4E00\u6837\u3002<code>*{\u2026}</code>\u4E5F\u53EF\u548C<code>\${\u2026}</code>\u6DF7\u7528\u3002</p><p>\u4EC0\u4E48\u662F\u9009\u5B9A\u5BF9\u8C61\uFF1F\u4F7F\u7528<code>th:object</code>\u5C5E\u6027\u7684\u8868\u8FBE\u5F0F\u7684\u7ED3\u679C\u3002\u5C31\u53EF\u4EE5\u9009\u5B9A\u5BF9\u8C61\uFF0C\u5177\u4F53\u5B9E\u4F8B\u5982\u4E0B\uFF1A</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    \u5BF9\u8C61\uFF1A
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>object</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${user}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>*{name}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>*{age}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>*{detail}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    \u6DF7\u7528\uFF1A
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Name: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>*{user.name}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Age: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${user.age}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Detail: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${user.detail}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u9875\u9762\u7ED3\u679C</p><p><img src="`+I+`" alt="image-20211208152202580"></p><ol start="4"><li>\u6D88\u606F\u8868\u8FBE\uFF1A<code> #{...}</code></li></ol><p>\u6587\u672C\u5916\u90E8\u5316\u662F\u4ECE\u6A21\u677F\u6587\u4EF6\u4E2D\u63D0\u53D6\u6A21\u677F\u4EE3\u7801\u7684\u7247\u6BB5\uFF0C\u4EE5\u4FBF\u53EF\u4EE5\u5C06\u5B83\u4EEC\u4FDD\u5B58\u5728\u5355\u72EC\u7684\u6587\u4EF6(\u901A\u5E38\u662F.properties\u6587\u4EF6)\u4E2D\uFF0C\u6587\u672C\u7684\u5916\u90E8\u5316\u7247\u6BB5\u901A\u5E38\u79F0\u4E3A\u201C\u6D88\u606F\u201D\u3002\u901A\u4FD7\u6613\u61C2\u7684\u6765\u8BF4<code>#{\u2026}</code>\u8BED\u6CD5\u5C31\u662F\u7528\u6765<strong>\u8BFB\u53D6\u914D\u7F6E\u6587\u4EF6\u4E2D\u6570\u636E</strong>\u7684\u3002\u5728Thymeleaf\u4F60\u53EF\u4EE5\u4F7F\u7528<code>#{...}</code>\u8BED\u6CD5\u83B7\u53D6\u6D88\u606F</p><p>\u53EF\u4EE5\u5E94\u7528\u5728\u56FD\u9645\u5316\u548C\u9519\u8BEF\u6D88\u606F\u63D0\u793A\u7B49\u65B9\u9762</p><h4 id="thymeleaf\u7684\u6A21\u677F\u5E03\u5C40"><a class="header-anchor" href="#thymeleaf\u7684\u6A21\u677F\u5E03\u5C40" aria-hidden="true">#</a> thymeleaf\u7684\u6A21\u677F\u5E03\u5C40</h4><h5 id="\u5F15\u7528\u6A21\u677F\u7247\u6BB5"><a class="header-anchor" href="#\u5F15\u7528\u6A21\u677F\u7247\u6BB5" aria-hidden="true">#</a> \u5F15\u7528\u6A21\u677F\u7247\u6BB5</h5><ol><li>\u5B9A\u4E49\u548C\u5F15\u7528\u7247\u6BB5</li></ol><p>\u5728\u6211\u4EEC\u7684\u6A21\u677F\u4E2D\uFF0C\u6211\u4EEC\u7ECF\u5E38\u5E0C\u671B\u5305\u542B\u6765\u81EA\u5176\u4ED6\u6A21\u677F\u7684\u90E8\u5206\uFF0C\u5982\u9875\u811A\u3001\u9875\u7709\u3001\u83DC\u5355\u2026</p><p>\u4E3A\u4E86\u505A\u5230\u8FD9\u4E00\u70B9\uFF0CThymeleaf\u9700\u8981\u6211\u4EEC\u5B9A\u4E49\u8FD9\u4E9B\u90E8\u5206\uFF0C\u5305\u62EC\u201C\u7247\u6BB5\u201D\uFF0C\u8FD9\u53EF\u4EE5\u4F7F\u7528th:fragment\u5C5E\u6027\u6765\u5B8C\u6210\u3002</p><p>\u5047\u8BBE\u6211\u4EEC\u60F3\u6DFB\u52A0\u4E00\u4E2A\u6807\u51C6\u7684\u7248\u6743\u9875\u811A\uFF0C\u90A3\u4E48\u6211\u4EEC\u5C31\u521B\u5EFA\u4E00\u4E2A\u5305\u542B\u4EE5\u4E0B\u4EE3\u7801\u7684/templates/footer.html\u6587\u4EF6\uFF1A</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>th</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.thymeleaf.org<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>fragment</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>copy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token entity named-entity" title="\xA9">&amp;copy;</span> 2011 The Good Thymes Virtual Grocery
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0A\u9762\u7684\u4EE3\u7801\u5B9A\u4E49\u4E86\u4E00\u4E2A\u540D\u4E3Acopy\u7684\u7247\u6BB5\uFF0C\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528th:insert\u6216th:replace\u5C5E\u6027(\u4EE5\u53CAth:include\uFF0C\u5C3D\u7BA1\u81EAThymeleaf3.0\u4EE5\u540E\u4E0D\u518D\u63A8\u8350\u4F7F\u7528\u5B83)\u4E2D\u7684\u4E00\u4E2A\u6765\u5C06\u5B83\u5305\u542B\u5728\u4E3B\u9875\u4E2D\uFF1A</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>

  ...

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>insert</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>~{footer :: copy}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8BF7\u6CE8\u610F\uFF0Cth:insert\u9700\u8981\u4E00\u4E2A\u7247\u6BB5\u8868\u8FBE\u5F0F (~{...})\uFF0C\u8FD9\u662F\u4E00\u4E2A\u8FD4\u56DE\u7247\u6BB5\u7684\u8868\u8FBE\u5F0F\u3002\u4E0D\u8FC7\uFF0C\u5728\u4E0A\u9762\u7684\u4F8B\u5B50\u4E2D\uFF0C\u5B83\u662F\u4E00\u4E2A\u975E\u590D\u6742\u7684\u7247\u6BB5\u8868\u8FBE\u5F0F\uFF0C\u6240\u4EE5(~{,}) \u662F\u53EF\u9009\u7684\uFF0C\u6240\u4EE5\u4E0A\u9762\u7684\u4EE3\u7801\u76F8\u5F53\u4E8E\uFF1A</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>

  ...

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>insert</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer :: copy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u5F15\u5165\u7247\u6BB5\u8BED\u6CD5\u89C4\u8303</li></ol><p>\u6709\u4E09\u79CD\u4E0D\u540C\u7684\u683C\u5F0F</p><ul><li><code>~{templatename::selector}</code>\u5F15\u5165\u540D\u4E3A<code>templatename</code>\u7684\u6A21\u677F\u4E0A\u5E94\u7528\u6307\u5B9A\u7684\u6807\u8BB0\u9009\u62E9\u5668\u4EA7\u751F\u7684\u7247\u6BB5\uFF0C\u6BD4\u5982\uFF1A<code>~{footer :: copy}</code></li><li><code>~{templatename}</code>\u5F15\u5165\u540D\u4E3Atemplatename\u7684\u5B8C\u6574\u6A21\u677F</li><li><code>~{::selector}</code>\u6216<code>~{this::selector}</code>\u4ECE\u540C\u4E00\u4E2A\u6A21\u677F\u63D2\u5165\u4E00\u4E2A\u7247\u6BB5\uFF0C\u5339\u914D\u9009\u62E9\u5668\u3002\u5982\u679C\u5728\u8868\u8FBE\u5F0F\u51FA\u73B0\u7684\u6A21\u677F\u4E0A\u627E\u4E0D\u5230\uFF0C\u6A21\u677F\u8C03\u7528(\u63D2\u5165)\u7684\u5806\u6808\u5C06\u5411\u6700\u521D\u5904\u7406\u7684\u6A21\u677F(\u6839)\u904D\u5386\uFF0C\u76F4\u5230\u9009\u62E9\u5668\u5728\u67D0\u79CD\u7A0B\u5EA6\u4E0A\u5339\u914D</li></ul><p>\u4E0A\u9762\u4F8B\u5B50\u4E2D\u7684\u6A21\u677F\u540D\u548C\u9009\u62E9\u5668\u90FD\u53EF\u4EE5\u662F\u5168\u529F\u80FD\u8868\u8FBE\u5F0F(\u751A\u81F3\u662F\u6761\u4EF6\u8868\u8FBE\u5F0F\uFF01)\uFF0C\u6BD4\u5982</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>insert</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer :: (\${user.isAdmin}? #{footer.admin} : #{footer.normaluser})<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>\u5F15\u7528\u4E0D\u5E26th:fragment\u7684\u7247\u6BB5</li></ol><p>\u6211\u4EEC\u53EF\u4EE5\u5305\u542B\u4E0D\u4F7F\u7528\u4EFB\u4F55th:fragment\u5C5E\u6027\u7684\u7247\u6BB5\uFF1A</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>copy-section<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token entity named-entity" title="\xA9">&amp;copy;</span> 2011 The Good Thymes Virtual Grocery
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528\u4E0A\u9762\u7684\u7247\u6BB5\uFF0C\u53EA\u9700\u901A\u8FC7\u5B83\u7684id\u5C5E\u6027\u5F15\u7528\u5B83\uFF0C\u7C7B\u4F3C\u4E8ECSS\u9009\u62E9\u5668:</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  ...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>insert</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>~{footer :: #copy-section}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>th:insert,\u548Cth:replace(\u548Cth:include)\u4E4B\u95F4\u7684\u5DEE\u5F02</li></ol><ul><li><p>th:insert\u662F\u6700\u7B80\u5355\u7684:\u5B83\u5C06\u7B80\u5355\u5730\u63D2\u5165\u6307\u5B9A\u7684\u7247\u6BB5\u4F5C\u4E3A\u5176\u5BBF\u4E3B\u6807\u7B7E\u7684\u4E3B\u4F53</p></li><li><p>th:replace\u5B9E\u9645\u4E0A\u7528\u6307\u5B9A\u7684\u7247\u6BB5\u66FF\u6362\u5B83\u7684\u4E3B\u673A\u6807\u7B7E</p></li><li><p>th:include\u4E0Eth:insert\u7C7B\u4F3C\uFF0C\u4F46\u5B83\u5E76\u4E0D\u63D2\u5165\u7247\u6BB5\uFF0C\u800C\u662F\u53EA\u63D2\u5165\u8BE5\u7247\u6BB5\u7684\u5185\u5BB9</p></li></ul><p>\u50CF\u8FD9\u6837\u7684\u4E00\u4E2AHTML\u7247\u6BB5</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span> <span class="token attr-name"><span class="token namespace">th:</span>fragment</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>copy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token entity named-entity" title="\xA9">&amp;copy;</span> 2011 The Good Thymes Virtual Grocery
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728host <code>&lt;div&gt;</code>\u6807\u7B7E\u4E2D\u5305\u542B\u4E09\u6B21\uFF0C\u5982\u4E0B\u6240\u793A:</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>insert</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer :: copy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>replace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer :: copy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>include</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer :: copy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5C06\u5BFC\u81F4:</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>

  ...

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span><span class="token punctuation">&gt;</span></span>
      <span class="token entity named-entity" title="\xA9">&amp;copy;</span> 2011 The Good Thymes Virtual Grocery
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span><span class="token punctuation">&gt;</span></span>
    <span class="token entity named-entity" title="\xA9">&amp;copy;</span> 2011 The Good Thymes Virtual Grocery
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">&gt;</span></span>
	
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token entity named-entity" title="\xA9">&amp;copy;</span> 2011 The Good Thymes Virtual Grocery
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u53EF\u4F20\u9012\u53C2\u6570\u7247\u6BB5"><a class="header-anchor" href="#\u53EF\u4F20\u9012\u53C2\u6570\u7247\u6BB5" aria-hidden="true">#</a> \u53EF\u4F20\u9012\u53C2\u6570\u7247\u6BB5</h5><p>\u4E3A\u4E86\u4E3A\u6A21\u677F\u7247\u6BB5\u521B\u5EFA\u4E00\u4E2A\u66F4\u50CF\u51FD\u6570\u7684\u673A\u5236\uFF0C\u7528th:fragment\u5B9A\u4E49\u7684\u7247\u6BB5\u53EF\u4EE5\u6307\u5B9A\u4E00\u7EC4\u53C2\u6570</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>fragment</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>frag (onevar,twovar)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${onevar} + <span class="token punctuation">&#39;</span> - <span class="token punctuation">&#39;</span> + \${twovar}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u9700\u8981\u4F7F\u7528\u8FD9\u4E24\u79CD\u8BED\u6CD5\u4E4B\u4E00\u4ECEth:insert\u6216th:replace\u8C03\u7528\u7247\u6BB5:</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>replace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>::frag (\${value1},\${value2})<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>replace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>::frag (onevar=\${value1},twovar=\${value2})<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8BF7\u6CE8\u610F\uFF0C\u987A\u5E8F\u5728\u6700\u540E\u4E00\u4E2A\u9009\u9879\u4E2D\u5E76\u4E0D\u91CD\u8981:</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>replace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>::frag (twovar=\${value2},onevar=\${value1})<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol><li>\u4E0D\u5E26\u7247\u6BB5\u53C2\u6570\u7684\u7247\u6BB5\u5C40\u90E8\u53D8\u91CF</li></ol><p>\u5373\u4F7F\u7247\u6BB5\u7684\u5B9A\u4E49\u6CA1\u6709\u50CF\u8FD9\u6837\u7684\u53C2\u6570:</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>fragment</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>frag<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528\u4E0A\u9762\u6307\u5B9A\u7684\u7B2C\u4E8C\u79CD\u8BED\u6CD5\u6765\u8C03\u7528\u5B83\u4EEC(\u5E76\u4E14\u53EA\u6709\u7B2C\u4E8C\u79CD\u8BED\u6CD5):</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>replace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>::frag (onevar=\${value1},twovar=\${value2})<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8FD9\u76F8\u5F53\u4E8E\u5C06th:replace\u548Cth:with\u7EC4\u5408:</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>replace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>::frag<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>with</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onevar=\${value1},twovar=\${value2}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8BF7\u6CE8\u610F\uFF0C\u65E0\u8BBA\u7247\u6BB5\u662F\u5426\u6709\u53C2\u6570\u7B7E\u540D\uFF0C\u8FD9\u79CD\u5C40\u90E8\u53D8\u91CF\u7684\u89C4\u8303\u90FD\u4E0D\u4F1A\u5BFC\u81F4\u4E0A\u4E0B\u6587\u5728\u6267\u884C\u4E4B\u524D\u88AB\u6E05\u7A7A\u3002\u7247\u6BB5\u4ECD\u7136\u80FD\u591F\u50CF\u5F53\u524D\u4E00\u6837\u8BBF\u95EE\u8C03\u7528\u6A21\u677F\u4E2D\u4F7F\u7528\u7684\u6BCF\u4E2A\u4E0A\u4E0B\u6587\u53D8\u91CF</p><ol start="2"><li>th:assert \u5BF9\u4E8Ein-template\u58F0\u660E</li></ol><p>th:assert\u5C5E\u6027\u53EF\u4EE5\u6307\u5B9A\u4E00\u4E2A\u9017\u53F7\u5206\u9694\u7684\u8868\u8FBE\u5F0F\u5217\u8868\uFF0C\u8FD9\u4E9B\u8868\u8FBE\u5F0F\u5E94\u8BE5\u88AB\u6C42\u503C\u5E76\u4E3A\u6BCF\u6B21\u6C42\u503C\u751F\u6210true\uFF0C\u5426\u5219\u4F1A\u5F15\u53D1\u5F02\u5E38\u3002</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>assert</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${onevar},(\${twovar} != 43)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8FD9\u5BF9\u4E8E\u9A8C\u8BC1\u7247\u6BB5\u7B7E\u540D\u5904\u7684\u53C2\u6570\u975E\u5E38\u6709\u7528:</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span> <span class="token attr-name"><span class="token namespace">th:</span>fragment</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>contentheader(title)<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>assert</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${!#strings.isEmpty(title)}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5 id="\u4E0D\u4EC5\u4EC5\u662F\u7247\u6BB5\u63D2\u5165"><a class="header-anchor" href="#\u4E0D\u4EC5\u4EC5\u662F\u7247\u6BB5\u63D2\u5165" aria-hidden="true">#</a> \u4E0D\u4EC5\u4EC5\u662F\u7247\u6BB5\u63D2\u5165</h5><ol><li>\u53EF\u4F20\u9012\u53C2\u6570\u7247\u6BB5\u7528\u6765\u5F15\u5165\u7F51\u9875\u9700\u8981\u7684\u8D44\u6E90</li></ol><p>\u8BF7\u6CE8\u610F\u4E0B\u9762\u7247\u6BB5\u4E2Dtitle\u548Clinks\u53D8\u91CF\u7684\u4F7F\u7528:</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span> <span class="token attr-name"><span class="token namespace">th:</span>fragment</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>common_header(title,links)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span> <span class="token attr-name"><span class="token namespace">th:</span>replace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${title}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>The awesome application<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- Common styles and scripts --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>all<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/css/awesomeapp.css}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>shortcut icon<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/images/favicon.ico}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/sh/scripts/codebase.js}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!--/* Per-page placeholder for additional links */--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">th:</span>block</span> <span class="token attr-name"><span class="token namespace">th:</span>replace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${links}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6211\u4EEC\u73B0\u5728\u53EF\u4EE5\u79F0\u8FD9\u4E2A\u7247\u6BB5\u4E3A:</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span> <span class="token attr-name"><span class="token namespace">th:</span>replace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>base :: common_header(~{::title},~{::link})<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Awesome - Main<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/css/bootstrap.min.css}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/themes/smoothness/jquery-ui.css}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7ED3\u679C\u5C06\u4F7F\u7528\u6211\u4EEC\u8C03\u7528\u6A21\u677F\u4E2D\u7684\u5B9E\u9645<code>&lt;title&gt;</code>\u548C<code>&lt;link&gt;</code> \u6807\u8BB0\u4F5C\u4E3Atitle\u548Clink\u53D8\u91CF\u7684\u503C\uFF0C\u5BFC\u81F4\u6211\u4EEC\u7684\u7247\u6BB5\u5728\u63D2\u5165\u8FC7\u7A0B\u4E2D\u88AB\u5B9A\u5236:</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Awesome - Main<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- Common styles and scripts --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>all<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/awe/css/awesomeapp.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>shortcut icon<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/awe/images/favicon.ico<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/awe/sh/scripts/codebase.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/awe/css/bootstrap.min.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/awe/themes/smoothness/jquery-ui.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u4F7F\u7528\u7A7A\u7247\u6BB5</li></ol><p>\u4E00\u4E2A\u7279\u6B8A\u7684\u7247\u6BB5\u8868\u8FBE\u5F0F\uFF0C\u5373\u7A7A\u7247\u6BB5(~{})\uFF0C\u53EF\u4EE5\u7528\u4E8E\u6307\u5B9A\u65E0\u6807\u8BB0\u3002\u4F7F\u7528\u524D\u9762\u7684\u4F8B\u5B50:</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span> <span class="token attr-name"><span class="token namespace">th:</span>replace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>base :: common_header(~{::title},~{})<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Awesome - Main<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6CE8\u610F\u7247\u6BB5(links)\u7684\u7B2C\u4E8C\u4E2A\u53C2\u6570\u662F\u5982\u4F55\u8BBE\u7F6E\u4E3A\u7A7A\u7247\u6BB5\u7684\uFF0C\u56E0\u6B64\u4E0D\u4F1A\u4E3A&lt; th:block th:replace=&quot;\${links}&quot; /&gt;\u5757\u5199\u5165\u4EFB\u4F55\u5185\u5BB9:</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Awesome - Main<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!-- Common styles and scripts --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>all<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/awe/css/awesomeapp.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>shortcut icon<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/awe/images/favicon.ico<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/awe/sh/scripts/codebase.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u4F7F\u7528no-operation\u4EE4\u724C</li></ol><p>\u5982\u679C\u6211\u4EEC\u53EA\u60F3\u8BA9\u7247\u6BB5\u4F7F\u7528\u5176\u5F53\u524D\u6807\u8BB0\u4F5C\u4E3A\u9ED8\u8BA4\u503C\uFF0C\u5219no-op\u4E5F\u53EF\u4EE5\u7528\u4F5C\u7247\u6BB5\u7684\u53C2\u6570\u3002\u540C\u6837\uFF0C\u4F7F\u7528common_header\u793A\u4F8B:</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span> <span class="token attr-name"><span class="token namespace">th:</span>replace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>base :: common_header(_,~{::link})<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Awesome - Main<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/css/bootstrap.min.css}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/themes/smoothness/jquery-ui.css}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u67E5\u770B\u6807\u9898\u53C2\u6570(common_header\u7247\u6BB5\u7684\u7B2C\u4E00\u4E2A\u53C2\u6570)\u5982\u4F55\u8BBE\u7F6E\u4E3Ano-op (_)\uFF0C\u8FD9\u5C06\u5BFC\u81F4\u7247\u6BB5\u7684\u8FD9\u4E00\u90E8\u5206\u6839\u672C\u4E0D\u88AB\u6267\u884C(title = no-operation):</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span> <span class="token attr-name"><span class="token namespace">th:</span>replace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${title}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>The awesome application<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u7ED3\u679C\u662F:</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>The awesome application<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!-- Common styles and scripts --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>all<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/awe/css/awesomeapp.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>shortcut icon<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/awe/images/favicon.ico<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/awe/sh/scripts/codebase.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/awe/css/bootstrap.min.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/awe/themes/smoothness/jquery-ui.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u7247\u6BB5\u7684\u9AD8\u7EA7\u6761\u4EF6\u63D2\u5165</li></ol><p>emtpy\u7247\u6BB5\u548C\u65E0\u64CD\u4F5C\u4EE4\u724C\u7684\u53EF\u7528\u6027\u5141\u8BB8\u6211\u4EEC\u4EE5\u975E\u5E38\u7B80\u5355\u548C\u4F18\u96C5\u7684\u65B9\u5F0F\u6267\u884C\u7247\u6BB5\u7684\u6761\u4EF6\u63D2\u5165\u3002</p><p>\u4F8B\u5982\uFF0C\u6211\u4EEC\u53EF\u4EE5\u8FD9\u6837\u505A\uFF0C\u4EE5\u4FBF\u53EA\u6709\u5F53\u7528\u6237\u662F\u7BA1\u7406\u5458\u65F6\u624D\u63D2\u5165\u6211\u4EEC\u7684\u516C\u5171::adminhead\u7247\u6BB5\uFF0C\u5982\u679C\u4E0D\u662F\uFF0C\u5219\u4E0D\u63D2\u5165\u4EFB\u4F55\u5185\u5BB9(emtpy\u7247\u6BB5):</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>insert</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${user.isAdmin()} ? ~{common :: adminhead} : ~{}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6B64\u5916\uFF0C\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528no-operation\u6807\u8BB0\uFF0C\u4EE5\u4FBF\u4EC5\u5728\u6EE1\u8DB3\u6307\u5B9A\u6761\u4EF6\u65F6\u63D2\u5165\u7247\u6BB5\uFF0C\u4F46\u5982\u679C\u4E0D\u6EE1\u8DB3\u6761\u4EF6\uFF0C\u5219\u4FDD\u7559\u6807\u8BB0\u800C\u4E0D\u505A\u4FEE\u6539:</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>insert</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${user.isAdmin()} ? ~{common :: adminhead} : _<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    Welcome [[\${user.name}]], click <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/support}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>here<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span> for help-desk support.
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6B64\u5916\uFF0C\u5982\u679C\u6211\u4EEC\u5DF2\u7ECF\u914D\u7F6E\u4E86\u6A21\u677F\u89E3\u6790\u5668\u6765\u68C0\u67E5\u6A21\u677F\u8D44\u6E90\u7684\u5B58\u5728-\u901A\u8FC7\u5B83\u4EEC\u7684\u68C0\u67E5\u5B58\u5728\u6807\u5FD7\u2014\u2014\u6211\u4EEC\u53EF\u4EE5\u5728\u9ED8\u8BA4\u64CD\u4F5C\u4E2D\u4F7F\u7528\u7247\u6BB5\u672C\u8EAB\u7684\u5B58\u5728\u4F5C\u4E3A\u6761\u4EF6:</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- The body of the &lt;div&gt; will be used if the &quot;common :: salutation&quot; fragment  --&gt;</span>
<span class="token comment">&lt;!-- does not exist (or is empty).                                              --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>insert</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>~{common :: salutation} ?: _<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    Welcome [[\${user.name}]], click <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/support}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>here<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span> for help-desk support.
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u79FB\u9664\u6A21\u677F\u7247\u6BB5"><a class="header-anchor" href="#\u79FB\u9664\u6A21\u677F\u7247\u6BB5" aria-hidden="true">#</a> \u79FB\u9664\u6A21\u677F\u7247\u6BB5</h5><p>\u53EF\u4EE5\u901A\u8FC7th:remove\u79FB\u9664\u4E0D\u60F3\u7684\u6807\u7B7E\uFF0C\u8FD9\u4E2A\u6807\u7B7E\u53EF\u4EE5\u5E94\u7528\u5728\u5F53\u9875\u9762\u4E0D\u5B58\u5728\u8FD9\u4E9B\u7684\u65F6\u5019\uFF0C\u5C31\u4E0D\u8981\u663E\u793A\u4E00\u4E9B\u9884\u5148\u5B58\u5728\u9875\u9762\u4E2D\u7684\u9759\u6001\u4EE3\u7801\u5757\uFF0C\u6BD4\u5982\uFF0C\u9875\u9762\u4F7F\u7528\u8868\u683C\u6765\u4FEE\u9970\u6570\u636E\uFF0C\u5F53\u4E0D\u5B58\u5728\u6570\u636E\u65F6\uFF0C\u5C31\u4E0D\u5E94\u8BE5\u8BE5\u663E\u793A\u8868\u5934</p><p>th:remove\u53EF\u4EE5\u6709\u4E94\u79CD\u4E0D\u540C\u7684\u884C\u4E3A\u65B9\u5F0F\uFF0C\u5177\u4F53\u53D6\u51B3\u4E8E\u5176\u503C\uFF1A</p><ul><li><p>all:\u79FB\u9664\u5305\u542B\u6807\u7B7E\u53CA\u5176\u6240\u6709\u5B50\u6807\u7B7E\u3002</p></li><li><p>body: \u4E0D\u8981\u79FB\u9664\u5305\u542B\u6807\u7B7E\uFF0C\u800C\u662F\u79FB\u9664\u5B83\u7684\u6240\u6709\u5B50\u6807\u7B7E\u3002</p></li><li><p>tag: \u79FB\u9664\u5305\u542B\u6807\u7B7E\uFF0C\u4F46\u4E0D\u8981\u79FB\u9664\u5176\u5B50\u6807\u7B7E\u3002</p></li><li><p>all-but-first: \u79FB\u9664\u5305\u542B\u6807\u7B7E\u7684\u6240\u6709\u5B50\u6807\u7B7E\uFF0C\u7B2C\u4E00\u4E2A\u9664\u5916\u3002</p></li><li><p>none : \u4EC0\u4E48\u90FD\u4E0D\u505A\u3002\u8BE5\u503C\u5BF9\u4E8E\u52A8\u6001\u8BC4\u4F30\u975E\u5E38\u6709\u7528\u3002</p></li></ul><p>th:remove\u5C5E\u6027\u53EF\u4EE5\u91C7\u7528\u4EFB\u4F55Thymeleaf\u6807\u51C6\u8868\u8FBE\u5F0F\uFF0C\u53EA\u8981\u5B83\u8FD4\u56DE\u4E00\u4E2A\u5141\u8BB8\u7684\u5B57\u7B26\u4E32\u503C(all, tag, body, all-but-first\u6216none)\u3002</p><p>\u8FD9\u610F\u5473\u7740\u79FB\u9664\u53EF\u80FD\u662F\u6709\u6761\u4EF6\u7684\uFF0C\u4F8B\u5982:</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/something<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>remove</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${condition}? tag : none<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Link text not to be removed<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8FD8\u8981\u6CE8\u610F\uFF0Cth:remove\u8BA4\u4E3Anull\u662Fnone\u7684\u540C\u4E49\u8BCD\uFF0C\u56E0\u6B64\u4EE5\u4E0B\u64CD\u4F5C\u4E0E\u4E0A\u9762\u7684\u793A\u4F8B\u76F8\u540C:</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/something<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>remove</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${condition}? tag<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Link text not to be removed<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u5982\u679C\${condition}\u4E3Afalse\uFF0C\u5C06\u8FD4\u56DEnull\uFF0C\u56E0\u6B64\u4E0D\u4F1A\u6267\u884C\u5220\u9664</p><h5 id="\u5E03\u5C40\u7EE7\u627F"><a class="header-anchor" href="#\u5E03\u5C40\u7EE7\u627F" aria-hidden="true">#</a> \u5E03\u5C40\u7EE7\u627F</h5><p>\u4E3A\u4E86\u80FD\u591F\u5C06\u5355\u4E2A\u6587\u4EF6\u4F5C\u4E3A\u5E03\u5C40\uFF0C\u53EF\u4EE5\u4F7F\u7528\u7247\u6BB5\u3002\u4F7F\u7528th:fragment\u548Cth:replace\u7684\u5177\u6709\u6807\u9898\u548C\u5185\u5BB9\u7684\u7B80\u5355\u5E03\u5C40\u793A\u4F8B:</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name"><span class="token namespace">th:</span>fragment</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layout (title, content)<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>th</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.thymeleaf.org<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span> <span class="token attr-name"><span class="token namespace">th:</span>replace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${title}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Layout Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Layout H1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>replace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${content}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Layout content<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span><span class="token punctuation">&gt;</span></span>
        Layout footer
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8BE5\u793A\u4F8B\u58F0\u660E\u4E86\u4E00\u4E2A\u540D\u4E3Alayout\u7684\u7247\u6BB5\uFF0C\u8BE5\u7247\u6BB5\u4EE5\u6807\u9898\u548C\u5185\u5BB9\u4F5C\u4E3A\u53C2\u6570\u3002\u4E24\u8005\u90FD\u5C06\u5728\u7EE7\u627F\u5B83\u7684\u9875\u9762\u4E0A\u88AB\u4E0B\u9762\u793A\u4F8B\u4E2D\u63D0\u4F9B\u7684\u7247\u6BB5\u8868\u8FBE\u5F0F\u66FF\u6362\u3002</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name"><span class="token namespace">th:</span>replace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>~{layoutFile :: layout(~{::title}, ~{::section})}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Page Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Page content<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>Included on page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728\u8FD9\u4E2A\u6587\u4EF6\u4E2D\uFF0Chtml\u6807\u7B7E\u5C06\u88AB\u5E03\u5C40\u66FF\u6362\uFF0C\u4F46\u662F\u5728\u5E03\u5C40\u4E2D\u6807\u9898\u548C\u5185\u5BB9\u5C06\u5206\u522B\u88AB\u6807\u9898\u5757\u548C\u8282\u5757\u66FF\u6362\u3002</p><p>\u5982\u679C\u9700\u8981\uFF0C\u5E03\u5C40\u53EF\u4EE5\u7531\u51E0\u4E2A\u7247\u6BB5\u7EC4\u6210\uFF0C\u5982\u9875\u7709\u548C\u9875\u811A\u3002</p><h3 id="\u6269\u5C55\u548C\u88C5\u914Dmvc"><a class="header-anchor" href="#\u6269\u5C55\u548C\u88C5\u914Dmvc" aria-hidden="true">#</a> \u6269\u5C55\u548C\u88C5\u914DMVC</h3><h4 id="springmvc\u81EA\u52A8\u914D\u7F6E"><a class="header-anchor" href="#springmvc\u81EA\u52A8\u914D\u7F6E" aria-hidden="true">#</a> springmvc\u81EA\u52A8\u914D\u7F6E</h4><p>SpringBoot\u5BF9\u6211\u4EEC\u7684<code>SpringMVC</code>\u505A\u4E86\u54EA\u4E9B\u914D\u7F6E\uFF0C\u5305\u62EC<code>\u5982\u4F55\u6269\u5C55</code>\uFF0C<code>\u5982\u4F55\u5B9A\u5236</code></p><ul><li>\u5B98\u65B9\u6587\u6863\uFF1Ahttps://docs.spring.io/spring-boot/docs/2.5.6/reference/htmlsingle/#boot-features-spring-mvc-auto-configu%20ration</li><li>springboot\u4E3Aspringmvc\u63D0\u4F9B\u4E86\u81EA\u52A8\u914D\u7F6E\uFF0C\u53EF\u4EE5\u4E0E\u5927\u591A\u6570\u7684\u5E94\u7528\u5B8C\u7F8E\u914D\u5408</li><li>\u4EE5\u4E0B\u662Fsprinboot\u5BF9springmvc\u7684\u9ED8\u8BA4\u914D\u7F6E\u7C7B\uFF1A<code>org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration</code></li></ul><p>\u81EA\u52A8\u914D\u7F6E\u5728springmvc\u7684\u9ED8\u8BA4\u503C\u4E4B\u4E0A\u6DFB\u52A0\u4E86\u4EE5\u4E0B\u529F\u80FD\uFF1A</p><ul><li>\u5305\u542BContentNegotiatingViewResolver\u548CBeanNameViewResolver \u2013&gt; \u89C6\u56FE\u89E3\u6790\u5668</li><li>\u652F\u6301\u670D\u52A1\u9759\u6001\u8D44\u6E90\uFF0C\u5305\u62EC\u5BF9WebJars\u7684\u652F\u6301 \u2013&gt; \u9759\u6001\u8D44\u6E90\u6587\u4EF6\u5939\u8DEF\u5F84</li><li>\u81EA\u52A8\u6CE8\u518CConverter\u3001GenericConverter\u548CFormatterbeans\u2013&gt; \u8F6C\u6362\u5668\uFF0C\u683C\u5F0F\u5316\u5668</li><li>\u652F\u6301HttpMessageConverters \u2013&gt; SpringMVC\u7528\u6765\u8F6C\u6362Http\u8BF7\u6C42\u548C\u54CD\u5E94\u7684\uFF1AUser\u2014JSON</li><li>\u81EA\u52A8\u6CE8\u518CMessageCodesResolver \u2013&gt; \u5B9A\u4E49\u9519\u8BEF\u4EE3\u7801\u751F\u6210\u89C4\u5219</li><li>\u9759\u6001index.html\u652F\u6301 \u2013&gt; \u9759\u6001\u9996\u9875\u8BBF\u95EE</li><li>\u5B9A\u5236Favicon.ioc\u652F\u6301 \u2013&gt; \u7F51\u7AD9\u56FE\u6807</li><li>\u81EA\u52A8\u4F7F\u7528ConfigurableWebBindingInitializerbean</li></ul><p>\u5982\u4F55\u4FEE\u6539springmvc\u7684\u9ED8\u8BA4\u914D\u7F6E\uFF1A</p><ul><li><p>\u5982\u679C\u60F3\u4FDD\u7559 Spring Boot MVC \u7684\u529F\u80FD\uFF0C\u5E76\u4E14\u9700\u8981\u6DFB\u52A0\u5176\u4ED6 MVC\u914D\u7F6E\uFF08\u62E6\u622A\u5668\uFF0C\u683C\u5F0F\u5316\u7A0B\u5E8F\u548C\u89C6\u56FE\u63A7\u5236\u5668\u7B49\uFF09\uFF0C\u53EF\u4EE5\u6DFB\u52A0\u81EA\u5DF1\u7684<code>WebMvcConfigurer</code>\u7C7B\u578B\u7684<code>@Configuration</code>\u7C7B\uFF0C\u4F46\u4E0D\u80FD\u5E26<code>@EnableWebMvc</code>\u6CE8\u89E3</p></li><li><p>\u5982\u679C\u60A8\u60F3\u81EA\u5B9A\u4E49<code>RequestMappingHandlerMapping</code>\u3001<code>RequestMappingHandlerAdapter</code>\u6216\u8005<code>ExceptionHandlerExceptionResolver</code>\u5B9E\u4F8B\uFF0C\u53EF\u4EE5\u58F0\u660E\u4E00\u4E2A<code>ExceptionHandlerExceptionResolver</code>\u5B9E\u4F8B\u6765\u63D0\u4F9B\u8FD9\u4E9B\u7EC4\u4EF6</p></li><li><p>\u5982\u679C\u60A8\u60F3\u5B8C\u5168\u638C\u63A7 Spring MVC\uFF0C\u53EF\u4EE5\u6DFB\u52A0\u81EA\u5B9A\u4E49\u6CE8\u89E3\u4E86<code>@EnableWebMvc</code>\u7684<code>@Configuration</code>\u914D\u7F6E\u7C7B</p></li></ul><h4 id="\u89C6\u56FE\u89E3\u6790\u5668"><a class="header-anchor" href="#\u89C6\u56FE\u89E3\u6790\u5668" aria-hidden="true">#</a> \u89C6\u56FE\u89E3\u6790\u5668</h4><p>\u6839\u636E\u65B9\u6CD5\u7684<code>\u8FD4\u56DE\u503C</code>\u5F97\u5230\u89C6\u56FE\u5BF9\u8C61\uFF08View\uFF09\uFF0C\u89C6\u56FE\u5BF9\u8C61\u51B3\u5B9A\u5982\u4F55<code>\u6E32\u67D3</code>\uFF08\u8F6C\u53D1\uFF1F\u91CD\u5B9A\u5411\uFF1F\uFF09</p><ul><li>\u81EA\u52A8\u914D\u7F6E\u4E86ViewResolver</li><li>ContentNegotiatingViewResolver\uFF1A\u7EC4\u5408\u6240\u6709\u7684\u89C6\u56FE\u89E3\u6790\u5668\u7684</li></ul><p>\u6211\u4EEC\u6253\u5F00springboot\u9879\u76EE\u4E0Bweb\u7684\u81EA\u52A8\u914D\u7F6E\u7C7B<code>WebMvcAutoConfiguration</code>\uFF0C\u5176\u4E2D\u5C31\u6709\u6CE8\u5165\u89C6\u56FE\u89E3\u6790\u5668\u7684\u4EE3\u7801<code>ContentNegotiatingViewResolver</code>\u53EB\u4EC0\u4E48\u5185\u5BB9\u534F\u5546\u89C6\u56FE\u89E3\u6790\u5668\uFF0C\u4F1A\u6839\u636E\u4E0D\u540C\u7684\u89C6\u56FE\u6765\u627E\u5230\u6700\u5408\u9002\u7684\u89C6\u56FE\u89E3\u6790\u5668\u6765\u89E3\u6790\u5185\u5BB9</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@ConditionalOnBean</span><span class="token punctuation">(</span><span class="token class-name">ViewResolver</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;viewResolver&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token class-name">ContentNegotiatingViewResolver</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">ContentNegotiatingViewResolver</span> <span class="token function">viewResolver</span><span class="token punctuation">(</span><span class="token class-name">BeanFactory</span> beanFactory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">ContentNegotiatingViewResolver</span> resolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ContentNegotiatingViewResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  resolver<span class="token punctuation">.</span><span class="token function">setContentNegotiationManager</span><span class="token punctuation">(</span>beanFactory<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">ContentNegotiationManager</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ContentNegotiatingViewResolver uses all the other view resolvers to locate</span>
  <span class="token comment">// a view so it should have a high precedence</span>
  resolver<span class="token punctuation">.</span><span class="token function">setOrder</span><span class="token punctuation">(</span><span class="token class-name">Ordered</span><span class="token punctuation">.</span>HIGHEST_PRECEDENCE<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> resolver<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F53\u6211\u4EEC\u5728\u6D4F\u89C8\u5668\u83B7\u53D6\u7F51\u7AD9\u8D44\u6E90\u7684\u65F6\u5019\uFF0C\u5C31\u4F1A\u8C03\u7528<code>ContentNegotiatingViewResolver.resolveViewName</code>\u6765\u83B7\u53D6\u5230\u6700\u9002\u5408\u7684\u89C6\u56FE\u89E3\u6790\u5668</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token annotation punctuation">@Nullable</span>
<span class="token keyword">public</span> <span class="token class-name">View</span> <span class="token function">resolveViewName</span><span class="token punctuation">(</span><span class="token class-name">String</span> viewName<span class="token punctuation">,</span> <span class="token class-name">Locale</span> locale<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
  <span class="token class-name">RequestAttributes</span> attrs <span class="token operator">=</span> <span class="token class-name">RequestContextHolder</span><span class="token punctuation">.</span><span class="token function">getRequestAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span>attrs <span class="token keyword">instanceof</span> <span class="token class-name">ServletRequestAttributes</span><span class="token punctuation">,</span> <span class="token string">&quot;No current ServletRequestAttributes&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MediaType</span><span class="token punctuation">&gt;</span></span> requestedMediaTypes <span class="token operator">=</span> <span class="token function">getMediaTypes</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">ServletRequestAttributes</span><span class="token punctuation">)</span> attrs<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>requestedMediaTypes <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">View</span><span class="token punctuation">&gt;</span></span> candidateViews <span class="token operator">=</span> <span class="token function">getCandidateViews</span><span class="token punctuation">(</span>viewName<span class="token punctuation">,</span> locale<span class="token punctuation">,</span> requestedMediaTypes<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">View</span> bestView <span class="token operator">=</span> <span class="token function">getBestView</span><span class="token punctuation">(</span>candidateViews<span class="token punctuation">,</span> requestedMediaTypes<span class="token punctuation">,</span> attrs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bestView <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> bestView<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token class-name">String</span> mediaTypeInfo <span class="token operator">=</span> logger<span class="token punctuation">.</span><span class="token function">isDebugEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> requestedMediaTypes <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span>
    <span class="token string">&quot; given &quot;</span> <span class="token operator">+</span> requestedMediaTypes<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>useNotAcceptableStatusCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isDebugEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Using 406 NOT_ACCEPTABLE&quot;</span> <span class="token operator">+</span> mediaTypeInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> NOT_ACCEPTABLE_VIEW<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">else</span> <span class="token punctuation">{</span>
    logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;View remains unresolved&quot;</span> <span class="token operator">+</span> mediaTypeInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+_+`" alt="image-20211208181657086"></p><p>\u90A3\u4E48\u89C6\u56FE\u89E3\u6790\u5668\u53C8\u662F\u4ECE\u54EA\u91CC\u6765\u7684\u5462\uFF1F\u5728\`\`\u65F6\uFF0C\u5C31\u4F1A\u521B\u5EFA\u4E00\u4E9B\u89C6\u56FE\u89E3\u6790\u5668\uFF0C\u5176\u4E2D\u5305\u62EC\u6211\u4EEC\u81EA\u5B9A\u4E49\u7684\u89C6\u56FE\u89E3\u6790\u5668</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">initServletContext</span><span class="token punctuation">(</span><span class="token class-name">ServletContext</span> servletContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ViewResolver.class \u4ECEspring\u5BB9\u5668\u4E2D\u83B7\u53D6\u5230\u6240\u6709\u662F\u5B9E\u73B0\u4E86ViewResolver.class\u63A5\u53E3\u7684bean\uFF0C\u8FD9\u4E9B\u90FD\u662F\u662F\u4E00\u4E9B\u89C6\u56FE\u89E3\u6790\u5668</span>
  <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ViewResolver</span><span class="token punctuation">&gt;</span></span> matchingBeans <span class="token operator">=</span>
    <span class="token class-name">BeanFactoryUtils</span><span class="token punctuation">.</span><span class="token function">beansOfTypeIncludingAncestors</span><span class="token punctuation">(</span><span class="token function">obtainApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ViewResolver</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// \u5982\u679C\u89C6\u56FE\u89E3\u6790\u5668\u96C6\u5408\u4E3A\u7A7A\uFF0C\u5C31\u4F1A\u53BB\u521D\u59CB\u5316</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>viewResolvers <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>viewResolvers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>matchingBeans<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ViewResolver</span> viewResolver <span class="token operator">:</span> matchingBeans<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">!=</span> viewResolver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>viewResolvers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>viewResolver<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// \u5982\u679C\u89C6\u56FE\u89E3\u6790\u5668\u96C6\u5408\u4E0D\u4E3A\u7A7A\uFF0C\u5C31\u4F1A\u628A\u5F53\u524Dspring\u5BB9\u5668\u4E2D\u5B58\u5728\u7684\u4F46\u662F\u4E0D\u5728viewResolvers\u4E2D\u7684\u89C6\u56FE\u89E3\u6790\u5668\u521D\u59CB\u5316\u5E76\u6DFB\u52A0\u5230viewResolvers\u4E2D</span>
  <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>viewResolvers<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">ViewResolver</span> vr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>viewResolvers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>matchingBeans<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>vr<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">continue</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token class-name">String</span> name <span class="token operator">=</span> vr<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> i<span class="token punctuation">;</span>
      <span class="token function">obtainApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAutowireCapableBeanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">initializeBean</span><span class="token punctuation">(</span>vr<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token class-name">AnnotationAwareOrderComparator</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>viewResolvers<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>cnmFactoryBean<span class="token punctuation">.</span><span class="token function">setServletContext</span><span class="token punctuation">(</span>servletContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u90A3\u4E48\u5982\u679C\u6211\u4EEC\u60F3\u8981\u81EA\u5B9A\u4E49\u89C6\u56FE\u89E3\u6790\u5668\uFF0C\u5C31\u53EF\u4EE5\u5B9A\u4E49\u4E00\u4E2A\u7C7B\u7EE7\u627FViewResolver\u7136\u540E\u6CE8\u5165\u5230spring\u5BB9\u5668\u4E2D\uFF0C\u901A\u8FC7mvc\u7684\u81EA\u52A8\u914D\u7F6E\u5C31\u53EF\u4EE5\u81EA\u52A8\u7684\u5C06\u5176\u7EC4\u5408\u8FDB\u6765</p><p>\u81EA\u5B9A\u4E49\u4E00\u4E2A\u89C6\u56FE\u89E3\u6790\u5668\uFF0C\u5E76\u6DFB\u52A0\u5230\u5BB9\u5668\u4E2D\uFF0Cmvc\u4F1A\u81EA\u52A8\u5C06\u8FD9\u4E2A\u89C6\u56FE\u89E3\u6790\u5668,\u6DFB\u52A0\u5230<code>\u5019\u9009\u89C6\u56FE\u89E3\u6790\u5668</code>\u4E2D</p><p>\u6DFB\u52A0\u5230\u5BB9\u5668\u7684\u65B9\u5F0F\u6709\uFF1A</p><ul><li>\u76F4\u63A5\u5728\u5E26\u6709@Configuration\u6CE8\u89E3\u7684\u7C7B\u4E2D\u6CE8\u5165bean</li><li>\u901A\u8FC7\u81EA\u5B9A\u4E49WebMvcConfigurer.configureViewResolvers\u6765\u6CE8\u518C\u89C6\u56FE\u89E3\u6790\u5668</li><li>\u901A\u8FC7@Component\u7684\u65B9\u5F0F</li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// CustomViewResolver \u81EA\u5B9A\u4E49\u89C6\u56FE\u89E3\u6790\u5668</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomViewResolver</span> <span class="token keyword">implements</span> <span class="token class-name">ViewResolver</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">View</span> <span class="token function">resolveViewName</span><span class="token punctuation">(</span><span class="token class-name">String</span> viewName<span class="token punctuation">,</span> <span class="token class-name">Locale</span> locale<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>viewName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>locale<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
 * webmvc\u81EA\u5B9A\u4E49\u914D\u7F6E
 * <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
 * \u5982\u679C\u60F3\u4FDD\u7559 Spring Boot MVC \u7684\u529F\u80FD\uFF0C\u5E76\u4E14\u9700\u8981\u6DFB\u52A0\u5176\u4ED6 MVC\u914D\u7F6E\uFF08\u62E6\u622A\u5668\uFF0C\u683C\u5F0F\u5316\u7A0B\u5E8F\u548C\u89C6\u56FE\u63A7\u5236\u5668\u7B49\uFF09\uFF0C
 * \u53EF\u4EE5\u6DFB\u52A0\u81EA\u5DF1\u7684\`WebMvcConfigurer\`\u7C7B\u578B\u7684\`@Configuration\`\u7C7B\uFF0C\u4F46\u4E0D\u80FD\u5E26\`@EnableWebMvc\`\u6CE8\u89E3
 */</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomWebMvcConfigurer</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configureViewResolvers</span><span class="token punctuation">(</span><span class="token class-name">ViewResolverRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        registry<span class="token punctuation">.</span><span class="token function">viewResolver</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CustomViewResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F53\u6211\u4EEC\u4ECE\u6D4F\u89C8\u5668\u8BF7\u6C42\u8D44\u6E90\u7684\u65F6\u5019\uFF0C\u5C31\u4F1A\u5339\u914D\u6700\u9002\u5408\u89C6\u56FE\u89E3\u6790\u5668\uFF0C\u6B64\u65F6\u4F1A\u5C06\u6211\u81EA\u5B9A\u4E49\u7684\u89C6\u56FE\u89E3\u6790\u5668\u7684\u51FD\u6570\u8FDB\u884C\u8C03\u7528\uFF0C\u4EE5\u67E5\u770B\u662F\u5426\u662F\u5F53\u524D\u8BF7\u6C42\u8D44\u6E90\u7684\u89C6\u56FE\u89E3\u6790\u5668</p><p><img src="`+P+`" alt="image-20211208184419575"></p><h4 id="\u8F6C\u6362\u5668\u548C\u683C\u5F0F\u5316\u5668"><a class="header-anchor" href="#\u8F6C\u6362\u5668\u548C\u683C\u5F0F\u5316\u5668" aria-hidden="true">#</a> \u8F6C\u6362\u5668\u548C\u683C\u5F0F\u5316\u5668</h4><ul><li><code>Converter</code>\uFF1A\u8F6C\u6362\u5668\uFF0C <code>public String hello(User user)</code>\u7C7B\u578B\u8F6C\u6362\u4F7F\u7528Converter\uFF08\u8868\u5355\u6570\u636E\u8F6C\u4E3Auser&lt;\u524D\u7AEF\u7684\u6570\u636E\u8F6C\u4E3AJavaBean\u8981\u7528\u5230&gt;\uFF09</li><li><code>Formatter</code>\uFF1A\u683C\u5F0F\u5316\u5668\uFF0C2017.12.17===&gt;Date</li></ul><h5 id="\u8F6C\u6362\u5668"><a class="header-anchor" href="#\u8F6C\u6362\u5668" aria-hidden="true">#</a> \u8F6C\u6362\u5668</h5><p>\u5728<code>WebMvcAutoConfiguration</code>\u4E2D</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">FormattingConversionService</span> <span class="token function">mvcConversionService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u65F6\u671F\u65F6\u95F4\u683C\u5F0F\u5316\u89E3\u6790\u5668</span>
  <span class="token class-name">Format</span> format <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mvcProperties<span class="token punctuation">.</span><span class="token function">getFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">WebConversionService</span> conversionService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebConversionService</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DateTimeFormatters</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                                                                    <span class="token punctuation">.</span><span class="token function">dateFormat</span><span class="token punctuation">(</span>format<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">timeFormat</span><span class="token punctuation">(</span>format<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">dateTimeFormat</span><span class="token punctuation">(</span>format<span class="token punctuation">.</span><span class="token function">getDateTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// \u6DFB\u52A0\u5230FormatterRegistry\u6CE8\u518C\u4E2D\uFF0C\u5728\u8FD9\u4E2A\u51FD\u6570\u4E2D\uFF0C\u4F1A\u8C03\u7528ApplicationConversionService.addBeans(registry, this.beanFactory);</span>
  <span class="token comment">// addBeans\u4F1A\u628A\u6240\u6709\u5728spring\u5BB9\u5668\u4E2D\u7684\u5B9E\u73B0\u4E86\u6307\u5B9A\u63A5\u53E3\u7684\u683C\u5F0F\u5316\u5668\u6DFB\u52A0\u5230FormatterRegistry\u4E2D</span>
  <span class="token function">addFormatters</span><span class="token punctuation">(</span>conversionService<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> conversionService<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>dateTimeFormat(format.getDateTime())</code>\u7684\u65E5\u671F\u65F6\u95F4\u7C7B\u578B\u5728<code>WebMvcProperties.Format</code>\u4E2D\uFF0C\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5982\u679C\u6211\u4EEC\u5728\u914D\u7F6E\u6587\u4EF6\u4E2D\u914D\u7F6E\u65E5\u671F\u65F6\u95F4\u683C\u5F0F\uFF0C\u90A3\u4E48springmvc\u5C31\u4F1A\u6309\u7167\u6211\u4EEC\u914D\u7F6E\u7684\u683C\u5F0F\u7C7B\u578B\u6765\u89E3\u6790\u4ECE\u524D\u7AEF\u4F20\u4E0A\u6765\u7684\u65F6\u95F4\u5B57\u7B26\u4E32</p><p><img src="`+B+`" alt="image-20211208185732467"></p><p>\u5728\u8FD9\u4E2A\u51FD\u6570\u4E2D\uFF0C\u4F1A\u8C03\u7528ApplicationConversionService.addBeans(registry, this.beanFactory)\uFF0CaddBeans\u4F1A\u628A\u6240\u6709\u5728spring\u5BB9\u5668\u4E2D\u7684\u5B9E\u73B0\u4E86\u6307\u5B9A\u63A5\u53E3\u7684\u683C\u5F0F\u5316\u5668\u6DFB\u52A0\u5230FormatterRegistry\u4E2D\uFF0C\u4E5F\u5C31\u662F\u8BF4\u6211\u4EEC\u81EA\u5DF1\u6DFB\u52A0\u7684\u683C\u5F0F\u5316\u5668\u8F6C\u6362\u5668, \u6211\u4EEC\u53EA\u9700\u8981\u653E\u5728\u5BB9\u5668\u4E2D\u5373\u53EF</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// WebMvcAutoConfiguration</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addFormatters</span><span class="token punctuation">(</span><span class="token class-name">FormatterRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">ApplicationConversionService</span><span class="token punctuation">.</span><span class="token function">addBeans</span><span class="token punctuation">(</span>registry<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>beanFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ApplicationConversionService</span>
<span class="token doc-comment comment">/**
	 * Add <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">GenericConverter</span></span><span class="token punctuation">}</span>, <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">Converter</span></span><span class="token punctuation">}</span>, <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">Printer</span></span><span class="token punctuation">}</span>, <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">Parser</span></span><span class="token punctuation">}</span>
	 * and <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">Formatter</span></span><span class="token punctuation">}</span> beans from the specified context.
	 * <span class="token keyword">@param</span> <span class="token parameter">registry</span> the service to register beans with
	 * <span class="token keyword">@param</span> <span class="token parameter">beanFactory</span> the bean factory to get the beans from
	 * <span class="token keyword">@since</span> 2.2.0
	 */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">addBeans</span><span class="token punctuation">(</span><span class="token class-name">FormatterRegistry</span> registry<span class="token punctuation">,</span> <span class="token class-name">ListableBeanFactory</span> beanFactory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> beans <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// \u53EA\u8981\u662F\u7EE7\u627F\u4E9B\u5E76\u6CE8\u5165\u5230spring\u5BB9\u5668\u4E2D\uFF0C\u5373\u53EF</span>
  beans<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>beanFactory<span class="token punctuation">.</span><span class="token function">getBeansOfType</span><span class="token punctuation">(</span><span class="token class-name">GenericConverter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  beans<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>beanFactory<span class="token punctuation">.</span><span class="token function">getBeansOfType</span><span class="token punctuation">(</span><span class="token class-name">Converter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  beans<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>beanFactory<span class="token punctuation">.</span><span class="token function">getBeansOfType</span><span class="token punctuation">(</span><span class="token class-name">Printer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  beans<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>beanFactory<span class="token punctuation">.</span><span class="token function">getBeansOfType</span><span class="token punctuation">(</span><span class="token class-name">Parser</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> bean <span class="token operator">:</span> beans<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bean <span class="token keyword">instanceof</span> <span class="token class-name">GenericConverter</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      registry<span class="token punctuation">.</span><span class="token function">addConverter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">GenericConverter</span><span class="token punctuation">)</span> bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>bean <span class="token keyword">instanceof</span> <span class="token class-name">Converter</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      registry<span class="token punctuation">.</span><span class="token function">addConverter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Converter</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>bean <span class="token keyword">instanceof</span> <span class="token class-name">Formatter</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      registry<span class="token punctuation">.</span><span class="token function">addFormatter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Formatter</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>bean <span class="token keyword">instanceof</span> <span class="token class-name">Printer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      registry<span class="token punctuation">.</span><span class="token function">addPrinter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Printer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>bean <span class="token keyword">instanceof</span> <span class="token class-name">Parser</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      registry<span class="token punctuation">.</span><span class="token function">addParser</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Parser</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="httpmessageconverts"><a class="header-anchor" href="#httpmessageconverts" aria-hidden="true">#</a> HttpMessageConverts</h4><ul><li><code>HttpMessageConverter </code>SpringMVC\u7528\u6765\u8F6C\u6362Http\u8BF7\u6C42\u548C\u54CD\u5E94\u7684\uFF0CUser\u2014JSON(\u5C06JavaBean \u8F6C\u4E3A JSON\u6570\u636E)</li><li><code>HttpMessageConverters</code> \u662F\u4ECE\u5BB9\u5668\u4E2D\u786E\u5B9A\uFF0C\u83B7\u53D6\u6240\u6709\u7684HttpMessageConverter</li></ul><p>\u81EA\u5DF1\u7ED9\u5BB9\u5668\u4E2D\u6DFB\u52A0HttpMessageConverter\uFF0C\u53EA\u9700\u8981\u5C06\u81EA\u5DF1\u7684\u7EC4\u4EF6\u6CE8\u518C\u5BB9\u5668\u4E2D\uFF08@Bean,@Component\u7B49\u6CE8\u518C\u65B9\u5F0F\uFF09</p><h4 id="\u6269\u5C55springmvc"><a class="header-anchor" href="#\u6269\u5C55springmvc" aria-hidden="true">#</a> \u6269\u5C55springmvc</h4><p>\u4EE5\u524D\u6211\u4EEC\u5728spring mvc\u4E2D\u914D\u7F6E\u90FD\u662F\u5728xxx.xml\u6587\u4EF6\u4E2D\uFF0C\u6216\u8005\u9700\u8981\u5728xml\u6587\u4EF6\u4E2D\u914D\u7F6E\u81EA\u52A8\u626B\u5305\u7B56\u7565\u7B49\u7B49</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- \u89C6\u56FE\u8BF7\u6C42\u6620\u5C04(\u5F53\u53D1\u9001/hello\u8BF7\u6C42,\u4F1A\u8DF3\u8F6C\u5230success\u9875\u9762) --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>view-controller</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/hello<span class="token punctuation">&quot;</span></span> <span class="token attr-name">view-name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>success<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u73B0\u5728\uFF0C\u7F16\u5199\u4E00\u4E2A\u914D\u7F6E\u7C7B\uFF08@Configuration\uFF09\uFF0C\u662FWebMvcConfigurer\u7C7B\u578B\uFF1B\u4E0D\u80FD\u6807\u6CE8@EnableWebMvc\uFF0C\u65E2\u4FDD\u7559\u4E86\u6240\u6709\u7684\u81EA\u52A8\u914D\u7F6E\uFF0C\u4E5F\u80FD\u7528\u6211\u4EEC\u6269\u5C55\u7684\u914D\u7F6E</p><p>\u6211\u4EEC\u8981\u505A\u7684\u5C31\u662F\u7F16\u5199\u4E00\u4E2A<code>@Configuration</code>\u6CE8\u89E3\u7C7B\uFF0C\u5E76\u4E14\u7C7B\u578B\u8981\u4E3A<code>WebMvcConfigurer</code>\uFF0C\u8FD8\u4E0D\u80FD\u6807\u6CE8<code>@EnableWebMvc</code>\u6CE8\u89E3\uFF1B \u6211\u4EEC\u53BB\u81EA\u5DF1\u5199\u4E00\u4E2A\uFF0C\u6211\u4EEC\u65B0\u5EFA\u4E00\u4E2A\u5305\u53EBconfig\uFF0C\u5199\u4E00\u4E2A\u7C7B<code>CustomWebMvcConfigurer</code></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomWebMvcConfigurer</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addViewControllers</span><span class="token punctuation">(</span><span class="token class-name">ViewControllerRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u5F53\u8BF7\u6C42\u8DEF\u5F84\u662F/hello\u65F6\uFF0C\u6620\u5C04\u5230/test</span>
        registry<span class="token punctuation">.</span><span class="token function">addViewController</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u6837\u4E00\u6765, \u6211\u4EEC\u5C31\u6CA1\u5FC5\u8981\u5728\u5199; \u901A\u8FC7\u4E0A\u9762\u7684\u65B9\u5F0F\u5C31\u53EF\u4EE5\u5B9E\u73B0\u4E86<code>\u89C6\u56FE\u6620\u5C04</code></p><h5 id="\u539F\u7406"><a class="header-anchor" href="#\u539F\u7406" aria-hidden="true">#</a> \u539F\u7406</h5><p>\u6211\u4EEC\u77E5\u9053WebMvcAutoConfiguration\u662FSpringMVC\u7684\u81EA\u52A8\u914D\u7F6E\u7C7B\uFF0C\u800C<code>WebMvcAutoConfigurationAdapter</code>\u7C7B\u662FWebMvcAutoConfiguration\u4E2D\u7684\u4E00\u4E2A\u5185\u90E8\u7C7B\uFF0C\u901A\u8FC7import\u7684\u65B9\u5F0F\u5F15\u5165\u66F4\u591A\u7684\u914D\u7F6E<code>@Import(EnableWebMvcConfiguration.class)</code>\uFF0C\u800C\u8FD9\u4E2A\u7C7B\u4E5F\u662FWebMvcAutoConfiguration\u5185\u90E8\u7C7B</p><p><img src="`+N+`" alt="image-20211208192810714"></p><p>\u901A\u8FC7\u67E5\u770BEnableWebMvcConfiguration\u8FD9\u4E2A\u7C7B\u7EE7\u627F\u7684\u7236\u7C7B<code>DelegatingWebMvcConfiguration</code></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span><span class="token punctuation">(</span>required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token comment">// \u4F1A\u628A\u6240\u6709\u914D\u7F6E\u90FD\u52A0\u5165\u5230configurers\u4E2D</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setConfigurers</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">WebMvcConfigurer</span><span class="token punctuation">&gt;</span></span> configurers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">CollectionUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>configurers<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>configurers<span class="token punctuation">.</span><span class="token function">addWebMvcConfigurers</span><span class="token punctuation">(</span>configurers<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u6DFB\u52A0\u683C\u5F0F\u5316\u5668</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">addFormatters</span><span class="token punctuation">(</span><span class="token class-name">FormatterRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>configurers<span class="token punctuation">.</span><span class="token function">addFormatters</span><span class="token punctuation">(</span>registry<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u6DFB\u52A0\u62E6\u622A\u5668</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">addInterceptors</span><span class="token punctuation">(</span><span class="token class-name">InterceptorRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>configurers<span class="token punctuation">.</span><span class="token function">addInterceptors</span><span class="token punctuation">(</span>registry<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u6DFB\u52A0\u8D44\u6E90\u6620\u5C04\u5668</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">addResourceHandlers</span><span class="token punctuation">(</span><span class="token class-name">ResourceHandlerRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>configurers<span class="token punctuation">.</span><span class="token function">addResourceHandlers</span><span class="token punctuation">(</span>registry<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u597D\u50CF\u662F\u8DE8\u57DF\u6620\u5C04\u5427</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">addCorsMappings</span><span class="token punctuation">(</span><span class="token class-name">CorsRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>configurers<span class="token punctuation">.</span><span class="token function">addCorsMappings</span><span class="token punctuation">(</span>registry<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u6DFB\u52A0\u89C6\u56FE\u63A7\u5236\u5668</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">addViewControllers</span><span class="token punctuation">(</span><span class="token class-name">ViewControllerRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>configurers<span class="token punctuation">.</span><span class="token function">addViewControllers</span><span class="token punctuation">(</span>registry<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BB9\u5668\u4E2D\u6240\u6709\u7684WebMvcConfigurer\u90FD\u4F1A\u4E00\u8D77\u8D77\u4F5C\u7528\uFF0C\u6211\u4EEC\u7684\u914D\u7F6E\u7C7B\u4E5F\u4F1A\u88AB\u8C03\u7528</p><h4 id="\u5168\u9762\u63A5\u7BA1springmvc"><a class="header-anchor" href="#\u5168\u9762\u63A5\u7BA1springmvc" aria-hidden="true">#</a> \u5168\u9762\u63A5\u7BA1springmvc</h4><p>\u5982\u679CSpringBoot\u5BF9SpringMVC\u7684\u81EA\u52A8\u914D\u7F6E\u4E0D\u9700\u8981\u4E86\uFF0C\u6240\u6709\u90FD\u662F\u7531\u6211\u4EEC\u81EA\u5DF1\u6765\u914D\u7F6E\uFF0C\u6240\u6709\u7684SpringMVC\u7684\u81EA\u52A8\u914D\u7F6E\u90FD\u5931\u6548\u4E86\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u5728\u914D\u7F6E\u7C7B\u4E2D\u6DFB\u52A0<code>@EnableWebMvc</code>\u5373\u53EF</p><h4 id="\u5982\u4F55\u4FEE\u6539springboot\u7684\u9ED8\u8BA4\u914D\u7F6E"><a class="header-anchor" href="#\u5982\u4F55\u4FEE\u6539springboot\u7684\u9ED8\u8BA4\u914D\u7F6E" aria-hidden="true">#</a> \u5982\u4F55\u4FEE\u6539springboot\u7684\u9ED8\u8BA4\u914D\u7F6E</h4><p>\u6A21\u5F0F\uFF1A</p><ul><li><p>SpringBoot\u5728\u81EA\u52A8\u914D\u7F6E\u5F88\u591A\u7EC4\u4EF6\u7684\u65F6\u5019\uFF0C\u5148\u770B\u5BB9\u5668\u4E2D\u6709\u6CA1\u6709\u7528\u6237\u81EA\u5DF1\u914D\u7F6E\u7684\uFF08@Bean\u3001@Component\uFF09\u5982\u679C\u6709\u5C31\u7528\u7528\u6237\u914D\u7F6E\u7684\uFF0C\u5982\u679C\u6CA1\u6709\uFF0C\u624D\u81EA\u52A8\u914D\u7F6E\uFF1B\u5982\u679C\u6709\u4E9B\u7EC4\u4EF6\u53EF\u4EE5\u6709\u591A\u4E2A\uFF08ViewResolver\uFF09\u5C06\u7528\u6237\u914D\u7F6E\u7684\u548C\u81EA\u5DF1\u9ED8\u8BA4\u7684\u7EC4\u5408\u8D77\u6765</p></li><li><p>\u5728SpringBoot\u4E2D\u4F1A\u6709\u975E\u5E38\u591A\u7684xxxConfigurer\u5E2E\u52A9\u6211\u4EEC\u8FDB\u884C\u6269\u5C55\u914D\u7F6E</p></li><li><p>\u5728SpringBoot\u4E2D\u4F1A\u6709\u5F88\u591A\u7684xxxCustomizer\u5E2E\u52A9\u6211\u4EEC\u8FDB\u884C\u5B9A\u5236\u914D\u7F6E</p></li></ul><h2 id="\u5F02\u6B65\u4EFB\u52A1"><a class="header-anchor" href="#\u5F02\u6B65\u4EFB\u52A1" aria-hidden="true">#</a> \u5F02\u6B65\u4EFB\u52A1</h2><blockquote><p>\u53C2\u7167\u7F51\u5740\uFF1Ahttps://blog.csdn.net/weixin_39800144/article/details/79046237</p></blockquote><p>\u5728springboot web\u4F7F\u7528\u8FC7\u7A0B\uFF0C\u6709\u4E9B\u4E1A\u52A1\u662F\u4E0D\u9700\u8981\u7B49\u5F85\u5B83\u5B8C\u6210\u4E4B\u540E\u5728\u8FD4\u56DE\u8BF7\u6C42\u7684\u6570\u636E\u7684\uFF0C\u6BD4\u5982\uFF0C\u53D1\u9001\u90AE\u4EF6\u5F02\u6B65\u4EFB\u52A1\u3001\u5B9A\u65F6\u4EFB\u52A1\u7B49</p><h3 id="\u5F15\u5165"><a class="header-anchor" href="#\u5F15\u5165" aria-hidden="true">#</a> \u5F15\u5165</h3><p>\u573A\u666F\uFF1A\u73B0\u5728\u9700\u8981\u4E0A\u4F20\u4E00\u4E2AExcel\u8868\u683C\uFF0C\u6570\u636E\u91CF\u51E0\u4E07\u6761\uFF0C\u800C\u4E14\uFF0C\u4E0A\u4F20\u89E3\u6790\u540E\u8FD8\u9700\u8981\u8FDB\u884C\u8BA1\u7B97\uFF0C\u7136\u540E\u63D2\u5165\u6570\u636E\u5E93\u3002</p><p>\u5206\u6790\uFF1A\u4E0A\u4F20\u548C\u89E3\u6790\uFF0C\u90FD\u5F88\u7B80\u5355\uFF0C\u4F46\u662F\uFF0C\u8FD9\u91CC\u5982\u679C\u4F7F\u7528\u540C\u6B65\u65B9\u5F0F\uFF0C\u90A3\u4E48\uFF1A\u4E0A\u4F20--&gt;\u89E3\u6790--&gt;\u8FD0\u7B97--&gt;\u63D2\u5165\u6570\u636E\u5E93\uFF1B\u8FD9\u4E2A\u8FC7\u7A0B\uFF0C\u524D\u53F0\u7684\u9875\u9762\u90FD\u662F\u7B49\u5F85\u72B6\u6001\u7684\uFF0C\u7528\u6237\u4F1A\u4EE5\u4E3A\u9875\u9762\u5361\u6B7B\u4E86\u3002\u6240\u4EE5\uFF0C\u8FD9\u91CC\u9700\u8981\u505A\u5F02\u6B65\u5904\u7406\uFF1A</p><ul><li><p>\u4E0A\u4F20--&gt;\u8FD4\u56DE\u6B63\u5728\u89E3\u6790\u7684\u6807\u5FD7\uFF1B</p></li><li><p>\u89E3\u6790--&gt;\u8FD0\u7B97--&gt;\u63D2\u5165\u6570\u636E\u5E93\uFF1B</p></li></ul><p>\u6B64\u65F6\uFF0C\u5F53\u7528\u6237\u4E0A\u4F20\u5B8C\u6587\u4EF6\u540E\uFF0C\u9875\u9762\u7ACB\u9A6C\u8DF3\u8F6C\uFF0C\u89E3\u6790\uFF0C\u8FD0\u7B97\u7B49\u5DE5\u4F5C\uFF0C\u7EE7\u7EED\u5728\u540E\u53F0\u8FDB\u884C\uFF0C\u800C\u7528\u6237\u53EF\u4EE5\u4E0D\u7528\u7B49\u5F85\u3002</p><p>\u8FD9\u91CC\u7B80\u5355\u8BB0\u5F55\u4E00\u4E0B\uFF0CspringBoot\u7684\u5F02\u6B65\u4F7F\u7528\u65B9\u5F0F</p><h3 id="\u540C\u6B65\u65B9\u5F0F"><a class="header-anchor" href="#\u540C\u6B65\u65B9\u5F0F" aria-hidden="true">#</a> \u540C\u6B65\u65B9\u5F0F</h3><ol><li>controller</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
  * \u540C\u6B65\u5904\u7406
  * <span class="token keyword">@return</span>
  */</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;test2&quot;</span><span class="token punctuation">,</span>method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  loginService<span class="token punctuation">.</span><span class="token function">getTest2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;==========\u4E3B\u7EBF\u7A0B\u540D&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token string">&quot;\u540C\u6B65,\u6B63\u5728\u89E3\u6790......&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>service</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**\u540C\u6B65\u65B9\u6CD5*/</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getTest2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token class-name">Building</span> building <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Building</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>building<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> <span class="token number">100</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;----------\u540C\u6B65\uFF1A&gt;&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        building<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span><span class="token punctuation">{</span>
      ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u79CD\u540C\u6B65\u7684\u65B9\u5F0F\u5904\u7406\uFF0C\u4F1A\u53D1\u73B0\uFF0C\u5F53\u8FD9100\u6B64\u5FAA\u73AF\u5B8C\u6210\u540E\uFF0C\u9875\u9762\u624D\u4F1A\u8FD4\u56DE \uFF1A\u540C\u6B65,\u6B63\u5728\u89E3\u6790......\u3002\u5F53\u540E\u53F0\u5728\u5FAA\u73AF\u5904\u7406\u65F6\uFF0C\u524D\u53F0\u7684\u9875\u9762\u59CB\u7EC8\u5904\u4E8E\u7B49\u5F85\u72B6\u6001</p><h3 id="\u5F02\u6B65\u65B9\u5F0F"><a class="header-anchor" href="#\u5F02\u6B65\u65B9\u5F0F" aria-hidden="true">#</a> \u5F02\u6B65\u65B9\u5F0F</h3><h4 id="\u7EBF\u7A0B\u6C60"><a class="header-anchor" href="#\u7EBF\u7A0B\u6C60" aria-hidden="true">#</a> \u7EBF\u7A0B\u6C60</h4><p>\u4F7F\u7528\u7EBF\u7A0B\u6C60\uFF0C\u521B\u5EFA\u65B0\u7684\u7EBF\u7A0B\u53BB\u5904\u7406</p><ol><li>controller</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
  * \u5F02\u6B65\u5904\u74061\uFF1A\u7EBF\u7A0B\u6C60\uFF0C\u521B\u5EFA\u65B0\u7EBF\u7A0B\u5904\u7406
  * <span class="token keyword">@return</span>
  */</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;test3&quot;</span><span class="token punctuation">,</span>method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token class-name">ExecutorService</span> service <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newFixedThreadPool</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">RunnableTask1</span> task1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RunnableTask1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  service<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>task1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;=========\u300B\u5F53\u524D\u7EBF\u7A0B\u540D\uFF1A&quot;</span><span class="token operator">+</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token string">&quot;\u5F02\u6B65,\u6B63\u5728\u89E3\u6790......&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>RunnableTask1 \u7EBF\u7A0B\u4EFB\u52A1</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RunnableTask1</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span><span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Building</span> building <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Building</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>building<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> <span class="token number">100</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;----------\u5F02\u6B65\uFF1A&gt;&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    building<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span><span class="token punctuation">{</span>
                ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E3B\u7EBF\u7A0B\uFF0C\u548C\u5904\u7406\u4EFB\u52A1\u7684\u7EBF\u7A0B\uFF0C\u4E0D\u662F\u4E00\u4E2A\u7EBF\u7A0B\uFF0C\u4E5F\u5C31\u662F\uFF0C\u5F53\u9875\u9762\u8BF7\u6C42\u540E\uFF0C\u4E3B\u7EBF\u7A0B\u4F1A\u8FD4\u56DE\u6211\u4EEC\u60F3\u8981\u8FD4\u56DE\u7684\u6807\u8BC6\uFF0C\u8FD9\u91CC\u8FD4\u56DE\u7684\u662F\u4E00\u4E2A\u5B57\u7B26\u4E32\uFF1A\u5F02\u6B65\uFF0C\u6B63\u5728\u89E3\u6790......\uFF0C\u800C\u7EBF\u7A0B\u6C60\u65B0\u5F00\u4E86\u4E00\u4E2A\u7EBF\u7A0B\uFF0C\u5728\u540E\u53F0\u5904\u7406\u4E1A\u52A1\u903B\u8F91</p><p>\u6240\u4EE5\uFF0C\u6B64\u65F6\u8BBF\u95EE\u63A5\u53E3\u540E\uFF0C\u4F1A\u7ACB\u9A6C\u8FD4\u56DE\uFF0C\u9875\u9762\u4E0D\u7528\u7B49\u5F85\uFF0C\u5904\u7406\u903B\u8F91\u5728\u540E\u53F0\u9ED8\u9ED8\u8FDB\u884C</p><h4 id="springboot\u6CE8\u89E3\u65B9\u5F0F"><a class="header-anchor" href="#springboot\u6CE8\u89E3\u65B9\u5F0F" aria-hidden="true">#</a> springboot\u6CE8\u89E3\u65B9\u5F0F</h4><p>\u662FspringBoot\u81EA\u8EAB\u7684\u4E00\u79CD\u5F02\u6B65\u65B9\u5F0F\uFF0C\u4F7F\u7528\u6CE8\u89E3\u5B9E\u73B0\uFF0C\u975E\u5E38\u65B9\u4FBF\uFF0C\u6211\u4EEC\u5728\u60F3\u8981\u5F02\u6B65\u6267\u884C\u7684\u65B9\u6CD5\u4E0A\u52A0\u4E0A<code>@Async</code>\u6CE8\u89E3\uFF0C\u5728controller\u4E0A\u52A0\u4E0A<code>@EnableAsync</code>\uFF0C\u5373\u53EF\u3002\u6CE8\u610F\uFF0C\u8FD9\u91CC\u7684\u5F02\u6B65\u65B9\u6CD5\uFF0C<strong>\u53EA\u80FD\u5728\u81EA\u8EAB\u4E4B\u5916\u8C03\u7528\uFF0C\u5728\u672C\u7C7B\u8C03\u7528\u662F\u65E0\u6548\u7684</strong></p><ol><li>controller</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;tmall&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginController</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span>Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">LoginService</span> loginService<span class="token punctuation">;</span>
    <span class="token doc-comment comment">/**
     * \u5F02\u6B65\u5904\u74062\uFF1A\u4F7F\u7528springBoot\u81EA\u5E26async\u6CE8\u89E3
     */</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;test1&quot;</span><span class="token punctuation">,</span>method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        loginService<span class="token punctuation">.</span><span class="token function">getTest1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;============&gt;&quot;</span><span class="token operator">+</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;\u5F02\u6B65,\u6B63\u5728\u89E3\u6790......&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>service</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**\u5F02\u6B65\u65B9\u6CD5
 * \u6709@Async\u6CE8\u89E3\u7684\u65B9\u6CD5\uFF0C\u9ED8\u8BA4\u5C31\u662F\u5F02\u6B65\u6267\u884C\u7684\uFF0C\u4F1A\u5728\u9ED8\u8BA4\u7684\u7EBF\u7A0B\u6C60\u4E2D\u6267\u884C\uFF0C\u4F46\u662F\u6B64\u65B9\u6CD5\u4E0D\u80FD\u5728\u672C\u7C7B\u8C03\u7528\uFF1B\u542F\u52A8\u7C7B\u9700\u6DFB\u52A0\u76F4\u63A5\u5F00\u542F\u5F02\u6B65\u6267@EnableAsync\u3002
 * 
 */</span>
    <span class="token annotation punctuation">@Async</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getTest1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Building</span> building <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Building</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>building<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> <span class="token number">100</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;----------\u5F02\u6B65\uFF1A&gt;&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    building<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">return</span> <span class="token string">&quot;\u6267\u884C\u5F02\u6B65\u4EFB\u52A1\u5B8C\u6BD5&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span><span class="token punctuation">{</span>
                ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;\u6267\u884C\u5B8C\u6BD5&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u5728\u542F\u52A8\u7C7B\u4E2D\u6DFB\u52A0\u6CE8\u89E3<code>@EnableAsync</code></li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u5F00\u542F\u5F02\u6B65\u6CE8\u89E3
 */</span>
<span class="token annotation punctuation">@EnableAsync</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringbootDemo02Application</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringbootDemo02Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u9875\u9762\u53D1\u51FA\u8BF7\u6C42\u540E\uFF0C\u4E3B\u7EBF\u7A0B\u4F1A\u8FD4\u56DE\uFF0C\u800C\u5185\u7F6E\u7684\u7EBF\u7A0B\u6C60\u4F1A\u65B0\u5F00\u7EBF\u7A0B\uFF0C\u5728\u540E\u53F0\u6267\u884C\u4EFB\u52A1\u3002\u6B64\u65F6\u9875\u9762\u4E0D\u7528\u7B49\u5F85\uFF0C\u53EF\u4EE5\u7EE7\u7EED\u5176\u4ED6\u64CD\u4F5C</p><h2 id="\u90AE\u4EF6\u4EFB\u52A1"><a class="header-anchor" href="#\u90AE\u4EF6\u4EFB\u52A1" aria-hidden="true">#</a> \u90AE\u4EF6\u4EFB\u52A1</h2><p>springbooot\u5BF9\u90AE\u4EF6\u4E5F\u8FDB\u884C\u4E86\u5C01\u88C5\uFF0C\u4E5F\u662F\u4E00\u4E2Astarter\u542F\u52A8\u5668</p><h3 id="\u6982\u8FF0"><a class="header-anchor" href="#\u6982\u8FF0" aria-hidden="true">#</a> \u6982\u8FF0</h3><h4 id="\u5F15\u5165-1"><a class="header-anchor" href="#\u5F15\u5165-1" aria-hidden="true">#</a> \u5F15\u5165</h4><p>\u4F9D\u8D56</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-mail<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u901A\u8FC7maven\u4F9D\u8D56\u5173\u7CFB\u6211\u4EEC\u53EF\u4EE5\u77E5\u9053\u5728\u5F53\u524D\u7248\u672C\uFF082.6.1\uFF09\u4E0B\uFF0C\u4F7F\u7528jakarta\u5B9E\u73B0\u90AE\u4EF6\u4EFB\u52A1</p><p><img src="`+F+'" alt="image-20211208221251914"></p><h4 id="\u57FA\u7840\u539F\u7406"><a class="header-anchor" href="#\u57FA\u7840\u539F\u7406" aria-hidden="true">#</a> \u57FA\u7840\u539F\u7406</h4><p>\u5728\u8FD9\u4E2A\u542F\u52A8\u5668\u4E2D\uFF0Cspringboot\u548C\u9488\u5BF9\u5176\u4ED6\u7684\u542F\u52A8\u5668\u4E00\u6837\uFF0C\u90FD\u662F\u505A\u4E00\u4E9B\u81EA\u52A8\u914D\u7F6E\u548C\u5C5E\u6027\u503C\u7684\u53EF\u8986\u76D6\u8D4B\u503C\u7684\u64CD\u4F5C</p><ul><li>MailSenderAutoConfiguration</li><li>MailProperties \u4E00\u4E9B\u53EF\u4EE5\u914D\u7F6E\u53C2\u6570\u90FD\u5728\u8FD9\u91CC</li></ul><h3 id="\u57FA\u672C\u4F7F\u7528"><a class="header-anchor" href="#\u57FA\u672C\u4F7F\u7528" aria-hidden="true">#</a> \u57FA\u672C\u4F7F\u7528</h3><p>\u5728\u4F7F\u7528\u90AE\u4EF6\u53D1\u9001\u4E4B\u524D\uFF0C\u9700\u8981\u5C06\u90AE\u7BB1\u7684stmp\u670D\u52A1\u5F00\u542F\uFF0C\u4ECE\u90AE\u7BB1\u7684\u8BBE\u7F6E\u4E2D\u53EF\u4EE5\u770B\u5230\u90AE\u7BB1\u7684stmp\u548Cpop\u7B49\u7684\u670D\u52A1\u5730\u5740</p><p><img src="'+V+`" alt="image-20211208230206815"></p><p>\u914D\u7F6E\u8FDE\u63A5\u53C2\u6570\uFF0C\u8FDB\u5165MailProperties\u67E5\u770B\u5982\u679C\u4E0D\u5199\u6709\u9ED8\u8BA4\u503C\u5E76\u4E14\u662F\u81EA\u5DF1\u9700\u8981\u7684\uFF0C\u5C31\u53EF\u4EE5\u4E0D\u7528\u914D\u7F6E\u4E86</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">mail</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> smtp.163.com
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">25</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> xxx@163.com
    <span class="token key atrule">password</span><span class="token punctuation">:</span> xxx\u6388\u6743\u7801
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6211\u4EEC\u6DFB\u52A0mail\u542F\u52A8\u5668\u4E4B\u540E\uFF0C\u4F1A\u81EA\u52A8\u5C06<code>JavaMailSender</code>\u6CE8\u5165\u5230spring\u5BB9\u5668\u4E2D</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;spring.mail&quot;</span><span class="token punctuation">,</span> name <span class="token operator">=</span> <span class="token string">&quot;host&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">MailSenderPropertiesConfiguration</span> <span class="token punctuation">{</span>

	<span class="token annotation punctuation">@Bean</span>
	<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token class-name">JavaMailSender</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
	<span class="token class-name">JavaMailSenderImpl</span> <span class="token function">mailSender</span><span class="token punctuation">(</span><span class="token class-name">MailProperties</span> properties<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">JavaMailSenderImpl</span> sender <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JavaMailSenderImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">applyProperties</span><span class="token punctuation">(</span>properties<span class="token punctuation">,</span> sender<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> sender<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u53D1\u9001\u7B80\u5355\u90AE\u4EF6"><a class="header-anchor" href="#\u53D1\u9001\u7B80\u5355\u90AE\u4EF6" aria-hidden="true">#</a> \u53D1\u9001\u7B80\u5355\u90AE\u4EF6</h4><p>\u6211\u4EEC\u5F15\u5165mail\u542F\u52A8\u5668\u4E4B\u540E\uFF0CJavaMailSender\u81EA\u52A8\u6CE8\u5165\u5230spring\u5BB9\u5668\u4E2D\uFF0C\u6240\u4EE5\u6211\u4EEC\u901A\u8FC7@Autowired\u5F15\u5165\u5373\u53EF\u4F7F\u7528\uFF0C\u5982\u679C\u53EA\u662F\u53D1\u9001\u7B80\u5355\u7C7B\u578B\u7684\u90AE\u4EF6\uFF0C\u76F4\u63A5\u4F7F\u7528SimpleMailMessage\u5373\u53EF\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">JavaMailSender</span> mailSender<span class="token punctuation">;</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">testMail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">final</span> <span class="token class-name">SimpleMailMessage</span> simpleMessage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleMailMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  simpleMessage<span class="token punctuation">.</span><span class="token function">setFrom</span><span class="token punctuation">(</span><span class="token string">&quot;xxxx@163.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// \u53D1\u9001\u90AE\u7BB1</span>
  simpleMessage<span class="token punctuation">.</span><span class="token function">setTo</span><span class="token punctuation">(</span><span class="token string">&quot;xxxxx@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u63A5\u6536\u90AE\u7BB1</span>
  simpleMessage<span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// \u4E3B\u9898</span>
  simpleMessage<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u5185\u5BB9</span>

  mailSender<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>simpleMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u53D1\u9001\u590D\u6742\u90AE\u4EF6"><a class="header-anchor" href="#\u53D1\u9001\u590D\u6742\u90AE\u4EF6" aria-hidden="true">#</a> \u53D1\u9001\u590D\u6742\u90AE\u4EF6</h4><p>\u53D1\u9001\u590D\u6742\u7C7B\u578B\u7684\u90AE\u4EF6\uFF0C\u9700\u8981\u4F7F\u7528MimeMessage\u7C7B\u578B\uFF0C\u5E76\u4E14\u9700\u8981\u901A\u8FC7MimeMessageHelper\u914D\u7F6E\u53D1\u9001\u7684\u90AE\u4EF6\u5185\u5BB9</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">private</span> <span class="token class-name">JavaMailSender</span> mailSender<span class="token punctuation">;</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">testMail1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">MessagingException</span> <span class="token punctuation">{</span>
  <span class="token keyword">final</span> <span class="token class-name">MimeMessage</span> mimeMessage <span class="token operator">=</span> mailSender<span class="token punctuation">.</span><span class="token function">createMimeMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">MimeMessageHelper</span> messageHelper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MimeMessageHelper</span><span class="token punctuation">(</span>mimeMessage<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  messageHelper<span class="token punctuation">.</span><span class="token function">setFrom</span><span class="token punctuation">(</span><span class="token string">&quot;xxx@163.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  messageHelper<span class="token punctuation">.</span><span class="token function">setTo</span><span class="token punctuation">(</span><span class="token string">&quot;xxxxx@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  messageHelper<span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  messageHelper<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  messageHelper<span class="token punctuation">.</span><span class="token function">addAttachment</span><span class="token punctuation">(</span><span class="token string">&quot;1.jpg&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;/opt/1.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u6DFB\u52A0\u9644\u4EF6</span>

  mailSender<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>mimeMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u5B9A\u65F6\u4EFB\u52A1"><a class="header-anchor" href="#\u5B9A\u65F6\u4EFB\u52A1" aria-hidden="true">#</a> \u5B9A\u65F6\u4EFB\u52A1</h2><p>\u5B9A\u65F6\u4EFB\u52A1\u53EF\u4EE5\u8BF4\u662F\u4F01\u4E1A\u5E94\u7528\u4E2D\u6700\u7ECF\u5E38\u4F7F\u7528\u7684\u4EFB\u52A1\u4E4B\u4E00\u4E86\uFF0C\u6BD4\u5982\u65E5\u5FD7\u8F93\u51FA\u3001\u79D2\u6740\u4EFB\u52A1\u7684\u5012\u8BA1\u65F6\u7B49</p><p>\u5B9A\u65F6\u4EFB\u52A1\u7684\u51E0\u79CD\u5B9E\u73B0\u65B9\u5F0F\uFF1A</p><ul><li>Timer\uFF1A\u8FD9\u662Fjava\u81EA\u5E26\u7684<code>java.util.Timer</code>\u7C7B\uFF0C\u8FD9\u4E2A\u7C7B\u5141\u8BB8\u4F60\u8C03\u5EA6\u4E00\u4E2A<code>java.util.TimerTask</code>\u4EFB\u52A1\u3002\u4F7F\u7528\u8FD9\u79CD\u65B9\u5F0F\u53EF\u4EE5\u8BA9\u4F60\u7684\u7A0B\u5E8F\u6309\u7167\u67D0\u4E00\u4E2A\u9891\u5EA6\u6267\u884C\uFF0C\u4F46\u4E0D\u80FD\u5728\u6307\u5B9A\u65F6\u95F4\u8FD0\u884C\u3002\u4E00\u822C\u7528\u7684\u8F83\u5C11</li><li>ScheduledExecutorService\uFF1A\u4E5Fjdk\u81EA\u5E26\u7684\u4E00\u4E2A\u7C7B\uFF1B\u662F\u57FA\u4E8E\u7EBF\u7A0B\u6C60\u8BBE\u8BA1\u7684\u5B9A\u65F6\u4EFB\u52A1\u7C7B\uFF0C\u6BCF\u4E2A\u8C03\u5EA6\u4EFB\u52A1\u90FD\u4F1A\u5206\u914D\u5230\u7EBF\u7A0B\u6C60\u4E2D\u7684\u4E00\u4E2A\u7EBF\u7A0B\u53BB\u6267\u884C\uFF0C\u4E5F\u5C31\u662F\u8BF4\uFF0C\u4EFB\u52A1\u662F\u5E76\u53D1\u6267\u884C\uFF0C\u4E92\u4E0D\u5F71\u54CD</li><li>Spring Task\uFF1ASpring3.0\u4EE5\u540E\u81EA\u5E26\u7684task\uFF0C\u53EF\u4EE5\u5C06\u5B83\u770B\u6210\u4E00\u4E2A\u8F7B\u91CF\u7EA7\u7684Quartz\uFF0C\u800C\u4E14\u4F7F\u7528\u8D77\u6765\u6BD4Quartz\u7B80\u5355\u8BB8\u591A</li><li>Quartz\uFF1A\u8FD9\u662F\u4E00\u4E2A\u529F\u80FD\u6BD4\u8F83\u5F3A\u5927\u7684\u7684\u8C03\u5EA6\u5668\uFF0C\u53EF\u4EE5\u8BA9\u4F60\u7684\u7A0B\u5E8F\u5728\u6307\u5B9A\u65F6\u95F4\u6267\u884C\uFF0C\u4E5F\u53EF\u4EE5\u6309\u7167\u67D0\u4E00\u4E2A\u9891\u5EA6\u6267\u884C\uFF0C\u914D\u7F6E\u8D77\u6765\u7A0D\u663E\u590D\u6742</li></ul><h3 id="timer"><a class="header-anchor" href="#timer" aria-hidden="true">#</a> Timer</h3><p>\u8FD9\u4E2A\u76EE\u524D\u5728\u9879\u76EE\u4E2D\u7528\u7684\u8F83\u5C11\uFF0C\u5177\u4F53\u7684\u4ECB\u7ECD\u53EF\u4EE5\u67E5\u770Bapi</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">final</span> <span class="token class-name">TimerTask</span> task <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TimerTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;task\uFF1A&quot;</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">final</span> <span class="token class-name">Timer</span> timer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// \u5B89\u6392\u6307\u5B9A\u7684\u4EFB\u52A1\u5728\u6307\u5B9A\u7684\u65F6\u95F4\u5F00\u59CB\u8FDB\u884C\u91CD\u590D\u7684\u56FA\u5B9A\u5EF6\u8FDF\u6267\u884C\u3002\u8FD9\u91CC\u662F\u6BCF1\u79D2\u6267\u884C\u4E00\u6B21</span>
  timer<span class="token punctuation">.</span><span class="token function">schedule</span><span class="token punctuation">(</span>task<span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728@Test\u6CE8\u89E3\u7684\u65B9\u6CD5\u4E2D\u8FD0\u884C\u4E0D\u8F93\u51FA\u6570\u636E\uFF0C\u731C\u6D4B\u5E94\u8BE5\u662F\u548C\u6CA1\u6709\u5B88\u62A4\u7EBF\u7A0B\u6709\u5173</p><h3 id="scheduledexecutorservice"><a class="header-anchor" href="#scheduledexecutorservice" aria-hidden="true">#</a> ScheduledExecutorService</h3><p>ScheduledExecutorService\u7684\u4E3B\u8981\u4F5C\u7528\u5C31\u662F\u53EF\u4EE5\u5C06\u5B9A\u65F6\u4EFB\u52A1\u4E0E\u7EBF\u7A0B\u6C60\u529F\u80FD\u7ED3\u5408\u4F7F\u7528</p><h4 id="scheduleatfixedrate\u5B9E\u73B0\u5468\u671F\u6267\u884C"><a class="header-anchor" href="#scheduleatfixedrate\u5B9E\u73B0\u5468\u671F\u6267\u884C" aria-hidden="true">#</a> scheduleAtFixedRate\u5B9E\u73B0\u5468\u671F\u6267\u884C</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ScheduledExecutorServiceTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ScheduledExecutorService</span> executorService <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newSingleThreadScheduledExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        executorService<span class="token punctuation">.</span><span class="token function">scheduleAtFixedRate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;run &quot;</span><span class="token operator">+</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u4F7F\u7528callable\u5EF6\u8FDF\u8FD0\u884C"><a class="header-anchor" href="#\u4F7F\u7528callable\u5EF6\u8FDF\u8FD0\u884C" aria-hidden="true">#</a> \u4F7F\u7528Callable\u5EF6\u8FDF\u8FD0\u884C</h4><p>ScheduledExecutorService\u4F7F\u7528Callable\u5EF6\u8FDF\u8FD0\u884C</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CallableRun</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Callable</span><span class="token punctuation">&gt;</span></span> callableList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            callableList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyCallableA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            callableList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyCallableB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">ScheduledExecutorService</span> executorService <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newSingleThreadScheduledExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">ScheduledFuture</span> futureA <span class="token operator">=</span> executorService<span class="token punctuation">.</span><span class="token function">schedule</span><span class="token punctuation">(</span>callableList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">4L</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">ScheduledFuture</span> futureB <span class="token operator">=</span> executorService<span class="token punctuation">.</span><span class="token function">schedule</span><span class="token punctuation">(</span>callableList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">4L</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;            X = &quot;</span> <span class="token operator">+</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u8FD4\u56DE\u503CA\uFF1A&quot;</span> <span class="token operator">+</span> futureA<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u8FD4\u56DE\u503CB\uFF1A&quot;</span> <span class="token operator">+</span> futureB<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;            Y = &quot;</span> <span class="token operator">+</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            executorService<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ExecutionException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyCallableA</span> <span class="token keyword">implements</span> <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;callA begin &quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;, &quot;</span> <span class="token operator">+</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u4F11\u77203\u79D2</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;callA end &quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;, &quot;</span> <span class="token operator">+</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token string">&quot;returnA&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyCallableB</span> <span class="token keyword">implements</span> <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span>  <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;callB begin &quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;, &quot;</span> <span class="token operator">+</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;callB end &quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;, &quot;</span> <span class="token operator">+</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token string">&quot;returnB&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="schedulewithfixeddelay"><a class="header-anchor" href="#schedulewithfixeddelay" aria-hidden="true">#</a> scheduleWithFixedDelay</h4><p>\u4F7F\u7528scheduleWithFixedDelay()\u65B9\u6CD5\u5B9E\u73B0\u5468\u671F\u6027\u6267\u884C</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Executors</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ScheduledExecutorService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">TimeUnit</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RunMain</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ScheduledExecutorService</span> executorService <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newSingleThreadScheduledExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;          x = &quot;</span> <span class="token operator">+</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        executorService<span class="token punctuation">.</span><span class="token function">scheduleWithFixedDelay</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyRunable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;          y = &quot;</span> <span class="token operator">+</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyRunable</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;     begin = &quot;</span> <span class="token operator">+</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;, name: &quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;     end = &quot;</span> <span class="token operator">+</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;, name: &quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="spring-task"><a class="header-anchor" href="#spring-task" aria-hidden="true">#</a> Spring Task</h3><h4 id="\u5355\u7EBF\u7A0B\u6267\u884C"><a class="header-anchor" href="#\u5355\u7EBF\u7A0B\u6267\u884C" aria-hidden="true">#</a> \u5355\u7EBF\u7A0B\u6267\u884C</h4><ol><li>\u5728\u9879\u76EE\u542F\u52A8\u7C7B\u4E0A\u6DFB\u52A0 @EnableScheduling \u6CE8\u89E3\uFF0C\u5F00\u542F\u5BF9\u5B9A\u65F6\u4EFB\u52A1\u7684\u652F\u6301</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@EnableScheduling</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringbootDemo02Application</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringbootDemo02Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5176\u4E2D\uFF0C@EnableScheduling\u6CE8\u89E3\u7684\u4F5C\u7528\u662F\u53D1\u73B0\u6CE8\u89E3@Scheduled\u7684\u4EFB\u52A1\u5E76\u540E\u53F0\u6267\u884C</p><ol start="2"><li>\u7F16\u5199\u5B9A\u65F6\u4EFB\u52A1\u7C7B\u548C\u65B9\u6CD5\uFF0C\u5B9A\u65F6\u4EFB\u52A1\u7C7B\u901A\u8FC7 Spring IOC \u52A0\u8F7D\uFF0C\u4F7F\u7528 @Component \u6CE8\u89E3\uFF0C\u5B9A\u65F6\u65B9\u6CD5\u4F7F\u7528 @Scheduled \u6CE8\u89E3</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ScheduledTask</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Scheduled</span><span class="token punctuation">(</span>fixedRate <span class="token operator">=</span> <span class="token number">3000</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">scheduledTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u4EFB\u52A1\u6267\u884C\u65F6\u95F4\uFF1A&quot;</span> <span class="token operator">+</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>fixedRate \u662F long \u7C7B\u578B\uFF0C\u8868\u793A\u4EFB\u52A1\u6267\u884C\u7684\u95F4\u9694\u6BEB\u79D2\u6570\uFF0C\u4EE5\u4E0A\u4EE3\u7801\u4E2D\u7684\u5B9A\u65F6\u4EFB\u52A1\u6BCF 3 \u79D2\u6267\u884C\u4E00\u6B21</p><ol start="3"><li>\u8FD0\u884C\u5B9A\u65F6\u5DE5\u7A0B\uFF0C\u9879\u76EE\u542F\u52A8\u548C\u8FD0\u884C\u65E5\u5FD7\u5982\u4E0B\uFF0C\u53EF\u89C1\u6BCF 3 \u79D2\u6253\u5370\u4E00\u6B21\u65E5\u5FD7\u6267\u884C\u8BB0\u5F55</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>\u4EFB\u52A1\u6267\u884C\u65F6\u95F4\uFF1A2021-12-09T00:22:34.179
\u4EFB\u52A1\u6267\u884C\u65F6\u95F4\uFF1A2021-12-09T00:22:37.179
\u4EFB\u52A1\u6267\u884C\u65F6\u95F4\uFF1A2021-12-09T00:22:40.179
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u591A\u7EBF\u7A0B\u6267\u884C"><a class="header-anchor" href="#\u591A\u7EBF\u7A0B\u6267\u884C" aria-hidden="true">#</a> \u591A\u7EBF\u7A0B\u6267\u884C</h4><p>\u5982\u679C\u53EA\u6709\u4E00\u4E2A\u5B9A\u65F6\u4EFB\u52A1\uFF0C\u50CF\u4E0A\u9762\u7684\u914D\u7F6E\u8FD9\u6837\u505A\u80AF\u5B9A\u6CA1\u95EE\u9898\uFF0C\u5F53\u5B9A\u65F6\u4EFB\u52A1\u589E\u591A\uFF0C\u5982\u679C\u4E00\u4E2A\u4EFB\u52A1\u5361\u6B7B\uFF0C\u4F1A\u5BFC\u81F4\u5176\u4ED6\u4EFB\u52A1\u4E5F\u65E0\u6CD5\u6267\u884C</p><p>\u5728\u4F20\u7EDF\u7684Spring\u9879\u76EE\u4E2D\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5728xml\u914D\u7F6E\u6587\u4EF6\u6DFB\u52A0task\u7684\u914D\u7F6E\uFF0C\u800C\u5728SpringBoot\u9879\u76EE\u4E2D\u4E00\u822C\u4F7F\u7528config\u914D\u7F6E\u7C7B\u7684\u65B9\u5F0F\u6DFB\u52A0\u914D\u7F6E\uFF0C\u6240\u4EE5\u65B0\u5EFA\u4E00\u4E2AAsyncConfig\u7C7B</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableAsync</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AsyncConfig</span> <span class="token punctuation">{</span>
     <span class="token comment">/*
    \u6B64\u5904\u6210\u5458\u53D8\u91CF\u5E94\u8BE5\u4F7F\u7528@Value\u4ECE\u914D\u7F6E\u4E2D\u8BFB\u53D6
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> corePoolSize <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> maxPoolSize <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> queueCapacity <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Executor</span> <span class="token function">taskExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ThreadPoolTaskExecutor</span> executor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadPoolTaskExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        executor<span class="token punctuation">.</span><span class="token function">setCorePoolSize</span><span class="token punctuation">(</span>corePoolSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
        executor<span class="token punctuation">.</span><span class="token function">setMaxPoolSize</span><span class="token punctuation">(</span>maxPoolSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
        executor<span class="token punctuation">.</span><span class="token function">setQueueCapacity</span><span class="token punctuation">(</span>queueCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
        executor<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> executor<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>@Configuration</code>\uFF1A\u8868\u660E\u8BE5\u7C7B\u662F\u4E00\u4E2A\u914D\u7F6E\u7C7B</li><li><code>@EnableAsync</code>\uFF1A\u5F00\u542F\u5F02\u6B65\u4E8B\u4EF6\u7684\u652F\u6301</li></ul><p>\u7136\u540E\u5728\u5B9A\u65F6\u4EFB\u52A1\u7684\u7C7B\u6216\u8005\u65B9\u6CD5\u4E0A\u6DFB\u52A0<code>@Async</code> \u3002\u6700\u540E\u91CD\u542F\u9879\u76EE\uFF0C\u6BCF\u4E00\u4E2A\u4EFB\u52A1\u90FD\u662F\u5728\u4E0D\u540C\u7684\u7EBF\u7A0B\u4E2D</p><h4 id="scheduled\u8BE6\u89E3"><a class="header-anchor" href="#scheduled\u8BE6\u89E3" aria-hidden="true">#</a> @Scheduled\u8BE6\u89E3</h4><p>\u5728\u4E0A\u9762\u7684\u5165\u95E8\u4F8B\u5B50\u4E2D\uFF0C\u4F7F\u7528\u4E86@Scheduled(fixedRate = 3000) \u6CE8\u89E3\u6765\u5B9A\u4E49\u6BCF\u8FC7 3 \u79D2\u6267\u884C\u7684\u4EFB\u52A1\uFF0C\u5BF9\u4E8E @Scheduled \u7684\u4F7F\u7528\u53EF\u4EE5\u603B\u7ED3\u5982\u4E0B\u51E0\u79CD\u65B9\u5F0F\uFF1A</p><ul><li>@Scheduled(fixedRate = 3000) \uFF1A\u4E0A\u4E00\u6B21\u5F00\u59CB\u6267\u884C\u65F6\u95F4\u70B9\u4E4B\u540E 3 \u79D2\u518D\u6267\u884C\uFF08fixedRate \u5C5E\u6027\uFF1A\u5B9A\u65F6\u4EFB\u52A1\u5F00\u59CB\u540E\u518D\u6B21\u6267\u884C\u5B9A\u65F6\u4EFB\u52A1\u7684\u5EF6\u65F6\uFF08\u9700\u7B49\u5F85\u4E0A\u6B21\u5B9A\u65F6\u4EFB\u52A1\u5B8C\u6210\uFF09\uFF0C\u5355\u4F4D\u6BEB\u79D2\uFF09</li><li>@Scheduled(fixedDelay = 3000) \uFF1A\u4E0A\u4E00\u6B21\u6267\u884C\u5B8C\u6BD5\u65F6\u95F4\u70B9\u4E4B\u540E 3 \u79D2\u518D\u6267\u884C\uFF08fixedDelay \u5C5E\u6027\uFF1A\u5B9A\u65F6\u4EFB\u52A1\u6267\u884C\u5B8C\u6210\u540E\u518D\u6B21\u6267\u884C\u5B9A\u65F6\u4EFB\u52A1\u7684\u5EF6\u65F6\uFF08\u9700\u7B49\u5F85\u4E0A\u6B21\u5B9A\u65F6\u4EFB\u52A1\u5B8C\u6210\uFF09\uFF0C\u5355\u4F4D\u6BEB\u79D2\uFF09</li><li>@Scheduled(initialDelay = 1000, fixedRate = 3000) \uFF1A\u7B2C\u4E00\u6B21\u5EF6\u8FDF1\u79D2\u540E\u6267\u884C\uFF0C\u4E4B\u540E\u6309fixedRate\u7684\u89C4\u5219\u6BCF 3 \u79D2\u6267\u884C\u4E00\u6B21\uFF08initialDelay \u5C5E\u6027\uFF1A\u7B2C\u4E00\u6B21\u6267\u884C\u5B9A\u65F6\u4EFB\u52A1\u7684\u5EF6\u8FDF\u65F6\u95F4\uFF0C\u9700\u914D\u5408fixedDelay\u6216\u8005fixedRate\u6765\u4F7F\u7528\uFF09</li><li>@Scheduled(cron=&quot;0 0 2 1 * ? *&quot;) \uFF1A\u901A\u8FC7cron\u8868\u8FBE\u5F0F\u5B9A\u4E49\u89C4\u5219</li></ul><h5 id="cron\u8868\u8FBE\u5F0F"><a class="header-anchor" href="#cron\u8868\u8FBE\u5F0F" aria-hidden="true">#</a> cron\u8868\u8FBE\u5F0F</h5><p>cron\u8868\u8FBE\u5F0F\u683C\u5F0F\uFF1A</p><p>{\u79D2\u6570} {\u5206\u949F} {\u5C0F\u65F6} {\u65E5\u671F} {\u6708\u4EFD} {\u661F\u671F} {\u5E74\u4EFD(\u53EF\u4E3A\u7A7A)}</p><p>\u4F8B &quot;0 0 12 ? * WED&quot; \u5728\u6BCF\u661F\u671F\u4E09\u4E0B\u534812:00 \u6267\u884C\uFF08\u5E74\u4EFD\u901A\u5E38 \u7701\u7565\uFF09</p><ol><li>\u6BCF\u4E2A\u5B57\u6BB5\u7684\u5141\u8BB8\u503C</li></ol><table><thead><tr><th>\u5B57\u6BB5</th><th>\u5141\u8BB8\u503C</th><th>\u5141\u8BB8\u7684\u7279\u6B8A\u5B57\u7B26</th></tr></thead><tbody><tr><td>\u79D2</td><td>0~59</td><td>, - * /</td></tr><tr><td>\u5206</td><td>0~59</td><td>, - * /</td></tr><tr><td>\u5C0F\u65F6</td><td>0~23</td><td>, - * /</td></tr><tr><td>\u65E5\u671F</td><td>1~31</td><td>, - * ? / L W C</td></tr><tr><td>\u6708\u4EFD</td><td>1~12\u6216\u8005JAN~DEC</td><td>, - * /</td></tr><tr><td>\u661F\u671F</td><td>1~7 \u6216\u8005 SUN~SAT</td><td>, - * ? / L C ##</td></tr><tr><td>\u5E74(\u53EF\u9009)</td><td>1970~2099</td><td>, - * /</td></tr></tbody></table><ol start="2"><li>\u8868\u8FBE\u5F0F\u751F\u6210\u5668</li></ol><p>\u6709\u5F88\u591A\u7684cron\u8868\u8FBE\u5F0F\u5728\u7EBF\u751F\u6210\u5668\uFF0C\u8FD9\u91CC\u7ED9\u5927\u5BB6\u63A8\u8350\u51E0\u6B3E</p><ul><li><p>http://www.pdtools.net/tools/becron.jsp</p></li><li><p>http://cron.qqe2.com/</p></li></ul><ol start="3"><li>\u5E38\u7528\u7684cron\u8868\u8FBE\u5F0F</li></ol><p>\u5E38\u7528\u7684cron\u8868\u8FBE\u5F0F\u6709\uFF1A</p><ul><li>0 0 2 1 * ? * \uFF1A\u8868\u793A\u5728\u6BCF\u6708 1 \u65E5\u7684\u51CC\u6668 2 \u70B9\u6267\u884C</li><li>0 15 10 ? * MON-FRI \uFF1A\u8868\u793A\u5468\u4E00\u5230\u5468\u4E94\u6BCF\u5929\u4E0A\u5348 10:15 \u6267\u884C</li><li>0 15 10 ? 6L 2019-2020 \uFF1A\u8868\u793A 2019-2020 \u5E74\u7684\u6BCF\u4E2A\u6708\u7684\u6700\u540E\u4E00\u4E2A\u661F\u671F\u4E94\u4E0A\u5348 10:15 \u6267\u884C</li><li>0 0 10,14,16 * * ? \uFF1A\u6BCF\u5929\u4E0A\u5348 10 \u70B9\uFF0C\u4E0B\u5348 2 \u70B9\uFF0C4 \u70B9\u6267\u884C</li><li>0 0/30 9-17 * * ? \uFF1A\u671D\u4E5D\u665A\u4E94\u5DE5\u4F5C\u65F6\u95F4\u5185\u6BCF\u534A\u5C0F\u65F6\u6267\u884C</li><li>0 0 12 ? * WED \uFF1A\u8868\u793A\u6BCF\u4E2A\u661F\u671F\u4E09\u4E2D\u5348 12 \u70B9\u6267\u884C</li><li>0 0 12 * * ? \uFF1A\u6BCF\u5929\u4E2D\u5348 12\u70B9\u6267\u884C</li><li>0 15 10 ? * * \uFF1A\u6BCF\u5929\u4E0A\u5348 10:15 \u6267\u884C</li><li>0 15 10 * * ? \uFF1A\u6BCF\u5929\u4E0A\u5348 10:15 \u6267\u884C</li><li>0 15 10 * * ? * \uFF1A\u6BCF\u5929\u4E0A\u5348 10:15 \u6267\u884C</li><li>0 15 10 * * ? 2019 \uFF1A2019 \u5E74\u7684\u6BCF\u5929\u4E0A\u5348 10:15 \u6267\u884C</li></ul><h3 id="quartz"><a class="header-anchor" href="#quartz" aria-hidden="true">#</a> Quartz</h3><p>\u5F15\u5165\u4F9D\u8D56</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-quartz<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>\u521B\u5EFA\u4EFB\u52A1\u7C7BTestQuartz\uFF0C\u8BE5\u7C7B\u4E3B\u8981\u662F\u7EE7\u627F\u4E86QuartzJobBean</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestQuartz</span> <span class="token keyword">extends</span> <span class="token class-name">QuartzJobBean</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * \u6267\u884C\u5B9A\u65F6\u4EFB\u52A1
     * <span class="token keyword">@param</span> <span class="token parameter">jobExecutionContext</span>
     * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">JobExecutionException</span></span>
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">executeInternal</span><span class="token punctuation">(</span><span class="token class-name">JobExecutionContext</span> jobExecutionContext<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JobExecutionException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;quartz task &quot;</span><span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u521B\u5EFA\u914D\u7F6E\u7C7B<code>QuartzConfig</code></li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">QuartzConfig</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">JobDetail</span> <span class="token function">teatQuartzDetail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">JobBuilder</span><span class="token punctuation">.</span><span class="token function">newJob</span><span class="token punctuation">(</span><span class="token class-name">TestQuartz</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withIdentity</span><span class="token punctuation">(</span><span class="token string">&quot;testQuartz&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">storeDurably</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">Trigger</span> <span class="token function">testQuartzTrigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">SimpleScheduleBuilder</span> scheduleBuilder <span class="token operator">=</span> <span class="token class-name">SimpleScheduleBuilder</span><span class="token punctuation">.</span><span class="token function">simpleSchedule</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">withIntervalInSeconds</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>  <span class="token comment">//\u8BBE\u7F6E\u65F6\u95F4\u5468\u671F\u5355\u4F4D\u79D2</span>
                <span class="token punctuation">.</span><span class="token function">repeatForever</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token class-name">TriggerBuilder</span><span class="token punctuation">.</span><span class="token function">newTrigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forJob</span><span class="token punctuation">(</span><span class="token function">teatQuartzDetail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">withIdentity</span><span class="token punctuation">(</span><span class="token string">&quot;testQuartz&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">withSchedule</span><span class="token punctuation">(</span>scheduleBuilder<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u542F\u52A8\u9879\u76EE</li></ol>`,362);function rn(dn,vn){const a=o("ExternalLinkIcon");return c(),l(i,null,[L,n("blockquote",null,[D,H,W,z,n("ul",null,[U,$,J,G,n("li",null,[Q,n("a",Y,[Z,t(a)])]),n("li",null,[K,n("a",X,[nn,t(a)])])]),sn,an,n("ul",null,[tn,pn,en,on,n("li",null,[cn,n("a",ln,[un,t(a)])])])]),kn],64)}var gn=e(O,[["render",rn],["__file","01.springboot\u57FA\u7840.html.vue"]]);export{gn as default};
