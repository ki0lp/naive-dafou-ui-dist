import{_ as p,r as o,o as c,a as l,b as n,d as t,F as i,c as e,e as s}from"./app.1414484b.js";var u="/naive-dafou-ui-dist/assets/image-20211212164449058.a46b782f.png",r="/naive-dafou-ui-dist/assets/image-20211212191240519.e98ea29d.png",d="/naive-dafou-ui-dist/assets/image-20211212210714917.3b0b7213.png",k="/naive-dafou-ui-dist/assets/image-20211212212549327.71becde6.png",v="/naive-dafou-ui-dist/assets/image-20211212212529368.15cf52ed.png",m="/naive-dafou-ui-dist/assets/image-20211212222707612.50c1af57.png",b="/naive-dafou-ui-dist/assets/image-20211212233835908.e01814c5.png",q="/naive-dafou-ui-dist/assets/image-20211212234145123.a9bdbe04.png",g="/naive-dafou-ui-dist/assets/image-20211213202624981.7dde52d7.png",h="/naive-dafou-ui-dist/assets/image-20211213164440101.f530b884.png",y="/naive-dafou-ui-dist/assets/image-20211213225847576.b36febea.png",f="/naive-dafou-ui-dist/assets/image-20211213224115831.e4d9403c.png",_="/naive-dafou-ui-dist/assets/image-20211213224402953.0e7797d7.png",x="/naive-dafou-ui-dist/assets/image-20211213224602351.1aa8cff1.png",w="/naive-dafou-ui-dist/assets/image-20211214023743156.dd0bd4c1.png",j="/naive-dafou-ui-dist/assets/image-20211214031411313.191dba03.png",S="/naive-dafou-ui-dist/assets/image-20211214032322618.69588354.png",R="/naive-dafou-ui-dist/assets/image-20211214033610045.8581bd49.png",T="/naive-dafou-ui-dist/assets/image-20211214034631171.a6da24bc.png",E="/naive-dafou-ui-dist/assets/image-20211214034457071.48ac67d8.png",C="/naive-dafou-ui-dist/assets/image-20211214045327133.3657c171.png",B="/naive-dafou-ui-dist/assets/image-20211214155212058.2573a97e.png",A="/naive-dafou-ui-dist/assets/image-20211214232030246.daf3121b.png",D="/naive-dafou-ui-dist/assets/image-20211215054815422.c05d6c77.png",I="/naive-dafou-ui-dist/assets/image-20211215063648619.231e8183.png",O="/naive-dafou-ui-dist/assets/image-20211215070644453.5ff7bec3.png",H="/naive-dafou-ui-dist/assets/image-20211215070947515.268c4b67.png",N="/naive-dafou-ui-dist/assets/image-20211215080828845.25fe70fd.png",z="/naive-dafou-ui-dist/assets/image-20211215081109297.62a7f459.png";const L={},P=e(`<h2 id="\u6982\u8FF0"><a class="header-anchor" href="#\u6982\u8FF0" aria-hidden="true">#</a> \u6982\u8FF0</h2><h3 id="\u4EC0\u4E48\u662Frestful"><a class="header-anchor" href="#\u4EC0\u4E48\u662Frestful" aria-hidden="true">#</a> \u4EC0\u4E48\u662Frestful</h3><p><strong>rest</strong>\uFF1A\u8868\u73B0\u5C42\u72B6\u6001\u5316(representational state transfer)\uFF0C\u5982\u679C\u4E00\u4E2A\u67B6\u6784\u7B26\u5408rest\u539F\u5219\uFF0C\u5C31\u79F0\u5B83\u4E3Arestful\u67B6\u6784\u98CE\u683C</p><blockquote><p>rest \u8868\u73B0\u5C42\u72B6\u6001\u8F6C\u5316 resource representational state transfer\uFF0C\u5168\u90E8\u540D\u79F0\u5E94\u8BE5\u662F\uFF1A\u8D44\u6E90\u7684\u8868\u73B0\u5C42\u72B6\u6001\u8F6C\u5316</p></blockquote><p><strong>\u8D44\u6E90</strong>\uFF1A\u6240\u8C13\u8D44\u6E90\uFF0C\u5C31\u662F\u7F51\u7EDC\u4E0A\u7684\u4E00\u4E2A\u5B9E\u4F53\uFF0C\u6216\u8005\u8BF4\u662F\u7F51\u7EDC\u4E0A\u7684\u4E00\u4E2A\u5177\u4F53\u4FE1\u606F</p><p><strong>\u8868\u73B0\u5C42</strong>\uFF1A\u6211\u4EEC\u628A\u8D44\u6E90\u5177\u4F53\u5448\u73B0\u51FA\u6765\u7684\u5F62\u5F0F\uFF0C\u53EB\u505A\u5B83\u7684\u8868\u73B0\u5C42(representation)</p><p><strong>\u72B6\u6001\u5316\uFF08state transfer\uFF09</strong>\uFF1A\u5982\u679C\u5BA2\u6237\u7AEF\u60F3\u8981\u64CD\u4F5C\u670D\u52A1\u5668\uFF0C\u5FC5\u987B\u901A\u8FC7\u67D0\u79CD\u624B\u6BB5\uFF0C\u8BA9\u670D\u52A1\u5668\u7AEF\u53D1\u751F\u201C\u72B6\u6001\u8F6C\u5316\u201D\uFF0C\u800C\u8FD9\u79CD\u8F6C\u5316\u662F\u5EFA\u7ACB\u5728\u8868\u73B0\u5C42\u4E4B\u4E0A\u7684\uFF0C\u6240\u4EE5\u5C31\u662F\u8868\u73B0\u5C42\u72B6\u6001\u8F6C\u5316</p><blockquote><p>rest\u539F\u5219\u5C31\u662F\u6307\u4E00\u4E2AURL\u4EE3\u8868\u4E00\u4E2A\u552F\u4E00\u7684\u8D44\u6E90\uFF0C\u5E76\u4E14\u901A\u8FC7http\u534F\u8BAE\u91CC\u9762\u7684\u56DB\u4E2A\u52A8\u8BCD\uFF1AGET\u3001POST\u3001PUT\u3001DELETE\u5BF9\u5E94\u56DB\u79CD\u670D\u52A1\u5668\u6BB5\u7684\u57FA\u672C\u64CD\u4F5C\uFF1AGET\u7528\u6765\u8BF7\u6C42\u8D44\u6E90\uFF0CPOST\u7528\u6765\u6DFB\u52A0\u8D44\u6E90(\u4E5F\u53EF\u4EE5\u7528\u4E8E\u66F4\u65B0\u8D44\u6E90)\uFF0CPUT\u7528\u6765\u66F4\u65B0\u8D44\u6E90\uFF0CDELETE\u7528\u6765\u5220\u9664\u8D44\u6E90</p></blockquote><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>\u539F\u5219\uFF1A
	<span class="token list punctuation">1.</span> \u4F7F\u7528rest\u7684URL\u66FF\u6362\u4F20\u7EDF\u7684URL
	\u4F20\u7EDF\u7684URL\uFF1Ahttp://localhost:9000/\u9879\u76EE\u540D\u79F0/user/findOne?id=12
						http://localhost:9000/\u9879\u76EE\u540D\u79F0/emp/findOne?id=18  ## \u80FD\u552F\u4E00\u5B9A\u4F4D\u5230\u8D44\u6E90
	restful:
						http://localhost:9000/\u9879\u76EE\u540D\u79F0/user/findOne/12
	<span class="token list punctuation">2.</span> \u56DB\u4E2D\u52A8\u8BCD\u5BF9\u5E94\u670D\u52A1\u7AEF\u7684\u56DB\u79CD\u64CD\u4F5C\uFF1AGET\u3001PUST\u3001PUT\u3001DELETE
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="springboot\u7F16\u5199rest\u8BF7\u6C42"><a class="header-anchor" href="#springboot\u7F16\u5199rest\u8BF7\u6C42" aria-hidden="true">#</a> springboot\u7F16\u5199rest\u8BF7\u6C42</h4><p>\u521B\u5EFAspringboot\u9879\u76EE\uFF0C\u5F15\u5165web\u4F9D\u8D56\uFF0C\u521B\u5EFA<code>user.UserController</code></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * rest\u7684\u8BBE\u8BA1\u539F\u5219\uFF1A
 * 1. \u4F7F\u7528restful\u66FF\u6362\u4F20\u7EDFURL \u53C2\u6570\u4F5C\u4E3AURL\u6574\u4F53
 * 2. \u4F7F\u7528\u56DB\u79CDhttp\u52A8\u8BCD\uFF08\u8BF7\u6C42\u65B9\u5F0F\uFF09\u5BF9\u5E94\u670D\u52A1\u7AEF\u56DB\u79CD\u64CD\u4F5C
 *
 * @GETMapping
 * @POSTMapping
 * @PUTMapping
 * @DELETEMapping 3. \u901A\u5E38\u670D\u52A1\u8FD4\u56DE\u7684\u6570\u636E\u90FDjson\u683C\u5F0F \u6216\u8005 xml\u683C\u5F0F
 */</span>
<span class="token comment">// RestController \u8FD4\u56DE\u670D\u52A1\u7C7B\u578B\u662Fjson\u6216\u8005 xml\u683C\u5F0F\u7684\u5B57\u7B26\u4E32</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;findOne/{id}/{name}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">findOne</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> id<span class="token punctuation">,</span> <span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;id : &quot;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;name : &quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;{&#39;state&#39;:&#39;success&#39;,&#39;code&#39;:200}&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;save&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">UserForm</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;{&#39;state&#39;:&#39;success&#39;,&#39;code&#39;:200}&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@PutMapping</span><span class="token punctuation">(</span><span class="token string">&quot;update&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">UserForm</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;{&#39;state&#39;:&#39;success&#39;,&#39;code&#39;:200}&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@DeleteMapping</span><span class="token punctuation">(</span><span class="token string">&quot;delete/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;{&#39;state&#39;:&#39;success&#39;,&#39;code&#39;:200}&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// userForm</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserForm</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> username<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>username <span class="token operator">=</span> username<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;UserForm{&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;id=&#39;&quot;</span> <span class="token operator">+</span> id <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token string">&quot;, username=&#39;&quot;</span> <span class="token operator">+</span> username <span class="token operator">+</span> <span class="token char">&#39;\\&#39;&#39;</span> <span class="token operator">+</span>
                <span class="token char">&#39;}&#39;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u4EC0\u4E48\u662F\u5168\u6587\u68C0\u7D22"><a class="header-anchor" href="#\u4EC0\u4E48\u662F\u5168\u6587\u68C0\u7D22" aria-hidden="true">#</a> \u4EC0\u4E48\u662F\u5168\u6587\u68C0\u7D22</h3><p><strong>\u5168\u6587\u68C0\u7D22\u662F\u8BA1\u7B97\u673A\u7A0B\u5E8F\u901A\u8FC7\u626B\u63CF\u6587\u7AE0\u4E2D\u7684\u6BCF\u4E00\u4E2A\u8BCD\uFF0C\u5BF9\u6BCF\u4E00\u4E2A\u8BCD\u5EFA\u7ACB\u4E00\u4E2A\u7D22\u5F15\uFF0C\u6307\u660E\u8BE5\u8BCD\u5728\u6587\u7AE0\u4E2D\u51FA\u73B0\u7684\u6B21\u6570\u548C\u4F4D\u7F6E\u3002\u5F53\u7528\u6237\u67E5\u8BE2\u65F6\u6839\u636E\u5EFA\u7ACB\u7684\u7D22\u5F15\u67E5\u627E\uFF0C\u7C7B\u4F3C\u4E8E\u901A\u8FC7\u5B57\u5178\u7684\u68C0\u7D22\u8868\u67E5\u5B57\u7684\u8FC7\u7A0B</strong></p><p>\u5168\u6587\u68C0\u7D22(Full-Text Retrieval((\u68C0\u7D22)))\u4EE5\u6587\u672C\u4F5C\u4E3A\u68C0\u7D22\u5BF9\u8C61\uFF0C\u627E\u51FA\u542B\u6709\u6307\u5B9A\u8BCD\u6C47\u7684\u6587\u672C\u3002<strong>\u5168\u9762\u3001\u51C6\u786E\u548C\u5FEB\u901F\u662F\u8861\u91CF\u5168\u6587\u68C0\u7D22\u7CFB\u7EDF\u7684\u5173\u952E\u6307\u6807</strong></p><p>\u5173\u4E8E\u5168\u6587\u68C0\u7D22\uFF0C\u6211\u4EEC\u8981\u77E5\u9053\uFF1A</p><ul><li>\u53EA\u5904\u7406\u6587\u672C</li><li>\u4E0D\u5904\u7406\u8BED\u4E49</li><li>\u641C\u7D22\u82F1\u6587\u4E0D\u533A\u5206\u5927\u5C0F\u5199</li><li>\u7ED3\u679C\u5217\u8868\u6709\u76F8\u5173\u5EA6\u6392\u5E8F</li></ul><h3 id="\u4EC0\u4E48\u662Felasticsearch"><a class="header-anchor" href="#\u4EC0\u4E48\u662Felasticsearch" aria-hidden="true">#</a> \u4EC0\u4E48\u662FelasticSearch</h3><blockquote><p>elasticSearch\u4E4B\u524D\u5168\u6587\u68C0\u7D22\u7684\u7684\u5178\u578B\u4EE3\u8868\u662FLucene\uFF0C\u4F46\u662FLucene\u7684API\u8FC7\u4E8E\u590D\u6742\uFF0C\u6240\u4EE5elasticSearch\u516C\u53F8\u628ALucene\u8FDB\u884C\u4E86\u7B80\u5316\uFF0C\u5C31\u6210\u4E86elasticSearch</p></blockquote><p>elasticSearch\u7B80\u79F0ES\uFF0C\u662F\u57FA\u4E8EApache Lucene\u6784\u5EFA\u7684\u5F00\u6E90\u641C\u7D22\u5F15\u64CE\uFF0C\u662F\u5F53\u671F\u6D41\u884C\u7684\u4F01\u4E1A\u7EA7\u641C\u7D22\u5F15\u64CE\uFF0Clucene\u672C\u8EAB\u5C31\u53EF\u4EE5\u88AB\u4EBA\u4E3A\u8FC4\u4ECA\u4E3A\u6B62\u6027\u80FD\u6700\u597D\u7684\u4E00\u6B3E\u5F00\u6E90\u641C\u7D22\u5F15\u64CE\u5DE5\u5177\u5305\uFF0C\u4F46\u662FLucene\u7684API\u76F8\u5BF9\u590D\u6742\uFF0C\u9700\u8981\u6DF1\u539A\u7684\u641C\u7D22\u7406\u8BBA\uFF0C\u5F88\u96BE\u96C6\u6210\u5230\u5B9E\u9645\u7684\u5E94\u7528\u4E2D\u53BB\u3002\u4F46\u662FES\u662F\u91C7\u7528Java\u8BED\u8A00\u7F16\u5199\uFF0C\u63D0\u4F9B\u4E86\u7B80\u5355\u6613\u7528\u7684restful api\uFF0C\u5F00\u53D1\u8005\u53EF\u4EE5\u4F7F\u7528\u5176\u7B80\u5355\u7684restful api\uFF0C\u5F00\u53D1\u76F8\u5173\u7684\u641C\u7D22\u529F\u80FD\uFF0C\u4ECE\u800C\u907F\u514DLucene\u7684\u590D\u6742\u6027</p><h3 id="es\u7684\u8BDE\u751F"><a class="header-anchor" href="#es\u7684\u8BDE\u751F" aria-hidden="true">#</a> es\u7684\u8BDE\u751F</h3>`,21),Q=n("p",null,"\u5B98\u7F51\uFF1Ahttps://www.elastic.co/cn/",-1),U=n("p",null,"es \u53D1\u5C55\u65F6\u95F4\u7EBF",-1),M=n("p",null,[n("strong",null,"ES"),s(" \u662F\u57FA\u4E8E "),n("strong",null,"Lucene"),s(" \u5F00\u53D1\u7684\u4E00\u6B3E\u641C\u7D22\u5E94\u7528")],-1),F={href:"https://lucene.apache.org/",target:"_blank",rel:"noopener noreferrer"},X=s("Lucene"),G=s(" \u662F\u4E00\u4E2A\u57FA\u4E8E "),W=n("strong",null,"Java",-1),J=s(" \u8BED\u8A00\u7684\u641C\u7D22\u5F15\u64CE\u5E93\uFF0C\u5B83\u7531 "),K=n("strong",null,"Doug Cutting",-1),Y=s(" \u521B\u5EFA\u4E8E 1995 \u5E74\uFF0C\u5E76\u4E8E 2005 \u5E74\u6210\u4E3A "),V=n("strong",null,"Apache",-1),$=s(" \u9876\u7EA7\u5F00\u6E90\u9879\u76EE"),Z=n("li",null,[n("p",null,"\u867D\u7136 Lucene \u975E\u5E38\u5F3A\u5927\uFF0C\u4F46\u5B83\u53EA\u662F\u4E00\u4E2A Java \u7C7B\u5E93\uFF0C\u800C\u4E14\u5B66\u4E60\u6210\u672C\u8F83\u9AD8")],-1),nn=n("li",null,[n("p",null,[s("ES \u7684\u521B\u59CB\u4EBA "),n("strong",null,"Shay Banon"),s(" \u5728 2004 \u5E74\uFF0C\u57FA\u4E8E Lucene \u521B\u5EFA\u4E86\u4E00\u4E2A\u5F00\u6E90\u9879\u76EE "),n("strong",null,"Compass"),s("\uFF0C\u540E\u4E8E 2010 \u5E74\u6539\u540D\u4E3A ElasticSearch")])],-1),sn=n("li",null,[n("p",null,"\u4ECE\u4E00\u5F00\u59CB ES \u5C31\u5177\u5907\u4E86\u53EF\u6269\u5C55\uFF0C\u5206\u5E03\u5F0F\uFF0C\u6613\u7528\u7684\u7279\u70B9\uFF0CES \u7684\u8FD9\u4E9B\u4F18\u70B9\u4F7F\u5F97\u5B83\u5F88\u5FEB\u7684\u6D41\u884C\u5F00\u6765")],-1),an=n("li",null,[n("p",null,"Shay Banon \u5728 2010 \u5E74\u53D1\u5E03\u4E86 ES \u7684\u7B2C\u4E00\u4E2A\u7248\u672C\uFF0C\u5E76\u4E8E 2012 \u5E74\u6210\u7ACB\u4E86\u516C\u53F8\uFF0C\u6765\u63D0\u4F9B\u66F4\u52A0\u5B8C\u5584\u7684\u4EA7\u54C1\u548C\u670D\u52A1")],-1),tn=s("2015\u5E74\uFF0C\u516C\u53F8\u540D\u79F0\u4ECE Elasticsearch \u6539\u4E3A "),en={href:"https://www.elastic.co/cn",target:"_blank",rel:"noopener noreferrer"},pn=s("Elastic"),on=s("\u3002\u56E0\u4E3A\u6B64\u65F6\uFF0C\u516C\u53F8\u7684\u6740\u624B\u7EA7\u4EA7\u54C1\u5DF2\u7ECF\u4E0D\u4EC5\u4EC5\u662F Elasticsearch \u4E86\uFF0C\u800C\u4E14\u8FD8\u5305\u62EC\u4E86 "),cn={href:"https://www.elastic.co/cn/logstash",target:"_blank",rel:"noopener noreferrer"},ln=s("Logstash"),un=s(" \u548C "),rn={href:"https://www.elastic.co/cn/kibana",target:"_blank",rel:"noopener noreferrer"},dn=s("Kibana"),kn=s("\uFF0C\u8FD9\u4E09\u6B3E\u5E94\u7528\u7EDF\u79F0\u4E3A "),vn=n("strong",null,"ELK",-1),mn=n("p",null,"Elastic Stack\u6808",-1),bn=n("ul",null,[n("li",null,"Beats + ElasticSearch + Kibana +Logstash")],-1),qn=n("p",null,"Spring Statck\u6808",-1),gn=n("ul",null,[n("li",null,"springboot + springcloud + spring data + spring data flow")],-1),hn=n("p",null,"Full Stack \u6808",-1),yn=n("ul",null,[n("li",null,"\u524D\u7AEF\u6280\u672F\u6808"),n("li",null,"\u540E\u7AEF\u6280\u672F\u6808")],-1),fn=e('<h3 id="es\u7684\u5E94\u7528\u573A\u666F"><a class="header-anchor" href="#es\u7684\u5E94\u7528\u573A\u666F" aria-hidden="true">#</a> es\u7684\u5E94\u7528\u573A\u666F</h3><p>es\u4E3B\u8981\u8F7B\u91CF\u7EA7json\u4F5C\u4E3A\u6570\u636E\u5B58\u50A8\u683C\u5F0F\uFF0C\u8FD9\u70B9\u4E0EMongoDB\u6709\u70B9\u7C7B\u4F3C\uFF0C\u4F46\u5B83\u5728\u4E8E\u8BFB\u5199\u6027\u80FD\u4E0A\u4F18\u4E8EMongoDB\uFF0C\u540C\u65F6\u4E5F\u652F\u6301\u5730\u7406\u4F4D\u7F6E\u67E5\u8BE2\uFF0C\u8FD8\u65B9\u4FBF\u5730\u7406\u4F4D\u7F6E\u548C\u6587\u672C\u6DF7\u5408\u67E5\u8BE2\u3002\u4EE5\u53CA\u5728\u7EDF\u8BA1\u3001\u65E5\u5FD7\u7C7B\u5B58\u50A8\u548C\u5206\u6790\u3001\u53EF\u89C6\u5316\u8FD9\u65B9\u9762\u662F\u5F15\u9886\u8005</p><h2 id="\u5B89\u88C5es"><a class="header-anchor" href="#\u5B89\u88C5es" aria-hidden="true">#</a> \u5B89\u88C5es</h2><h3 id="\u51C6\u5907\u73AF\u5883"><a class="header-anchor" href="#\u51C6\u5907\u73AF\u5883" aria-hidden="true">#</a> \u51C6\u5907\u73AF\u5883</h3><h4 id="\u5B89\u88C5jdk"><a class="header-anchor" href="#\u5B89\u88C5jdk" aria-hidden="true">#</a> \u5B89\u88C5jdk</h4><ol><li>\u4E0B\u8F7D</li></ol><p>\u5B98\u65B9\u7F51\u5740\uFF1Ahttps://www.oracle.com/java/technologies/downloads/#java8</p><p>\u9009\u62E9<code>x64 Compressed Archive</code></p><p><img src="'+u+`" alt="image-20211212164449058"></p><ol start="2"><li>\u4E0A\u4F20\u5230linux</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">scp</span> /Users/aldencarter/Downloads/jdk-8u311-linux-x64.tar.gz root@172.16.187.15:/opt/soft/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>\u521B\u5EFA\u5B89\u88C5\u76EE\u5F55</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">mkdir</span> /opt/dev-env/java/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="4"><li>\u89E3\u538B\u521A\u624D\u7684\u538B\u7F29\u5305</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">tar</span> -zxvf jdk-8u311-linux-x64.tar.gz -C /opt/dev-env/java/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="5"><li>\u8BBE\u7F6E\u73AF\u5883\u53D8\u91CF</li></ol><p>\u6253\u5F00<code>.bash_profile</code>\u6587\u4EF6</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> ~/.bash_profile
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6DFB\u52A0\u73AF\u5883\u53D8\u91CF</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/opt/dev-env/java/jdk1.8.0_311
<span class="token builtin class-name">export</span> <span class="token assign-left variable">JRE_HOME</span><span class="token operator">=</span><span class="token variable">\${JAVA_HOME}</span>/jre
<span class="token builtin class-name">export</span> <span class="token assign-left variable">CLASSPATH</span><span class="token operator">=</span>.:<span class="token variable">\${JAVA_HOME}</span>/lib:<span class="token variable">\${JRE_HOME}</span>/lib
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">\${JAVA_HOME}</span>/bin:<span class="token environment constant">$PATH</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li>\u5237\u65B0\u73AF\u5883\u53D8\u91CF\u914D\u7F6E</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>soruce ~/.bash_profile
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="7"><li>\u68C0\u67E5\u5B89\u88C5\u60C5\u51B5</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost java<span class="token punctuation">]</span><span class="token comment">## java -version</span>
java version <span class="token string">&quot;1.8.0_311&quot;</span>
Java<span class="token punctuation">(</span>TM<span class="token punctuation">)</span> SE Runtime Environment <span class="token punctuation">(</span>build <span class="token number">1.8</span>.0_311-b11<span class="token punctuation">)</span>
Java HotSpot<span class="token punctuation">(</span>TM<span class="token punctuation">)</span> <span class="token number">64</span>-Bit Server VM <span class="token punctuation">(</span>build <span class="token number">25.311</span>-b11, mixed mode<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u5B89\u88C5elasticsearch"><a class="header-anchor" href="#\u5B89\u88C5elasticsearch" aria-hidden="true">#</a> \u5B89\u88C5elasticSearch</h4><ol><li>\u4E0B\u8F7D</li></ol><p>\u53EF\u4EE5\u9009\u62E9\u4E0D\u540C\u7684\u7248\u672C\uFF1Ahttps://www.elastic.co/downloads/past-releases#elasticsearch</p><ol start="2"><li>\u5C06\u538B\u7F29\u5305\u4E0A\u4F20\u5230linux</li></ol><p>\u5728\u672C\u5730\u7EC8\u7AEF\u4F7F\u7528scp\u5C06\u538B\u7F29\u5305\u4E0A\u4F20\u5230linux</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">scp</span> /Users/aldencarter/Downloads/elasticsearch-6.8.20.tar.gz root@172.16.187.15:/opt/soft/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5728/opt/\u4E0B\u521B\u5EFAdev-env/elasticsearch\uFF0C\u5C06\u538B\u7F29\u5305\u89E3\u538B\u5230\u8BE5\u76EE\u5F55\u4E0B</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>mdkir elasticsearch
<span class="token function">tar</span> -zxvf elasticsearch-6.8.20.tar.gz -C /opt/dev-env/elasticsearch/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>es\u4E0D\u80FD\u4EE5root\u7528\u6237\u8EAB\u4EFD\u542F\u52A8\uFF0C\u542F\u52A8\u5FC5\u987B\u521B\u5EFA\u666E\u901A\u7528\u6237</li></ol><p>\u5728linux\u7CFB\u7EDF\u4E2D\u521B\u5EFA\u65B0\u7684\u7EC4</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">groupadd</span> es
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u521B\u5EFA\u65B0\u7684\u7528\u6237es\u5E76\u5C06\u7528\u6237\u653E\u5165es\u7EC4\u4E2D</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">useradd</span> es-admin -g es
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4FEE\u6539es\u7528\u6237\u5BC6\u7801</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">passwd</span> es-admin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="4"><li>\u5C06<code>elasticsearch-6.8.20</code>\u76EE\u5F55\u7684\u64CD\u4F5C\u6743\u9650\u8D4B\u7ED9<code>es-admin</code></li></ol><p>\u8FDB\u5165<code>elasticsearch-6.8.20</code>\u76EE\u5F55</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /opt/dev-env/elasticsearch/elasticsearch-6.8.20
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u7ED9\u7528\u6237<code>es-admin</code>\u8D4B\u4E88\u6743\u9650\uFF0C<code>-R</code>\u8868\u793A<code>\u9010\u7EA7\uFF08N\u5C42\u76EE\u5F55\uFF09</code> \uFF0C <code>*</code>\u8868\u793A <code>\u4EFB\u4F55\u6587\u4EF6</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">chown</span> -R es-admin:es *
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="5"><li>\u542F\u52A8\u6D4B\u8BD5</li></ol><p>\u5207\u6362\u5230es-admin\u7528\u6237</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">su</span> es-admin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8FDB\u5165<code>elasticsearch-6.8.0</code>\uFF0C\u67E5\u770B\u5F53\u524D\u76EE\u5F55\u7684\u6240\u6709\u8005</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>es-admin@localhost elasticsearch-6.8.0<span class="token punctuation">]</span>$ ll
\u603B\u7528\u91CF <span class="token number">460</span>
drwxr-xr-x.  <span class="token number">3</span> es-admin es   <span class="token number">4096</span> <span class="token number">12</span>\u6708 <span class="token number">12</span> <span class="token number">17</span>:35 bin								<span class="token comment">## \u5B58\u653E\u542F\u52A8\u548C\u5173\u95ED\u7684\u76F8\u5173\u811A\u672C</span>
	-rwxr-xr-x. <span class="token number">1</span> es-admin es     <span class="token number">1777</span> <span class="token number">5</span>\u6708  <span class="token number">16</span> <span class="token number">2019</span> elasticsearch		<span class="token comment">## \u542F\u52A8es[\u4E3B\u8981\u4F7F\u7528]</span>
drwxr-xr-x.  <span class="token number">2</span> es-admin es    <span class="token number">178</span> <span class="token number">12</span>\u6708 <span class="token number">12</span> <span class="token number">17</span>:53 config							<span class="token comment">## \u5B58\u653E\u914D\u7F6E\u6587\u4EF6</span>
	-rw-rw----. <span class="token number">1</span> es-admin es  <span class="token number">2853</span> <span class="token number">5</span>\u6708  <span class="token number">16</span> <span class="token number">2019</span> elasticsearch.yml		<span class="token comment">## yml\u914D\u7F6E\u6587\u4EF6[\u6B63\u5E38\u6539]</span>
  -rw-rw----. <span class="token number">1</span> es-admin es  <span class="token number">3613</span> <span class="token number">5</span>\u6708  <span class="token number">16</span> <span class="token number">2019</span> jvm.options					<span class="token comment">## jvm\u53C2\u6570\u914D\u7F6E[\u5BF9\u865A\u62DF\u673A\u7684\u5185\u5B58\u8981\u6C42\u81F3\u5C11\u8981512MB\u4EE5\u4E0A]</span>
drwxr-xr-x.  <span class="token number">3</span> es-admin es     <span class="token number">19</span> <span class="token number">12</span>\u6708 <span class="token number">12</span> <span class="token number">18</span>:10 data								<span class="token comment">## \u5B58\u653E\u6570\u636E</span>
drwxr-xr-x.  <span class="token number">3</span> es-admin es   <span class="token number">4096</span> <span class="token number">5</span>\u6708  <span class="token number">16</span> <span class="token number">2019</span> lib									<span class="token comment">## \u8FD0\u884C\u65F6\u9700\u8981\u7684\u7B2C\u4E09\u65B9jar\u5305</span>
-rw-r--r--.  <span class="token number">1</span> es-admin es  <span class="token number">13675</span> <span class="token number">5</span>\u6708  <span class="token number">16</span> <span class="token number">2019</span> LICENSE.txt
drwxr-xr-x.  <span class="token number">2</span> es-admin es    <span class="token number">249</span> <span class="token number">12</span>\u6708 <span class="token number">12</span> <span class="token number">17</span>:53 logs								<span class="token comment">## \u4EA7\u751F\u7684\u65E5\u5FD7</span>
drwxr-xr-x. <span class="token number">31</span> es-admin es   <span class="token number">4096</span> <span class="token number">5</span>\u6708  <span class="token number">16</span> <span class="token number">2019</span> modules							<span class="token comment">## \u5B58\u653E\u4F9D\u8D56\u6A21\u5757</span>
-rw-r--r--.  <span class="token number">1</span> es-admin es <span class="token number">427502</span> <span class="token number">5</span>\u6708  <span class="token number">16</span> <span class="token number">2019</span> NOTICE.txt
drwxr-xr-x.  <span class="token number">2</span> es-admin es      <span class="token number">6</span> <span class="token number">5</span>\u6708  <span class="token number">16</span> <span class="token number">2019</span> plugins							<span class="token comment">## es\u7684\u63D2\u4EF6\uFF0C\u65E5\u540E\u53EF\u4EE5\u5B89\u88C5es\u7684\u63D2\u4EF6</span>
-rw-r--r--.  <span class="token number">1</span> es-admin es   <span class="token number">8519</span> <span class="token number">5</span>\u6708  <span class="token number">16</span> <span class="token number">2019</span> README.textile
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u542F\u52A8 <code>elasticsearch-6.8.0</code> \u7684 <code>bin</code>\u76EE\u5F55\u4E0B\u7684<code>elasticsearch</code>\uFF0C\u5982\u679C\u60F3\u8981\u5728\u540E\u53F0\u8FD0\u884C\uFF0C\u52A0\u4E00\u4E2A\u53C2\u6570<code>-d</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>es-admin@localhost elasticsearch-6.8.0<span class="token punctuation">]</span>$ ./bin/elasticsearch -d
<span class="token punctuation">[</span>es-admin@localhost elasticsearch-6.8.0<span class="token punctuation">]</span>$ <span class="token function">ps</span> -ef <span class="token operator">|</span> <span class="token function">grep</span> elasticsearch
es-admin  <span class="token number">19040</span>      <span class="token number">1</span> <span class="token number">49</span> <span class="token number">18</span>:12 pts/0    00:00:17 /opt/dev-env/java/jdk1.8.0_311/bin/java -Xms1g -Xmx1g -XX:+UseConcMarkSweepGC -XX:CMSInitiatingOccupancyFraction<span class="token operator">=</span><span class="token number">75</span> -XX:+UseCMSInitiatingOccupancyOnly -Des.networkaddress.cache.ttl<span class="token operator">=</span><span class="token number">60</span> -Des.networkaddress.cache.negative.ttl<span class="token operator">=</span><span class="token number">10</span> -XX:+AlwaysPreTouch -Xss1m -Djava.awt.headless<span class="token operator">=</span>true -Dfile.encoding<span class="token operator">=</span>UTF-8 -Djna.nosys<span class="token operator">=</span>true -XX:-OmitStackTraceInFastThrow -Dio.netty.noUnsafe<span class="token operator">=</span>true -Dio.netty.noKeySetOptimization<span class="token operator">=</span>true -Dio.netty.recycler.maxCapacityPerThread<span class="token operator">=</span><span class="token number">0</span> -Dlog4j.shutdownHookEnabled<span class="token operator">=</span>false -Dlog4j2.disable.jmx<span class="token operator">=</span>true -Djava.io.tmpdir<span class="token operator">=</span>/tmp/elasticsearch-8800862746266678458 -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath<span class="token operator">=</span>data -XX:ErrorFile<span class="token operator">=</span>logs/hs_err_pid%p.log -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:+PrintTenuringDistribution -XX:+PrintGCApplicationStoppedTime -Xloggc:logs/gc.log -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles<span class="token operator">=</span><span class="token number">32</span> -XX:GCLogFileSize<span class="token operator">=</span>64m -Des.path.home<span class="token operator">=</span>/opt/dev-env/elasticsearch/elasticsearch-6.8.0 -Des.path.conf<span class="token operator">=</span>/opt/dev-env/elasticsearch/elasticsearch-6.8.0/config -Des.distribution.flavor<span class="token operator">=</span>default -Des.distribution.type<span class="token operator">=</span>tar -cp /opt/dev-env/elasticsearch/elasticsearch-6.8.0/lib/* org.elasticsearch.bootstrap.Elasticsearch -d
es-admin  <span class="token number">19055</span>  <span class="token number">19040</span>  <span class="token number">0</span> <span class="token number">18</span>:12 pts/0    00:00:00 /opt/dev-env/elasticsearch/elasticsearch-6.8.0/modules/x-pack-ml/platform/linux-x86_64/bin/controller
es-admin  <span class="token number">19099</span>  <span class="token number">18860</span>  <span class="token number">0</span> <span class="token number">18</span>:13 pts/0    00:00:00 <span class="token function">grep</span> --color<span class="token operator">=</span>auto elasticsearch
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li>\u542F\u52A8\u6210\u529F\u7684\u6807\u5FD7</li></ol><p>\u5982\u679C\u5728\u65E5\u5FD7\u4E2D\u770B\u5230</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span><span class="token number">2021</span>-12-12T18:12:47,764<span class="token punctuation">]</span><span class="token punctuation">[</span>INFO <span class="token punctuation">]</span><span class="token punctuation">[</span>o.e.n.Node               <span class="token punctuation">]</span> <span class="token punctuation">[</span>EChf8VF<span class="token punctuation">]</span> started
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8868\u793A\u5DF2\u7ECF\u542F\u52A8\u6210\u529F\u4E86</p><p>es\u9ED8\u8BA4\u5360\u7528\u7AEF\u53E3\u6709\uFF1A</p><ul><li>web\u7AEF\u53E3\uFF1A9200\uFF0C\u6570\u636Eapi\u63A5\u53E3\uFF0C\u5E76\u6CA1\u6709\u63D0\u4F9Bweb\u5BA2\u6237\u7AEF</li><li>tcp\u7AEF\u53E3\uFF1A9300\uFF0C\u6570\u636E\u4EA4\u4E92\uFF0C\u6BD4\u5982\u901A\u8FC7Java\u7A0B\u5E8F\u8BBF\u95EE\u5230es</li></ul><p>\u6267\u884C\u5982\u4E0B\u547D\u4EE4\u6D4B\u8BD5\u5BA2\u6237\u7AEF\u64CD\u4F5C</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>es-admin@localhost elasticsearch-6.8.0<span class="token punctuation">]</span>$ <span class="token function">curl</span> http://localhost:9200
<span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;EChf8VF&quot;</span>,
  <span class="token string">&quot;cluster_name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;elasticsearch&quot;</span>,
  <span class="token string">&quot;cluster_uuid&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;8cdDn-35R86sydD8C4IdyA&quot;</span>,
  <span class="token string">&quot;version&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;number&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;6.8.0&quot;</span>,
    <span class="token string">&quot;build_flavor&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;default&quot;</span>,
    <span class="token string">&quot;build_type&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;tar&quot;</span>,
    <span class="token string">&quot;build_hash&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;65b6179&quot;</span>,
    <span class="token string">&quot;build_date&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;2019-05-15T20:06:13.172855Z&quot;</span>,
    <span class="token string">&quot;build_snapshot&quot;</span> <span class="token builtin class-name">:</span> false,
    <span class="token string">&quot;lucene_version&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;7.7.0&quot;</span>,
    <span class="token string">&quot;minimum_wire_compatibility_version&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;5.6.0&quot;</span>,
    <span class="token string">&quot;minimum_index_compatibility_version&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;5.0.0&quot;</span>
  <span class="token punctuation">}</span>,
  <span class="token string">&quot;tagline&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;You Know, for Search&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5F00\u542F\u8FDC\u7A0B\u8BBF\u95EE\u8FDE\u63A5\u6743\u9650"><a class="header-anchor" href="#\u5F00\u542F\u8FDC\u7A0B\u8BBF\u95EE\u8FDE\u63A5\u6743\u9650" aria-hidden="true">#</a> \u5F00\u542F\u8FDC\u7A0B\u8BBF\u95EE\u8FDE\u63A5\u6743\u9650</h3><p><code>es\u7684web api\u63A5\u53E3\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u53EA\u5141\u8BB8\u672C\u5730\u8BBF\u95EE</code>\uFF0C\u5982\u679C\u60F3\u8981\u901A\u8FC7\u8FDC\u7A0B\u8FDE\u63A5\uFF0C\u5FC5\u987B\u5F00\u542F\u8FDC\u7A0B\u8BBF\u95EE</p><p>\u5C06<code>config/elasticsearch.yaml</code>\u6587\u4EF6\u4E2D\u539F\u6765\u7684network\u4FEE\u6539\u4E3A\u4E00\u4E0B\u914D\u7F6E</p><p><code>network.host: 0.0.0.0</code></p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment">## ---------------------------------- Network -----------------------------------</span>
<span class="token comment">#</span>
<span class="token comment">## Set the bind address to a specific IP (IPv4 or IPv6):</span>
<span class="token comment">#</span>
<span class="token key atrule">network.host</span><span class="token punctuation">:</span> 0.0.0.0 <span class="token comment">## \u5728\u547D\u4EE4\u6A21\u5F0F\u4E0B\u901A\u8FC7/\u6765\u67E5\u627E\uFF1A/network</span>
<span class="token comment">#</span>
<span class="token comment">## Set a custom port for HTTP:</span>
<span class="token comment">#</span>
<span class="token comment">#http.port: 9200</span>
<span class="token comment">#</span>
<span class="token comment">## For more information, consult the network module documentation.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u91CD\u65B0\u542F\u52A8es</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>es-admin@localhost elasticsearch-6.8.0<span class="token punctuation">]</span><span class="token comment">## ps -ef | grep elasticsearch</span>
es-admin  <span class="token number">19303</span>      <span class="token number">1</span>  <span class="token number">1</span> <span class="token number">18</span>:40 pts/0    00:00:21 /opt/dev-env/java/jdk1.8.0_311/bin/java -Xms1g -Xmx1g -XX:+UseConcMarkSweepGC -XX:CMSInitiatingOccupancyFraction<span class="token operator">=</span><span class="token number">75</span> -XX:+UseCMSInitiatingOccupancyOnly -Des.networkaddress.cache.ttl<span class="token operator">=</span><span class="token number">60</span> -Des.networkaddress.cache.negative.ttl<span class="token operator">=</span><span class="token number">10</span> -XX:+AlwaysPreTouch -Xss1m -Djava.awt.headless<span class="token operator">=</span>true -Dfile.encoding<span class="token operator">=</span>UTF-8 -Djna.nosys<span class="token operator">=</span>true -XX:-OmitStackTraceInFastThrow -Dio.netty.noUnsafe<span class="token operator">=</span>true -Dio.netty.noKeySetOptimization<span class="token operator">=</span>true -Dio.netty.recycler.maxCapacityPerThread<span class="token operator">=</span><span class="token number">0</span> -Dlog4j.shutdownHookEnabled<span class="token operator">=</span>false -Dlog4j2.disable.jmx<span class="token operator">=</span>true -Djava.io.tmpdir<span class="token operator">=</span>/tmp/elasticsearch-8581598406638581438 -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath<span class="token operator">=</span>data -XX:ErrorFile<span class="token operator">=</span>logs/hs_err_pid%p.log -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:+PrintTenuringDistribution -XX:+PrintGCApplicationStoppedTime -Xloggc:logs/gc.log -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles<span class="token operator">=</span><span class="token number">32</span> -XX:GCLogFileSize<span class="token operator">=</span>64m -Des.path.home<span class="token operator">=</span>/opt/dev-env/elasticsearch/elasticsearch-6.8.0 -Des.path.conf<span class="token operator">=</span>/opt/dev-env/elasticsearch/elasticsearch-6.8.0/config -Des.distribution.flavor<span class="token operator">=</span>default -Des.distribution.type<span class="token operator">=</span>tar -cp /opt/dev-env/elasticsearch/elasticsearch-6.8.0/lib/* org.elasticsearch.bootstrap.Elasticsearch -d
es-admin  <span class="token number">19318</span>  <span class="token number">19303</span>  <span class="token number">0</span> <span class="token number">18</span>:40 pts/0    00:00:00 /opt/dev-env/elasticsearch/elasticsearch-6.8.0/modules/x-pack-ml/platform/linux-x86_64/bin/controller
root      <span class="token number">19447</span>  <span class="token number">19371</span>  <span class="token number">0</span> <span class="token number">18</span>:59 pts/1    00:00:00 <span class="token function">grep</span> --color<span class="token operator">=</span>auto elasticsearch
<span class="token punctuation">[</span>es-admin@localhost elasticsearch-6.8.0<span class="token punctuation">]</span><span class="token comment">## kill -9 19303</span>
<span class="token punctuation">[</span>es-admin@localhost elasticsearch-6.8.0<span class="token punctuation">]</span><span class="token comment">## ./bin/elasticsearch -d</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u542F\u52A8\u62A5\u9519\u5904\u7406"><a class="header-anchor" href="#\u542F\u52A8\u62A5\u9519\u5904\u7406" aria-hidden="true">#</a> \u542F\u52A8\u62A5\u9519\u5904\u7406</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span><span class="token number">2021</span>-12-12T19:02:46,777<span class="token punctuation">]</span><span class="token punctuation">[</span>ERROR<span class="token punctuation">]</span><span class="token punctuation">[</span>o.e.b.Bootstrap          <span class="token punctuation">]</span> <span class="token punctuation">[</span>EChf8VF<span class="token punctuation">]</span> <span class="token function">node</span> validation exception
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> bootstrap checks failed
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: max <span class="token function">file</span> descriptors <span class="token punctuation">[</span><span class="token number">4096</span><span class="token punctuation">]</span> <span class="token keyword">for</span> elasticsearch process is too low, increase to at least <span class="token punctuation">[</span><span class="token number">65535</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>: max virtual memory areas vm.max_map_count <span class="token punctuation">[</span><span class="token number">65530</span><span class="token punctuation">]</span> is too low, increase to at least <span class="token punctuation">[</span><span class="token number">262144</span><span class="token punctuation">]</span>

<span class="token comment">## \u4E00\u65E6\u5F00\u542F\u8FDC\u7A0B\u8FDE\u63A5\uFF0Ces\u5C31\u4F1A\u8BA4\u4E3A\u6211\u4EEC\u8981\u7528\u4E8E\u751F\u4EA7\uFF0C\u5982\u679C\u662F\u7528\u4E8E\u751F\u4EA7\uFF0C\u5728centos\u4E2D\uFF0C\u7CFB\u7EDF\u7684\u7ED9\u7684\u8FD9\u4E9B\u53C2\u6570\u90FD\u975E\u5E38\u7684\u5C0F\uFF0C\u4E0D\u7B26\u5408es\u81EA\u8EAB\u7684\u751F\u4EA7\u73AF\u5883\u4E0B\u7684\u8981\u6C42\uFF0C\u6240\u4EE5\u6211\u4EEC\u5FC5\u987B\u628A\u8FD9\u4E9B\u53C2\u6570\u8C03\u6574\u5230\u7B26\u5408es\u542F\u52A8\u7684\u6700\u5C0F\u8981\u6C42</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u7F51\u5740\uFF1Ahttps://blog.51cto.com/xpleaf/2327317</p><p><strong>\u5F00\u53D1\u73AF\u5883</strong></p><p>\u5982\u679C\u5728es\u7684\u914D\u7F6E\u4E2D\u6CA1\u6709\u914D\u7F6Enetwork.host\u6765\u6307\u5B9A\u4E00\u4E2A\u53EF\u7528\u7684IP\u5730\u5740\u7684\u8BDD\uFF0C\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5C31\u7ED1\u5B9A\u5230localhost\u4E0A\uFF0C\u6B64\u65F6es\u4F1A\u8BA4\u4E3A\u7528\u6237\u53EA\u662F\u5728\u5F00\u53D1\u73AF\u5883\u4E0B\u4F7F\u7528es\uFF0C\u57FA\u4E8E\u5F00\u7BB1\u5373\u7528\u7684\u539F\u5219\uFF0C\u867D\u7136es\u6B64\u65F6\u4E5F\u4F1A\u8FDB\u884Cbootstrap checks\uFF0C\u6765\u68C0\u67E5\u7528\u6237\u7684\u914D\u7F6E\u662F\u5426\u4E0Ees\u8BBE\u5B9A\u7684\u5B89\u5168\u503C\u76F8\u5339\u914D\uFF0C\u5982\u4E0B\uFF1A</p><ul><li><p>\u5982\u679C\u5339\u914D\uFF0C\u5219\u4E0D\u4F1A\u6709warnning\u4FE1\u606F\uFF0C\u6B64\u65F6es\u6B63\u5E38\u542F\u52A8</p></li><li><p>\u5982\u679C\u4E0D\u5339\u914D\uFF0C\u5219\u4F1A\u6709warnning\u4FE1\u606F\uFF0C\u4F46\u56E0\u4E3A\u662F\u5F00\u53D1\u73AF\u5883\uFF0Ces\u4F9D\u7136\u4F1A\u6B63\u5E38\u542F\u52A8</p></li></ul><p><strong>\u751F\u4EA7\u73AF\u5883</strong></p><p>\u4E00\u65E6\u7528\u6237\u914D\u7F6E\u4E86network.host\u6765\u6307\u5B9A\u4E00\u4E2A\u53EF\u7528\u7684\u975Eloopback\u5730\u5740\uFF0C\u90A3\u4E48es\u5C31\u4F1A\u8BA4\u4E3A\u7528\u6237\u6B64\u65F6\u662F\u5728\u751F\u4EA7\u73AF\u5883\u4E0B\u542F\u52A8es\uFF0C\u540C\u6837\u4F1A\u8FDB\u884C\u68C0\u67E5\uFF0C\u4F46\u4E00\u65E6\u68C0\u67E5\u4E0D\u901A\u8FC7\uFF0C\u76F4\u63A5\u4F1A\u5C06\u524D\u9762\u7684warnning\u63D0\u5347\u4E3Aerror\uFF0C\u6240\u4EE5\u6B64\u65F6es\u4F1A\u542F\u52A8\u5931\u8D25</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>\u6587\u4EF6\u63CF\u8FF0\u7B26\uFF1A
max <span class="token function">file</span> descriptors <span class="token punctuation">[</span><span class="token number">4096</span><span class="token punctuation">]</span> <span class="token keyword">for</span> elasticsearch process is too low, increase to at least <span class="token punctuation">[</span><span class="token number">65536</span><span class="token punctuation">]</span>

\u7EBF\u7A0B\u6570\uFF1A
 max number of threads <span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span> <span class="token keyword">for</span> user <span class="token punctuation">[</span>hadoop<span class="token punctuation">]</span> is too low, increase to at least <span class="token punctuation">[</span><span class="token number">2048</span><span class="token punctuation">]</span>

\u865A\u62DF\u5185\u5B58\uFF1A
 max virtual memory areas vm.max_map_count <span class="token punctuation">[</span><span class="token number">65530</span><span class="token punctuation">]</span> is too low, increase to at least <span class="token punctuation">[</span><span class="token number">262144</span><span class="token punctuation">]</span>

 system call filters:
 system call filters failed to <span class="token function">install</span><span class="token punctuation">;</span> check the logs and fix your configuration or disable system call filters at your own risk
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u751F\u4EA7\u73AF\u5883\u6B63\u5E38\u542F\u52A8\u914D\u7F6E</strong></p><ol><li>\u6587\u4EF6\u63CF\u8FF0\u7B26</li></ol><ul><li>\u4E34\u65F6\u4FEE\u6539</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">ulimit</span> -n <span class="token number">65536</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4F46\u662F\u91CD\u65B0\u767B\u5F55\u540E\u5C31\u4F1A\u6062\u590D\u6210\u9ED8\u8BA4\u503C</p><ul><li>\u6C38\u4E45\u4FEE\u6539</li></ul><p>\u4FEE\u6539/etc/security/limits.conf\u914D\u7F6E\uFF0C\u672B\u5C3E\u6DFB\u52A0\uFF0C\u5982\u4E0B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>*          soft    nofile  <span class="token number">65536</span>	<span class="token comment">## soft\u8868\u793A\u4E3A\u8D85\u8FC7\u8FD9\u4E2A\u503C\u5C31\u4F1A\u6709warnning</span>
*          hadr    nofile  <span class="token number">65536</span>	<span class="token comment">## hard\u5219\u8868\u793A\u4E0D\u80FD\u8D85\u8FC7\u8FD9\u4E2A\u503C</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E4B\u540E\u518D\u91CD\u65B0\u767B\u5F55\uFF0C\u4F7F\u7528<code>ulimit -Hn</code>\u548C<code>ulimit -Sn</code>\u5C31\u53EF\u4EE5\u8FDB\u884C\u9A8C\u8BC1\uFF0C\u548C\u914D\u7F6E\u7684\u503C\u4E00\u81F4</p><ol start="2"><li>\u7EBF\u7A0B\u6570</li></ol><p>\u4FEE\u6539/etc/security/limits.conf\u914D\u7F6E\uFF0C\u672B\u5C3E\u6DFB\u52A0\uFF0C\u5982\u4E0B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>*          soft    nproc   <span class="token number">4096</span>
*          hard    nproc   <span class="token number">4096</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5B9E\u9645\u4E0A\uFF0C\u8BE5\u914D\u7F6E\u6587\u4EF6\u5BF9\u4E8Enproc\u7684\u8BF4\u660E\u4E3A\u8FDB\u7A0B\u6570\uFF0C\u800C\u4E0D\u662F\u7EBF\u7A0B\u6570\uFF0C\u4E4B\u540E\u518D\u91CD\u65B0\u767B\u5F55\uFF0C\u4F7F\u7528<code>ulimit -Hu</code>\u548C<code>ulimit -Su</code>\u5C31\u53EF\u4EE5\u8FDB\u884C\u9A8C\u8BC1\uFF0C\u548C\u914D\u7F6E\u7684\u503C\u4E00\u81F4</p><ol start="3"><li>\u865A\u62DF\u5185\u5B58</li></ol><ul><li>\u67E5\u770B\u5F53\u524D\u503C</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>sysctl vm.max_map_count
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>\u4E34\u65F6\u8BBE\u7F6E</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>sysctl -w vm.max_map_count<span class="token operator">=</span><span class="token number">262144</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4F46\u662F\u91CD\u542F\u7CFB\u7EDF\u540E\u5C31\u4F1A\u5931\u6548</p><ul><li>\u6C38\u4E45\u6027\u8BBE\u7F6E</li></ul><p>\u4FEE\u6539\u914D\u7F6E\u6587\u4EF6/etc/sysctl.conf\uFF0C\u5982\u4E0B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>vm.max_map_count<span class="token operator">=</span><span class="token number">262144</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u9700\u8981\u91CD\u542F\u540E\u624D\u751F\u6548</p><ol start="4"><li>system call filters</li></ol><p>\u539F\u56E0\uFF1A\u8FD9\u662F\u5728\u56E0\u4E3ACentos6\u4E0D\u652F\u6301SecComp\uFF0C\u800CES5.4.0\u9ED8\u8BA4bootstrap.system_call_filter\u4E3Atrue\u8FDB\u884C\u68C0\u6D4B\uFF0C\u6240\u4EE5\u5BFC\u81F4\u68C0\u6D4B\u5931\u8D25\uFF0C\u5931\u8D25\u540E\u76F4\u63A5\u5BFC\u81F4ES\u4E0D\u80FD\u542F\u52A8</p><p>\u89E3\u51B3\uFF1A\u5728elasticsearch.yml\u4E2D\u914D\u7F6Ebootstrap.system_call_filter\u4E3Afalse\uFF0C\u6CE8\u610F\u8981\u5728Memory\u4E0B\u9762\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>bootstrap.memory_lock: <span class="token boolean">false</span>
bootstrap.system_call_filter: <span class="token boolean">false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>\u7ECF\u8FC7\u4EE5\u4E0A\u7684\u914D\u7F6E\u4E4B\u540E\uFF0C\u5982\u679C\u8FD8\u4E0D\u80FD\u542F\u52A8\u7684\u8BDD\uFF0C\u53EF\u4EE5\u6839\u636E\u4E0B\u9762\u7684\u63D0\u793A\u8FDB\u884C\u4FEE\u6539\uFF1A</p><p>\u6709\u7684\u4F1A\u6709\u4E09\u4E2A\u9700\u8981\u5904\u7406\u7684\u5730\u65B9\uFF0C\u6709\u7684\u53EA\u6709\u4E24\u4E2A\uFF0C\u548C\u7CFB\u7EDF\u7684\u5DEE\u5F02\u6709\u5173\uFF0C\u6839\u636E\u63D0\u793A\u914D\u7F6E</p><p><img src="`+r+`" alt="image-20211212191240519"></p><p>\u8FD9\u91CC\u9519\u8BEF[2]\u7684\u5904\u7406\u65B9\u5F0F\uFF1A</p><blockquote><p>\u4F7F\u7528root\u7528\u6237\u4FEE\u6539\u7CFB\u7EDF\u8BBE\u7F6E</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> /etc/security/limits.d/20-nproc.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6DFB\u52A0es\u7684\u542F\u52A8\u540D\u79F0 es-admin\u8FDB\u7A0B\u6570\u7684\u914D\u7F6E</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>es-admin          soft          nproc          <span class="token number">4096</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></blockquote><p><img src="`+d+'" alt="image-20211212210714917"></p><h4 id="\u9A8C\u8BC1"><a class="header-anchor" href="#\u9A8C\u8BC1" aria-hidden="true">#</a> \u9A8C\u8BC1</h4><ol><li>\u672C\u673A\u9A8C\u8BC1</li></ol><p><img src="'+k+'" alt="image-20211212212549327"></p><ol start="2"><li>\u8FDC\u7A0B\u8BBF\u95EE</li></ol><p>\u8BB0\u5F97\u5148\u5F00\u653E\u7AEF\u53E3\u6216\u8005\u5173\u95ED\u9632\u706B\u5899</p><p><img src="'+v+'" alt="image-20211212212529368"></p><h2 id="es\u4E2D\u57FA\u672C\u6982\u5FF5"><a class="header-anchor" href="#es\u4E2D\u57FA\u672C\u6982\u5FF5" aria-hidden="true">#</a> es\u4E2D\u57FA\u672C\u6982\u5FF5</h2><blockquote><p>\u6982\u5FF5\u5173\u7CFB\u56FE\uFF0C\u5148\u770B\u540E\u9762\u7684\u7C7B\u578B\u8BF4\u660E\uFF0C\u7136\u540E\u5728\u770B\u548Cmysql\u5BF9\u6BD4\u52A0\u6DF1\u7406\u89E3</p></blockquote><p><img src="'+m+`" alt="image-20211212222707612"></p><h3 id="\u63A5\u8FD1\u5B9E\u65F6"><a class="header-anchor" href="#\u63A5\u8FD1\u5B9E\u65F6" aria-hidden="true">#</a> \u63A5\u8FD1\u5B9E\u65F6</h3><p>(NRT)</p><blockquote><p>NRT\uFF1Anear real time\uFF0C\u63A5\u8FD1\u5B9E\u65F6\u7684\u641C\u7D22\u5E73\u53F0</p><p>\u5B98\u65B9\u6587\u6863\u8BF4\u660E\uFF1Ahttps://www.elastic.co/guide/index.html</p><p>\u53EF\u4EE5\u9009\u62E9\u81EA\u5DF1\u7248\u672C\u7684\u4FE1\u606F</p></blockquote><p>elasticsearch\u662F\u4E00\u4E2A\u63A5\u8FD1\u5B9E\u65F6\u7684\u641C\u7D22\u5E73\u53F0\uFF0C\u8FD9\u610F\u5473\u7740\uFF0C\u4ECE\u7D22\u5F15\u4E00\u4E2A\u6587\u6863\u76F4\u5230\u8FD9\u4E2A\u6587\u6863\u80FD\u591F\u88AB\u641C\u7D22\u5230\u6709\u4E00\u4E2A\u8F7B\u5FAE\u7684\u5EF6\u8FDF(\u901A\u5E38\u662F1\u79D2\u5185)</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">##</span> \u6D41\u7A0B(1\u79D2\u5185\u5B8C\u6210)</span>
\u7D22\u5F15(\u5F55\u5165)\u6570\u636E---&gt;ES\u670D\u52A1---&gt;\u641C\u7D22
	<span class="token list punctuation">-</span> Beats(\u5982\u679C\u6709\u4E00\u6761\u6570\u636E\u65E5\u5FD7\u53D1\u751F\u53D8\u5316\uFF0Cbeats\u5C31\u4F1A\u77AC\u95F4\u628A\u8FD9\u4E2A\u53D8\u5316\u6293\u5230es\u4E2D)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u7D22\u5F15"><a class="header-anchor" href="#\u7D22\u5F15" aria-hidden="true">#</a> \u7D22\u5F15</h3><p>(index)</p><p>\u4E00\u4E2A\u7D22\u5F15\u5C31\u662F\u4E00\u4E2A<strong>\u62E5\u6709\u51E0\u5206\u76F8\u4F3C\u7279\u5F81\u7684\u6587\u6863\u7684\u96C6\u5408</strong>\uFF0C\u6BD4\u5982\u8BF4\uFF0C\u4F60\u53EF\u4EE5\u6709\u4E00\u4E2A\u5BA2\u6237\u6570\u636E\u7684\u7D22\u5F15\uFF0C\u53E6\u4E00\u4E2A\u4EA7\u54C1\u76EE\u5F55\u7684\u7D22\u5F15\uFF0C\u8FD8\u6709\u4E00\u4E2A\u8BA2\u5355\u6570\u636E\u7684\u7D22\u5F15\u3002\u4E00\u4E2A\u7D22\u5F15\u7531\u4E00\u4E2A\u540D\u5B57\u6765\u6807\u8BC6(<strong>\u5FC5\u987B\u5168\u90E8\u662F\u5C0F\u5199\u5B57\u6BCD\u7684</strong>)\uFF0C\u5E76\u4E14\u5F53\u6211\u4EEC\u8981\u5BF9\u8FD9\u4E2A\u7D22\u5F15\u4E2D\u7684\u6587\u6863\u8FDB\u884C\u7D22\u5F15\u3001\u641C\u7D22\u3001\u66F4\u65B0\u548C\u5220\u9664\u7684\u65F6\u5019\uFF0C\u90FD\u8981\u4F7F\u7528\u5230\u8FD9\u4E2A\u540D\u5B57\uFF0C<strong>\u7D22\u5F15\u7C7B\u4F3C\u4E8E\u5173\u7CFB\u578B\u6570\u636E\u5E93\u4E2Ddatabase\u7684\u6982\u5FF5</strong>\u3002\u5728\u4E00\u4E2A\u96C6\u7FA4\u4E2D\uFF0C\u5982\u679C\u4F60\u60F3\uFF0C\u53EF\u4EE5\u5B9A\u4E49\u4EFB\u610F\u591A\u7684\u7D22\u5F15</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>es\u65E0\u8BBA\u662F\u542F\u52A8\u591A\u5C11\u4E2A\uFF0C\u90FD\u662F\u96C6\u7FA4
<span class="token title important"><span class="token punctuation">##</span> \u7C7B\u4F3C\u7684\u5BF9\u6BD4</span>
mysql			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>---</span><span class="token punctuation">&gt;</span></span>	\u96C6\u7FA4
database	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>---</span><span class="token punctuation">&gt;</span></span>	\u7D22\u5F15
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u7C7B\u578B"><a class="header-anchor" href="#\u7C7B\u578B" aria-hidden="true">#</a> \u7C7B\u578B</h3><p>(type)</p><p><strong>\u5728\u4E00\u4E2A\u7D22\u5F15\u4E2D\uFF0C\u53EF\u4EE5\u5B9A\u4E49\u4E00\u79CD\u6216\u8005\u591A\u79CD\u7C7B\u578B</strong>\u3002\u4E00\u4E2A\u7C7B\u578B\u662F\u4F60\u7684\u7D22\u5F15\u7684\u4E00\u4E2A\u903B\u8F91\u4E0A\u7684\u5206\u7C7B/\u5206\u533A\uFF0C\u5176\u8BED\u4E49\u5B8C\u5168\u7531\u4F60\u6765\u5B9A\u3002\u901A\u5E38\uFF0C\u4F1A\u4E3A\u5177\u6709\u4E00\u7EC4\u5171\u540C\u5B57\u6BB5\u7684\u6587\u6863\u5B9A\u4E49\u4E00\u4E2A\u7C7B\u578B\uFF0C\u6BD4\u5982\u8BF4\uFF0C\u6211\u4EEC\u5047\u8BBE\u4F60\u8FD0\u8425\u4E00\u4E2A\u535A\u5BA2\u5E73\u53F0\u5E76\u4E14\u5C06\u4F60\u7684\u6240\u6709\u6570\u636E\u5B58\u50A8\u5230\u4E00\u4E2A\u7D22\u5F15\u4E2D\u3002\u5728\u8FD9\u4E2A\u7D22\u5F15\u4E2D\uFF0C\u4F60\u53EF\u4EE5\u4E3A\u7528\u6237\u6570\u636E\u5B9A\u4E49\u4E00\u4E2A\u7C7B\u578B\uFF0C\u4E3A\u535A\u5BA2\u6570\u636E\u5B9A\u4E49\u5B9A\u4E49\u53E6\u4E00\u4E2A\u7C7B\u578B\uFF0C\u5F53\u7136\uFF0C\u4E5F\u53EF\u4EE5\u4E3A\u8BC4\u8BBA\u6570\u636E\u5B9A\u4E49\u53E6\u4E00\u4E2A\u7C7B\u578B\u3002<strong>\u7C7B\u578B\u7C7B\u4F3C\u4E8E\u5173\u7CFB\u578B\u6570\u636E\u5E93\u4E2Dtable\u7684\u6982\u5FF5</strong></p><blockquote><p>Note\uFF1A<strong>\u57285.x\u7248\u672C\u4EE5\u524D\u53EF\u4EE5\u5728\u4E00\u4E2A\u7D22\u5F15\u4E2D\u5B9A\u4E49\u591A\u4E2A\u7C7B\u578B\uFF0C6.x\u4E4B\u540E\u4E5F\u53EF\u4EE5\u4F7F\u7528\uFF0C\u4F46\u662F\u4E0D\u63A8\u8350\uFF0C\u57287~8.x\u7248\u672C\u4E2D\u5F7B\u5E95\u79FB\u9664\u4E86\u4E00\u4E2A\u7D22\u5F15\u4E2D\u521B\u5EFA\u591A\u4E2A\u7C7B\u578B</strong></p><p><strong>Why are mapping types being removed?</strong></p><p>Initially, we spoke about an \u201Cindex\u201D being similar to a \u201Cdatabase\u201D in an SQL database, and a \u201Ctype\u201D being equivalent to a \u201Ctable\u201D.</p><p>This was a bad analogy that led to incorrect assumptions. In an SQL database, tables are independent of each other. The columns in one table have no bearing on columns with the same name in another table. This is not the case for fields in a mapping type.</p><p>In an Elasticsearch index, fields that have the same name in different mapping types are backed by the same Lucene field internally. In other words, using the example above, the <code>user_name</code> field in the <code>user</code> type is stored in exactly the same field as the <code>user_name</code> field in the <code>tweet</code> type, and both <code>user_name</code> fields must have the same mapping (definition) in both types.</p><p>This can lead to frustration when, for example, you want <code>deleted</code> to be a <code>date</code> field in one type and a <code>boolean</code> field in another type in the same index.</p><p>On top of that, storing different entities that have few or no fields in common in the same index leads to sparse data and interferes with Lucene\u2019s ability to compress documents efficiently.</p><p>For these reasons, we have decided to remove the concept of mapping types from Elasticsearch.</p><p><strong>\u7FFB\u8BD1</strong></p><p>\u6700\u521D\uFF0C\u6211\u4EEC\u8C08\u5230\u201C\u7D22\u5F15\u201D\u7C7B\u4F3C\u4E8E SQL \u6570\u636E\u5E93\u4E2D\u7684\u201C\u6570\u636E\u5E93\u201D\uFF0C\u800C\u201C\u7C7B\u578B\u201D\u7B49\u540C\u4E8E\u201C\u8868\u201D\u3002</p><p>\u8FD9\u662F\u4E00\u4E2A\u7CDF\u7CD5\u7684\u7C7B\u6BD4\uFF0C\u5BFC\u81F4\u4E86\u9519\u8BEF\u7684\u5047\u8BBE\u3002\u5728 SQL \u6570\u636E\u5E93\u4E2D\uFF0C\u8868\u662F\u76F8\u4E92\u72EC\u7ACB\u7684\u3002\u4E00\u4E2A\u8868\u4E2D\u7684\u5217\u4E0E\u53E6\u4E00\u8868\u4E2D\u540C\u540D\u7684\u5217\u6CA1\u6709\u5173\u7CFB\u3002\u5BF9\u4E8E\u6620\u5C04\u7C7B\u578B\u4E2D\u7684\u5B57\u6BB5\uFF0C\u60C5\u51B5\u5E76\u975E\u5982\u6B64\u3002</p><p>\u5728 Elasticsearch \u7D22\u5F15\u4E2D\uFF0C\u4E0D\u540C\u6620\u5C04\u7C7B\u578B\u4E2D\u5177\u6709\u76F8\u540C\u540D\u79F0\u7684\u5B57\u6BB5\u5728\u5185\u90E8\u7531\u76F8\u540C\u7684 Lucene \u5B57\u6BB5\u652F\u6301\u3002\u6362\u53E5\u8BDD\u8BF4\uFF0C\u4F7F\u7528\u4E0A\u9762\u7684\u4F8B\u5B50\uFF0C<code>user</code>\u7C7B\u578B\u4E2D\u7684<code>user_name</code>\u5B57\u6BB5\u4E0E<code>tweet</code>\u7C7B\u578B\u4E2D\u7684<code>user_name</code>\u5B57\u6BB5\u5B58\u50A8\u5728\u5B8C\u5168\u76F8\u540C\u7684\u5B57\u6BB5\u4E2D\uFF0C\u5E76\u4E14\u4E24\u4E2A<code>user_name</code>\u5B57\u6BB5\u5FC5\u987B\u5177\u6709\u76F8\u540C\u7684\u4E24\u79CD\u7C7B\u578B\u7684\u6620\u5C04\uFF08\u5B9A\u4E49\uFF09\u3002</p><p>\u4F8B\u5982\uFF0C\u5F53\u60A8\u5E0C\u671B <code>deleted</code> \u6210\u4E3A\u540C\u4E00\u7D22\u5F15\u4E2D\u7684\u4E00\u79CD\u7C7B\u578B\u7684 <code>date</code> \u5B57\u6BB5\u548C\u53E6\u4E00\u79CD\u7C7B\u578B\u7684 <code>boolean</code> \u5B57\u6BB5\u65F6\uFF0C\u8FD9\u53EF\u80FD\u4F1A\u5BFC\u81F4\u632B\u6298\u3002</p><p>\u6700\u91CD\u8981\u7684\u662F\uFF0C\u5728\u540C\u4E00\u7D22\u5F15\u4E2D\u5B58\u50A8\u5177\u6709\u5F88\u5C11\u6216\u6CA1\u6709\u5171\u540C\u5B57\u6BB5\u7684\u4E0D\u540C\u5B9E\u4F53\u4F1A\u5BFC\u81F4\u6570\u636E\u7A00\u758F\u5E76\u5E72\u6270 Lucene \u6709\u6548\u538B\u7F29\u6587\u6863\u7684\u80FD\u529B\u3002 \u7531\u4E8E\u8FD9\u4E9B\u539F\u56E0\uFF0C\u6211\u4EEC\u51B3\u5B9A\u4ECE Elasticsearch \u4E2D\u5220\u9664\u6620\u5C04\u7C7B\u578B\u7684\u6982\u5FF5\u3002</p></blockquote><h3 id="\u6620\u5C04"><a class="header-anchor" href="#\u6620\u5C04" aria-hidden="true">#</a> \u6620\u5C04</h3><p>(mapping)</p><p>mapping\u662Fes\u4E2D\u7684\u4E00\u4E2A\u91CD\u8981\u7684\u5185\u5BB9\uFF0C\u5B83<strong>\u7C7B\u4F3C\u4E8E\u4F20\u7EDF\u5173\u7CFB\u6570\u636E\u4E2Dtable\u548Cschema</strong>\uFF0C\u7528\u6765<strong>\u5B9A\u4E49\u4E00\u4E2A\u7D22\u5F15(index)\u4E2D\u7684\u7C7B\u578B(type)\u7684\u6570\u636E\u7ED3\u6784</strong>\u3002\u5728es\u4E2D\uFF0C\u6211\u4EEC\u53EF\u4EE5\u624B\u52A8\u521B\u5EFAtype(\u76F8\u5F53\u4E8Etable)\u548Cmapping(\u76F8\u5F53\u4E8Eschema)\uFF0C\u4E5F\u53EF\u4EE5\u91C7\u7528\u9ED8\u8BA4\u521B\u5EFA\u65B9\u5F0F\u3002\u5728\u9ED8\u8BA4\u914D\u7F6E\u4E0B\uFF0Ces\u53EF\u4EE5\u6839\u636E\u63D2\u5165\u7684\u6570\u636E\u81EA\u52A8\u521B\u5EFAtype\u53CA\u5176mapping\u3002mapping\u4E2D\u4E3B\u8981\u5305\u62EC\u5B57\u6BB5\u540D\u3001\u5B57\u6BB5\u6570\u636E\u7C7B\u578B\u548C\u5B57\u6BB5\u7D22\u5F15\u7C7B\u578B</p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code>schema\uFF1A\u5BF9\u8868\u4E2D\u5B57\u6BB5\u7684\u7EA6\u675F\uFF0C\u6BD4\u5982\uFF1Aid\u5B57\u6BB5\u7684\u7C7B\u578B\u3001\u957F\u5EA6\u7B49
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="\u6587\u6863"><a class="header-anchor" href="#\u6587\u6863" aria-hidden="true">#</a> \u6587\u6863</h3><p>\u4E00\u4E2A\u6587\u6863\u662F\u4E00\u4E2A\u53EF\u4EE5\u88AB\u7D22\u5F15\u7684\u57FA\u7840\u4FE1\u606F\u5355\u5143\uFF0C<strong>\u7C7B\u4F3C\u4E8E\u8868\u4E2D\u7684\u4E00\u6761\u8BB0\u5F55</strong>\u3002\u6BD4\u5982\uFF0C\u4F60\u53EF\u4EE5\u62E5\u6709\u4E00\u4E2A\u5458\u5DE5\u7684\u6587\u6863\uFF0C\u4E5F\u53EF\u4EE5\u62E5\u6709\u67D0\u4E2A\u5546\u54C1\u7684\u6587\u6863\u3002\u6587\u6863\u4EE5\u91C7\u7528\u4E86\u8F7B\u91CF\u7EA7\u7684\u6570\u636E\u4EA4\u6362\u683C\u5F0FJSON(javascript object notation)\u6765\u8868\u793A</p><h2 id="kibana"><a class="header-anchor" href="#kibana" aria-hidden="true">#</a> kibana</h2><h3 id="\u5B89\u88C5"><a class="header-anchor" href="#\u5B89\u88C5" aria-hidden="true">#</a> \u5B89\u88C5</h3><blockquote><p>es\u7ED9\u6211\u4EEC\u63D0\u4F9B\u4E86\u4E00\u4E2Aweb api\uFF0C\u4F46\u662F\u6211\u4EEC\u4E0D\u80FD\u53EA\u662F\u4F7F\u7528\u8FD9\u4E2Aapi\u76F4\u63A5\u6765\u4F7F\u7528\uFF0C\u524D\u671F\u5B66\u4E60\u7684\u65F6\u5019\uFF0C\u5148\u7528\u5BA2\u6237\u7AEF\u5DE5\u5177</p><p>\u5BF9\u5B89\u88C5\u7684\u7528\u6237\u6CA1\u6709\u8981\u6C42\uFF0C\u76F4\u63A5\u4F7F\u7528root\u5B89\u88C5\u5C31\u53EF\u4EE5</p></blockquote><p>Kibana \u662F\u4E00\u6B3E\u5F00\u6E90\u7684\u6570\u636E\u5206\u6790\u548C\u53EF\u89C6\u5316\u5E73\u53F0\uFF0C\u5B83\u662F Elastic Stack \u6210\u5458\u4E4B\u4E00\uFF0C\u8BBE\u8BA1\u7528\u4E8E\u548C Elasticsearch \u534F\u4F5C\u3002\u4F7F\u7528 Kibana \u5BF9 Elasticsearch \u7D22\u5F15\u4E2D\u7684\u6570\u636E\u8FDB\u884C\u641C\u7D22\u3001\u67E5\u770B\u3001\u4EA4\u4E92\u64CD\u4F5C\u3002\u53EF\u4EE5\u5F88\u65B9\u4FBF\u7684\u5229\u7528\u56FE\u8868\u3001\u8868\u683C\u53CA\u5730\u56FE\u5BF9\u6570\u636E\u8FDB\u884C\u591A\u5143\u5316\u7684\u5206\u6790\u548C\u5448\u73B0</p><p>Kibana \u53EF\u4EE5\u4F7F\u5927\u6570\u636E\u901A\u4FD7\u6613\u61C2\u3002\u5B83\u5F88\u7B80\u5355\uFF0C\u57FA\u4E8E\u6D4F\u89C8\u5668\u7684\u754C\u9762\u4FBF\u4E8E\u60A8\u5FEB\u901F\u521B\u5EFA\u548C\u5206\u4EAB\u52A8\u6001\u6570\u636E\u4EEA\u8868\u677F\u6765\u8FFD\u8E2A Elasticsearch \u7684\u5B9E\u65F6\u6570\u636E\u53D8\u5316</p><ol><li>\u4E0B\u8F7D\u5B89\u88C5\u5305</li></ol><blockquote><p>\u8981\u548Ces\u7248\u672C\u5BF9\u5E94\u4E0A 6.8.0</p><p>\u7F51\u7AD9\uFF1Ahttps://www.elastic.co/downloads/past-releases#kibana</p></blockquote><ol start="2"><li>\u4E0A\u4F20\u5230linux\u670D\u52A1\u5668</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">scp</span> /Users/aldencarter/Downloads/kibana-6.8.0-linux-x86_64.tar.gz root@172.16.187.15:/opt/soft/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>\u521B\u5EFA\u5B89\u88C5\u76EE\u5F55\u5E76\u89E3\u538B</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">tar</span> -zxvf soft/kibana-6.8.0-linux-x86_64.tar.gz -C dev-env/kibana/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="4"><li>\u914D\u7F6E\u73AF\u5883\u53D8\u91CF</li></ol><p>config\u76EE\u5F55\u4E0B\u914D\u7F6E\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">## es \u670D\u52A1\u5668\u4E3B\u673A\u5730\u5740</span>
server.host: <span class="token string">&quot;172.16.187.15&quot;</span>
<span class="token comment">## es\u670D\u52A1\u5668\u5730\u5740</span>
elasticsearch.hosts: <span class="token punctuation">[</span><span class="token string">&quot;http://172.16.187.15:9200&quot;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>\u542F\u52A8</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">## \u524D\u53F0\u542F\u52A8</span>
./bin/kibana
<span class="token comment">## \u540E\u53F0\u542F\u52A8</span>
./bin/kibana <span class="token operator">&amp;</span>
<span class="token comment">## \u540E\u53F0\u8FD0\u884C\u5E76\u5C06\u65E5\u5FD7\u8F93\u51FA\u5230\u6307\u5B9A\u6587\u4EF6</span>
./bin/kibana <span class="token operator">&gt;</span>./logs/kibana.log <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
<span class="token comment">## &gt;./logs/kibana.log\uFF1A\u5C06\u6807\u51C6\u65E5\u5FD7\u8F93\u51FA\u5230./logs/kibana.log\u6587\u4EF6</span>
<span class="token comment">## 2&gt;&amp;1\uFF1A\u5C06\u9519\u8BEF\u8F93\u51FA\u5230\u548C\u6807\u51C6\u8F93\u51FA\u4E00\u6837\u7684\u6587\u4EF6\u4E2D</span>

<span class="token comment">## \u5173\u95ED</span>
<span class="token comment">## \u67E5\u770B\u7AEF\u53E3</span>
<span class="token function">lsof</span> -i:5601
<span class="token comment">## \u6839\u636Epid\u5173\u95ED\u8FDB\u7A0B</span>
<span class="token function">kill</span> -9 xxxx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li>\u67E5\u770B\u65E5\u5FD7\u51FA\u73B0</li></ol><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;log&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;@timestamp&quot;</span><span class="token operator">:</span><span class="token string">&quot;2021-12-12T15:32:08Z&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;tags&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;listening&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;info&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;pid&quot;</span><span class="token operator">:</span><span class="token number">2186</span><span class="token punctuation">,</span><span class="token property">&quot;message&quot;</span><span class="token operator">:</span><span class="token string">&quot;Server running at http://172.16.187.15:5601&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;log&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;@timestamp&quot;</span><span class="token operator">:</span><span class="token string">&quot;2021-12-12T15:32:08Z&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;tags&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;plugin:spaces@6.8.0&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;info&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;pid&quot;</span><span class="token operator">:</span><span class="token number">2186</span><span class="token punctuation">,</span><span class="token property">&quot;state&quot;</span><span class="token operator">:</span><span class="token string">&quot;green&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;message&quot;</span><span class="token operator">:</span><span class="token string">&quot;Status changed from yellow to green - Ready&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;prevState&quot;</span><span class="token operator">:</span><span class="token string">&quot;yellow&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;prevMsg&quot;</span><span class="token operator">:</span><span class="token string">&quot;Waiting for Elasticsearch&quot;</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8868\u793A\u5DF2\u7ECF\u8FD0\u884C\u6210\u529F</p><ol start="7"><li>\u8BBF\u95EEweb\u7BA1\u7406\u754C\u9762</li></ol><p>\u5982\u679C\u80FD\u8BBF\u95EE\u6210\u529F\u8868\u793A\u5B89\u88C5\u542F\u52A8\u6210\u529F</p><p><img src="`+b+'" alt="image-20211212233835908"></p><ol start="8"><li>\u64CD\u4F5Ces\u4E3B\u8981\u4F7F\u7528\u7684\u662F<code>Dev Tools</code></li></ol><p><img src="'+q+`" alt="image-20211212234145123"></p><h3 id="kibana\u7684\u57FA\u672C\u64CD\u4F5C"><a class="header-anchor" href="#kibana\u7684\u57FA\u672C\u64CD\u4F5C" aria-hidden="true">#</a> kibana\u7684\u57FA\u672C\u64CD\u4F5C</h3><p><strong>\u4E5F\u662F\u5BF9ES\u4E2D\u7C7B\u578B\u7684\u57FA\u672C\u64CD\u4F5C</strong></p><h4 id="\u7D22\u5F15\u57FA\u672C\u64CD\u4F5C"><a class="header-anchor" href="#\u7D22\u5F15\u57FA\u672C\u64CD\u4F5C" aria-hidden="true">#</a> \u7D22\u5F15\u57FA\u672C\u64CD\u4F5C</h4><p>(index)</p><p>\u6CA1\u6709\u66F4\u65B0\u64CD\u4F5C\uFF0C\u5982\u679C\u521B\u5EFA\u9519\u4E86\uFF0C\u5220\u9664\u540E\u91CD\u65B0\u521B\u5EFA</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>PUT /ems 						\u521B\u5EFA\u7D22\u5F15
DELETE /ems					\u5220\u9664\u7D22\u5F15
DELETE <span class="token comment">/*						\u5220\u9664\u6240\u6709\u7D22\u5F15
GET /_cat/indices?v	\u67E5\u770B\u7D22\u5F15\u4FE1\u606F
</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>\u521B\u5EFA\u7D22\u5F15</li></ol><p>\u521B\u5EFA\u540D\u5B57\u4E3A<code>ems</code>\u7684\u7D22\u5F15\uFF0C\u4E0D\u5141\u8BB8\u5927\u5199\u5B57\u6BCD\uFF0C\u53EA\u5141\u8BB8\u5C0F\u5199\u5B57\u6BCD\u548C\u6570\u5B57</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>PUT /ems
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8FD4\u56DE\u7ED3\u679C</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>#! Deprecation<span class="token operator">:</span> the default number of shards will change from <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> to <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> in <span class="token number">7.0</span>.<span class="token number">0</span>; if you wish to continue using the default of <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> shards<span class="token punctuation">,</span> you must manage this on the create index request or with an index template
<span class="token punctuation">{</span>
  <span class="token property">&quot;acknowledged&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;shards_acknowledged&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;ems&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u4E0A\u9762\u7684\u63D0\u793A\u8BF4\u660E\uFF1A\u57286.x\u7684\u7248\u672C\u4E2D\uFF0C\u4F1A\u6709\u4E00\u4E2A\u63D0\u793A\uFF08\u4E0D\u662F\u9519\u8BEF\uFF09\uFF0Ces\u9ED8\u8BA4\u662F\u4EE5\u96C6\u7FA4\u7684\u65B9\u5F0F\uFF0C\u5F53\u524D\u96C6\u7FA4\u4E2D\u53EA\u6709\u5355\u4E2A\u8282\u70B9\uFF0C\u5728es6\u7248\u672C\uFF08\u5305\u542B6\uFF09\u4EE5\u524D\uFF0C\u6BCF\u521B\u5EFA\u4E00\u4E2A\u7D22\u5F15\uFF0C\u4E3A\u4E86\u4FDD\u8BC1\u9AD8\u53EF\u7528\uFF0C\u8FD9\u4E2A\u7D22\u5F15\u5C31\u4F1A\u67095\u4E2A\u5206\u7247\uFF085\u4E2A\u5907\u4EFD\uFF09\uFF0C\u4F46\u662F\u57287\u7248\u672C\u4E4B\u540E\uFF0C\u5C31\u628A\u8FD9\u4E2A\u5907\u4EFD\u8C03\u6574\u62101\u4EFD\uFF0C\u5982\u679C\u60F3\u8981\u4FEE\u6539\u5907\u4EFD\u7684\u6570\u91CF\uFF0C\u5C31\u5FC5\u987B\u5728\u521B\u5EFA\u7D22\u5F15\u7684\u8BF7\u6C42\u4E2D\u52A0\u5165\u660E\u786E\u7684\u89C4\u5219</p></blockquote><p>\u6839\u636E\u4E0A\u9762\u7684\u4FE1\u606F\uFF0C\u5982\u679C\u6211\u4EEC\u60F3\u8981\u4FEE\u6539\u7D22\u5F15\u7684\u4E00\u4E9B\u914D\u7F6E\uFF0C\u53EF\u4EE5\u5728\u521B\u5EFA\u7684\u65F6\u5019\u6DFB\u52A0\u4E00\u4E9B\u53C2\u6570</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>PUT /ems
<span class="token punctuation">{</span>
  <span class="token property">&quot;settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;number_of_replicas&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;number_of_shards&quot;</span><span class="token operator">:</span> <span class="token number">5</span> 		##  \u8C03\u6574\u5206\u7247\u7684\u6570\u91CF\uFF0C<span class="token number">7</span>.x\u4E2D\u53D8\u6210\u4E86<span class="token number">1</span>
    
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u5220\u9664\u7D22\u5F15</li></ol><p>\u6267\u884C</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>DELETE /ems
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8FD4\u56DE\u503C</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;acknowledged&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6267\u884C\uFF0C\u8868\u793A\u5220\u9664\u6240\u6709\u7684\u7D22\u5F15\uFF0C\u8FDEkibana\u7684\u7D22\u5F15\u90FD\u4E00\u8D77\u5220\u9664\u4E86\uFF0C\u5220\u9664\u4E4B\u540E\u5C06\u5BFC\u81F4kibana\u65E0\u6CD5\u8FD0\u884C\uFF0C\u53EF\u4EE5\u5C06kibana\u91CD\u542F</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>DELETE <span class="token comment">/*
</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>\u67E5\u770B\u7D22\u5F15</li></ol><p>\u6267\u884C</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /_cat/indices
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8FD4\u56DE\u7ED3\u679C</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>yellow open ems                  <span class="token number">0</span>-SutP_GRf-o1LbHYJiTEg <span class="token number">5</span> <span class="token number">1</span> <span class="token number">0</span> <span class="token number">0</span>  <span class="token number">1</span>.2kb  <span class="token number">1</span>.2kb	## \u521A\u624D\u521B\u5EFA\u7684ems
green  open .kibana_1            S3aSw7a6R2OEVdnMvy9_XQ <span class="token number">1</span> <span class="token number">0</span> <span class="token number">3</span> <span class="token number">1</span> <span class="token number">16</span>.4kb <span class="token number">16</span>.4kb	## \u4E24\u4E2A\u90FD\u662Fkibana\u81EA\u5E26\u7684
green  open .kibana_task_manager ufve0u29Sc6GBZAOMqGmGQ <span class="token number">1</span> <span class="token number">0</span> <span class="token number">2</span> <span class="token number">0</span>  <span class="token number">6</span>.8kb  <span class="token number">6</span>.8kb
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u67E5\u8BE2\u9ED8\u8BA4\u8FD4\u56DE\u7684\u662F\u4E00\u4E2A\u8868\u683C\uFF0C\u5982\u679C\u60F3\u8981\u663E\u793A\u8868\u5934\uFF0C\u53EF\u4EE5\u6DFB\u52A0<code>?v</code></p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>health status index                uuid                   pri rep docs.count docs.deleted store.size pri.store.size
yellow open   ems                  <span class="token number">0</span>-SutP_GRf-o1LbHYJiTEg   <span class="token number">5</span>   <span class="token number">1</span>          <span class="token number">0</span>            <span class="token number">0</span>      <span class="token number">1</span>.2kb          <span class="token number">1</span>.2kb
green  open   .kibana_1            S3aSw7a6R2OEVdnMvy9_XQ   <span class="token number">1</span>   <span class="token number">0</span>          <span class="token number">3</span>            <span class="token number">1</span>     <span class="token number">16</span>.4kb         <span class="token number">16</span>.4kb
green  open   .kibana_task_manager ufve0u29Sc6GBZAOMqGmGQ   <span class="token number">1</span>   <span class="token number">0</span>          <span class="token number">2</span>            <span class="token number">0</span>      <span class="token number">6</span>.8kb          <span class="token number">6</span>.8kb
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>health \u5065\u5EB7\u72B6\u51B5\uFF0C\u6BD4\u5982\u521A\u624D\u521B\u5EFA\u7684ems\uFF0C\u628A\u4E00\u5757\u5B8C\u6574\u7684\u6570\u636E\u62C6\u5206\u6210\u4E865(pri)\u5757\uFF0C\u73B0\u5728\u53EA\u6709\u4E00\u53F0\u673A\u5668\uFF0C\u4E5F\u5C31\u662F5\u5757\u6570\u636E\u90FD\u5B58\u50A8\u5728\u4E00\u4E2A\u673A\u5668\u4E0A\uFF0C\u80AF\u5B9A\u662F\u4E0D\u5B89\u5168\u7684\u3002\u800C.kibana_1\u548C.kibana_task_manager\u7684\u5206\u7247\u6570\u91CF\u53EA\u67091\u5757\uFF0C\u5B58\u5728\u4E00\u53F0\u673A\u5668\u4E0A\uFF0C\u5F53\u7136\u662F\u5B89\u5168\u7684 <ul><li>green \u5065\u58EE\u7684</li><li>yellow \u53EF\u7528\uFF0C\u4E0D\u5065\u58EE\u7684</li><li>red \u4E0D\u5B8C\u6574\u7684\uFF0C\u4E0D\u53EF\u7528\u7684</li></ul></li><li>status \u662F\u5173\u95ED\u8FD8\u662F\u6253\u5F00\u72B6\u6001\uFF0C\u9ED8\u8BA4\u662F\u6253\u5F00\u7684\uFF0C\u5982\u679C\u662F\u5173\u95ED\u7684\u4E0D\u80FD\u76F4\u63A5\u64CD\u4F5C\uFF0C\u9700\u8981\u5148\u6253\u5F00</li><li>index \u7D22\u5F15\u7684\u540D\u5B57</li><li>uuid \u552F\u4E00\u6807\u8BC6</li><li>pri \u9ED8\u8BA4\u4E3B\u5206\u7247\u6570\u91CF</li><li>rep \u526F\u672C\u5206\u7247\u6570\u91CF</li><li>docs.count \u6587\u6863\u6570\u91CF</li><li>docs.deleted \u88AB\u5220\u9664\u7684\u6587\u6863\u6570\u91CF</li><li>store.size \u6587\u6863\u7684\u5B58\u50A8\u5927\u5C0F</li><li>pri.store.size \u4E3B\u5206\u7247\u7684\u5B58\u50A8\u5927\u5C0F</li></ul><h4 id="\u7C7B\u578B\u57FA\u672C\u64CD\u4F5C"><a class="header-anchor" href="#\u7C7B\u578B\u57FA\u672C\u64CD\u4F5C" aria-hidden="true">#</a> \u7C7B\u578B\u57FA\u672C\u64CD\u4F5C</h4><p>(type)</p><p>\u6620\u5C04\u7C7B\u578B</p><blockquote><p>mapping type\uFF1Atext\u3001keyword\u3001date\u3001integer\u3001long\u3001double\u3001boolean\u3001ip</p></blockquote><h5 id="\u521B\u5EFA\u7C7B\u578B"><a class="header-anchor" href="#\u521B\u5EFA\u7C7B\u578B" aria-hidden="true">#</a> \u521B\u5EFA\u7C7B\u578B</h5><blockquote><p>\u7C7B\u578B\u548C\u6620\u5C04\u4E0D\u5206\u5F00\uFF0C\u6240\u4EE5\u5728\u521B\u5EFA\u7C7B\u578B\u7684\u65F6\u5019\u5C31\u8981\u521B\u5EFA\u6620\u5C04</p><p>\u4E00\u4E2A\u7D22\u5F15\u4E2D\u53EA\u80FD\u5B58\u5728\u4E00\u4E2A\u7C7B\u578B</p></blockquote><ol><li>\u521B\u5EFA/dangdang\u7D22\u5F15\u5E76\u521B\u5EFA(product)\u7C7B\u578B</li></ol><p><code>\u6CE8\u610F\uFF1A\u8FD9\u79CD\u65B9\u5F0F\u521B\u5EFA\u7C7B\u578B\u8981\u6C42\u7D22\u5F15\u4E0D\u80FD\u5B58\u5728</code></p><p><strong>ES\u521B\u5EFA\u7C7B\u578B\u7684\u65F6\u5019\uFF0C\u4F1A\u81EA\u52A8\u521B\u5EFA\u4E00\u4E2A<code>_id</code>\u7684\u5C5E\u6027\uFF0C\u6240\u4EE5\u6211\u4EEC\u7684id\u53EF\u4EE5\u4E0D\u7528(\u548CMongoDB\u4E00\u6837)</strong></p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>PUT /dangdang
<span class="token punctuation">{</span>
  <span class="token property">&quot;mapping&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">&quot;product&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token property">&quot;title&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;age&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;integer&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;created&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;date&quot;</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F80/ems\u4E0B\u521B\u5EFA\u7C7B\u578B</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>## \u7C7B\u578B\u64CD\u4F5C index/type(mapping) \u4E00\u4E2A\u7D22\u5F15\u4E2D\u53EA\u80FD\u5B58\u5728\u4E00\u4E2A\u7C7B\u578B ems/emp(id name age bir)
PUT /ems
<span class="token punctuation">{</span>
  <span class="token property">&quot;mappings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;emp&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;keyword&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;age&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;integer&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;bir&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;date&quot;</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

## \u8FD4\u56DE\u503C
<span class="token punctuation">{</span>
  <span class="token property">&quot;acknowledged&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;shards_acknowledged&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;ems&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F80\u5F53\u5F53\u7D22\u5F15/dangdang\u521B\u5EFAbook\u7C7B\u578B \u5B57\u6BB5 id name price author des pubdate</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>PUT /dangdang
<span class="token punctuation">{</span>
  <span class="token property">&quot;mappings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;book&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;keyword&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;keyword&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;price&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;double&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;auther&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;keyword&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;des&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;pubdate&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;date&quot;</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

## \u8FD4\u56DE\u503C
<span class="token punctuation">{</span>
  <span class="token property">&quot;acknowledged&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;shards_acknowledged&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;dangdang&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u67E5\u770B\u7C7B\u578B"><a class="header-anchor" href="#\u67E5\u770B\u7C7B\u578B" aria-hidden="true">#</a> \u67E5\u770B\u7C7B\u578B</h5><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /dangdang/_mapping/product ## \u8BED\u6CD5\uFF1AGET/\u7D22\u5F15\u540D/mapping/\u7C7B\u578B\u540D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6267\u884C</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /dangdang ## \u76F4\u63A5\u8FD4\u56DEdangdang\u4E0B\u7684\u6240\u6709\u6620\u5C04\uFF0C\u5305\u62EC\u7D22\u5F15\u7684\u914D\u7F6E\u4FE1\u606F
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8FD4\u56DE\u503C</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;dangdang&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;aliases&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;mappings&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;book&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;properties&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;auther&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;des&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;text&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;price&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;double&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;pubdate&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;date&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;settings&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;index&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;creation_date&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1639378904267&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;number_of_shards&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;number_of_replicas&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;uuid&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;EoFGTp2RTEi1MhgPugsoXw&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;version&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;created&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;6080099&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;provided_name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;dangdang&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6267\u884C\uFF1A\u53EA\u83B7\u53D6\u7D22\u5F15\u548C\u7D22\u5F15\u4E2D\u7C7B\u578B\u7684\u6620\u5C04</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /dangdang/_mapping
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8FD4\u56DE\u503C</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;dangdang&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;mappings&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;book&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;properties&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;auther&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;des&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;text&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;keyword&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;price&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;double&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;pubdate&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;date&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u6587\u6863\u57FA\u672C\u64CD\u4F5C"><a class="header-anchor" href="#\u6587\u6863\u57FA\u672C\u64CD\u4F5C" aria-hidden="true">#</a> \u6587\u6863\u57FA\u672C\u64CD\u4F5C</h4><p>(document)</p><h5 id="\u6DFB\u52A0\u6587\u6863"><a class="header-anchor" href="#\u6DFB\u52A0\u6587\u6863" aria-hidden="true">#</a> \u6DFB\u52A0\u6587\u6863</h5><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>PUT /ems/emp/<span class="token number">1</span> ## /\u7D22\u5F15/\u7C7B\u578B/id
<span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u5F20\u4E09&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;age&quot;</span><span class="token operator">:</span><span class="token number">23</span><span class="token punctuation">,</span>
  <span class="token property">&quot;bir&quot;</span><span class="token operator">:</span><span class="token string">&quot;2013-12-12&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u8FD9\u662F\u4E00\u4E2A\u597D\u5458\u5DE5&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6267\u884C</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>PUT /ems/emp/<span class="token number">1</span> ## \u5982\u679C\u6CA1\u6709\u6267\u884Cid=<span class="token number">1</span> \u5C31\u4F1A\u81EA\u5DF1\u751F\u6210\uFF0C\u5982\u679C\u8981\u8BA9\u7CFB\u7EDF\u5E2E\u6211\u4EEC\u81EA\u52A8\u751F\u6210id\uFF0C\u610F\u601D\u5C31\u662F\u5148\u63D2\u5165id\u7136\u540E\u5728\u63D2\u5165\u6211\u4EEC\u7684\u7684\u503C
<span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>							## \u5982\u679C\u6CA1\u6709\u6267\u884Cid=<span class="token number">1</span> \u5C31\u4F1A\u81EA\u5DF1\u751F\u6210
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;age&quot;</span><span class="token operator">:</span><span class="token number">23</span><span class="token punctuation">,</span>
  <span class="token property">&quot;bir&quot;</span><span class="token operator">:</span><span class="token string">&quot;2012-12-12&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u5982\u679C\u6CA1\u6709\u6267\u884Cid=1 \u5C31\u4F1A\u81EA\u5DF1\u751F\u6210\uFF0C\u5982\u679C\u8981\u8BA9\u7CFB\u7EDF\u5E2E\u6211\u4EEC\u81EA\u52A8\u751F\u6210id\uFF0C\u610F\u601D\u5C31\u662F\u5148\u63D2\u5165id\u7136\u540E\u5728\u63D2\u5165\u6211\u4EEC\u7684\u7684\u503C\uFF0C\u6240\u4EE5\u9700\u8981\u6539\u6210POST\u8BF7\u6C42</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>POST /ems/emp
<span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;age&quot;</span><span class="token operator">:</span><span class="token number">23</span><span class="token punctuation">,</span>
  <span class="token property">&quot;bir&quot;</span><span class="token operator">:</span><span class="token string">&quot;2012-12-12&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>\u8FD4\u56DE\u503C</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;ems&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;emp&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_version&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;result&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;created&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_shards&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;total&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;successful&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;failed&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_seq_no&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_primary_term&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u67E5\u8BE2\u6587\u6863"><a class="header-anchor" href="#\u67E5\u8BE2\u6587\u6863" aria-hidden="true">#</a> \u67E5\u8BE2\u6587\u6863</h5><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /ems/emp/<span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6267\u884C</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /ems/emp/<span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8FD4\u56DE\u503C</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;ems&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;emp&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_version&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_seq_no&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_primary_term&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;found&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_source&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;age&quot;</span> <span class="token operator">:</span> <span class="token number">23</span><span class="token punctuation">,</span>
    <span class="token property">&quot;bir&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2012-12-12&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>_id</code>\u6620\u5C04\u5230<code>id</code></p><h5 id="\u5220\u9664\u6587\u6863"><a class="header-anchor" href="#\u5220\u9664\u6587\u6863" aria-hidden="true">#</a> \u5220\u9664\u6587\u6863</h5><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>DELETE /ems/emp/<span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6267\u884C</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>DELETE /ems/emp/<span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8FD4\u56DE\u503C</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;ems&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;emp&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_version&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token property">&quot;result&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;deleted&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_shards&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;total&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;successful&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;failed&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_seq_no&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_primary_term&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u66F4\u65B0\u6587\u6863"><a class="header-anchor" href="#\u66F4\u65B0\u6587\u6863" aria-hidden="true">#</a> \u66F4\u65B0\u6587\u6863</h5><ol><li>\u7B2C\u4E00\u79CD\u65B9\u5F0F \u66F4\u65B0\u539F\u6709\u6570\u636E</li></ol><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>POST /dangdang/emp/<span class="token number">1</span>/_update
<span class="token punctuation">{</span>
  <span class="token property">&quot;doc&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;lisi&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u7B2C\u4E8C\u79CD\u65B9\u5F0F \u6DFB\u52A0\u65B0\u7684\u6570\u636E</li></ol><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>POST /ems/emp/<span class="token number">1</span>/_update
<span class="token punctuation">{</span>
  <span class="token property">&quot;doc&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>								## doc \u56FA\u5B9A\u5199\u6B7B\u7684\uFF0C\u4F1A\u4E0E/ems/emp/<span class="token number">1</span>\u4E2D\u7684\u6587\u6863\u5339\u914D\uFF0C\u7136\u540E\u66F4\u65B0\u5BF9\u5E94\u7684\u503C
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;age&quot;</span><span class="token operator">:</span><span class="token number">11</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dept&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u9500\u552E\u90E8&quot;</span>			## \u8FD9\u4E2A\u65B0\u6DFB\u52A0\u7684dept\u7684\u7C7B\u578B\u662F\u81EA\u52A8\u6784\u5EFA\u4E00\u4E2A\u7B26\u5408\u7684\u7C7B\u578B\uFF0C\u4E0D\u51C6\u786E
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u8FD9\u4E2A\u65B0\u6DFB\u52A0\u7684dept\u7684\u7C7B\u578B\u662F\u81EA\u52A8\u6784\u5EFA\u4E00\u4E2A\u7B26\u5408\u7684\u7C7B\u578B\uFF0C\u4E0D\u51C6\u786E</p><p>\u6240\u4EE5\u8FD9\u4E2A\u7ED9\u6211\u4EEC\u4E00\u4E2A\u4FE1\u53F7\uFF1A\u5C31\u662F\u521B\u5EFA\u4E86\u7D22\u5F15\u4E4B\u540E\uFF0C\u53EF\u4EE5\u4E0D\u7528\u521B\u5EFA\u7C7B\u578B\uFF0C\u76F4\u63A5\u5F80\u7D22\u5F15\u4E2D\u63D2\u5165\u6587\u6863\uFF0C\u4F46\u662F\u8FD9\u4E2A\u81EA\u52A8\u6784\u5EFA\u7684\u7C7B\u578B\u6620\u5C04\u662F\u4E0D\u51C6\u786E\u7684</p></blockquote><ol start="3"><li>\u7B2C\u4E09\u79CD\u65B9\u5F0F \u5728\u539F\u6765\u7684\u6570\u636E\u57FA\u7840\u4E0A\u66F4\u65B0</li></ol><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>POST /ems/emp/<span class="token number">1</span>/_update
<span class="token punctuation">{</span>
  <span class="token property">&quot;script&quot;</span><span class="token operator">:</span><span class="token string">&quot;ctx._source.age += 5&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ES\u7684\u4F7F\u7528\u8BED\u6CD5\u98CE\u683C\u4E3A\uFF1A</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>&lt;REST Verb&gt;	/&lt;Index&gt;/&lt;Type&gt;/&lt;Id&gt;
REST\u64CD\u4F5C			/\u7D22\u5F15/\u7C7B\u578B/\u6587\u6863id
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u6279\u91CF\u64CD\u4F5C"><a class="header-anchor" href="#\u6279\u91CF\u64CD\u4F5C" aria-hidden="true">#</a> \u6279\u91CF\u64CD\u4F5C</h5><blockquote><p><code>_bulk</code>\u6279\u91CF\u64CD\u4F5C\uFF0C\u6DFB\u52A0(index)\u3001\u5220\u9664(delete)\u3001\u66F4\u65B0(update)</p></blockquote><p>\u6279\u91CF\u66F4\u65B0\u4F1A\u662F\u539F\u5B50\u64CD\u4F5C\uFF0C\u4E5F\u5C31\u662F\u5176\u4ED6\u7684\u9519\u8BEF\u64CD\u4F5C\u4E0D\u4F1A\u5F71\u54CD\u6210\u529F\u7684\u64CD\u4F5C</p><blockquote><p>\u4E3A\u4EC0\u4E48\u4E0D\u662F\u539F\u5B50\u64CD\u4F5C\uFF1F</p><p>es\u4E3B\u8981\u5E2E\u6211\u4EEC\u5B8C\u6210\u641C\u7D22\u7684\u64CD\u4F5C\uFF0C\u5BF9es\u4EC5\u4EC5\u662F\u67E5\u8BE2\u64CD\u4F5C\uFF0C\u800C\u63D2\u5165\u3001\u66F4\u65B0\u3001\u5220\u9664\u90FD\u662F\u4E3A\u4E86\u67E5\u8BE2\u64CD\u4F5C\uFF0C\u6240\u4EE5es\u4E2D\u5F31\u5316\u4E8B\u52A1</p></blockquote><ol><li>\u6279\u91CF\u7D22\u5F15\u4E24\u4E2A\u6587\u6863</li></ol><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>PUT /dangdang/emp/_bulk
<span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;John Doe&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;age&quot;</span><span class="token operator">:</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token property">&quot;bir&quot;</span><span class="token operator">:</span><span class="token string">&quot;2012-12-12&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;John Doe&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;age&quot;</span><span class="token operator">:</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token property">&quot;bir&quot;</span><span class="token operator">:</span><span class="token string">&quot;2012-12-12&quot;</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u66F4\u65B0\u6587\u6863\u540C\u65F6\u5220\u9664\u6587\u6863</li></ol><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>POST /dangdang/emp/_bulk
<span class="token punctuation">{</span><span class="token property">&quot;update&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>		## \u66F4\u65B0\u6587\u6863
<span class="token punctuation">{</span><span class="token property">&quot;doc&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;lisi&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;delete&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;_id&quot;</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">}</span>			## \u5220\u9664\u6587\u6863
<span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span>							## \u6DFB\u52A0\u6587\u6863\uFF0C\u4E0D\u5199id\u4F1A\u81EA\u52A8\u6DFB\u52A0_id
<span class="token punctuation">{</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;age&quot;</span><span class="token operator">:</span><span class="token number">23</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>**\u6CE8\u610F\uFF1A**\u6279\u91CF\u65F6\u4E0D\u4F1A\u56E0\u4E3A\u4E00\u4E2A\u5931\u8D25\u800C\u5168\u90E8\u5931\u8D25\uFF0C\u800C\u662F\u7EE7\u7EED\u6267\u884C\u540E\u7EED\u64CD\u4F5C\uFF0C\u6279\u91CF\u5728\u8FD4\u56DE\u65F6\u6309\u7167\u6267\u884C\u7684\u72B6\u6001\u5F00\u59CB\u8FD4\u56DE</p><h2 id="es\u9AD8\u7EA7\u68C0\u7D22"><a class="header-anchor" href="#es\u9AD8\u7EA7\u68C0\u7D22" aria-hidden="true">#</a> es\u9AD8\u7EA7\u68C0\u7D22</h2><p>\u7D22\u5F15\u5E93\u5E95\u5C42\u7684\u5B58\u50A8\u539F\u7406\u5206\u6790</p><p><img src="`+g+'" alt="image-20211213202624981"></p><h3 id="\u68C0\u7D22\u65B9\u5F0F-search"><a class="header-anchor" href="#\u68C0\u7D22\u65B9\u5F0F-search" aria-hidden="true">#</a> \u68C0\u7D22\u65B9\u5F0F _search</h3><p>es\u5B98\u65B9\u63D0\u4F9B\u4E86\u4E24\u79CD\u68C0\u7D22\u65B9\u5F0F\uFF1A\u4E00\u79CD\u662F\u901A\u8FC7URL\u53C2\u6570\u8FDB\u884C\u641C\u7D22\uFF0C\u53E6\u4E00\u79CD\u662F\u901A\u8FC7DSL(Domain Specified Langeage)\u8FDB\u884C\u641C\u7D22\u3002\u5B98\u65B9\u66F4\u63A8\u8350\u4F7F\u7528\u7B2C\u4E8C\u79CD\u65B9\u5F0F\uFF0C\u7B2C\u4E8C\u79CD\u65B9\u5F0F\u662F\u57FA\u4E8E\u4F20\u9012JSON\u4F5C\u4E3A\u8BF7\u6C42\u4F53(request body)\u683C\u5F0F\u4E0EES\u8FDB\u884C\u4EA4\u4E92\uFF0C\u8FD9\u79CD\u65B9\u5F0F\u66F4\u5F3A\u5927\uFF0C\u66F4\u7B80\u4ECB</p><p><img src="'+h+`" alt="image-20211213164440101"></p><p>\u4F7F\u7528\u8BED\u6CD5\uFF1A<code>GET /\u7D22\u5F15/\u7C7B\u578B/_search</code></p><ul><li>\u67E5\u8BE2\u53C2\u6570\uFF1A\u901A\u8FC7\u5728\u8BF7\u6C42URL\u540E\u9762\u6DFB\u52A0<code>?xxx=xxx&amp;yyy=yyy&amp;zzz=zzz</code>\uFF0C<code>GET /\u7D22\u5F15/\u7C7B\u578B/_search?\u53C2\u6570</code>\u6BD4\u5982\uFF1A<code>/emp/_search?q=user:john</code>\uFF0C\u867D\u7136\u7B80\u5355\uFF0C\u4F46\u662F\u67E5\u8BE2\u65B9\u5F0F\u6BD4\u8F83\u53D7\u9650</li><li>\u7279\u5B9A\u9886\u57DF\u67E5\u8BE2\uFF1A\u5728\u67E5\u8BE2URL\u540E\u9762\u6DFB\u52A0\u5177\u4F53\u7684\u67E5\u8BE2\u53C2\u6570<code>{xxx:xxxx,yyy:yyy,zzz:zzz}</code>\uFF0C<code>GET /\u7D22\u5F15/\u7C7B\u578B/_search {}</code>\u4E5F\u53EBrequest body <ul><li>\u66F4\u76F4\u89C2</li><li>\u6CA1\u6709\u5C40\u9650</li><li>\u76F8\u5BF9\u67E5\u8BE2\u53C2\u6570\u66F4\u52A0\u5F3A\u5927</li></ul></li></ul><h3 id="\u521B\u5EFA\u6D4B\u8BD5\u6570\u636E"><a class="header-anchor" href="#\u521B\u5EFA\u6D4B\u8BD5\u6570\u636E" aria-hidden="true">#</a> \u521B\u5EFA\u6D4B\u8BD5\u6570\u636E</h3><ol><li>\u5220\u9664\u7D22\u5F15</li></ol><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /_cat/indices?v
DELETE /ems
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u521B\u5EFA\u7D22\u5F15\u5E76\u6307\u5B9A\u7C7B\u578B</li></ol><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>PUT /ems
<span class="token punctuation">{</span>
  <span class="token property">&quot;mappings&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">&quot;emp&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;age&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;integer&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;bir&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;date&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;content&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;address&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;keyword&quot;</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u63D2\u5165\u6D4B\u8BD5\u6570\u636E</li></ol><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>PUT /ems/emp/_bulk
<span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u5F20\u4E09&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;age&quot;</span><span class="token operator">:</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token property">&quot;bir&quot;</span><span class="token operator">:</span><span class="token string">&quot;2012-12-12&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u56E2\u961F\u5F00\u53D1\u66F9\u64CD\u5C31\u5230\u4F60\u8FD8\u80FD\u521B\u5EFA\u65B9\u6CD5\u7F8E\u53A8\u5A18&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;address&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u5E7F\u5DDE&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u674E\u56DB&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;age&quot;</span><span class="token operator">:</span><span class="token number">21</span><span class="token punctuation">,</span><span class="token property">&quot;bir&quot;</span><span class="token operator">:</span><span class="token string">&quot;2012-12-12&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u56E2\u961F\u5F00\u53D1\u66F9\u64CD\u5C31\u5230\u4F60\u8FD8\u80FD\u521B\u5EFA\u65B9\u6CD5\u7F8E\u53A8\u5A18&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;address&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u6DF1\u5733&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u738B\u4E94&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;age&quot;</span><span class="token operator">:</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token property">&quot;bir&quot;</span><span class="token operator">:</span><span class="token string">&quot;2012-12-12&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u56E2\u961F\u5F00\u53D1\u66F9\u64CD\u5C31\u5230\u4F60\u8FD8\u80FD\u521B\u5EFA\u65B9\u6CD5\u7F8E\u53A8\u5A18&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;address&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u4E0A\u6D77&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u8D75\u516D&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;age&quot;</span><span class="token operator">:</span><span class="token number">27</span><span class="token punctuation">,</span><span class="token property">&quot;bir&quot;</span><span class="token operator">:</span><span class="token string">&quot;2012-12-12&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u56E2\u961F\u5F00\u53D1\u66F9\u64CD\u5C31\u5230\u4F60\u8FD8\u80FD\u521B\u5EFA\u65B9\u6CD5\u7F8E\u53A8\u5A18&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;address&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u6210\u90FD&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u5218\u80FD&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;age&quot;</span><span class="token operator">:</span><span class="token number">28</span><span class="token punctuation">,</span><span class="token property">&quot;bir&quot;</span><span class="token operator">:</span><span class="token string">&quot;2012-12-12&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u56E2\u961F\u5F00\u53D1\u66F9\u64CD\u5C31\u5230\u4F60\u8FD8\u80FD\u521B\u5EFA\u65B9\u6CD5\u7F8E\u53A8\u5A18&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;address&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u5317\u4EAC&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u5F20\u65E0\u5FCC&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;age&quot;</span><span class="token operator">:</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token property">&quot;bir&quot;</span><span class="token operator">:</span><span class="token string">&quot;2012-12-12&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u56E2\u961F\u5F00\u53D1\u66F9\u64CD\u5C31\u5230\u4F60\u8FD8\u80FD\u521B\u5EFA\u65B9\u6CD5\u7F8E\u53A8\u5A18&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;address&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u62C9\u8428&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;index&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u8D75\u654F&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;age&quot;</span><span class="token operator">:</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token property">&quot;bir&quot;</span><span class="token operator">:</span><span class="token string">&quot;2012-12-12&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u56E2\u961F\u5F00\u53D1\u66F9\u64CD\u5C31\u5230\u4F60\u8FD8\u80FD\u521B\u5EFA\u65B9\u6CD5\u7F8E\u53A8\u5A18&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;address&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u547C\u548C\u6D69\u7279&quot;</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="url\u68C0\u7D22"><a class="header-anchor" href="#url\u68C0\u7D22" aria-hidden="true">#</a> URL\u68C0\u7D22</h3>`,237),_n=n("p",null,"url\u68C0\u7D22\u53EF\u4EE5\u62FC\u63A5\u7684\u8BF7\u6C42\u7C7B\u578B\uFF1Ahttps://www.elastic.co/guide/en/elasticsearch/reference/6.8/search-uri-request.html#_parameters_3",-1),xn=n("p",null,"(\u8FD9\u91CC\u6211\u5C31\u5217\u51FA\u6765\u4E86\uFF0C\u514D\u5F97\u8FD8\u8981\u81EA\u5DF1\u53BB\u67E5)",-1),wn=n("thead",null,[n("tr",null,[n("th",null,"Name"),n("th",null,"Description")])],-1),jn=n("td",null,[n("code",null,"q")],-1),Sn=s("The query string (maps to the "),Rn=n("code",null,"query_string",-1),Tn=s(" query, see "),En={href:"https://www.elastic.co/guide/en/elasticsearch/reference/6.8/query-dsl-query-string-query.html",target:"_blank",rel:"noopener noreferrer"},Cn=n("em",null,"Query String Query",-1),Bn=s(" for more details)."),An=n("tr",null,[n("td",null,[n("code",null,"df")]),n("td",null,"The default field to use when no field prefix is defined within the query.")],-1),Dn=n("tr",null,[n("td",null,[n("code",null,"analyzer")]),n("td",null,"The analyzer name to be used when analyzing the query string.")],-1),In=n("tr",null,[n("td",null,[n("code",null,"analyze_wildcard")]),n("td",null,[s("Should wildcard and prefix queries be analyzed or not. Defaults to "),n("code",null,"false"),s(".")])],-1),On=n("tr",null,[n("td",null,[n("code",null,"batched_reduce_size")]),n("td",null,"The number of shard results that should be reduced at once on the coordinating node. This value should be used as a protection mechanism to reduce the memory overhead per search request if the potential number of shards in the request can be large.")],-1),Hn=n("tr",null,[n("td",null,[n("code",null,"default_operator")]),n("td",null,[s("The default operator to be used, can be "),n("code",null,"AND"),s(" or "),n("code",null,"OR"),s(". Defaults to "),n("code",null,"OR"),s(".")])],-1),Nn=n("tr",null,[n("td",null,[n("code",null,"lenient")]),n("td",null,"If set to true will cause format based failures (like providing text to a numeric field) to be ignored. Defaults to false.")],-1),zn=n("tr",null,[n("td",null,[n("code",null,"explain")]),n("td",null,"For each hit, contain an explanation of how scoring of the hits was computed.")],-1),Ln=n("td",null,[n("code",null,"_source")],-1),Pn=s("Set to "),Qn=n("code",null,"false",-1),Un=s(" to disable retrieval of the "),Mn=n("code",null,"_source",-1),Fn=s(" field. You can also retrieve part of the document by using "),Xn=n("code",null,"_source_includes",-1),Gn=s(" & "),Wn=n("code",null,"_source_excludes",-1),Jn=s(" (see the "),Kn={href:"https://www.elastic.co/guide/en/elasticsearch/reference/6.8/search-request-source-filtering.html",target:"_blank",rel:"noopener noreferrer"},Yn=s("request body"),Vn=s(" documentation for more details)"),$n=n("tr",null,[n("td",null,[n("code",null,"stored_fields")]),n("td",null,"The selective stored fields of the document to return for each hit, comma delimited. Not specifying any value will cause no fields to return.")],-1),Zn=n("tr",null,[n("td",null,[n("code",null,"sort")]),n("td",null,[s("Sorting to perform. Can either be in the form of "),n("code",null,"fieldName"),s(", or "),n("code",null,"fieldName:asc"),s("/"),n("code",null,"fieldName:desc"),s(". The fieldName can either be an actual field within the document, or the special "),n("code",null,"_score"),s(" name to indicate sorting based on scores. There can be several "),n("code",null,"sort"),s(" parameters (order is important).")])],-1),ns=n("tr",null,[n("td",null,[n("code",null,"track_scores")]),n("td",null,[s("When sorting, set to "),n("code",null,"true"),s(" in order to still track scores and return them as part of each hit.")])],-1),ss=n("td",null,[n("code",null,"track_total_hits")],-1),as=s("Set to "),ts=n("code",null,"false",-1),es=s(" in order to disable the tracking of the total number of hits that match the query. (see "),ps={href:"https://www.elastic.co/guide/en/elasticsearch/reference/6.8/index-modules-index-sorting.html",target:"_blank",rel:"noopener noreferrer"},os=n("em",null,"Index Sorting",-1),cs=s(" for more details). Defaults to true."),ls=n("tr",null,[n("td",null,[n("code",null,"timeout")]),n("td",null,"A search timeout, bounding the search request to be executed within the specified time value and bail with the hits accumulated up to that point when expired. Defaults to no timeout.")],-1),is=n("tr",null,[n("td",null,[n("code",null,"terminate_after")]),n("td",null,[s("The maximum number of documents to collect for each shard, upon reaching which the query execution will terminate early. If set, the response will have a boolean field "),n("code",null,"terminated_early"),s(" to indicate whether the query execution has actually terminated_early. Defaults to no terminate_after.")])],-1),us=n("tr",null,[n("td",null,[n("code",null,"from")]),n("td",null,[s("The starting from index of the hits to return. Defaults to "),n("code",null,"0"),s(".")])],-1),rs=n("tr",null,[n("td",null,[n("code",null,"size")]),n("td",null,[s("The number of hits to return. Defaults to "),n("code",null,"10"),s(".")])],-1),ds=n("td",null,[n("code",null,"search_type")],-1),ks=s("The type of the search operation to perform. Can be "),vs=n("code",null,"dfs_query_then_fetch",-1),ms=s(" or "),bs=n("code",null,"query_then_fetch",-1),qs=s(". Defaults to "),gs=n("code",null,"query_then_fetch",-1),hs=s(". See "),ys={href:"https://www.elastic.co/guide/en/elasticsearch/reference/6.8/search-request-search-type.html",target:"_blank",rel:"noopener noreferrer"},fs=n("em",null,"Search Type",-1),_s=s(" for more details on the different types of search that can be performed."),xs=n("tr",null,[n("td",null,[n("code",null,"allow_partial_search_results")]),n("td",null,[s("Set to "),n("code",null,"false"),s(" to return an overall failure if the request would produce partial results. Defaults to true, which will allow partial results in the case of timeouts or partial failures. This default can be controlled using the cluster-level setting "),n("code",null,"search.default_allow_partial_results"),s(".")])],-1),ws=e(`<div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /ems/emp/_search?q=*&amp;sort=age<span class="token operator">:</span>asc&amp;size=<span class="token number">30</span>&amp;_source=name<span class="token punctuation">,</span>age
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>_search \u641C\u7D22\u7684API</li><li>q=* \u5339\u914D\u6240\u6709\u7684\u6587\u6863</li><li>sort \u4EE5\u7ED3\u679C\u7684\u4E2D\u6307\u5B9A\u7684\u5B57\u6BB5\u6392\u5E8F</li><li>size \u8FD4\u56DE\u7684\u6761\u6570\u91CF\uFF0C\u5982\u679C\u4E0D\u5199\uFF0C\u9ED8\u8BA4\u8FD4\u56DE10\u6761\u6570</li><li>_source \u8FD4\u56DE\u6307\u5B9A\u7684\u5B57\u6BB5\u6570\u636E\uFF0C\u6BD4\u5982_soruce=name,age \u8868\u793A\u8FD4\u56DE\u7C7B\u578Bname\u548Cage\u7684\u6570\u636E</li></ul><h3 id="dsl\u68C0\u7D22"><a class="header-anchor" href="#dsl\u68C0\u7D22" aria-hidden="true">#</a> DSL\u68C0\u7D22</h3><blockquote><p>\u4EE5\u4E0B\u91CD\u70B9\u8BB2DSL\u7684\u9AD8\u7EA7\u8BED\u6CD5</p></blockquote><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /ems/emp_search
<span class="token punctuation">{</span>
  <span class="token property">&quot;query&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;match_all&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sort&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;age&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token property">&quot;order&quot;</span><span class="token operator">:</span><span class="token string">&quot;desc&quot;</span>		## text \u6587\u672C\u662F\u6CA1\u6709\u529E\u6CD5\u505A\u6392\u5E8F\u7684\uFF0C\u56E0\u4E3A\u8981\u505A\u5206\u8BCD\u5904\u7406\uFF0C\u6587\u672C\u5C31\u88AB\u62C6\u5206\u7684
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="dsl\u9AD8\u7EA7\u68C0\u7D22"><a class="header-anchor" href="#dsl\u9AD8\u7EA7\u68C0\u7D22" aria-hidden="true">#</a> DSL\u9AD8\u7EA7\u68C0\u7D22</h3><p>(Query)</p><blockquote><p>\u5B98\u65B9\u6587\u6863\uFF1Ahttps://www.elastic.co/guide/en/elasticsearch/reference/6.8/query-dsl.html</p></blockquote><h4 id="\u67E5\u8BE2\u6240\u6709"><a class="header-anchor" href="#\u67E5\u8BE2\u6240\u6709" aria-hidden="true">#</a> \u67E5\u8BE2\u6240\u6709</h4><p>(match_all)</p><blockquote><p>match_all\u5173\u952E\u5B57\uFF1A\u8FD4\u56DE\u7D22\u5F15\u4E2D\u7684\u5168\u90E8\u6587\u6863</p></blockquote><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /ems/emp/_search
<span class="token punctuation">{</span>
  <span class="token property">&quot;query&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;match_all&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD4\u56DE\u503C</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;took&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>																								## \u4ECE\u67E5\u8BE2\u5F00\u59CB\u5230\u8FD4\u56DE\u7ED3\u679C\u7528\u65F6 \u6BEB\u79D2
  <span class="token property">&quot;timed_out&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>																			## \u64CD\u4F5C\u662F\u5426\u8D85\u65F6
  <span class="token property">&quot;_shards&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>																							## \u5206\u7247
    <span class="token property">&quot;total&quot;</span> <span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token property">&quot;successful&quot;</span> <span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token property">&quot;skipped&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;failed&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;hits&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>																								## \u672C\u6B21\u67E5\u8BE2\u51FB\u4E2D\u7684\u5BF9\u8C61\uFF0C\u5339\u914D\u5230\u7684\u6570\u91CF
    <span class="token property">&quot;total&quot;</span> <span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>																						## \u672C\u6B21\u67E5\u8BE2\u7684\u7ED3\u679C\u6570\u91CF
    <span class="token property">&quot;max_score&quot;</span> <span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>																			## \u6700\u5927\u7684\u5F97\u5206\uFF0C\u76F8\u5173\u5EA6
    <span class="token property">&quot;hits&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;ems&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;emp&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;oMIcs30BWKY1ehm0t3mL&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_score&quot;</span> <span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_source&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u5F20\u4E09&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;age&quot;</span> <span class="token operator">:</span> <span class="token number">23</span><span class="token punctuation">,</span>
          <span class="token property">&quot;bir&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2012-12-12&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;content&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u56E2\u961F\u5F00\u53D1\u66F9\u64CD\u5C31\u5230\u4F60\u8FD8\u80FD\u521B\u5EFA\u65B9\u6CD5\u7F8E\u53A8\u5A18&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;address&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u5E7F\u5DDE&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;ems&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;emp&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;ocIcs30BWKY1ehm0t3mL&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_score&quot;</span> <span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_source&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u674E\u56DB&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;age&quot;</span> <span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
          <span class="token property">&quot;bir&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2012-12-12&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;content&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u56E2\u961F\u5F00\u53D1\u66F9\u64CD\u5C31\u5230\u4F60\u8FD8\u80FD\u521B\u5EFA\u65B9\u6CD5\u7F8E\u53A8\u5A18&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;address&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u6DF1\u5733&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;ems&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;emp&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;o8Ics30BWKY1ehm0t3mL&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_score&quot;</span> <span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_source&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u8D75\u516D&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;age&quot;</span> <span class="token operator">:</span> <span class="token number">27</span><span class="token punctuation">,</span>
          <span class="token property">&quot;bir&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2012-12-12&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;content&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u56E2\u961F\u5F00\u53D1\u66F9\u64CD\u5C31\u5230\u4F60\u8FD8\u80FD\u521B\u5EFA\u65B9\u6CD5\u7F8E\u53A8\u5A18&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;address&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u6210\u90FD&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;ems&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;emp&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;pcIcs30BWKY1ehm0t3mL&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_score&quot;</span> <span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_source&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u5F20\u65E0\u5FCC&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;age&quot;</span> <span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
          <span class="token property">&quot;bir&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2012-12-12&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;content&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u56E2\u961F\u5F00\u53D1\u66F9\u64CD\u5C31\u5230\u4F60\u8FD8\u80FD\u521B\u5EFA\u65B9\u6CD5\u7F8E\u53A8\u5A18&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;address&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u62C9\u8428&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;ems&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;emp&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;pMIcs30BWKY1ehm0t3mL&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_score&quot;</span> <span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_source&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u5218\u80FD&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;age&quot;</span> <span class="token operator">:</span> <span class="token number">28</span><span class="token punctuation">,</span>
          <span class="token property">&quot;bir&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2012-12-12&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;content&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u56E2\u961F\u5F00\u53D1\u66F9\u64CD\u5C31\u5230\u4F60\u8FD8\u80FD\u521B\u5EFA\u65B9\u6CD5\u7F8E\u53A8\u5A18&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;address&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u5317\u4EAC&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;ems&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;emp&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;osIcs30BWKY1ehm0t3mL&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_score&quot;</span> <span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_source&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u738B\u4E94&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;age&quot;</span> <span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">,</span>
          <span class="token property">&quot;bir&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2012-12-12&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;content&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u56E2\u961F\u5F00\u53D1\u66F9\u64CD\u5C31\u5230\u4F60\u8FD8\u80FD\u521B\u5EFA\u65B9\u6CD5\u7F8E\u53A8\u5A18&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;address&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u4E0A\u6D77&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;ems&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;emp&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;psIcs30BWKY1ehm0t3mL&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_score&quot;</span> <span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_source&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u8D75\u654F&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;age&quot;</span> <span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
          <span class="token property">&quot;bir&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2012-12-12&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;content&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u56E2\u961F\u5F00\u53D1\u66F9\u64CD\u5C31\u5230\u4F60\u8FD8\u80FD\u521B\u5EFA\u65B9\u6CD5\u7F8E\u53A8\u5A18&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;address&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u547C\u548C\u6D69\u7279&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u67E5\u8BE2\u7ED3\u679C\u4E2D\u8FD4\u56DE\u6307\u5B9A\u6761\u6570"><a class="header-anchor" href="#\u67E5\u8BE2\u7ED3\u679C\u4E2D\u8FD4\u56DE\u6307\u5B9A\u6761\u6570" aria-hidden="true">#</a> \u67E5\u8BE2\u7ED3\u679C\u4E2D\u8FD4\u56DE\u6307\u5B9A\u6761\u6570</h4><p>(size)</p><blockquote><p>size \u5173\u952E\u5B57\uFF1A\u6307\u5B9A\u67E5\u8BE2\u7ED3\u679C\u4E2D\u8FD4\u56DE\u6307\u5B9A\u6761\u6570\u3002\u9ED8\u8BA4\u8FD4\u56DE10\u6761</p></blockquote><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /ems/emp/_search
<span class="token punctuation">{</span>
  <span class="token property">&quot;query&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;match_all&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;size&quot;</span><span class="token operator">:</span><span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u5206\u9875\u67E5\u8BE2"><a class="header-anchor" href="#\u5206\u9875\u67E5\u8BE2" aria-hidden="true">#</a> \u5206\u9875\u67E5\u8BE2</h4><p>(from)</p><blockquote><p>from \u5173\u952E\u5B57\uFF1A\u7528\u6765\u6307\u5B9A\u8D77\u59CB\u8FD4\u56DE\u4F4D\u7F6E\uFF0C\u548Csize\u5173\u952E\u5B57\u8FDE\u7528\u53EF\u5B9E\u73B0\u5206\u9875\u6548\u679C</p></blockquote><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /ems/emp/_search
<span class="token punctuation">{</span>
  <span class="token property">&quot;query&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;match_all&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sort&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;age&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;order&quot;</span><span class="token operator">:</span><span class="token string">&quot;desc&quot;</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token property">&quot;size&quot;</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token property">&quot;from&quot;</span><span class="token operator">:</span><span class="token number">0</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u67E5\u8BE2\u7ED3\u679C\u4E2D\u8FD4\u56DE\u6307\u5B9A\u5B57\u6BB5(_source)</li></ol><blockquote><p>_source \u5173\u952E\u5B57\uFF1A\u662F\u4E00\u4E2A\u6570\u7EC4\uFF0C\u5728\u6570\u7EC4\u4E2D\u7528\u6765\u6307\u5B9A\u5C55\u793A\u90A3\u4E9B\u5B57\u6BB5</p></blockquote><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /ems/emp/_search
<span class="token punctuation">{</span>
  <span class="token property">&quot;query&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;match_all&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_source&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u5173\u952E\u8BCD\u67E5\u8BE2"><a class="header-anchor" href="#\u5173\u952E\u8BCD\u67E5\u8BE2" aria-hidden="true">#</a> \u5173\u952E\u8BCD\u67E5\u8BE2</h4><p>(term)</p><blockquote><p>term \u5173\u952E\u5B57\uFF1A\u7528\u6765\u4F7F\u7528\u5173\u952E\u8BCD\u67E5\u8BE2</p></blockquote><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /ems/emp/_search
<span class="token punctuation">{</span>
  <span class="token property">&quot;query&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;match_all&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;term&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">&quot;address&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u5317\u4EAC&quot;</span>			## address\u4E2D\u542B\u6709\u5317\u4EAC\u7684
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>NOTE</strong></p><ul><li><p>type\u7C7B\u578B\u4E3Atext\u4F1A\u5206\u8BCD\u7684\uFF1Btype\u7C7B\u578B\u4E3Akeyword\u4E0D\u5206\u8BCD</p></li><li><p>\u901A\u8FC7\u4F7F\u7528tern\u67E5\u8BE2\u5F97\u77E5es\u4E2D\u9ED8\u8BA4\u4F7F\u7528\u5206\u8BCD\u5668\u4E3A\u6807\u51C6\u5206\u8BCD\u5668(StandardAnalyzer)\uFF0C\u6807\u51C6\u5206\u8BCD\u5668\u5BF9\u4E8E\u82F1\u6587\u5355\u8BCD\u5206\u8BCD\uFF0C\u5BF9\u4E8E\u4E2D\u6587\u5355\u5B57\u5206\u8BCD</p></li><li><p>\u901A\u8FC7\u4F7F\u7528tern\u67E5\u8BE2\u5F97\u77E5\uFF0C\u5728es\u7684mapping type\u4E2Dkeyword\u3001date\u3001integer\u3001long\u3001double\u3001boolean or ip \u8FD9\u4E9B\u7C7B\u578B\u4E0D\u5206\u8BCD\uFF0C\u53EA\u6709text\u7C7B\u578B\u5206\u8BCD</p></li></ul><p>\u53EF\u4EE5\u901A\u8FC7</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /_analyze
<span class="token punctuation">{</span>
  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span><span class="token string">&quot;Redis is open source DB&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6765\u67E5\u770B<code>Redis is open source DB</code>\u7684\u5206\u8BCD\u6548\u679C</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;tokens&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;redis&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&lt;ALPHANUM&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;is&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&lt;ALPHANUM&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;open&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&lt;ALPHANUM&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;source&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">14</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&lt;ALPHANUM&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">3</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;db&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">23</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&lt;ALPHANUM&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">4</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E2D\u6587\u7684\u6807\u51C6\u5206\u8BCD</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /_analyze
<span class="token punctuation">{</span>
  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span><span class="token string">&quot;java\u662F\u4E00\u4E2A\u8DE8\u5E73\u53F0\u4EA7\u54C1&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5BF9\u4E8E\u4E2D\u6587\u662F\u5355\u5B57\u5206\u8BCD</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;tokens&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;java&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&lt;ALPHANUM&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u662F&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&lt;IDEOGRAPHIC&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u4E00&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&lt;IDEOGRAPHIC&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u4E2A&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&lt;IDEOGRAPHIC&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">3</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u8DE8&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&lt;IDEOGRAPHIC&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">4</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u5E73&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&lt;IDEOGRAPHIC&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">5</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u53F0&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&lt;IDEOGRAPHIC&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">6</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u4EA7&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&lt;IDEOGRAPHIC&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">7</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u54C1&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&lt;IDEOGRAPHIC&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">8</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h4 id="\u8303\u56F4\u67E5\u8BE2"><a class="header-anchor" href="#\u8303\u56F4\u67E5\u8BE2" aria-hidden="true">#</a> \u8303\u56F4\u67E5\u8BE2</h4><p>(range)</p><blockquote><p>range \u5173\u952E\u5B57\uFF1A\u7528\u6765\u6307\u5B9A\u67E5\u8BE2\u6307\u5B9A\u8303\u56F4\u5185\u7684\u6587\u6863</p></blockquote><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /ems/emp/_search
<span class="token punctuation">{</span>
  <span class="token property">&quot;query&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">&quot;range&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token property">&quot;age&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token property">&quot;gte&quot;</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span> ## \u5927\u4E8E\u7B49\u4E8E
        <span class="token property">&quot;lte&quot;</span><span class="token operator">:</span><span class="token number">30</span> ## \u5C0F\u4E8E\u7B49\u4E8E
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u524D\u7F00\u67E5\u8BE2"><a class="header-anchor" href="#\u524D\u7F00\u67E5\u8BE2" aria-hidden="true">#</a> \u524D\u7F00\u67E5\u8BE2</h4><p>(prefix)</p><blockquote><p>prefix\u5173\u952E\u5B57\uFF1A\u7528\u6765\u68C0\u7D22\u542B\u6240\u6709\u6307\u5B9A\u524D\u7F00\u7684\u5173\u952E\u8BCD\u7684\u76F8\u5173\u6587\u6863</p></blockquote><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /ems/emp/_search
<span class="token punctuation">{</span>
  <span class="token property">&quot;query&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">&quot;prefix&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token property">&quot;content&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token string">&quot;redis&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u901A\u914D\u7B26\u67E5\u8BE2"><a class="header-anchor" href="#\u901A\u914D\u7B26\u67E5\u8BE2" aria-hidden="true">#</a> \u901A\u914D\u7B26\u67E5\u8BE2</h4><p>(wildcard)</p><blockquote><p>wildcard\u5173\u952E\u5B57\uFF1A\u901A\u914D\u7B26\u67E5\u8BE2\uFF0C<code>?</code>\u7528\u6765\u5339\u914D\u4E00\u4E2A\u4EFB\u610F\u5B57\u7B26\uFF0C<code>*</code>\u7528\u6765\u5339\u914D\u591A\u4E2A\u4EFB\u610F\u5B57\u7B26</p></blockquote><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /ems/emp/_search
<span class="token punctuation">{</span>
  <span class="token property">&quot;query&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">&quot;wildcard&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token property">&quot;content&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token string">&quot;re*&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u591Aid\u67E5\u8BE2"><a class="header-anchor" href="#\u591Aid\u67E5\u8BE2" aria-hidden="true">#</a> \u591Aid\u67E5\u8BE2</h4><p>(ids)</p><blockquote><p>ids\u5173\u952E\u5B57\uFF1A\u503C\u4E3A\u6570\u7EC4\u7C7B\u578B\uFF0C\u7528\u6765\u6839\u636E\u4E00\u7EC4id\u83B7\u53D6\u591A\u4E2A\u5BF9\u5E94\u7684\u6587\u6863</p></blockquote><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /ems/emp/_search
<span class="token punctuation">{</span>
  <span class="token property">&quot;query&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">&quot;ids&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token property">&quot;values&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u6A21\u7CCA\u67E5\u8BE2"><a class="header-anchor" href="#\u6A21\u7CCA\u67E5\u8BE2" aria-hidden="true">#</a> \u6A21\u7CCA\u67E5\u8BE2</h4><p>(fuzzy)</p><blockquote><p>fuzzy\u5173\u952E\u5B57\uFF1A\u7528\u6765\u6A21\u7CCA\u67E5\u8BE2\u542B\u6709\u6307\u5B9A\u5173\u952E\u5B57\u7684\u6587\u6863</p><p>\u6700\u5927\u6A21\u7CCA\u9519\u8BEF\u5FC5\u987B\u57280~2\u4E4B\u95F4</p><ul><li>elasticsearch 0\u4E2A\uFF0C\u6CA1\u6709\u9519\u8BEF</li><li>elasticsoarch 1\u4E2A\uFF0C\u9519\u8BEF</li><li>elasticsoorch 2\u4E2A\uFF0C\u9519\u8BEF</li></ul><p>\u5B98\u65B9\u8BF4\u660E\uFF1Ahttps://www.elastic.co/guide/en/elasticsearch/reference/6.8/common-options.html#fuzziness</p><p>fuzziness \u53C2\u6570\u53EF\u4EE5\u6307\u5B9A\u4E3A\uFF1A</p><ul><li><code>0</code>\u3001<code>1</code>\u3001<code>2</code>\uFF1A\u5141\u8BB8\u7684\u6700\u5927\u7F16\u8F91\u8DDD\u79BB\uFF08\u6216\u7F16\u8F91\u6B21\u6570\uFF09</li><li><code>AUTO</code>\uFF1A\u6839\u636E\u672F\u8BED\u7684\u957F\u5EA6\u751F\u6210\u7F16\u8F91\u8DDD\u79BB\u3002\u53EF\u4EE5\u9009\u62E9\u63D0\u4F9B\u4F4E\u8DDD\u79BB\u548C\u9AD8\u8DDD\u79BB\u53C2\u6570 AUTO:[low],[high]\u3002\u5982\u679C\u672A\u6307\u5B9A\uFF0C\u5219\u9ED8\u8BA4\u503C\u4E3A 3 \u548C 6\uFF0C\u76F8\u5F53\u4E8E AUTO:3,6 \u7684\u957F\u5EA6\uFF1A <ul><li><code>0..2</code>\uFF1A\u5FC5\u987B\u5B8C\u5168\u5339\u914D</li><li><code>3..5</code>\uFF1A\u53EF\u4EE5\u6A21\u7CCA\u4E00\u4E2A</li><li><code>&gt;5</code>\uFF1A\u53EF\u4EE5\u6A21\u7CCA\u4E24\u4E2A</li></ul></li></ul><p><code>AUTO</code> should generally be the preferred value for <code>fuzziness</code>.</p></blockquote><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /ems/emp/_search
<span class="token punctuation">{</span>
  <span class="token property">&quot;query&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">&quot;fuzzy&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token property">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot;elasticsearch&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u5E03\u5C14\u67E5\u8BE2"><a class="header-anchor" href="#\u5E03\u5C14\u67E5\u8BE2" aria-hidden="true">#</a> \u5E03\u5C14\u67E5\u8BE2</h4><p>(bool)</p><blockquote><p>bool \u5173\u952E\u5B57\uFF1A\u7528\u6765\u7EC4\u5408\u591A\u4E2A\u6761\u4EF6\u5B9E\u73B0\u590D\u6742\u67E5\u8BE2</p><ul><li>must \u76F8\u5F53\u4E8E&amp;&amp;\uFF0C\u540C\u65F6\u6210\u7ACB</li><li>should \u76F8\u5F53\u4E8E||\uFF0C\u6210\u7ACB\u4E00\u4E2A\u5C31\u884C</li><li>must_not\uFF1A\u76F8\u5F53\u4E8E!\uFF0C\u4E0D\u80FD\u6EE1\u8DB3\u4EFB\u610F\u4E00\u4E2A</li></ul></blockquote><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /ems/emp/_search
<span class="token punctuation">{</span>
  <span class="token property">&quot;query&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">&quot;bool&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token property">&quot;must&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;range&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token property">&quot;age&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
              <span class="token property">&quot;gte&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
              <span class="token property">&quot;lte&quot;</span><span class="token operator">:</span><span class="token number">30</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;trem&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token property">&quot;address&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
              <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u5317\u4EAC&quot;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;should&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
        ## xxxxx
        <span class="token punctuation">{</span> ## xxx <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    	<span class="token property">&quot;must_not&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u9AD8\u4EAE\u67E5\u8BE2"><a class="header-anchor" href="#\u9AD8\u4EAE\u67E5\u8BE2" aria-hidden="true">#</a> \u9AD8\u4EAE\u67E5\u8BE2</h4><p>(highlight)</p><blockquote><p>highlinght \u5173\u952E\u5B57\uFF1A\u53EF\u4EE5\u8BA9\u7B26\u5408\u6761\u4EF6\u7684\u6587\u6863\u4E2D\u7684\u5173\u952E\u8BCD\u9AD8\u4EAE</p><p>\u5E76\u4E0D\u662F\u67E5\u8BE2\uFF0C\u53EA\u662F\u5BF9\u67E5\u8BE2\u7ED3\u679C\u7684\u4E8C\u6B21\u6E32\u67D3</p></blockquote><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /ems/emp/_search
<span class="token punctuation">{</span>
  <span class="token property">&quot;query&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">&quot;trem&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token property">&quot;content&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token string">&quot;redis&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;highlight&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token property">&quot;*&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span>		## \u5BF9\u4EFB\u4F55\u5B57\u6BB5\u4E2D\u7684redis\u67E5\u8BE2\u7ED3\u679C\u9AD8\u4EAE\uFF0C\u53EF\u4EE5\u6307\u5B9A\u5B57\u6BB5 <span class="token property">&quot;content&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span>\uFF0C\u4F46\u662F\u4E3A\u4E86\u6027\u80FD\uFF0Ces\u53EA\u4F1A\u6839\u636E\u67E5\u8BE2\u6307\u5B9A\u7684\u5B57\u6BB5\u8FDB\u884C\u9AD8\u4EAE\uFF0C\u6BD4\u5982\u4E0A\u9762term\u4E2D\u7684content
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token property">&quot;request_field_match&quot;</span><span class="token operator">:</span><span class="token string">&quot;false&quot;</span> ## \u5982\u679C\u6307\u5B9A\u4E86*\u8981\u5BF9\u6240\u6709\u7684\u5B57\u6BB5\u90FD\u9AD8\u4EAE\uFF0C\u53EF\u4EE5\u6307\u5B9A\u5173\u95ED\u5B57\u6BB5\u5339\u914D
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u81EA\u5B9A\u4E49\u9AD8\u4EAEhtml\u6807\u7B7E\uFF1A\u53EF\u4EE5\u5728highlight\u4E2D\u4F7F\u7528<code>pre_tags</code>\u548C<code>post_tags</code></p></blockquote><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /ems/emp/_search
<span class="token punctuation">{</span>
  <span class="token property">&quot;query&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">&quot;term&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u5F20\u4E09&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;highlight&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">&quot;pre_tags&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;&lt;span style=&#39;color:red&#39;&gt;&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  	<span class="token property">&quot;post_tags&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;&lt;/span&gt;&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token property">&quot;content&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD4\u56DE\u503C</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;took&quot;</span> <span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
  <span class="token property">&quot;timed_out&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;_shards&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;total&quot;</span> <span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token property">&quot;successful&quot;</span> <span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token property">&quot;skipped&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;failed&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;hits&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;total&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;max_score&quot;</span> <span class="token operator">:</span> <span class="token number">0.6931472</span><span class="token punctuation">,</span>
    <span class="token property">&quot;hits&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;_index&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;ems&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;emp&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;oMIcs30BWKY1ehm0t3mL&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_score&quot;</span> <span class="token operator">:</span> <span class="token number">0.6931472</span><span class="token punctuation">,</span>
        <span class="token property">&quot;_source&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u5F20\u4E09&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;age&quot;</span> <span class="token operator">:</span> <span class="token number">23</span><span class="token punctuation">,</span>
          <span class="token property">&quot;bir&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2012-12-12&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;content&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u56E2\u961F\u5F00\u53D1\u66F9\u64CD\u5C31\u5230\u4F60\u8FD8\u80FD\u521B\u5EFA\u65B9\u6CD5\u7F8E\u53A8\u5A18&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;address&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u5E7F\u5DDE&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;highlight&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;\u5F20&lt;span style=&#39;color:red&#39;&gt;\u4E09&lt;/span&gt;&quot;</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u591A\u5B57\u6BB5\u67E5\u8BE2"><a class="header-anchor" href="#\u591A\u5B57\u6BB5\u67E5\u8BE2" aria-hidden="true">#</a> \u591A\u5B57\u6BB5\u67E5\u8BE2</h4><p>(multi_match)</p><blockquote><p>\u641C\u7D22\u6BD4\u8F83\u667A\u80FD</p><ul><li>\u5982\u679C\u641C\u7D22\u7684\u5B57\u6BB5\u5206\u8BCD\u5B83\u4F1A\u5BF9query\u8FDB\u884C\u5148\u5206\u8BCD\u5728\u641C\u7D22</li><li>\u5982\u679C\u641C\u7D20\u7684\u5B57\u6BB5\u4E0D\u5206\u8BCD\uFF0C\u5B83\u4F1A\u76F4\u63A5\u4F7F\u7528query\u6574\u4F53\u8FDB\u884C\u8BE5\u5B57\u6BB5\u641C\u7D22</li></ul><p>\u6BD4\u5982\uFF1A\u5B57\u6BB5content\u5206\u8BCD\uFF0C\u90A3\u4E48\u5C31\u4F1A\u62FF\u7740<code>\u4E2D\u56FD</code>\u4E2D\u7684<code>\u4E2D</code>\u548C<code>\u56FD</code>\u5206\u8BCD\u4E4B\u540E\u4E0Econtent\u4E2D\u7684\u5206\u8BCD\u8FDB\u884C\u6BD4\u8F83\uFF1B\u800Cname\u5B57\u6BB5\u4E0D\u5206\u8BCD\uFF0C\u90A3\u4E48\u5C31\u4F1A\u76F4\u63A5\u62FF\u4E2D\u56FD\u53BB\u4E0Ename\u5B57\u6BB5\u8FDB\u884C\u5206\u8BCD</p></blockquote><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /ems/emp/_search
<span class="token punctuation">{</span>
  <span class="token property">&quot;query&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">&quot;multi_match&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token property">&quot;query&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u4E2D\u56FD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;field&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">]</span> ## \u8FD9\u91CC\u5199\u8981\u68C0\u7D22\u7684\u6307\u5B9A\u5B57\u6BB5
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u591A\u5B57\u6BB5\u5206\u8BCD\u67E5\u8BE2"><a class="header-anchor" href="#\u591A\u5B57\u6BB5\u5206\u8BCD\u67E5\u8BE2" aria-hidden="true">#</a> \u591A\u5B57\u6BB5\u5206\u8BCD\u67E5\u8BE2</h4><p>(query_string)</p><blockquote><p>\u5982\u679C\u5B57\u6BB5\u6709\u5206\u8BCD\uFF0C\u4E5F\u662F\u5148\u5C06query\u5206\u8BCD\u5904\u7406\u4E4B\u540E\u8FDB\u884C\u5339\u914D</p></blockquote><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /dangdang/book/_search
<span class="token punctuation">{</span>
  <span class="token property">&quot;query&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">&quot;query_string&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token property">&quot;query&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u4E2D\u56FD\u58F0\u97F3&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span><span class="token string">&quot;ik_max_word&quot;</span><span class="token punctuation">,</span>				## \u4F7F\u7528ik\u5206\u8BCD\u5668
      <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">]</span>
  	<span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ik\u5206\u8BCD\u5668"><a class="header-anchor" href="#ik\u5206\u8BCD\u5668" aria-hidden="true">#</a> IK\u5206\u8BCD\u5668</h2><blockquote><p>NOTE\uFF1A</p><p>\u9ED8\u8BA4ES\u4E2D\u91C7\u7528\u6807\u51C6\u5206\u8BCD\u5668\u8FDB\u884C\u5206\u8BCD\uFF0C\u8FD9\u79CD\u65B9\u5F0F\u5E76\u4E0D\u9002\u7528\u4E8E\u4E2D\u6587\u7F51\u7AD9\uFF0C\u56E0\u6B64\u9700\u8981\u4FEE\u6539ES\u5BF9\u4E2D\u6587\u53CB\u597D\u5206\u8BCD\uFF0C\u4ECE\u800C\u8FBE\u5230\u66F4\u4F73\u7684\u641C\u7D22\u7684\u6548\u679C</p><p>github\u5730\u5740\uFF1Ahttps://github.com/medcl/elasticsearch-analysis-ik</p><p>NOTE\uFF1A\u8981\u6C42\u7248\u672C\u4E25\u683C\u4E0E\u5F53\u524D\u7248\u672C\u4E00\u81F4</p><table><thead><tr><th>IK version</th><th>ES version</th></tr></thead><tbody><tr><td>master</td><td>7.x -&gt; master</td></tr><tr><td>6.x</td><td>6.x</td></tr><tr><td>5.x</td><td>5.x</td></tr><tr><td>1.10.6</td><td>2.4.6</td></tr><tr><td>1.9.5</td><td>2.3.5</td></tr><tr><td>1.8.1</td><td>2.2.1</td></tr><tr><td>1.7.0</td><td>2.1.1</td></tr><tr><td>1.5.0</td><td>2.0.0</td></tr><tr><td>1.2.6</td><td>1.0.0</td></tr><tr><td>1.2.5</td><td>0.90.x</td></tr><tr><td>1.1.3</td><td>0.20.x</td></tr><tr><td>1.0.0</td><td>0.16.2 -&gt; 0.19.0</td></tr></tbody></table></blockquote><h3 id="\u5728\u7EBF\u5B89\u88C5ik"><a class="header-anchor" href="#\u5728\u7EBF\u5B89\u88C5ik" aria-hidden="true">#</a> \u5728\u7EBF\u5B89\u88C5IK</h3><blockquote><p>\u5728\u7EBF\u5B89\u88C5IK\uFF08v5.5.1\u7248\u672C\u4E4B\u540E\u5F00\u59CB\u652F\u6301\u5728\u7EBF\u5B89\u88C5\uFF09</p></blockquote><ol><li>\u5728es\u5B89\u88C5\u76EE\u5F55\u6267\u884C\u5982\u4E0B\u547D\u4EE4</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>./bin/elasticsearch-plugin <span class="token function">install</span> https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v6.8.0/elasticsearch-analysis-ik-6.8.0.zip
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>\u67E5\u770B\u5B89\u88C5\u7684IK\u63D2\u4EF6</li></ol><p>\u8FDB\u5165plugins\u76EE\u5F55\uFF0CIK\u5DF2\u7ECF\u5B89\u88C5\u597D\u4E86</p><ol start="2"><li>\u91CD\u542Fes\u751F\u6548</li></ol><p>\u540E\u53F0\u542F\u52A8\u4E4B\u540E\uFF0C\u4F7F\u7528kill\u65B9\u5F0F\u6740\u6389\u8FDB\u7A0B\uFF0C\u4E4B\u540E\u518D\u91CD\u65B0\u542F\u52A8</p><blockquote><p>\u5982\u679C\u51FA\u73B0\u9519\u8BEF\uFF1A</p><p><img src="`+y+`" alt="image-20211213225847576"></p><p>\u8868\u793A\uFF1A\u4E3A\u4E86\u4F7F\u7528IK\u5206\u8BCD\u5668\uFF0C\u4E0D\u80FD\u5B58\u5728\u5386\u53F2\u6570\u636E</p><p>\u5904\u7406\uFF1A</p><p>es\u4E2D\u6240\u6709\u7684\u6570\u636E\u90FD\u5728data\u76EE\u5F55\u4E2D\uFF0C\u76F4\u63A5\u6E05\u7A7Adata\u76EE\u5F55\u4E4B\u540E\u91CD\u65B0\u542F\u52A8</p></blockquote><ol start="3"><li><p>\u5982\u679C\u8981\u4F7F\u7528kibana\u8FDE\u63A5\uFF0C\u5C06kibana\u91CD\u65B0\u542F\u52A8\u4E00\u4E0B</p></li><li><p>\u9A8C\u8BC1</p></li></ol><blockquote><p>ik_max_word \u548C ik_smart \u4EC0\u4E48\u533A\u522B?</p><p>ik_max_word: \u4F1A\u5C06\u6587\u672C\u505A\u6700\u7EC6\u7C92\u5EA6\u7684\u62C6\u5206\uFF0C\u6BD4\u5982\u4F1A\u5C06\u201C\u4E2D\u534E\u4EBA\u6C11\u5171\u548C\u56FD\u56FD\u6B4C\u201D\u62C6\u5206\u4E3A\u201C\u4E2D\u534E\u4EBA\u6C11\u5171\u548C\u56FD,\u4E2D\u534E\u4EBA\u6C11,\u4E2D\u534E,\u534E\u4EBA,\u4EBA\u6C11\u5171\u548C\u56FD,\u4EBA\u6C11,\u4EBA,\u6C11,\u5171\u548C\u56FD,\u5171\u548C,\u548C,\u56FD\u56FD,\u56FD\u6B4C\u201D\uFF0C\u4F1A\u7A77\u5C3D\u5404\u79CD\u53EF\u80FD\u7684\u7EC4\u5408\uFF1B</p><p>ik_smart: \u4F1A\u505A\u6700\u7C97\u7C92\u5EA6\u7684\u62C6\u5206\uFF0C\u6BD4\u5982\u4F1A\u5C06\u201C\u4E2D\u534E\u4EBA\u6C11\u5171\u548C\u56FD\u56FD\u6B4C\u201D\u62C6\u5206\u4E3A\u201C\u4E2D\u534E\u4EBA\u6C11\u5171\u548C\u56FD,\u56FD\u6B4C\u201D</p></blockquote><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /_analyze
<span class="token punctuation">{</span>
  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u4E2D\u56FD\u4EBA\u6C11\u5171\u548C\u56FD\u56FD\u6B4C&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span><span class="token string">&quot;ik_max_word&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD4\u56DE\u503C</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;tokens&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u4E2D\u56FD\u4EBA\u6C11&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u4E2D\u56FD\u4EBA&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u4E2D\u56FD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u56FD\u4EBA&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">3</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u4EBA\u6C11\u5171\u548C\u56FD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">4</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u4EBA\u6C11&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">5</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u5171\u548C\u56FD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">6</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u5171\u548C&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">7</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u56FD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_CHAR&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">8</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u56FD\u6B4C&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">9</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /_analyze
<span class="token punctuation">{</span> 
  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u4E2D\u56FD\u4EBA\u6C11\u5171\u548C\u56FD\u56FD\u6B4C&quot;</span><span class="token punctuation">,</span> 
  <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span><span class="token string">&quot;ik_smart&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD4\u56DE\u503C</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;tokens&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u4E2D\u56FD\u4EBA\u6C11&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u5171\u548C\u56FD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u56FD\u6B4C&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>\u6D4B\u8BD5\u4F7F\u7528</li></ol><p>\u6211\u4EEC\u5728\u521B\u5EFA\u7C7B\u578B\u7684\u65F6\u5019\u660E\u786E\u6307\u5B9A\u8981\u4F7F\u7528\u90A3\u79CD\u5206\u8BCD\u5668</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>PUT /ems
<span class="token punctuation">{</span>
  <span class="token property">&quot;mappings&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">&quot;emp&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span><span class="token string">&quot;ik_max_word&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;age&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;integer&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;bir&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;date&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;content&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span><span class="token string">&quot;ik_max_word&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;address&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;keyword&quot;</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li>\u5728\u7EBF\u5B89\u88C5\u7684\u914D\u7F6E\u6587\u4EF6\u5728es\u5B89\u88C5\u76EE\u5F55\u4E2Dconfig\u4E2D</li></ol><p>\u5728\u76EE\u5F55<code>elasticsearch-6.8.0/config/analysis-ik</code>\uFF0C\u4E0D\u662F\u5728<code>elasticsearch-6.8.0/plugins/analysis-ik/config</code>\uFF0C\u4E5F\u5C31\u662F\u8BF4\uFF0Cik\u5728\u8BFB\u53D6\u81EA\u5B9A\u4E49\u8BCD\u5178\u7684\u65F6\u5019\uFF0C\u662F\u8BFB\u53D6<code>elasticsearch-6.8.0/config/analysis-ik</code>\u8FD9\u4E2A\u76EE\u5F55\u4E2D\u7684\u914D\u7F6E</p><h3 id="\u672C\u5730\u5B89\u88C5ik"><a class="header-anchor" href="#\u672C\u5730\u5B89\u88C5ik" aria-hidden="true">#</a> \u672C\u5730\u5B89\u88C5IK</h3><blockquote><p>\u53EF\u4EE5\u5C06\u5BF9\u5E94\u7684IK\u5206\u8BCD\u5668\u4E0B\u8F7D\u5230\u672C\u5730\uFF0C\u7136\u540E\u518D\u5B89\u88C5</p></blockquote><ol><li>\u4E0B\u8F7D\u5BF9\u5E94\u7248\u672C</li></ol><p>\u8FDB\u5165github\u4E2D\u5E76\u9009\u62E9\u5BF9\u5E94\u7684tags\uFF1Ahttps://github.com/medcl/elasticsearch-analysis-ik/tree/v6.8.0</p><p><img src="`+f+'" alt="image-20211213224115831"></p><p>\u70B9\u51FB<code>http://code.google.com/p/ik-analyzer/</code>\u8FDB\u5165\u4E0B\u8F7D</p><p>\u6216\u8005\u9009\u62E9releases\u4E0B\u8F7D</p><p><img src="'+_+'" alt="image-20211213224402953"></p><p>\u9009\u62E9\u5BF9\u5E94\u7684\u7248\u672C\u4E0B\u8F7D</p><p><img src="'+x+`" alt="image-20211213224602351"></p><ol start="2"><li>\u89E3\u538B</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">tar</span> -zxvf elasticsearch-analysis-ik-6.8.0.zip
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>\u79FB\u52A8\u5230es\u5B89\u88C5\u76EE\u5F55\u4E2D\u7684plugins\u76EE\u5F55\u4E2D</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>es-admin@localhost elasticsearch-6.8.0<span class="token punctuation">]</span>$ ll plugins/
\u603B\u7528\u91CF <span class="token number">0</span>
drwxr-xr-x. <span class="token number">2</span> es-admin es <span class="token number">229</span> <span class="token number">12</span>\u6708 <span class="token number">13</span> <span class="token number">22</span>:55 analysis-ik
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u91CD\u542Fes\u751F\u6548</li></ol><p>\u5148kill\u8FDB\u7A0B\u4E4B\u540E\u518D\u91CD\u65B0\u542F\u52A8</p><ol start="5"><li>\u5982\u679C\u8981\u4F7F\u7528kibana\u8FDE\u63A5\uFF0C\u5C06kibana\u91CD\u65B0\u542F\u52A8\u4E00\u4E0B</li></ol><h3 id="\u914D\u7F6Eik\u6269\u5C55"><a class="header-anchor" href="#\u914D\u7F6Eik\u6269\u5C55" aria-hidden="true">#</a> \u914D\u7F6EIK\u6269\u5C55</h3><h4 id="\u914D\u7F6E\u672C\u5730\u6269\u5C55\u8BCD\u5178\u548C\u505C\u7528\u8BCD\u5178"><a class="header-anchor" href="#\u914D\u7F6E\u672C\u5730\u6269\u5C55\u8BCD\u5178\u548C\u505C\u7528\u8BCD\u5178" aria-hidden="true">#</a> \u914D\u7F6E\u672C\u5730\u6269\u5C55\u8BCD\u5178\u548C\u505C\u7528\u8BCD\u5178</h4><blockquote><p><strong>Dictionary Configuration</strong></p><p><code>IKAnalyzer.cfg.xml</code> can be located at <code>{conf}/analysis-ik/config/IKAnalyzer.cfg.xml</code> or <code>{plugins}/elasticsearch-analysis-ik-*/config/IKAnalyzer.cfg.xml</code></p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">properties</span> <span class="token name">SYSTEM</span> <span class="token string">&quot;http://java.sun.com/dtd/properties.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>comment</span><span class="token punctuation">&gt;</span></span>IK Analyzer \u6269\u5C55\u914D\u7F6E<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>comment</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!--\u7528\u6237\u53EF\u4EE5\u5728\u8FD9\u91CC\u914D\u7F6E\u81EA\u5DF1\u7684\u6269\u5C55\u5B57\u5178 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ext_dict<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>custom/mydict.dic;custom/single_word_low_freq.dic<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>entry</span><span class="token punctuation">&gt;</span></span>
	 <span class="token comment">&lt;!--\u7528\u6237\u53EF\u4EE5\u5728\u8FD9\u91CC\u914D\u7F6E\u81EA\u5DF1\u7684\u6269\u5C55\u505C\u6B62\u8BCD\u5B57\u5178--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ext_stopwords<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>custom/ext_stopword.dic<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>entry</span><span class="token punctuation">&gt;</span></span>
 	<span class="token comment">&lt;!--\u7528\u6237\u53EF\u4EE5\u5728\u8FD9\u91CC\u914D\u7F6E\u8FDC\u7A0B\u6269\u5C55\u5B57\u5178 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>remote_ext_dict<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>location<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>entry</span><span class="token punctuation">&gt;</span></span>
 	<span class="token comment">&lt;!--\u7528\u6237\u53EF\u4EE5\u5728\u8FD9\u91CC\u914D\u7F6E\u8FDC\u7A0B\u6269\u5C55\u505C\u6B62\u8BCD\u5B57\u5178--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>remote_ext_stopwords<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>http://xxx.com/xxx.dic<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>entry</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h5 id="\u914D\u7F6Eik\u6269\u5C55-1"><a class="header-anchor" href="#\u914D\u7F6Eik\u6269\u5C55-1" aria-hidden="true">#</a> \u914D\u7F6EIK\u6269\u5C55</h5><p>\u6269\u5C55\u8BCD\u5178\u53EA\u80FD\u5BF9\u65B0\u589E\u7684\u6587\u6863\u751F\u6548\uFF0C\u5BF9\u539F\u59CB\u6587\u6863\u4E0D\u751F\u6548\uFF0C\u56E0\u4E3A\u539F\u59CB\u6587\u6863\u5DF2\u7ECF\u6784\u5EFA\u597D\u4E86\u7D22\u5F15\u4E86</p><ul><li>\u5982\u679C\u662F\u672C\u5730\u5B89\u88C5\u7684\u8BDD\uFF0C\u5728es\u76EE\u5F55\u4E0B/plugins/ik\u76EE\u5F55/config\u4E2D</li><li>\u5982\u679C\u662F\u5728\u5728\u7EBF\u5B89\u88C5\u7684\u8BDD\uFF0C\u5728es\u76EE\u5F55\u4E0B/config/ik\u76EE\u5F55\u4E2D</li></ul><p>\u6DFB\u52A0\u81EA\u5DF1\u7684\u6269\u5C55\u5B57\u5178</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>[es-admin@localhost elasticsearch-6.8.0]$ cat config/analysis-ik/custom/mydict.dic
\u78B0\u74F7
\u84DD\u7626
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728<code>IKAnalyzer.cfg.xml</code>\u4E2D\u6DFB\u52A0\u81EA\u5DF1\u7684\u6269\u5C55\u5B57\u5178</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">properties</span> <span class="token name">SYSTEM</span> <span class="token string">&quot;http://java.sun.com/dtd/properties.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>comment</span><span class="token punctuation">&gt;</span></span>IK Analyzer \u6269\u5C55\u914D\u7F6E<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>comment</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!--\u7528\u6237\u53EF\u4EE5\u5728\u8FD9\u91CC\u914D\u7F6E\u81EA\u5DF1\u7684\u6269\u5C55\u5B57\u5178 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ext_dict<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>custom/mydict.dic;custom/single_word_low_freq.dic<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>entry</span><span class="token punctuation">&gt;</span></span>
	 <span class="token comment">&lt;!--\u7528\u6237\u53EF\u4EE5\u5728\u8FD9\u91CC\u914D\u7F6E\u81EA\u5DF1\u7684\u6269\u5C55\u505C\u6B62\u8BCD\u5B57\u5178--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ext_stopwords<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>custom/ext_stopword.dic<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>entry</span><span class="token punctuation">&gt;</span></span>
 	<span class="token comment">&lt;!--\u7528\u6237\u53EF\u4EE5\u5728\u8FD9\u91CC\u914D\u7F6E\u8FDC\u7A0B\u6269\u5C55\u5B57\u5178 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>remote_ext_dict<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>location<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>entry</span><span class="token punctuation">&gt;</span></span>
 	<span class="token comment">&lt;!--\u7528\u6237\u53EF\u4EE5\u5728\u8FD9\u91CC\u914D\u7F6E\u8FDC\u7A0B\u6269\u5C55\u505C\u6B62\u8BCD\u5B57\u5178--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>remote_ext_stopwords<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>http://xxx.com/xxx.dic<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>entry</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u914D\u7F6E\u4E4B\u540E\u91CD\u65B0\u542F\u52A8\uFF0C\u51FA\u73B0\u5982\u4E0B</p><p><img src="`+w+`" alt="image-20211214023743156"></p><p>\u5219\u8868\u793A\u52A0\u8F7D\u4E86\u6269\u5C55\u7684\u914D\u7F6E</p><p><strong>\u5982\u679C\u662F\u505C\u7528\u8BCD\u5178(\u4E0D\u5141\u8BB8\u8FD9\u4E2A\u8BCD\u8BED\u5339\u914D)\uFF0C\u4E5F\u662F\u540C\u6837\u7684\u914D\u7F6E</strong></p><h5 id="\u6D4B\u8BD5"><a class="header-anchor" href="#\u6D4B\u8BD5" aria-hidden="true">#</a> \u6D4B\u8BD5</h5><ol><li>\u6D4B\u8BD51</li></ol><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /_analyze
<span class="token punctuation">{</span> 
  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u4ECA\u5929\u88AB\u78B0\u74F7\u4E86\uFF0C\u5F88\u84DD\u7626&quot;</span><span class="token punctuation">,</span> 
  <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span><span class="token string">&quot;ik_smart&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;tokens&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u4ECA\u5929&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u88AB&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_CHAR&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u78B0\u74F7&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u4E86&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_CHAR&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">3</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u5F88&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_CHAR&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">4</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u84DD\u7626&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">5</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u6D4B\u8BD52</li></ol><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>PUT /ems
<span class="token punctuation">{</span>
  <span class="token property">&quot;mappings&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">&quot;emp&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span><span class="token string">&quot;ik_max_word&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;age&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;integer&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;bir&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;date&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;content&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span><span class="token string">&quot;ik_max_word&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;address&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;keyword&quot;</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

PUT /ems/emp/<span class="token number">2</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u5F20\u4E09&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;age&quot;</span><span class="token operator">:</span><span class="token number">23</span><span class="token punctuation">,</span>
  <span class="token property">&quot;bir&quot;</span><span class="token operator">:</span><span class="token string">&quot;2012-12-12&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u4ECA\u5929\u88AB\u78B0\u74F7\u4E86\uFF0C\u5F88\u84DD\u7626&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;address&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u5E7F\u5DDE&quot;</span>
<span class="token punctuation">}</span>

GET /ems/emp/_search
<span class="token punctuation">{</span>
  <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;match_all&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

GET /ems/emp/_search
<span class="token punctuation">{</span>
  <span class="token property">&quot;query&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;term&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;\u78B0\u74F7&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u914D\u7F6E\u8FDC\u7A0B\u6269\u5C55\u8BCD\u5178\u548C\u505C\u7528\u8BCD\u5178"><a class="header-anchor" href="#\u914D\u7F6E\u8FDC\u7A0B\u6269\u5C55\u8BCD\u5178\u548C\u505C\u7528\u8BCD\u5178" aria-hidden="true">#</a> \u914D\u7F6E\u8FDC\u7A0B\u6269\u5C55\u8BCD\u5178\u548C\u505C\u7528\u8BCD\u5178</h4><p><strong>\u8FDC\u7A0B\u505C\u7528\u540C\u7406</strong></p><p><img src="`+j+`" alt="image-20211214031411313"></p><blockquote><p>\u76EE\u524D\u8BE5\u63D2\u4EF6\u652F\u6301\u70ED\u66F4\u65B0 IK \u5206\u8BCD\uFF0C\u901A\u8FC7\u4E0A\u6587\u5728 IK \u914D\u7F6E\u6587\u4EF6\u4E2D\u63D0\u5230\u7684\u5982\u4E0B\u914D\u7F6E</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> 	&lt;!--\u7528\u6237\u53EF\u4EE5\u5728\u8FD9\u91CC\u914D\u7F6E\u8FDC\u7A0B\u6269\u5C55\u5B57\u5178 --&gt;
	&lt;entry key=&quot;remote_ext_dict&quot;&gt;location&lt;/entry&gt;
 	&lt;!--\u7528\u6237\u53EF\u4EE5\u5728\u8FD9\u91CC\u914D\u7F6E\u8FDC\u7A0B\u6269\u5C55\u505C\u6B62\u8BCD\u5B57\u5178--&gt;
	&lt;entry key=&quot;remote_ext_stopwords&quot;&gt;location&lt;/entry&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5176\u4E2D <code>location</code> \u662F\u6307\u4E00\u4E2A url\uFF0C\u6BD4\u5982 <code>http://yoursite.com/getCustomDict</code>\uFF0C\u8BE5\u8BF7\u6C42\u53EA\u9700\u6EE1\u8DB3\u4EE5\u4E0B\u4E24\u70B9\u5373\u53EF\u5B8C\u6210\u5206\u8BCD\u70ED\u66F4\u65B0\u3002</p><ol><li>\u8BE5 http \u8BF7\u6C42\u9700\u8981\u8FD4\u56DE\u4E24\u4E2A\u5934\u90E8(header)\uFF0C\u4E00\u4E2A\u662F <code>Last-Modified</code>\uFF0C\u4E00\u4E2A\u662F <code>ETag</code>\uFF0C\u8FD9\u4E24\u8005\u90FD\u662F\u5B57\u7B26\u4E32\u7C7B\u578B\uFF0C\u53EA\u8981\u6709\u4E00\u4E2A\u53D1\u751F\u53D8\u5316\uFF0C\u8BE5\u63D2\u4EF6\u5C31\u4F1A\u53BB\u6293\u53D6\u65B0\u7684\u5206\u8BCD\u8FDB\u800C\u66F4\u65B0\u8BCD\u5E93\u3002</li><li>\u8BE5 http \u8BF7\u6C42\u8FD4\u56DE\u7684\u5185\u5BB9\u683C\u5F0F\u662F\u4E00\u884C\u4E00\u4E2A\u5206\u8BCD\uFF0C\u6362\u884C\u7B26\u7528 <code>\\n</code> \u5373\u53EF\u3002</li></ol><p>\u6EE1\u8DB3\u4E0A\u9762\u4E24\u70B9\u8981\u6C42\u5C31\u53EF\u4EE5\u5B9E\u73B0\u70ED\u66F4\u65B0\u5206\u8BCD\u4E86\uFF0C\u4E0D\u9700\u8981\u91CD\u542F ES \u5B9E\u4F8B</p><p>\u53EF\u4EE5\u5C06\u9700\u81EA\u52A8\u66F4\u65B0\u7684\u70ED\u8BCD\u653E\u5728\u4E00\u4E2A UTF-8 \u7F16\u7801\u7684 .txt \u6587\u4EF6\u91CC\uFF0C\u653E\u5728 nginx \u6216\u5176\u4ED6\u7B80\u6613 http server \u4E0B\uFF0C\u5F53 .txt \u6587\u4EF6\u4FEE\u6539\u65F6\uFF0Chttp server \u4F1A\u5728\u5BA2\u6237\u7AEF\u8BF7\u6C42\u8BE5\u6587\u4EF6\u65F6\u81EA\u52A8\u8FD4\u56DE\u76F8\u5E94\u7684 Last-Modified \u548C ETag\u3002\u53EF\u4EE5\u53E6\u5916\u505A\u4E00\u4E2A\u5DE5\u5177\u6765\u4ECE\u4E1A\u52A1\u7CFB\u7EDF\u63D0\u53D6\u76F8\u5173\u8BCD\u6C47\uFF0C\u5E76\u66F4\u65B0\u8FD9\u4E2A .txt \u6587\u4EF6</p></blockquote><p>\u6211\u4EEC\u901A\u8FC7\u521B\u5EFAspringboot\u9879\u76EE\u6765\u6D4B\u8BD5\u4F7F\u7528\u8FDC\u7A0B\u66F4\u65B0\u8BCD\u5178</p><h5 id="\u521B\u5EFAsprinboot\u9879\u76EE"><a class="header-anchor" href="#\u521B\u5EFAsprinboot\u9879\u76EE" aria-hidden="true">#</a> \u521B\u5EFAsprinboot\u9879\u76EE</h5><ol><li>\u6DFB\u52A0web\u4F9D\u8D56</li></ol><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u5728static\u4E2D\u521B\u5EFAext.txt\u6587\u4EF6\uFF0C\u8981\u4FDD\u8BC1\u662Futf-8\u7F16\u7801</li></ol><p><img src="`+S+`" alt="image-20211214032322618"></p><p>\u4E4B\u540E\u5C31ik\u5C31\u53EF\u4EE5\u901A\u8FC7\u8BF7\u6C42\u8FD9\u4E2A\u6587\u4EF6\u6765\u83B7\u53D6\u6269\u5C55\u8BCD\u5178</p><p><code>http://172.16.187.1:8080/springboot-restful-demo-01/ext.txt</code></p><h5 id="\u4FEE\u6539ik\u914D\u7F6E\u6587\u4EF6"><a class="header-anchor" href="#\u4FEE\u6539ik\u914D\u7F6E\u6587\u4EF6" aria-hidden="true">#</a> \u4FEE\u6539IK\u914D\u7F6E\u6587\u4EF6</h5><p><code>vim config/analysis-ik/IKAnalyzer.cfg.xml</code></p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">properties</span> <span class="token name">SYSTEM</span> <span class="token string">&quot;http://java.sun.com/dtd/properties.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>comment</span><span class="token punctuation">&gt;</span></span>IK Analyzer \u6269\u5C55\u914D\u7F6E<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>comment</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--\u7528\u6237\u53EF\u4EE5\u5728\u8FD9\u91CC\u914D\u7F6E\u81EA\u5DF1\u7684\u6269\u5C55\u5B57\u5178 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ext_dict<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>custom/mydict.dic<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>entry</span><span class="token punctuation">&gt;</span></span>
         <span class="token comment">&lt;!--\u7528\u6237\u53EF\u4EE5\u5728\u8FD9\u91CC\u914D\u7F6E\u81EA\u5DF1\u7684\u6269\u5C55\u505C\u6B62\u8BCD\u5B57\u5178--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ext_stopwords<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>entry</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--\u7528\u6237\u53EF\u4EE5\u5728\u8FD9\u91CC\u914D\u7F6E\u8FDC\u7A0B\u6269\u5C55\u5B57\u5178 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>remote_ext_dict<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>http://172.16.187.1:8080/springboot-restful-demo-01/ext.txt<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>entry</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--\u7528\u6237\u53EF\u4EE5\u5728\u8FD9\u91CC\u914D\u7F6E\u8FDC\u7A0B\u6269\u5C55\u505C\u6B62\u8BCD\u5B57\u5178--&gt;</span>
        <span class="token comment">&lt;!-- &lt;entry key=&quot;remote_ext_stopwords&quot;&gt;words_location&lt;/entry&gt; --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u6D4B\u8BD5-1"><a class="header-anchor" href="#\u6D4B\u8BD5-1" aria-hidden="true">#</a> \u6D4B\u8BD5</h5><p>\u91CD\u65B0\u542F\u52A8es\u670D\u52A1</p><p><img src="`+R+`" alt="image-20211214033610045"></p><p><strong>\u53EA\u8981\u8BCD\u5178\u6709\u53D8\u5316\uFF0C\u5C31\u4F1A\u4E0D\u65AD\u7684\u62C9\u53D6\u65B0\u6570\u636E</strong></p><ol><li>\u6D4B\u8BD51</li></ol><p>\u6267\u884C</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /_analyze
<span class="token punctuation">{</span> 
  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u4ECA\u5929\u88AB\u78B0\u74F7\u4E86\uFF0C\u5F88\u84DD\u7626\uFF0C\u6211\u662F\u4E00\u4E2A\u6760\u7CBE&quot;</span><span class="token punctuation">,</span> 
  <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span><span class="token string">&quot;ik_smart&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD4\u56DE\u503C</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;tokens&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u4ECA\u5929&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u88AB&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_CHAR&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u78B0\u74F7&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u4E86&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_CHAR&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">3</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u5F88&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_CHAR&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">4</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u84DD\u7626&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">5</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u6211&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_CHAR&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">6</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u662F&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_CHAR&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">7</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u4E00\u4E2A&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">8</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u6760\u7CBE&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">17</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">9</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u6D4B\u8BD52</li></ol><p>\u6B64\u65F6<code>\u77F3\u4E50\u5FD7</code>\u8FD8\u4E0D\u662F\u5173\u952E\u5B57</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /_analyze
<span class="token punctuation">{</span> 
  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u4ECA\u5929\u88AB\u78B0\u74F7\u4E86\uFF0C\u5F88\u84DD\u7626\uFF0C\u6211\u662F\u4E00\u4E2A\u6760\u7CBE\uFF0C\u4ED6\u5A18\u7684\u77F3\u4E50\u5FD7&quot;</span><span class="token punctuation">,</span> 
  <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span><span class="token string">&quot;ik_smart&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F1A\u88AB\u5207\u5272\u6210\u591A\u4E2A\u8BCD\u8BED</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;tokens&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u4ECA\u5929&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u88AB&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_CHAR&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u78B0\u74F7&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u4E86&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_CHAR&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">3</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u5F88&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_CHAR&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">4</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u84DD\u7626&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">5</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u6211&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_CHAR&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">6</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u662F&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_CHAR&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">7</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u4E00\u4E2A&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">8</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u6760\u7CBE&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">17</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">9</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u4ED6&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_CHAR&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">10</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u5A18&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_CHAR&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">11</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u7684&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_CHAR&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">12</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u77F3&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_CHAR&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">13</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u4E50&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">23</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_CHAR&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">14</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u5FD7&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">23</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_CHAR&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">15</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7136\u540E\u6211\u4EEC\u5728springboot\u9879\u76EE\u4E2D\u7684ext.txt\u6DFB\u52A0\u8FD9\u4E2A\u9AD8\u9891\u8BCD\uFF0Cspringboot\u9879\u76EE\u6700\u597D\u8BBE\u7F6E\u81EA\u52A8\u5237\u65B0\u6570\u636E\uFF0C\u6216\u8005\u5728\u6DFB\u52A0\u5B8C\u4E4B\u540E<code>build project</code></p><p><img src="`+T+'" alt="image-20211214034631171"></p><p>\u7136\u540E\uFF0Ces\u5C31\u4F1A\u68C0\u6D4B\u5230\u66F4\u65B0\u5E76\u62C9\u53D6\u6570\u636E</p><p><img src="'+E+`" alt="image-20211214034457071"></p><p>\u6B64\u65F6\uFF0C\u6211\u4EEC\u5728\u6B64\u6D4B\u8BD5\u4E00\u4E0B</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /_analyze
<span class="token punctuation">{</span> 
  <span class="token property">&quot;text&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u4ECA\u5929\u88AB\u78B0\u74F7\u4E86\uFF0C\u5F88\u84DD\u7626\uFF0C\u6211\u662F\u4E00\u4E2A\u6760\u7CBE\uFF0C\u4ED6\u5A18\u7684\u77F3\u4E50\u5FD7&quot;</span><span class="token punctuation">,</span> 
  <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span><span class="token string">&quot;ik_smart&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD4\u56DE\u503C</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;tokens&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u4ECA\u5929&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u88AB&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_CHAR&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u78B0\u74F7&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u4E86&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_CHAR&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">3</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u5F88&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_CHAR&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">4</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u84DD\u7626&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">5</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u6211&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_CHAR&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">6</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u662F&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_CHAR&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">7</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u4E00\u4E2A&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">8</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u6760\u7CBE&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">17</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">9</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u4ED6&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_CHAR&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">10</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u5A18&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_CHAR&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">11</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u7684&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_CHAR&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">12</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\u77F3\u4E50\u5FD7&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;start_offset&quot;</span> <span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
      <span class="token property">&quot;end_offset&quot;</span> <span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;position&quot;</span> <span class="token operator">:</span> <span class="token number">13</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="filter-query"><a class="header-anchor" href="#filter-query" aria-hidden="true">#</a> Filter Query</h2><p>(\u8FC7\u6EE4\u67E5\u8BE2)</p>`,170),js=n("p",null,"\u5B98\u65B9\u6587\u6863\uFF1Ahttps://www.elastic.co/guide/en/elasticsearch/reference/6.8/query-filter-context.html",-1),Ss=n("p",null,[n("strong",null,"Query context")],-1),Rs=n("p",null,[s("A query clause used in query context answers the question \u201C"),n("em",null,"How well does this document match this query clause?"),s("\u201D Besides deciding whether or not the document matches, the query clause also calculates a "),n("code",null,"_score"),s(" representing how well the document matches, relative to other documents.")],-1),Ts=s("Query context is in effect whenever a query clause is passed to a "),Es=n("code",null,"query",-1),Cs=s(" parameter, such as the "),Bs=n("code",null,"query",-1),As=s(" parameter in the "),Ds={href:"https://www.elastic.co/guide/en/elasticsearch/reference/6.8/search-request-query.html",target:"_blank",rel:"noopener noreferrer"},Is=n("code",null,"search",-1),Os=s(" API."),Hs=e("<p><strong>Filter context</strong></p><p>In <em>filter</em> context, a query clause answers the question \u201C<em>Does this document match this query clause?</em>\u201D The answer is a simple Yes or No\u2009\u2014\u2009no scores are calculated. Filter context is mostly used for filtering structured data, e.g.</p><ul><li><em>Does this <code>timestamp</code> fall into the range 2015 to 2016?</em></li><li><em>Is the <code>status</code> field set to <code>&quot;published&quot;</code></em>?</li></ul><p>Frequently used filters will be cached automatically by Elasticsearch, to speed up performance.</p>",4),Ns=s("Filter context is in effect whenever a query clause is passed to a "),zs=n("code",null,"filter",-1),Ls=s(" parameter, such as the "),Ps=n("code",null,"filter",-1),Qs=s(" or "),Us=n("code",null,"must_not",-1),Ms=s(" parameters in the "),Fs={href:"https://www.elastic.co/guide/en/elasticsearch/reference/6.8/query-dsl-bool-query.html",target:"_blank",rel:"noopener noreferrer"},Xs=n("code",null,"bool",-1),Gs=s(" query, the "),Ws=n("code",null,"filter",-1),Js=s(" parameter in the "),Ks={href:"https://www.elastic.co/guide/en/elasticsearch/reference/6.8/query-dsl-constant-score-query.html",target:"_blank",rel:"noopener noreferrer"},Ys=n("code",null,"constant_score",-1),Vs=s(" query, or the "),$s={href:"https://www.elastic.co/guide/en/elasticsearch/reference/6.8/search-aggregations-bucket-filter-aggregation.html",target:"_blank",rel:"noopener noreferrer"},Zs=n("code",null,"filter",-1),na=s(" aggregation."),sa=e('<h3 id="\u8FC7\u6EE4\u67E5\u8BE2"><a class="header-anchor" href="#\u8FC7\u6EE4\u67E5\u8BE2" aria-hidden="true">#</a> \u8FC7\u6EE4\u67E5\u8BE2</h3><blockquote><p>\u5176\u5B9E\u51C6\u786E\u6765\u8BF4\uFF0CES\u4E2D\u7684\u67E5\u8BE2\u64CD\u4F5C\u5206\u4E3A2\u4E24\u79CD\uFF0C<code>\u67E5\u8BE2(query)</code>\u548C<code>\u8FC7\u6EE4(filter)</code>\u3002\u67E5\u8BE2\u5373\u662F\u4E4B\u524D\u63D0\u5230query\u67E5\u8BE2\uFF0C\u5B83(\u67E5\u8BE2)\u9ED8\u8BA4\u4F1A\u8BA1\u7B97\u6BCF\u4E2A\u8FD4\u56DE\u6587\u6863\u7684\u5F97\u5206\uFF0C\u7136\u540E\u6839\u636E\u5F97\u5206\u6392\u5E8F\u3002\u800C\u8FC7\u6EE4\u53EA\u4F1A\u7B5B\u9009\u51FA\u7B26\u5408\u7684\u6587\u6863\uFF0C\u5E76\u4E0D\u4F1A\u8BA1\u7B97\u5F97\u5206\uFF0C\u4E14\u5B83\u53EF\u4EE5\u7F13\u5B58\u6587\u6863\u3002\u6240\u4EE5\uFF0C\u5355\u4ECE\u6027\u80FD\u8003\u8651\uFF0C\u8FC7\u6EE4\u6BD4\u67E5\u8BE2\u66F4\u5FEB\u3002</p><p>\u6362\u53E5\u8BDD\u8BF4\uFF0C\u8FC7\u6EE4\u9002\u5408\u5728\u5927\u8303\u56F4\u7B5B\u9009\u6570\u636E\uFF0C\u800C\u67E5\u8BE2\u5219\u9002\u5408\u7CBE\u786E\u5339\u914D\u6570\u636E\u3002\u4E00\u822C\u5E94\u7528\u65F6\uFF0C\u5E94\u5148\u4F7F\u7528\u8FC7\u6EE4\u64CD\u4F5C\u8FC7\u6EE4\u6570\u636E\uFF0C\u7136\u540E\u4F7F\u7528\u67E5\u8BE2\u5339\u914D\u6570\u636E</p></blockquote><p><img src="'+C+`" alt="image-20211214045327133"></p><h3 id="\u8FC7\u6EE4\u8BED\u6CD5"><a class="header-anchor" href="#\u8FC7\u6EE4\u8BED\u6CD5" aria-hidden="true">#</a> \u8FC7\u6EE4\u8BED\u6CD5</h3><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /ems/emp/_search
<span class="token punctuation">{</span>
  <span class="token property">&quot;query&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>										## \u67E5\u8BE2
    <span class="token property">&quot;bool&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>									## \u901A\u8FC7\u5E03\u5C14\u8FD0\u7B97\u5C06\u8FC7\u6EE4\u548C\u67E5\u8BE2\u7EC4\u5408\u5728\u4E00\u8D77
      <span class="token property">&quot;must&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span><span class="token property">&quot;match_all&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;filter&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>							## \u5728\u67E5\u8BE2\u4E4B\u524D\u5148\u505A\u8FC7\u6EE4
        <span class="token property">&quot;range&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>							## \u8303\u56F4\u8FC7\u6EE4
          <span class="token property">&quot;age&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token property">&quot;gle&quot;</span><span class="token operator">:</span><span class="token number">10</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>NOTE\uFF1A\u5728\u6267\u884Cfilter\u548Cquery\u65F6\uFF0C\u5148\u6267\u884Cfilter\u5728\u6267\u884Cquery</p><p>NOTE\uFF1Aes\u4F1A\u81EA\u52A8\u7F13\u5B58\u7ECF\u5E38\u4F7F\u7528\u7684\u8FC7\u6EE4\u5668\uFF0C\u4EE5\u52A0\u5FEB\u6027\u80FD</p></blockquote><h3 id="\u5E38\u89C1\u7684\u8FC7\u6EE4\u5668\u7C7B\u578B"><a class="header-anchor" href="#\u5E38\u89C1\u7684\u8FC7\u6EE4\u5668\u7C7B\u578B" aria-hidden="true">#</a> \u5E38\u89C1\u7684\u8FC7\u6EE4\u5668\u7C7B\u578B</h3><h4 id="term\u3001trems-filter"><a class="header-anchor" href="#term\u3001trems-filter" aria-hidden="true">#</a> term\u3001trems filter</h4><p>\u5728\u6267\u884C\u67E5\u8BE2term\u4E4B\u524D\uFF0C\u5148\u505A\u8FC7\u6EE4term</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /ems/emp/_search ## \u4F7F\u7528term\u8FC7\u6EE4
<span class="token punctuation">{</span>
  <span class="token property">&quot;query&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">&quot;bool&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token property">&quot;must&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;term&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
          	<span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
              <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u5F20\u4E09&quot;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;filter&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token property">&quot;term&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>									## \u57FA\u4E8E\u6307\u5B9A\u5173\u5173\u952E\u8BCD\u8FC7\u6EE4 trem
          <span class="token property">&quot;content&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u6846\u67B6&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="exists-filter"><a class="header-anchor" href="#exists-filter" aria-hidden="true">#</a> exists filter</h4><blockquote><p>\u8FC7\u6EE4\u5B58\u5728\u6307\u5B9A\u5B57\u6BB5\uFF0C\u83B7\u53D6\u5B57\u6BB5\u4E0D\u4E3A\u7A7A\u7684\u7D22\u5F15\u8BB0\u5F55\u4F7F\u7528</p></blockquote><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /ems/emp/_search
<span class="token punctuation">{</span>
  <span class="token property">&quot;query&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">&quot;bool&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token property">&quot;must&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;term&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>						## \u57FA\u4E8E\u6307\u5B9A\u5173\u952E\u5B57\u7684\u67E5\u8BE2
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
              <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u4E2D\u56FD&quot;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;filter&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token property">&quot;exists&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
          <span class="token property">&quot;field&quot;</span><span class="token operator">:</span><span class="token string">&quot;address&quot;</span>					## \u53EA\u8981\u6587\u6863\u4E2D\u542B\u6709address\u5B57\u6BB5\u7684\u8FC7\u6EE4
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ids-filter"><a class="header-anchor" href="#ids-filter" aria-hidden="true">#</a> ids filter</h4><blockquote><p>\u8FC7\u6EE4\u542B\u6709\u6307\u5B9A\u5B57\u6BB5\u7684\u7D22\u5F15\u8BB0\u5F55</p></blockquote><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET /ems/emp/_search
<span class="token punctuation">{</span>
  <span class="token property">&quot;query&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">&quot;bool&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token property">&quot;must&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;trem&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
              <span class="token property">&quot;value&quot;</span><span class="token operator">:</span><span class="token string">&quot;\u4E2D\u56FD&quot;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;filter&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token property">&quot;ids&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
          <span class="token property">&quot;values&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="java\u64CD\u4F5Ces"><a class="header-anchor" href="#java\u64CD\u4F5Ces" aria-hidden="true">#</a> java\u64CD\u4F5Ces</h2><blockquote><p><strong>Java\u64CD\u4F5Ces\u6A21\u578B\uFF0C\u5355\u7EAF\u4F7F\u7528es\uFF0C\u800C\u4E0D\u7528es\u751F\u6001\u7684\u8BDD</strong></p><p><img src="`+B+`" alt="image-20211214155212058"></p><p>\u6D88\u606F\u4E2D\u95F4\u4EF6\u975E\u5FC5\u987B</p><p><strong>\u5B9E\u65F6\u7D22\u5F15</strong></p><p>\u53EA\u8981\u6570\u636E\u53D1\u751F\u4E86\u53D8\u5316\uFF0C\u90A3\u4E48es\u4E2D\u7684\u6570\u636E\u5C31\u53D8\u5316\uFF0C\u6570\u636E\u7684\u5F3A\u4E00\u81F4\u6027\u3002\u4FDD\u8BC1DB\u4E2D\u7684\u6570\u636E\u548CES\u4E2D\u7684\u6570\u636E\u5B9E\u65F6\u4E00\u81F4\uFF0C\u5F53\u7528\u6237\u6267\u884C\u589E\u5220\u6539\u4E4B\u540E\uFF0C\u7ACB\u5373\u628A\u53D8\u5316\u4E0Ees\u8FDB\u884C\u540C\u6B65</p><p><strong>\u6700\u7EC8\u7D22\u5F15</strong></p><p>\u8FC7\u4E86\u4E00\u6BB5\u65F6\u95F4\u4E4B\u540E\uFF0C\u6700\u7EC8\u4FDD\u8BC1es\u4E2D\u7684\u6570\u636E\u53D1\u751F\u4E86\u53D8\u5316\uFF0C\u548C\u6570\u636E\u5E93\u4E2D\u7684\u6570\u636E\u6700\u7EC8\u4E00\u81F4\u6027\uFF0C\u7528\u6237\u5728\u6267\u884C\u589E\u5220\u6539\u8FD8\u662F\u5BF9DB\u8FDB\u884C\u64CD\u4F5C\uFF0C\u7136\u540E\u8FC7\u4E86\u4E00\u6BB5\u65F6\u95F4\u4E4B\u540E\uFF0C\u7CFB\u7EDF\u5728\u4ECEDB\u4E2D\u62FF\u51FA\u6570\u636E\u4E0Ees\u8FDB\u884C\u540C\u6B65\uFF0C\u53EF\u4EE5\u901A\u8FC7\u5B9A\u65F6\u4EFB\u52A1\u5C06DB\u4E0EES\u8FDB\u884C\u540C\u6B65</p></blockquote><p>\u521B\u5EFAmaven\u9879\u76EE</p><blockquote><p>github\u9879\u76EE\u5730\u5740\uFF1Ahttps://github.com/aldencarter/maven-elasticsearch-demo-01.git</p></blockquote><h3 id="\u5F15\u5165maven\u4F9D\u8D56"><a class="header-anchor" href="#\u5F15\u5165maven\u4F9D\u8D56" aria-hidden="true">#</a> \u5F15\u5165maven\u4F9D\u8D56</h3><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.elasticsearch<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>elasticsearch<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>6.8.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.elasticsearch.client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>transport<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>6.8.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.elasticsearch.plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>transport-netty4-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>6.8.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u521B\u5EFA\u7D22\u5F15\u548C\u7C7B\u578B"><a class="header-anchor" href="#\u521B\u5EFA\u7D22\u5F15\u548C\u7C7B\u578B" aria-hidden="true">#</a> \u521B\u5EFA\u7D22\u5F15\u548C\u7C7B\u578B</h3><p>\u6D4B\u8BD5\u7C7B\u53EF\u4EE5\u5148\u9884\u5148\u7F16\u5199<code>@Before</code>\u548C<code>@After</code>\u51FD\u6570</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">TransportClient</span> transportClient<span class="token punctuation">;</span>

<span class="token annotation punctuation">@Before</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">UnknownHostException</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u521B\u5EFA\u5BA2\u6237\u7AEF</span>
  transportClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PreBuiltTransportClient</span><span class="token punctuation">(</span><span class="token class-name">Settings</span><span class="token punctuation">.</span>EMPTY<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// \u8BBE\u7F6Ees\u670D\u52A1\u5730\u5740</span>
  transportClient<span class="token punctuation">.</span><span class="token function">addTransportAddress</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TransportAddress</span><span class="token punctuation">(</span><span class="token class-name">InetAddress</span><span class="token punctuation">.</span><span class="token function">getByName</span><span class="token punctuation">(</span><span class="token string">&quot;172.16.187.15&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">9300</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@After</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>transportClient <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    transportClient<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="rest\u521B\u5EFA\u65B9\u5F0F"><a class="header-anchor" href="#rest\u521B\u5EFA\u65B9\u5F0F" aria-hidden="true">#</a> rest\u521B\u5EFA\u65B9\u5F0F</h4><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>PUT /dangdang
<span class="token punctuation">{</span>
  <span class="token property">&quot;mappings&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">&quot;book&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span><span class="token string">&quot;ik_max_word&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;age&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;integer&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;sex&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;keyword&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;content&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;analyzer&quot;</span><span class="token operator">:</span><span class="token string">&quot;ik_max_word&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u521B\u5EFA\u5BA2\u6237\u7AEF\u64CD\u4F5C\u5BF9\u8C61"><a class="header-anchor" href="#\u521B\u5EFA\u5BA2\u6237\u7AEF\u64CD\u4F5C\u5BF9\u8C61" aria-hidden="true">#</a> \u521B\u5EFA\u5BA2\u6237\u7AEF\u64CD\u4F5C\u5BF9\u8C61</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">UnknownHostException</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u521B\u5EFAes\u5BA2\u6237\u7AEF\u5BF9\u8C61</span>
  <span class="token comment">// PreBuiltTransportClient \u5B50\u7C7B\u552F\u4E00\u5B9E\u73B0</span>
  <span class="token comment">// \u4E00\u822C\u4E0D\u5728\u5BA2\u6237\u7AEF\u5BF9es\u8FDB\u884C\u64CD\u4F5C\uFF0C\u6240\u4EE5\u4F20\u5165\u4E00\u4E2A\u7A7A\u8BBE\u7F6E Settings.EMPTY</span>
  <span class="token class-name">TransportClient</span> transportClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PreBuiltTransportClient</span><span class="token punctuation">(</span><span class="token class-name">Settings</span><span class="token punctuation">.</span>EMPTY<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// \u8BBE\u7F6E\u64CD\u4F5Ces\u670D\u52A1\u4E3B\u673A\u548C\u7AEF\u53E3</span>
  transportClient<span class="token punctuation">.</span><span class="token function">addTransportAddress</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TransportAddress</span><span class="token punctuation">(</span><span class="token class-name">InetAddress</span><span class="token punctuation">.</span><span class="token function">getByName</span><span class="token punctuation">(</span><span class="token string">&quot;172.16.187.15&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">9300</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// \u64CD\u4F5C</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>transportClient<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// \u91CA\u653E\u8D44\u6E90</span>
  transportClient<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u521B\u5EFA\u7D22\u5F15"><a class="header-anchor" href="#\u521B\u5EFA\u7D22\u5F15" aria-hidden="true">#</a> \u521B\u5EFA\u7D22\u5F15</h4><p>\u521B\u5EFA\u7D22\u5F15</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u521B\u5EFA\u7D22\u5F15
 * \u76F8\u5F53\u4E8E DB\u521B\u5EFA\u6570\u636E\u5E93\uFF0C\u4E00\u822C\u4E0D\u8FD9\u4E48\u505A
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testCreateIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// \u521B\u5EFA\u4E00\u4E2A\u7D22\u5F15 \u8981\u4FDD\u8BC1\u521B\u5EFA\u7684\u7D22\u5F15\u4E0D\u5B58\u5728</span>
  <span class="token keyword">final</span> <span class="token class-name">CreateIndexResponse</span> response <span class="token operator">=</span> transportClient<span class="token punctuation">.</span><span class="token function">admin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prepareCreate</span><span class="token punctuation">(</span><span class="token string">&quot;dangdang&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// \u83B7\u53D6\u54CD\u5E94\u4FE1\u606F</span>
  <span class="token keyword">final</span> <span class="token keyword">boolean</span> acknowledged <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">isAcknowledged</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>acknowledged<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u5220\u9664\u7D22\u5F15"><a class="header-anchor" href="#\u5220\u9664\u7D22\u5F15" aria-hidden="true">#</a> \u5220\u9664\u7D22\u5F15</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u5220\u9664\u7D22\u5F15
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDeleteIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// \u5220\u9664\u7D22\u5F15</span>
  <span class="token keyword">final</span> <span class="token class-name">AcknowledgedResponse</span> response <span class="token operator">=</span> transportClient<span class="token punctuation">.</span><span class="token function">admin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prepareDelete</span><span class="token punctuation">(</span><span class="token string">&quot;dangdang&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token keyword">boolean</span> acknowledged <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">isAcknowledged</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>acknowledged<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u521B\u5EFA\u7D22\u5F15\u548C\u7C7B\u578B-1"><a class="header-anchor" href="#\u521B\u5EFA\u7D22\u5F15\u548C\u7C7B\u578B-1" aria-hidden="true">#</a> \u521B\u5EFA\u7D22\u5F15\u548C\u7C7B\u578B</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u4E86\u89E3 \u4E00\u822C\u4E0D\u8FD9\u4E48\u505A \u76F8\u5F53\u4E8E DB \u521B\u5EFA\u6570\u636E\u5E93\u548C\u8868
 * \u521B\u5EFA\u7D22\u5F15 \u521B\u5EFA\u7C7B\u578B \u521B\u5EFA\u6620\u5C04
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testCreateIndexAndTypeMapping</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ExecutionException</span><span class="token punctuation">,</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u521B\u5EFA\u7D22\u5F15\u7684\u8BF7\u6C42\u7684\u5BF9\u8C61</span>
  <span class="token keyword">final</span> <span class="token class-name">CreateIndexRequest</span> dangdangIndex <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CreateIndexRequest</span><span class="token punctuation">(</span><span class="token string">&quot;dangdang&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// \u7D22\u5F15\u8BBE\u7F6E\u7C7B\u578B</span>
  <span class="token doc-comment comment">/**
    * \u53C2\u65701 \u7C7B\u578B\u540D
    * \u53C2\u65702 \u6620\u5C04\u7684json\u683C\u5F0F
    * \u53C2\u65703 \u6620\u5C04\u7684\u683C\u5F0F\u7C7B\u578B
    */</span>
  dangdangIndex<span class="token punctuation">.</span><span class="token function">mapping</span><span class="token punctuation">(</span><span class="token string">&quot;Book&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;{\\&quot;properties\\&quot;:{\\&quot;name\\&quot;:{\\&quot;type\\&quot;:\\&quot;text\\&quot;,\\&quot;analyzer\\&quot;:\\&quot;ik_max_word\\&quot;},\\&quot;age\\&quot;:{\\&quot;type\\&quot;:\\&quot;integer\\&quot;},\\&quot;sex\\&quot;:{\\&quot;type\\&quot;:\\&quot;keyword\\&quot;},\\&quot;content\\&quot;:{\\&quot;type\\&quot;:\\&quot;text\\&quot;,\\&quot;analyzer\\&quot;:\\&quot;ik_max_word\\&quot;}}}&quot;</span><span class="token punctuation">,</span> <span class="token class-name">XContentType</span><span class="token punctuation">.</span>JSON<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// \u521B\u5EFA\u7D22\u5F15</span>
  <span class="token keyword">final</span> <span class="token class-name">CreateIndexResponse</span> createIndexResponse <span class="token operator">=</span> transportClient<span class="token punctuation">.</span><span class="token function">admin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>dangdangIndex<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>createIndexResponse<span class="token punctuation">.</span><span class="token function">isAcknowledged</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u7D22\u5F15\u4E00\u6761\u8BB0\u5F55"><a class="header-anchor" href="#\u7D22\u5F15\u4E00\u6761\u8BB0\u5F55" aria-hidden="true">#</a> \u7D22\u5F15\u4E00\u6761\u8BB0\u5F55</h3><p>\u6D4B\u8BD5\u5148\u9884\u5148\u7F16\u5199<code>@Before</code>\u548C<code>@After</code>\u51FD\u6570</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">TransportClient</span> transportClient<span class="token punctuation">;</span>

<span class="token annotation punctuation">@Before</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">UnknownHostException</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u521B\u5EFA\u5BA2\u6237\u7AEF</span>
  transportClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PreBuiltTransportClient</span><span class="token punctuation">(</span><span class="token class-name">Settings</span><span class="token punctuation">.</span>EMPTY<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// \u8BBE\u7F6Ees\u670D\u52A1\u5730\u5740</span>
  transportClient<span class="token punctuation">.</span><span class="token function">addTransportAddress</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TransportAddress</span><span class="token punctuation">(</span><span class="token class-name">InetAddress</span><span class="token punctuation">.</span><span class="token function">getByName</span><span class="token punctuation">(</span><span class="token string">&quot;172.16.187.15&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">9300</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@After</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>transportClient <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    transportClient<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u6307\u5B9Aid\u7D22\u5F15\u8BB0\u5F55"><a class="header-anchor" href="#\u6307\u5B9Aid\u7D22\u5F15\u8BB0\u5F55" aria-hidden="true">#</a> \u6307\u5B9Aid\u7D22\u5F15\u8BB0\u5F55</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u6DFB\u52A0\u4E00\u4E2A\u6587\u6863
 * \u6307\u5B9Aid
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testCreateOptionId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// name age sex content</span>
  <span class="token keyword">final</span> <span class="token class-name">Book</span> book <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u6211\u4EEC2001\u7684\u6545\u4E8B&quot;</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">&quot;\u7537&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u6211\u4EEC\u5728\u75AB\u60C5\u4E0B\u52AA\u529B\u5B66\u4E60&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// \u8F6C\u4E3Ajson</span>
  <span class="token keyword">final</span> <span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token class-name">JSONObject</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// \u7D22\u5F15\u4E00\u6761\u6587\u6863</span>
  <span class="token keyword">final</span> <span class="token class-name">IndexResponse</span> indexResponse <span class="token operator">=</span> transportClient<span class="token punctuation">.</span><span class="token function">prepareIndex</span><span class="token punctuation">(</span><span class="token string">&quot;dangdang&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span> book<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setSource</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span> <span class="token class-name">XContentType</span><span class="token punctuation">.</span>JSON<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>indexResponse<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u81EA\u5B9A\u751F\u6210id\u7D22\u5F15\u8BB0\u5F55"><a class="header-anchor" href="#\u81EA\u5B9A\u751F\u6210id\u7D22\u5F15\u8BB0\u5F55" aria-hidden="true">#</a> \u81EA\u5B9A\u751F\u6210id\u7D22\u5F15\u8BB0\u5F55</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u6DFB\u52A0\u4E00\u4E2A\u6587\u6863
 * \u81EA\u52A8id
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testCreateAutoId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// name age sex content</span>
  <span class="token keyword">final</span> <span class="token class-name">Book</span> book <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;\u6211\u4EEC2002\u7684\u6545\u4E8B&quot;</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">&quot;\u7537&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u6211\u4EEC\u5728\u975E\u5178\u4E0B\u52AA\u529B\u5B66\u4E60&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// \u8F6C\u4E3Ajson</span>
  <span class="token keyword">final</span> <span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token class-name">JSONObject</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// \u7D22\u5F15\u4E00\u6761\u6587\u6863</span>
  <span class="token keyword">final</span> <span class="token class-name">IndexResponse</span> indexResponse <span class="token operator">=</span> transportClient<span class="token punctuation">.</span><span class="token function">prepareIndex</span><span class="token punctuation">(</span><span class="token string">&quot;dangdang&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setSource</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span> <span class="token class-name">XContentType</span><span class="token punctuation">.</span>JSON<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>indexResponse<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u66F4\u65B0\u4E00\u6761\u7D22\u5F15"><a class="header-anchor" href="#\u66F4\u65B0\u4E00\u6761\u7D22\u5F15" aria-hidden="true">#</a> \u66F4\u65B0\u4E00\u6761\u7D22\u5F15</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u66F4\u65B0\u4E00\u6761\u6587\u6863
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">final</span> <span class="token class-name">Book</span> book <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u6211\u4EEC2001\u7684\u6545\u4E8B&quot;</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token string">&quot;\u5973&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u6211\u4EEC\u53BB\u5411\u4F55\u5904&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token class-name">JSONObject</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">UpdateResponse</span> updateResponse <span class="token operator">=</span> transportClient<span class="token punctuation">.</span><span class="token function">prepareUpdate</span><span class="token punctuation">(</span><span class="token string">&quot;dangdang&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setDoc</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span> <span class="token class-name">XContentType</span><span class="token punctuation">.</span>JSON<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>updateResponse<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5220\u9664\u4E00\u6761\u7D22\u5F15"><a class="header-anchor" href="#\u5220\u9664\u4E00\u6761\u7D22\u5F15" aria-hidden="true">#</a> \u5220\u9664\u4E00\u6761\u7D22\u5F15</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u5220\u9664\u4E00\u6761\u6587\u6863
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDelete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">final</span> <span class="token class-name">DeleteResponse</span> deleteResponse <span class="token operator">=</span> transportClient<span class="token punctuation">.</span><span class="token function">prepareDelete</span><span class="token punctuation">(</span><span class="token string">&quot;dangdang&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>deleteResponse<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u6279\u91CF\u66F4\u65B0"><a class="header-anchor" href="#\u6279\u91CF\u66F4\u65B0" aria-hidden="true">#</a> \u6279\u91CF\u66F4\u65B0</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u6279\u91CF\u64CD\u4F5C
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testBulk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u6DFB\u52A0</span>
  <span class="token keyword">final</span> <span class="token class-name">Book</span> book <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token string">&quot;10&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u6211\u4EEC2010\u7684\u6545\u4E8B&quot;</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token string">&quot;\u5973&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u6211\u4EEC\u53BB\u5411\u4F55\u5904&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token class-name">JSONObject</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">IndexRequest</span> indexRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IndexRequest</span><span class="token punctuation">(</span><span class="token string">&quot;dangdang&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span> book<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span> <span class="token class-name">XContentType</span><span class="token punctuation">.</span>JSON<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// \u5220\u9664</span>
  <span class="token keyword">final</span> <span class="token class-name">DeleteRequest</span> deleteRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DeleteRequest</span><span class="token punctuation">(</span><span class="token string">&quot;dangdang&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;0_gzuH0BbYhZoJqVJ5hB&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// \u4FEE\u6539</span>
  <span class="token keyword">final</span> <span class="token class-name">Book</span> book1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token string">&quot;10&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u6211\u4EEC2010\u7684\u6545\u4E8B&quot;</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token string">&quot;\u5973&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u6211\u4EEC\u53BB\u5411\u4F55\u5904\uFF0C\u53C8\u4ECE\u4F55\u5904\u6765&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">String</span> json1 <span class="token operator">=</span> <span class="token class-name">JSONObject</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>book1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">UpdateRequest</span> updateRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UpdateRequest</span><span class="token punctuation">(</span><span class="token string">&quot;dangdang&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span>json1<span class="token punctuation">,</span> <span class="token class-name">XContentType</span><span class="token punctuation">.</span>JSON<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">final</span> <span class="token class-name">BulkRequestBuilder</span> bulkRequestBuilder <span class="token operator">=</span> transportClient<span class="token punctuation">.</span><span class="token function">prepareBulk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">BulkResponse</span> bulkItemResponses <span class="token operator">=</span> bulkRequestBuilder<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>indexRequest<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>deleteRequest<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>updateRequest<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">BulkItemResponse</span><span class="token punctuation">[</span><span class="token punctuation">]</span> items <span class="token operator">=</span> bulkItemResponses<span class="token punctuation">.</span><span class="token function">getItems</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">BulkItemResponse</span> item <span class="token operator">:</span> items<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u68C0\u7D22\u8BB0\u5F55"><a class="header-anchor" href="#\u68C0\u7D22\u8BB0\u5F55" aria-hidden="true">#</a> \u68C0\u7D22\u8BB0\u5F55</h3><h4 id="\u67E5\u8BE2\u6240\u6709\u5E76\u6392\u5E8F"><a class="header-anchor" href="#\u67E5\u8BE2\u6240\u6709\u5E76\u6392\u5E8F" aria-hidden="true">#</a> \u67E5\u8BE2\u6240\u6709\u5E76\u6392\u5E8F</h4><p>\u4E00\u65E6\u505A\u4E86\u6392\u5E8F\uFF0C\u5C31\u8868\u793A\u5E72\u9884\u4E86es\u539F\u672C\u6839\u636E\u5206\u6570\u6765\u6392\u5E8F\u7684\u673A\u5236\uFF0C\u6B64\u65F6\u5C31\u6CA1\u6709\u5206\u6570\u4E86</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u6392\u5E8F\u67E5\u8BE2
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSearchBySort</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u67E5\u8BE2\u6761\u4EF6</span>
  <span class="token keyword">final</span> <span class="token class-name">MatchAllQueryBuilder</span> matchAllQueryBuilder <span class="token operator">=</span> <span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">matchAllQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// \u67E5\u8BE2\u6240\u6709</span>
  <span class="token keyword">final</span> <span class="token class-name">SearchResponse</span> searchResponse <span class="token operator">=</span> transportClient<span class="token punctuation">.</span><span class="token function">prepareSearch</span><span class="token punctuation">(</span><span class="token string">&quot;dangdang&quot;</span><span class="token punctuation">)</span> <span class="token comment">//\u6307\u5B9A\u7D22\u5F15</span>
    <span class="token punctuation">.</span><span class="token function">setTypes</span><span class="token punctuation">(</span><span class="token string">&quot;book&quot;</span><span class="token punctuation">)</span> <span class="token comment">//\u6307\u5B9A\u7C7B\u578B</span>
    <span class="token punctuation">.</span><span class="token function">setQuery</span><span class="token punctuation">(</span>matchAllQueryBuilder<span class="token punctuation">)</span><span class="token comment">//\u6307\u5B9A\u67E5\u8BE2\u6761\u4EF6</span>
    <span class="token punctuation">.</span><span class="token function">addSort</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token class-name">SortOrder</span><span class="token punctuation">.</span>DESC<span class="token punctuation">)</span> <span class="token comment">// \u8BBE\u7F6E\u6392\u5E8F desc\u662F\u964D\u5E8F</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u6267\u884C\u67E5\u8BE2</span>

  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u603B\u6761\u6570\uFF1A&quot;</span> <span class="token operator">+</span> searchResponse<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTotalHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u6700\u5927\u5F97\u5206\uFF1A&quot;</span> <span class="token operator">+</span> searchResponse<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMaxScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u624B\u52A8\u6392\u5E8F\u4E4B\u540E\u5F97\u51FA NaN</span>
  <span class="token keyword">final</span> <span class="token class-name">SearchHit</span><span class="token punctuation">[</span><span class="token punctuation">]</span> hits <span class="token operator">=</span> searchResponse<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">SearchHit</span> hit <span class="token operator">:</span> hits<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>hit<span class="token punctuation">.</span><span class="token function">getSourceAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u5206\u9875\u67E5\u8BE2-1"><a class="header-anchor" href="#\u5206\u9875\u67E5\u8BE2-1" aria-hidden="true">#</a> \u5206\u9875\u67E5\u8BE2</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u5206\u9875\u67E5\u8BE2
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSearchByPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u67E5\u8BE2\u6761\u4EF6</span>
  <span class="token keyword">final</span> <span class="token class-name">MatchAllQueryBuilder</span> matchAllQueryBuilder <span class="token operator">=</span> <span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">matchAllQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// \u67E5\u8BE2\u6240\u6709</span>
  <span class="token keyword">final</span> <span class="token class-name">SearchResponse</span> searchResponse <span class="token operator">=</span> transportClient<span class="token punctuation">.</span><span class="token function">prepareSearch</span><span class="token punctuation">(</span><span class="token string">&quot;dangdang&quot;</span><span class="token punctuation">)</span> <span class="token comment">//\u6307\u5B9A\u7D22\u5F15</span>
    <span class="token punctuation">.</span><span class="token function">setTypes</span><span class="token punctuation">(</span><span class="token string">&quot;book&quot;</span><span class="token punctuation">)</span> <span class="token comment">//\u6307\u5B9A\u7C7B\u578B</span>
    <span class="token punctuation">.</span><span class="token function">setQuery</span><span class="token punctuation">(</span>matchAllQueryBuilder<span class="token punctuation">)</span><span class="token comment">//\u6307\u5B9A\u67E5\u8BE2\u6761\u4EF6</span>
    <span class="token punctuation">.</span><span class="token function">setFrom</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// \u8D77\u59CB\u6761\u6570 \u9ED8\u8BA4\u4ECE0\u5F00\u59CB (\u5F53\u524D\u9875-1)*size</span>
    <span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">//  \u8BBE\u7F6E\u6BCF\u9875\u5C55\u793A\u7684\u8BB0\u5F55\u6570</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u6267\u884C\u67E5\u8BE2</span>

  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u603B\u6761\u6570\uFF1A&quot;</span> <span class="token operator">+</span> searchResponse<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTotalHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u6700\u5927\u5F97\u5206\uFF1A&quot;</span> <span class="token operator">+</span> searchResponse<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMaxScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">SearchHit</span><span class="token punctuation">[</span><span class="token punctuation">]</span> hits <span class="token operator">=</span> searchResponse<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">SearchHit</span> hit <span class="token operator">:</span> hits<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>hit<span class="token punctuation">.</span><span class="token function">getSourceAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u67E5\u8BE2\u8FD4\u56DE\u5B57\u6BB5"><a class="header-anchor" href="#\u67E5\u8BE2\u8FD4\u56DE\u5B57\u6BB5" aria-hidden="true">#</a> \u67E5\u8BE2\u8FD4\u56DE\u5B57\u6BB5</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u67E5\u8BE2\u8FD4\u56DE\u6307\u5B9A\u5B57\u6BB5
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSearchBySource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u67E5\u8BE2\u6761\u4EF6</span>
  <span class="token keyword">final</span> <span class="token class-name">MatchAllQueryBuilder</span> matchAllQueryBuilder <span class="token operator">=</span> <span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">matchAllQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// \u67E5\u8BE2\u6240\u6709</span>
  <span class="token keyword">final</span> <span class="token class-name">SearchResponse</span> searchResponse <span class="token operator">=</span> transportClient<span class="token punctuation">.</span><span class="token function">prepareSearch</span><span class="token punctuation">(</span><span class="token string">&quot;dangdang&quot;</span><span class="token punctuation">)</span> <span class="token comment">//\u6307\u5B9A\u7D22\u5F15</span>
    <span class="token punctuation">.</span><span class="token function">setTypes</span><span class="token punctuation">(</span><span class="token string">&quot;book&quot;</span><span class="token punctuation">)</span> <span class="token comment">//\u6307\u5B9A\u7C7B\u578B</span>
    <span class="token punctuation">.</span><span class="token function">setQuery</span><span class="token punctuation">(</span>matchAllQueryBuilder<span class="token punctuation">)</span><span class="token comment">//\u6307\u5B9A\u67E5\u8BE2\u6761\u4EF6</span>
    <span class="token punctuation">.</span><span class="token function">setSource</span><span class="token punctuation">(</span><span class="token class-name">SearchSourceBuilder</span><span class="token punctuation">.</span><span class="token function">searchSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fetchSource</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// \u8FD4\u56DE\u6307\u5B9A\u5B57\u6BB5 \u53C2\u65701\u662F\u5305\u542B\u5B57\u6BB5 \u53EF\u4EE5\u662F\u901A\u914D\u7B26*\u8868\u793A\u5305\u542B\u6240\u6709\u5B57\u6BB5\uFF0C\u53C2\u65702\u662F\u6392\u9664</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u6267\u884C\u67E5\u8BE2</span>

  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u603B\u6761\u6570\uFF1A&quot;</span> <span class="token operator">+</span> searchResponse<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTotalHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u6700\u5927\u5F97\u5206\uFF1A&quot;</span> <span class="token operator">+</span> searchResponse<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMaxScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">SearchHit</span><span class="token punctuation">[</span><span class="token punctuation">]</span> hits <span class="token operator">=</span> searchResponse<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">SearchHit</span> hit <span class="token operator">:</span> hits<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>hit<span class="token punctuation">.</span><span class="token function">getSourceAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="term\u67E5\u8BE2"><a class="header-anchor" href="#term\u67E5\u8BE2" aria-hidden="true">#</a> term\u67E5\u8BE2</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testResult</span><span class="token punctuation">(</span><span class="token class-name">QueryBuilder</span> queryBuilder<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">final</span> <span class="token class-name">SearchResponse</span> searchResponse <span class="token operator">=</span> transportClient<span class="token punctuation">.</span><span class="token function">prepareSearch</span><span class="token punctuation">(</span><span class="token string">&quot;dangdang&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setTypes</span><span class="token punctuation">(</span><span class="token string">&quot;book&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setQuery</span><span class="token punctuation">(</span>queryBuilder<span class="token punctuation">)</span><span class="token comment">//\u67E5\u8BE2\u6761\u4EF6</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u603B\u6761\u6570\uFF1A&quot;</span> <span class="token operator">+</span> searchResponse<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTotalHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u6700\u5927\u5F97\u5206\uFF1A&quot;</span> <span class="token operator">+</span> searchResponse<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMaxScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">SearchHit</span><span class="token punctuation">[</span><span class="token punctuation">]</span> hits <span class="token operator">=</span> searchResponse<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">SearchHit</span> hit <span class="token operator">:</span> hits<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>hit<span class="token punctuation">.</span><span class="token function">getSourceAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
 * termQuery
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testTermQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u67E5\u8BE2\u6761\u4EF6 term query</span>
  <span class="token keyword">final</span> <span class="token class-name">TermQueryBuilder</span> termQueryBuilder <span class="token operator">=</span> <span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">termQuery</span><span class="token punctuation">(</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u975E\u5178&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">testResult</span><span class="token punctuation">(</span>termQueryBuilder<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="range\u67E5\u8BE2"><a class="header-anchor" href="#range\u67E5\u8BE2" aria-hidden="true">#</a> range\u67E5\u8BE2</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * range \u67E5\u8BE2
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testRangeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">final</span> <span class="token class-name">RangeQueryBuilder</span> rangeQueryBuilder <span class="token operator">=</span> <span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">rangeQuery</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">gte</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">lte</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">testResult</span><span class="token punctuation">(</span>rangeQueryBuilder<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u901A\u914D\u7B26\u67E5\u8BE2-1"><a class="header-anchor" href="#\u901A\u914D\u7B26\u67E5\u8BE2-1" aria-hidden="true">#</a> \u901A\u914D\u7B26\u67E5\u8BE2</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u901A\u914D\u7B26\u67E5\u8BE2
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testWildCardQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">final</span> <span class="token class-name">WildcardQueryBuilder</span> wildcardQueryBuilder <span class="token operator">=</span> <span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">wildcardQuery</span><span class="token punctuation">(</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u6211\u4EEC?&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">testResult</span><span class="token punctuation">(</span>wildcardQueryBuilder<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="prefix\u67E5\u8BE2"><a class="header-anchor" href="#prefix\u67E5\u8BE2" aria-hidden="true">#</a> prefix\u67E5\u8BE2</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u524D\u7F00\u67E5\u8BE2
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testPrefixQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">final</span> <span class="token class-name">PrefixQueryBuilder</span> prefixQueryBuilder <span class="token operator">=</span> <span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">prefixQuery</span><span class="token punctuation">(</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u6211&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">testResult</span><span class="token punctuation">(</span>prefixQueryBuilder<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ids\u67E5\u8BE2"><a class="header-anchor" href="#ids\u67E5\u8BE2" aria-hidden="true">#</a> ids\u67E5\u8BE2</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * ids\u67E5\u8BE2
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testIdsQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">final</span> <span class="token class-name">IdsQueryBuilder</span> idsQueryBuilder <span class="token operator">=</span> <span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">idsQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addIds</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">testResult</span><span class="token punctuation">(</span>idsQueryBuilder<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u6A21\u7CCA\u67E5\u8BE2-1"><a class="header-anchor" href="#\u6A21\u7CCA\u67E5\u8BE2-1" aria-hidden="true">#</a> \u6A21\u7CCA\u67E5\u8BE2</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u6A21\u7CCA\u67E5\u8BE2
 * 0-2 \u4E0D\u5141\u8BB8\u6A21\u7CCA
 * 3-5 \u53EF\u4EE5\u51FA\u73B0\u4E00\u4E2A\u6A21\u7CCA
 * &gt;=6 \u6700\u591A\u51FA\u73B0\u4E24\u4E2A\u6A21\u7CCA
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFuzzyQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">final</span> <span class="token class-name">FuzzyQueryBuilder</span> fuzzyQueryBuilder <span class="token operator">=</span> <span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">fuzzyQuery</span><span class="token punctuation">(</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u6211\u4EEC&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">testResult</span><span class="token punctuation">(</span>fuzzyQueryBuilder<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="bool\u67E5\u8BE2"><a class="header-anchor" href="#bool\u67E5\u8BE2" aria-hidden="true">#</a> bool\u67E5\u8BE2</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * bool\u67E5\u8BE2 \u7EC4\u5408\u67E5\u8BE2
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testBoolQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">final</span> <span class="token class-name">BoolQueryBuilder</span> boolQueryBuilder <span class="token operator">=</span> <span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">boolQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">must</span><span class="token punctuation">(</span><span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">termQuery</span><span class="token punctuation">(</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u6211\u4EEC&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">testResult</span><span class="token punctuation">(</span>boolQueryBuilder<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u9AD8\u4EAE\u67E5\u8BE2-1"><a class="header-anchor" href="#\u9AD8\u4EAE\u67E5\u8BE2-1" aria-hidden="true">#</a> \u9AD8\u4EAE\u67E5\u8BE2</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u9AD8\u4EAE\u67E5\u8BE2
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSearch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Book</span><span class="token punctuation">&gt;</span></span> books <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// \u521B\u5EFAhighlightBuilder</span>
  <span class="token keyword">final</span> <span class="token class-name">HighlightBuilder</span> highlightBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HighlightBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">field</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">requireFieldMatch</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">preTags</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;span style=&#39;color:red;&#39;&gt;&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">postTags</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/span&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">final</span> <span class="token class-name">SearchResponse</span> searchResponse <span class="token operator">=</span> transportClient<span class="token punctuation">.</span><span class="token function">prepareSearch</span><span class="token punctuation">(</span><span class="token string">&quot;dangdang&quot;</span><span class="token punctuation">)</span> <span class="token comment">//\u6307\u5B9A\u7D22\u5F15</span>
    <span class="token punctuation">.</span><span class="token function">setTypes</span><span class="token punctuation">(</span><span class="token string">&quot;book&quot;</span><span class="token punctuation">)</span> <span class="token comment">//\u6307\u5B9A\u7C7B\u578B</span>
    <span class="token punctuation">.</span><span class="token function">setQuery</span><span class="token punctuation">(</span><span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">multiMatchQuery</span><span class="token punctuation">(</span><span class="token string">&quot;\u6211\u4EEC&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;content&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//\u6307\u5B9A\u67E5\u8BE2\u6761\u4EF6</span>
    <span class="token punctuation">.</span><span class="token function">highlighter</span><span class="token punctuation">(</span>highlightBuilder<span class="token punctuation">)</span> <span class="token comment">//\u9AD8\u4EAE\u5904\u7406</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u6267\u884C\u67E5\u8BE2</span>

  <span class="token keyword">final</span> <span class="token class-name">SearchHit</span><span class="token punctuation">[</span><span class="token punctuation">]</span> hits <span class="token operator">=</span> searchResponse<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">SearchHit</span> hit <span class="token operator">:</span> hits<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u5C01\u88C5\u539F\u59CB\u6570\u636E</span>
    <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> sourceAsMap <span class="token operator">=</span> hit<span class="token punctuation">.</span><span class="token function">getSourceAsMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Book</span> book <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    book<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>sourceAsMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    book<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span>sourceAsMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    book<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>sourceAsMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    book<span class="token punctuation">.</span><span class="token function">setSex</span><span class="token punctuation">(</span>sourceAsMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;sex&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    book<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span>sourceAsMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// \u9AD8\u4EAE\u5904\u7406</span>
    <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">HighlightField</span><span class="token punctuation">&gt;</span></span> highlightFields <span class="token operator">=</span> hit<span class="token punctuation">.</span><span class="token function">getHighlightFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>highlightFields<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">final</span> <span class="token class-name">String</span> nameHigh <span class="token operator">=</span> highlightFields<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fragments</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      book<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span>nameHigh<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>highlightFields<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">final</span> <span class="token class-name">String</span> contentHigh <span class="token operator">=</span> highlightFields<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fragments</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      book<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span>contentHigh<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    books<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u8FC7\u6EE4\u67E5\u8BE2-1"><a class="header-anchor" href="#\u8FC7\u6EE4\u67E5\u8BE2-1" aria-hidden="true">#</a> \u8FC7\u6EE4\u67E5\u8BE2</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u8FC7\u6EE4\u67E5\u8BE2
 * \u4E3B\u8981\u7528\u5728\u67E5\u8BE2\u6267\u884C\u4E4B\u524D\u5BF9\u5927\u91CF\u6570\u636E\u8FDB\u884C\u7B5B\u9009
 * PostFilter \u7528\u6765\u8FC7\u6EE4
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSearch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">final</span> <span class="token class-name">RangeQueryBuilder</span> rangeQueryBuilder <span class="token operator">=</span> <span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">rangeQuery</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">gte</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">lte</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">SearchResponse</span> searchResponse <span class="token operator">=</span> transportClient<span class="token punctuation">.</span><span class="token function">prepareSearch</span><span class="token punctuation">(</span><span class="token string">&quot;dangdang&quot;</span><span class="token punctuation">)</span> <span class="token comment">//\u6307\u5B9A\u7D22\u5F15</span>
    <span class="token punctuation">.</span><span class="token function">setTypes</span><span class="token punctuation">(</span><span class="token string">&quot;book&quot;</span><span class="token punctuation">)</span> <span class="token comment">//\u6307\u5B9A\u7C7B\u578B</span>
    <span class="token punctuation">.</span><span class="token function">setPostFilter</span><span class="token punctuation">(</span>rangeQueryBuilder<span class="token punctuation">)</span> <span class="token comment">// \u8FC7\u6EE4</span>
    <span class="token punctuation">.</span><span class="token function">setQuery</span><span class="token punctuation">(</span><span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">matchAllQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//\u6307\u5B9A\u67E5\u8BE2\u6761\u4EF6</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u6267\u884C\u67E5\u8BE2</span>
  <span class="token keyword">final</span> <span class="token class-name">SearchHits</span> hits <span class="token operator">=</span> searchResponse<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">SearchHit</span> hit <span class="token operator">:</span> hits<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>hit<span class="token punctuation">.</span><span class="token function">getSourceAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u7EFC\u5408\u6848\u4F8B"><a class="header-anchor" href="#\u7EFC\u5408\u6848\u4F8B" aria-hidden="true">#</a> \u7EFC\u5408\u6848\u4F8B</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u7EFC\u5408\u6848\u4F8B\uFF1A\u57FA\u4E8E\u591A\u5B57\u6BB5\u5173\u952E\u5B57\u67E5\u8BE2
 * \u5206\u9875
 * \u6392\u5E8F
 * \u8FC7\u6EE4
 * \u6267\u884C\u5B57\u6BB5\u8FD4\u56DE
 * \u9AD8\u4EAE\u5904\u7406
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testComprehensiveSearch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">final</span> <span class="token class-name">SearchResponse</span> searchResponse <span class="token operator">=</span> transportClient<span class="token punctuation">.</span><span class="token function">prepareSearch</span><span class="token punctuation">(</span><span class="token string">&quot;dangdang&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setTypes</span><span class="token punctuation">(</span><span class="token string">&quot;book&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setFrom</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>             <span class="token comment">// \u8D77\u59CB\u6761\u6570</span>
    <span class="token punctuation">.</span><span class="token function">setSize</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>            <span class="token comment">// \u6BCF\u9875\u8BB0\u5F55\u6570</span>
    <span class="token punctuation">.</span><span class="token function">addSort</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token class-name">SortOrder</span><span class="token punctuation">.</span>DESC<span class="token punctuation">)</span>         <span class="token comment">// \u6392\u5E8F</span>
    <span class="token punctuation">.</span><span class="token function">setSource</span><span class="token punctuation">(</span><span class="token class-name">SearchSourceBuilder</span><span class="token punctuation">.</span><span class="token function">searchSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fetchSource</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sex&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// \u6307\u5B9A\u5B57\u6BB5\u8FD4\u56DE</span>
    <span class="token punctuation">.</span><span class="token function">setPostFilter</span><span class="token punctuation">(</span><span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">termQuery</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u5F20\u4E09&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>          <span class="token comment">// \u8FC7\u6EE4\u6761\u4EF6</span>
    <span class="token punctuation">.</span><span class="token function">setQuery</span><span class="token punctuation">(</span><span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">multiMatchQuery</span><span class="token punctuation">(</span><span class="token string">&quot;\u6211\u4EEC&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;content&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">// \u591A\u5B57\u6BB5\u641C\u7D22</span>
    <span class="token punctuation">.</span><span class="token function">highlighter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HighlightBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">field</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">requireFieldMatch</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">preTags</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;span style=&#39;color:red;&#39;&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">postTags</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/span&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// \u9AD8\u4EAE\u5904\u7406</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">final</span> <span class="token keyword">long</span> totalHits <span class="token operator">=</span> searchResponse<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTotalHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u7B26\u53F7\u6761\u4EF6\u7684\u603B\u6761\u6570\uFF1A&quot;</span> <span class="token operator">+</span> totalHits<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token keyword">float</span> maxScore <span class="token operator">=</span> searchResponse<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMaxScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u6700\u5927\u5206\u6570\uFF1A&quot;</span> <span class="token operator">+</span> maxScore<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">SearchHit</span><span class="token punctuation">[</span><span class="token punctuation">]</span> hits <span class="token operator">=</span> searchResponse<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">SearchHit</span> hit <span class="token operator">:</span> hits<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>hit<span class="token punctuation">.</span><span class="token function">getSourceAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>hit<span class="token punctuation">.</span><span class="token function">getHighlightFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="springboot-data\u64CD\u4F5Ces"><a class="header-anchor" href="#springboot-data\u64CD\u4F5Ces" aria-hidden="true">#</a> springboot data\u64CD\u4F5Ces</h2><blockquote><p>spring data\u5B98\u65B9\u7F51\u7AD9\uFF1Ahttps://spring.io/projects/spring-data</p><p>Spring Data\u2019s mission is to provide a familiar and consistent, Spring-based programming model for data access while still retaining the special traits of the underlying data store.</p><p>It makes it easy to use data access technologies, relational and non-relational databases, map-reduce frameworks, and cloud-based data services. This is an umbrella project which contains many subprojects that are specific to a given database. The projects are developed by working together with many of the companies and developers that are behind these exciting technologies.</p><p>\u7FFB\u8BD1\uFF1A</p><p>Spring Data \u7684\u4F7F\u547D\u662F\u4E3A\u6570\u636E\u8BBF\u95EE\u63D0\u4F9B\u719F\u6089\u4E14\u4E00\u81F4\u7684\u57FA\u4E8E Spring \u7684\u7F16\u7A0B\u6A21\u578B\uFF0C\u540C\u65F6\u4ECD\u4FDD\u7559\u5E95\u5C42\u6570\u636E\u5B58\u50A8\u7684\u7279\u6B8A\u7279\u5F81\u3002</p><p>\u5B83\u4F7F\u4F7F\u7528\u6570\u636E\u8BBF\u95EE\u6280\u672F\u3001\u5173\u7CFB\u548C\u975E\u5173\u7CFB\u6570\u636E\u5E93\u3001map-reduce \u6846\u67B6\u548C\u57FA\u4E8E\u4E91\u7684\u6570\u636E\u670D\u52A1\u53D8\u5F97\u5BB9\u6613\u3002\u8FD9\u662F\u4E00\u4E2A\u4F1E\u5F62\u9879\u76EE\uFF0C\u5176\u4E2D\u5305\u542B\u8BB8\u591A\u7279\u5B9A\u4E8E\u7ED9\u5B9A\u6570\u636E\u5E93\u7684\u5B50\u9879\u76EE\u3002\u8FD9\u4E9B\u9879\u76EE\u662F\u901A\u8FC7\u4E0E\u8FD9\u4E9B\u4EE4\u4EBA\u5174\u594B\u7684\u6280\u672F\u80CC\u540E\u7684\u8BB8\u591A\u516C\u53F8\u548C\u5F00\u53D1\u5546\u5408\u4F5C\u5F00\u53D1\u7684\u3002</p><p>spring data elasticsearch\uFF1Ahttps://spring.io/projects/spring-data-elasticsearch</p><p>\u7531\u4E8Eelasticsearch\u7248\u672C\u7684\u66F4\u65B0\u7684\uFF0C<code>ElasticsearchTemplate</code>\u5DF2\u7ECF\u6BD4\u8F83\u8001\u4E86\uFF0C\u6240\u4EE5\u6B64\u6B21\u4E0D\u518D\u4F7F\u7528</p></blockquote><h3 id="\u5F15\u5165\u4F9D\u8D56"><a class="header-anchor" href="#\u5F15\u5165\u4F9D\u8D56" aria-hidden="true">#</a> \u5F15\u5165\u4F9D\u8D56</h3><p>\u5C06springboot\u7248\u672C\u4FEE\u6539\u6210\u8F83\u8001\u7684\u7248\u672C\uFF1A<code>2.2.5.RELEASE</code>\uFF0C\u65B0\u7248\u672C\u5C01\u88C5\u7684elasticsearch\u7684type\u5DF2\u7ECF\u53BB\u9664\u4E86\uFF0C\u65B0\u7248\u672C\u53EF\u4EE5\u4E0D\u7528\u6307\u5B9Atype</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-elasticsearch<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u7F16\u5199yaml\u914D\u7F6E"><a class="header-anchor" href="#\u7F16\u5199yaml\u914D\u7F6E" aria-hidden="true">#</a> \u7F16\u5199yaml\u914D\u7F6E</h3>`,83),aa=s("The "),ta=n("code",null,"TransportClient",-1),ea=s(" is deprecated as of Elasticsearch 7 and will be removed in Elasticsearch 8. ("),pa={href:"https://www.elastic.co/guide/en/elasticsearch/client/java-api/current/transport-client.html",target:"_blank",rel:"noopener noreferrer"},oa=s("see the Elasticsearch documentation"),ca=s("). Spring Data Elasticsearch will support the "),la=n("code",null,"TransportClient",-1),ia=s(" as long as it is available in the used Elasticsearch "),ua={href:"https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#elasticsearch.versions",target:"_blank",rel:"noopener noreferrer"},ra=s("version"),da=s(" but has deprecated the classes using it since version 4.0."),ka=s("We strongly recommend to use the "),va={href:"https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#elasticsearch.clients.rest",target:"_blank",rel:"noopener noreferrer"},ma=s("High Level REST Client"),ba=s(" instead of the "),qa=n("code",null,"TransportClient",-1),ga=s("."),ha=n("p",null,"\u7FFB\u8BD1\uFF1A",-1),ya=n("p",null,"\u4ECE Elasticsearch 7 \u5F00\u59CB\u4E0D\u63A8\u8350\u4F7F\u7528 TransportClient\uFF0C\u5E76\u5C06\u5728 Elasticsearch 8 \u4E2D\u5220\u9664\u3002\uFF08\u8BF7\u53C2\u9605 Elasticsearch \u6587\u6863\uFF09\u3002 Spring Data Elasticsearch \u5C06\u652F\u6301 TransportClient\uFF0C\u53EA\u8981\u5B83\u5728\u4F7F\u7528\u7684 Elasticsearch \u7248\u672C\u4E2D\u53EF\u7528\uFF0C\u4F46\u81EA 4.0 \u7248\u4EE5\u6765\u5DF2\u5F03\u7528\u4F7F\u7528\u5B83\u7684\u7C7B\u3002",-1),fa=n("p",null,"\u6211\u4EEC\u5F3A\u70C8\u5EFA\u8BAE\u4F7F\u7528\u9AD8\u7EA7 REST \u5BA2\u6237\u7AEF\u800C\u4E0D\u662F TransportClient\u3002",-1),_a=e(`<h4 id="spring-data-2-x\u7248\u672C\u914D\u7F6E"><a class="header-anchor" href="#spring-data-2-x\u7248\u672C\u914D\u7F6E" aria-hidden="true">#</a> spring-data(2.x\u7248\u672C\u914D\u7F6E)</h4><p>\u4E4B\u524D\u7248\u672C\u4F7F\u7528\u7684\u662FElasticTemplate\uFF0C\u7531\u4E8Ees\u5B98\u65B9TransportClient\u7684\u5E9F\u5F03\uFF0C\u5BFC\u81F4\u65B0\u7248\u672C\u7684\u4E2D\u7684\u6240\u6709\u5173\u4E8E\u7684ElasticsearchTemplate\u90FD\u88AB\u5F03\u7528\u4E86\uFF0C\u6240\u4EE5\u4E86\u89E3\u5373\u53EF</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span> 
	<span class="token key atrule">data</span><span class="token punctuation">:</span> 
		<span class="token key atrule">elasticsearch</span><span class="token punctuation">:</span> 
			<span class="token key atrule">cluster-nodes</span><span class="token punctuation">:</span> 172.16.187.15<span class="token punctuation">:</span><span class="token number">9300</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="spring-data-\u65B0\u7248\u672C\u63A8\u8350\u914D\u7F6E-resthighlevelclient"><a class="header-anchor" href="#spring-data-\u65B0\u7248\u672C\u63A8\u8350\u914D\u7F6E-resthighlevelclient" aria-hidden="true">#</a> spring-data(\u65B0\u7248\u672C\u63A8\u8350\u914D\u7F6E)RestHighLevelClient</h4><blockquote><p>\u5B98\u65B9\u7F51\u7AD9\uFF1Ahttps://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#elasticsearch.clients.rest</p><p>The Java High Level REST Client is the default client of Elasticsearch, it provides a straight forward replacement for the <code>TransportClient</code> as it accepts and returns the very same request/response objects and therefore depends on the Elasticsearch core project. Asynchronous calls are operated upon a client managed thread pool and require a callback to be notified when the request is done.</p><p>\u7FFB\u8BD1\uFF1A</p><p>Java \u9AD8\u7EA7 REST \u5BA2\u6237\u7AEF\u662F Elasticsearch \u7684\u9ED8\u8BA4\u5BA2\u6237\u7AEF\uFF0C\u5B83\u76F4\u63A5\u66FF\u4EE3\u4E86 <code>TransportClient</code>\uFF0C\u56E0\u4E3A\u5B83\u63A5\u53D7\u5E76\u8FD4\u56DE\u5B8C\u5168\u76F8\u540C\u7684\u8BF7\u6C42/\u54CD\u5E94\u5BF9\u8C61\uFF0C\u56E0\u6B64\u4F9D\u8D56\u4E8E Elasticsearch \u6838\u5FC3\u9879\u76EE\u3002\u5F02\u6B65\u8C03\u7528\u5728\u5BA2\u6237\u7AEF\u7BA1\u7406\u7684\u7EBF\u7A0B\u6C60\u4E0A\u8FD0\u884C\uFF0C\u5E76\u4E14\u9700\u8981\u5728\u8BF7\u6C42\u5B8C\u6210\u65F6\u901A\u77E5\u56DE\u8C03\u3002</p></blockquote><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RestClientConfig</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractElasticsearchConfiguration</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * \u8FD9\u4E2Aclient\u7528\u6765\u66FF\u4EE3transportClient\u5BF9\u8C61
     * <span class="token keyword">@return</span>
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">RestHighLevelClient</span> <span class="token function">elasticsearchClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u5B9A\u4E49\u5BA2\u6237\u7AEF\u914D\u7F6E\u5BF9\u8C61</span>
        <span class="token comment">// \u7528\u7684\u662Frest\u7AEF\u53E3\u5BA2\u6237\u7AEF\uFF0C\u6240\u4EE5\u7528\u7684\u662F9200\u7AEF\u53E3</span>
        <span class="token keyword">final</span> <span class="token class-name">ClientConfiguration</span> configuration <span class="token operator">=</span> <span class="token class-name">ClientConfiguration</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">connectedTo</span><span class="token punctuation">(</span><span class="token string">&quot;172.16.187.15:9200&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u901A\u8FC7restClients\u5BF9\u8C61\u521B\u5EFA</span>
        <span class="token keyword">return</span> <span class="token class-name">RestClients</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>configuration<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6D4B\u8BD5\u4F7F\u7528client\u5BF9\u8C61\u64CD\u4F5Ces</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u6D4B\u8BD5ElasticSearchRestClient
 *
 * @SpringBootTest \u8868\u793A\u4F7F\u7528springboot\u6D4B\u8BD5\u542F\u52A8\uFF0C\u8FD9\u6837\u53EF\u4EE5\u901A\u8FC7springboot\u7684\u542F\u52A8\u7C7B\u542F\u52A8\uFF0C\u5C31\u53EF\u4EE5\u83B7\u53D6\u7684\u5230\u6CE8\u5165\u5230spring\u5BB9\u5668\u4E2D\u7684bean
 */</span>
<span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestRestClient</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;elasticsearchClient&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">RestHighLevelClient</span> restHighLevelClient<span class="token punctuation">;</span><span class="token comment">// \u590D\u6742\u67E5\u8BE2\u4F7F\u7528</span>

    <span class="token comment">// \u9762\u5411\u5BF9\u8C61\u7684\u66F4\u53CB\u597D\u7684\u7528\u6CD5 ElasticSearchRepository \u63D0\u4F9B\u4E86\u4E00\u7CFB\u5217\u7684crud\u65B9\u6CD5</span>


    <span class="token doc-comment comment">/**
     * \u5220\u9664\u6587\u6863
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDelete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token doc-comment comment">/**
         * \u53C2\u65701 \u7D22\u5F15
         * \u53C2\u65702 \u7C7B\u578B \u65B0\u7248\u672C\u4E00\u4E2A\u7D22\u5F15\u4E2D\u53EA\u80FD\u6709\u4E00\u4E2A\u7C7B\u578B\uFF0C\u6240\u4EE5\u53EF\u4EE5\u4E0D\u7528\u4F20\u7C7B\u578B\uFF1Apublic DeleteRequest(String index, String id)
         * \u53C2\u65703 \u5220\u9664\u7684id
         */</span>
        <span class="token keyword">final</span> <span class="token class-name">DeleteRequest</span> deleteRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DeleteRequest</span><span class="token punctuation">(</span><span class="token string">&quot;dangdang&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">DeleteResponse</span> deleteResponse <span class="token operator">=</span> restHighLevelClient<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>deleteRequest<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>deleteResponse<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * \u521B\u5EFA\u6587\u6863
     *
     * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">IOException</span></span>
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testAddIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token class-name">IndexRequest</span> indexRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IndexRequest</span><span class="token punctuation">(</span><span class="token string">&quot;dangdang&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        indexRequest<span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span><span class="token string">&quot;{\\&quot;name\\&quot;:\\&quot;\u674E\u56DB\\&quot;,\\&quot;age\\&quot;:23,\\&quot;sex\\&quot;:\\&quot;\u7537\\&quot;,\\&quot;content\\&quot;:\\&quot;\u4ECA\u5929\u88AB\u78B0\u74F7\u4E86\uFF0C\u5F88\u84DD\u7626\\&quot;}&quot;</span><span class="token punctuation">,</span> <span class="token class-name">XContentType</span><span class="token punctuation">.</span>JSON<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">final</span> <span class="token class-name">IndexResponse</span> indexResponse <span class="token operator">=</span> restHighLevelClient<span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span>indexRequest<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>indexResponse<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * \u66F4\u65B0\u64CD\u4F5C
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token class-name">UpdateRequest</span> updateRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UpdateRequest</span><span class="token punctuation">(</span><span class="token string">&quot;dangdang&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        updateRequest<span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span><span class="token string">&quot;{\\&quot;name\\&quot;:\\&quot;\u674E\u56DB\\&quot;,\\&quot;age\\&quot;:23,\\&quot;sex\\&quot;:\\&quot;\u7537\\&quot;,\\&quot;content\\&quot;:\\&quot;\u4ECA\u5929\u88AB\u78B0\u74F7\u4E86\uFF0C\u5F88\u84DD\u7626\uFF0C\u60F3\u54ED\\&quot;}&quot;</span><span class="token punctuation">,</span> <span class="token class-name">XContentType</span><span class="token punctuation">.</span>JSON<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">UpdateResponse</span> updateResponse <span class="token operator">=</span> restHighLevelClient<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>updateRequest<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>updateResponse<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * \u67E5\u8BE2\u6587\u6863
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSearch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token class-name">SearchRequest</span> searchRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SearchRequest</span><span class="token punctuation">(</span><span class="token string">&quot;dangdang&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// \u641C\u7D22\u6784\u5EFA\u5BF9\u8C61</span>
        <span class="token keyword">final</span> <span class="token class-name">SearchSourceBuilder</span> searchSourceBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SearchSourceBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        searchSourceBuilder<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">matchAllQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token comment">// \u8D77\u59CB\u6761\u6570</span>
                <span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>   <span class="token comment">// \u6BCF\u9875\u5C55\u793A\u6761\u6570</span>
                <span class="token punctuation">.</span><span class="token function">postFilter</span><span class="token punctuation">(</span><span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">matchAllQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// \u8FC7\u6EE4\u6761\u4EF6</span>
                <span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token class-name">SortOrder</span><span class="token punctuation">.</span>DESC<span class="token punctuation">)</span>    <span class="token comment">// \u6392\u5E8F</span>
                <span class="token punctuation">.</span><span class="token function">highlighter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HighlightBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">field</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">requireFieldMatch</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// \u9AD8\u4EAE</span>

        <span class="token comment">// \u521B\u5EFA\u641C\u7D22\u8BF7\u6C42</span>
        searchRequest<span class="token punctuation">.</span><span class="token function">types</span><span class="token punctuation">(</span><span class="token string">&quot;book&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span>searchSourceBuilder<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">SearchResponse</span> searchResponse <span class="token operator">=</span> restHighLevelClient<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>searchRequest<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u7B26\u5408\u6761\u4EF6\u7684\u6587\u6863\u603B\u6570\uFF1A&quot;</span> <span class="token operator">+</span> searchResponse<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTotalHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u7B26\u5408\u6761\u4EF6\u6587\u6863\u7684\u6700\u5927\u5F97\u5206\uFF1A&quot;</span> <span class="token operator">+</span> searchResponse<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMaxScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">final</span> <span class="token class-name">SearchHit</span><span class="token punctuation">[</span><span class="token punctuation">]</span> hits <span class="token operator">=</span> searchResponse<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">SearchHit</span> hit <span class="token operator">:</span> hits<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>hit<span class="token punctuation">.</span><span class="token function">getSourceAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * \u6279\u91CF\u66F4\u65B0
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testBulk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token class-name">BulkRequest</span> bulkRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BulkRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// \u6DFB\u52A0</span>
        <span class="token keyword">final</span> <span class="token class-name">IndexRequest</span> indexRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IndexRequest</span><span class="token punctuation">(</span><span class="token string">&quot;dangdang&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        indexRequest<span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span><span class="token string">&quot;{\\&quot;name\\&quot;:\\&quot;\u738B\u4E94\\&quot;,\\&quot;age\\&quot;:23,\\&quot;sex\\&quot;:\\&quot;\u7537\\&quot;,\\&quot;content\\&quot;:\\&quot;\u4ECA\u5929\u88AB\u78B0\u74F7\u4E86\uFF0C\u5F88\u84DD\u7626\uFF0C\u60F3\u54ED\\&quot;}&quot;</span><span class="token punctuation">,</span> <span class="token class-name">XContentType</span><span class="token punctuation">.</span>JSON<span class="token punctuation">)</span><span class="token punctuation">;</span>
        bulkRequest<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>indexRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// \u5220\u9664</span>
        <span class="token keyword">final</span> <span class="token class-name">DeleteRequest</span> deleteRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DeleteRequest</span><span class="token punctuation">(</span><span class="token string">&quot;dangdang&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bulkRequest<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>deleteRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u4FEE\u6539</span>
        <span class="token keyword">final</span> <span class="token class-name">UpdateRequest</span> updateRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UpdateRequest</span><span class="token punctuation">(</span><span class="token string">&quot;dangdang&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;book&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        updateRequest<span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span><span class="token string">&quot;{\\&quot;name\\&quot;:\\&quot;\u5F20\u4E09\\&quot;,\\&quot;age\\&quot;:23,\\&quot;sex\\&quot;:\\&quot;\u7537\\&quot;,\\&quot;content\\&quot;:\\&quot;\u4ECA\u5929\u88AB\u78B0\u74F7\u4E86\uFF0C\u5F88\u84DD\u7626\uFF0C\u60F3\u54ED\\&quot;}&quot;</span><span class="token punctuation">,</span> <span class="token class-name">XContentType</span><span class="token punctuation">.</span>JSON<span class="token punctuation">)</span><span class="token punctuation">;</span>
        bulkRequest<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>updateRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">final</span> <span class="token class-name">BulkResponse</span> bulkResponse <span class="token operator">=</span> restHighLevelClient<span class="token punctuation">.</span><span class="token function">bulk</span><span class="token punctuation">(</span>bulkRequest<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">BulkItemResponse</span><span class="token punctuation">[</span><span class="token punctuation">]</span> items <span class="token operator">=</span> bulkResponse<span class="token punctuation">.</span><span class="token function">getItems</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">BulkItemResponse</span> item <span class="token operator">:</span> items<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>spring-data-elasticsearch\u4E3A\u6211\u4EEC\u63D0\u4F9B\u9762\u5411\u5BF9\u8C61\u7684\u66F4\u53CB\u597D\u7684\u7528\u6CD5<code>ElasticSearchRepository</code>\u3002\u63D0\u4F9B\u4E86\u4E00\u7CFB\u5217\u7684\u57FA\u672C\u7684crud\u65B9\u6CD5\uFF0C\u9AD8\u7EA7\u7684\u65B9\u6CD5\u8FD8\u662F\u4F7F\u7528<code>RestHighLevelClient</code>\uFF0C\u6BD4\u5982\u590D\u6742\u7C7B\u578B\u67E5\u8BE2\u3001\u9AD8\u4EAE\u67E5\u8BE2\u3001\u6307\u5B9A\u6761\u4EF6\u67E5\u8BE2</strong></p><p><img src="`+A+`" alt="image-20211214232030246"></p><h3 id="\u7F16\u5199entity"><a class="header-anchor" href="#\u7F16\u5199entity" aria-hidden="true">#</a> \u7F16\u5199entity</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token doc-comment comment">/**
 * \u7528\u5728\u7C7B\u4E0A\uFF0C\u4F5C\u7528\uFF1A\u5C06emp\u7684\u5BF9\u8C61\u6620\u5C04\u6210es\u4E2D\u4E00\u6761json\u683C\u5F0F\u6587\u6863
 *  indexName \u7528\u6765\u6307\u5B9A\u8FD9\u4E2A\u5BF9\u8C61\u8F6C\u4E3Ajson\u6587\u6863\u5B58\u50A8\u90A3\u4E2A\u7D22\u5F15\u4E2D\uFF0C\u8981\u6C42\uFF1Aes\u670D\u52A1\u5668\u4E2D\u4E0D\u80FD\u5B58\u5728\u6B64\u7D22\u5F15\u540D
 */</span>
<span class="token annotation punctuation">@Document</span><span class="token punctuation">(</span>indexName <span class="token operator">=</span> <span class="token string">&quot;ems&quot;</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token string">&quot;emp&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Accessors</span><span class="token punctuation">(</span>chain <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Emp</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Id</span> <span class="token comment">// \u7528\u6765\u5C06\u5BF9\u8C61\u4E2D\u7684id\u5C5E\u6027\u4E0E\u6587\u6863\u4E2D\u7684_id \u8FDB\u884C\u4E00\u4E00\u5BF9\u5E94</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>

    <span class="token comment">// \u7528\u5728\u5C5E\u6027\u4E0A\uFF0C\u4EE3\u8868mapping\u4E2D\u7684\u4E00\u4E2A\u5B57\u6BB5</span>
    <span class="token annotation punctuation">@Field</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">FieldType<span class="token punctuation">.</span>Text</span><span class="token punctuation">,</span> analyzer <span class="token operator">=</span> <span class="token string">&quot;ik_max_word&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Field</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">FieldType<span class="token punctuation">.</span>Integer</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Field</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">FieldType<span class="token punctuation">.</span>Date</span><span class="token punctuation">)</span>
  	<span class="token annotation punctuation">@JsonFormat</span><span class="token punctuation">(</span>pattern <span class="token operator">=</span> <span class="token string">&quot;yyyy-MM-dd&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Date</span> bir<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Field</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">FieldType<span class="token punctuation">.</span>Text</span><span class="token punctuation">,</span> analyzer <span class="token operator">=</span> <span class="token string">&quot;ik_max_word&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> content<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Field</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">FieldType<span class="token punctuation">.</span>Text</span><span class="token punctuation">,</span> analyzer <span class="token operator">=</span> <span class="token string">&quot;ik_max_word&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> address<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u7F16\u5199bookrepository"><a class="header-anchor" href="#\u7F16\u5199bookrepository" aria-hidden="true">#</a> \u7F16\u5199BookRepository</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpRepository</span> <span class="token keyword">extends</span> <span class="token class-name">ElasticsearchRepository</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0B\u9762\u7684\u6D4B\u8BD5\u9700\u8981\u5148\u6CE8\u5165EmpRepository\u5BF9\u8C61</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestEmpRepository</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">EmpRepository</span> empRepository<span class="token punctuation">;</span>
  
    <span class="token comment">// \u6D4B\u8BD5\u5185\u5BB9</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u7D22\u5F15or\u66F4\u65B0\u4E00\u6761\u8BB0\u5F55"><a class="header-anchor" href="#\u7D22\u5F15or\u66F4\u65B0\u4E00\u6761\u8BB0\u5F55" aria-hidden="true">#</a> \u7D22\u5F15or\u66F4\u65B0\u4E00\u6761\u8BB0\u5F55</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u4FDD\u5B58|\u66F4\u65B0\u4E00\u6761\u6587\u6863
 * id \u5B58\u5728\uFF0C\u66F4\u65B0
 * id \u4E0D\u5B58\u5728\uFF0C\u6DFB\u52A0
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSave</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">final</span> <span class="token class-name">Emp</span> emp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Emp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  emp<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F20\u4E09\u4E30&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setBir</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setAddress</span><span class="token punctuation">(</span><span class="token string">&quot;\u6B66\u5F53\u5C71\u5B66\u9662&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span><span class="token string">&quot;\u6B66\u4FA0\u5927\u5E08\uFF0C\u4E3A\u6C42\u60C5\uFF0C\u4E00\u751F\u4E0D\u5A36\uFF0C\u521B\u7ACB\u6B66\u5F53\u5C71\uFF0C\u521B\u7ACB\u591A\u79CD\u6B66\u529F&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  empRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5220\u9664\u4E00\u6761\u8BB0\u5F55"><a class="header-anchor" href="#\u5220\u9664\u4E00\u6761\u8BB0\u5F55" aria-hidden="true">#</a> \u5220\u9664\u4E00\u6761\u8BB0\u5F55</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u6839\u636Eid\u5220\u9664\u6587\u6863
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDelete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  empRepository<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token string">&quot;fc905d63-4a93-45ff-9256-dbe5b5f7ca1d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5220\u9664\u6240\u6709"><a class="header-anchor" href="#\u5220\u9664\u6240\u6709" aria-hidden="true">#</a> \u5220\u9664\u6240\u6709</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u5220\u9664\u6240\u6709
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDeleteAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  empRepository<span class="token punctuation">.</span><span class="token function">deleteAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u68C0\u7D22"><a class="header-anchor" href="#\u68C0\u7D22" aria-hidden="true">#</a> \u68C0\u7D22</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u68C0\u7D22
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Optional \u662F\u4E3A\u4E86\u9632\u6B62\u7A7A\u6307\u9488\u7684</span>
  <span class="token keyword">final</span> <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> optional <span class="token operator">=</span> empRepository<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span><span class="token string">&quot;fc905d63-4a93-45ff-9256-dbe5b5f7ca1d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>optional<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u6392\u5E8F\u67E5\u8BE2"><a class="header-anchor" href="#\u6392\u5E8F\u67E5\u8BE2" aria-hidden="true">#</a> \u6392\u5E8F\u67E5\u8BE2</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u67E5\u8BE2\u6240\u6709 \u6392\u5E8F
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">final</span> <span class="token class-name">Sort</span> sort <span class="token operator">=</span> <span class="token class-name">Sort</span><span class="token punctuation">.</span><span class="token function">by</span><span class="token punctuation">(</span><span class="token class-name">Sort<span class="token punctuation">.</span>Order</span><span class="token punctuation">.</span><span class="token function">asc</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> all <span class="token operator">=</span> empRepository<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span>sort<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Emp</span> emp <span class="token operator">:</span> all<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5206\u9875\u67E5\u8BE2-2"><a class="header-anchor" href="#\u5206\u9875\u67E5\u8BE2-2" aria-hidden="true">#</a> \u5206\u9875\u67E5\u8BE2</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u5206\u9875\u67E5\u8BE2
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindByPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// PageRequest.of \u53C2\u65701 \u5F53\u524D\u9875-1\uFF1B \u53C2\u65702 \u6BCF\u9875\u6570\u91CF</span>
  <span class="token keyword">final</span> <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> emps <span class="token operator">=</span> empRepository<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token class-name">PageRequest</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  emps<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u81EA\u5B9A\u4E49\u67E5\u8BE2"><a class="header-anchor" href="#\u81EA\u5B9A\u4E49\u67E5\u8BE2" aria-hidden="true">#</a> \u81EA\u5B9A\u4E49\u67E5\u8BE2</h3><p>\u81EA\u5B9A\u4E49\u65B9\u6CD5\u7684\u524D\u63D0\u662F\u6211\u4EEC\u9700\u8981\u7EE7\u627FElasticsearchRepository\u63A5\u53E3\uFF0C\u5229\u7528\u5F3A\u5927\u7684Spring Data\u6765\u5B9E\u73B0\u3002\u6BD4\u5982\uFF1A\u4F60\u7684\u65B9\u6CD5\u540D\u53EB\u505A\uFF1AfindByTitle\uFF0C\u90A3\u4E48\u5B83\u5C31\u77E5\u9053\u4F60\u662F\u6839\u636Etitle\u67E5\u8BE2\uFF0C\u7136\u540E\u81EA\u52A8\u5E2E\u4F60\u5B8C\u6210\uFF0C\u65E0\u9700\u5199\u5B9E\u73B0\u7C7B</p><table><thead><tr><th style="text-align:left;">Keyword</th><th style="text-align:left;">Sample</th><th style="text-align:left;">Elasticsearch Query String</th></tr></thead><tbody><tr><td style="text-align:left;"><strong><code>And</code></strong></td><td style="text-align:left;"><code>findBy**NameAndPrice**</code></td><td style="text-align:left;"><code>{&quot;bool&quot; : {&quot;**must**&quot; : [ {&quot;field&quot; : {&quot;name&quot; : &quot;?&quot;}}, {&quot;field&quot; : {&quot;price&quot; : &quot;?&quot;}} ]}}</code></td></tr><tr><td style="text-align:left;"><strong><code>Or</code></strong></td><td style="text-align:left;"><code>**findByNameOrPrice**</code></td><td style="text-align:left;"><code>{&quot;bool&quot; : {&quot;**should**&quot; : [ {&quot;field&quot; : {&quot;name&quot; : &quot;?&quot;}}, {&quot;field&quot; : {&quot;price&quot; : &quot;?&quot;}} ]}}</code></td></tr><tr><td style="text-align:left;"><strong><code>Is</code></strong></td><td style="text-align:left;"><code>**findBy**Name</code></td><td style="text-align:left;"><code>{&quot;bool&quot; : {&quot;**must**&quot; : {&quot;field&quot; : {&quot;name&quot; : &quot;?&quot;}}}}</code></td></tr><tr><td style="text-align:left;"><strong><code>Not</code></strong></td><td style="text-align:left;"><code>**findBy****Nam**eNot</code></td><td style="text-align:left;"><code>{&quot;bool&quot; : {&quot;**must_not**&quot; : {&quot;field&quot; : {&quot;name&quot; : &quot;?&quot;}}}}</code></td></tr><tr><td style="text-align:left;"><strong><code>Between</code></strong></td><td style="text-align:left;"><code>**findBy****Price**Between</code></td><td style="text-align:left;"><code>{&quot;bool&quot; : {&quot;**must**&quot; : {&quot;**range**&quot; : {&quot;price&quot; : {&quot;from&quot; : ?,&quot;to&quot; : ?,&quot;include_lower&quot; : true,&quot;include_upper&quot; : true}}}}}</code></td></tr><tr><td style="text-align:left;"><code>LessThanEqual</code></td><td style="text-align:left;"><code>findByPriceLessThan</code></td><td style="text-align:left;"><code>{&quot;bool&quot; : {&quot;must&quot; : {&quot;range&quot; : {&quot;price&quot; : {&quot;from&quot; : null,&quot;to&quot; : ?,&quot;include_lower&quot; : true,&quot;include_upper&quot; : true}}}}}</code></td></tr><tr><td style="text-align:left;"><code>GreaterThanEqual</code></td><td style="text-align:left;"><code>findByPriceGreaterThan</code></td><td style="text-align:left;"><code>{&quot;bool&quot; : {&quot;must&quot; : {&quot;range&quot; : {&quot;price&quot; : {&quot;from&quot; : ?,&quot;to&quot; : null,&quot;include_lower&quot; : true,&quot;include_upper&quot; : true}}}}}</code></td></tr><tr><td style="text-align:left;"><code>Before</code></td><td style="text-align:left;"><code>findByPriceBefore</code></td><td style="text-align:left;"><code>{&quot;bool&quot; : {&quot;must&quot; : {&quot;range&quot; : {&quot;price&quot; : {&quot;from&quot; : null,&quot;to&quot; : ?,&quot;include_lower&quot; : true,&quot;include_upper&quot; : true}}}}}</code></td></tr><tr><td style="text-align:left;"><code>After</code></td><td style="text-align:left;"><code>findByPriceAfter</code></td><td style="text-align:left;"><code>{&quot;bool&quot; : {&quot;must&quot; : {&quot;range&quot; : {&quot;price&quot; : {&quot;from&quot; : ?,&quot;to&quot; : null,&quot;include_lower&quot; : true,&quot;include_upper&quot; : true}}}}}</code></td></tr><tr><td style="text-align:left;"><code>Like</code></td><td style="text-align:left;"><code>findByNameLike</code></td><td style="text-align:left;"><code>{&quot;bool&quot; : {&quot;must&quot; : {&quot;field&quot; : {&quot;name&quot; : {&quot;query&quot; : &quot;?*&quot;,&quot;analyze_wildcard&quot; : true}}}}}</code></td></tr><tr><td style="text-align:left;"><code>StartingWith</code></td><td style="text-align:left;"><code>findByNameStartingWith</code></td><td style="text-align:left;"><code>{&quot;bool&quot; : {&quot;must&quot; : {&quot;field&quot; : {&quot;name&quot; : {&quot;query&quot; : &quot;?*&quot;,&quot;analyze_wildcard&quot; : true}}}}}</code></td></tr><tr><td style="text-align:left;"><code>EndingWith</code></td><td style="text-align:left;"><code>findByNameEndingWith</code></td><td style="text-align:left;"><code>{&quot;bool&quot; : {&quot;must&quot; : {&quot;field&quot; : {&quot;name&quot; : {&quot;query&quot; : &quot;*?&quot;,&quot;analyze_wildcard&quot; : true}}}}}</code></td></tr><tr><td style="text-align:left;"><code>Contains/Containing</code></td><td style="text-align:left;"><code>findByNameContaining</code></td><td style="text-align:left;"><code>{&quot;bool&quot; : {&quot;must&quot; : {&quot;field&quot; : {&quot;name&quot; : {&quot;query&quot; : &quot;**?**&quot;,&quot;analyze_wildcard&quot; : true}}}}}</code></td></tr><tr><td style="text-align:left;"><code>In</code></td><td style="text-align:left;"><code>findByNameIn(Collection&lt;String&gt;names)</code></td><td style="text-align:left;"><code>{&quot;bool&quot; : {&quot;must&quot; : {&quot;bool&quot; : {&quot;should&quot; : [ {&quot;field&quot; : {&quot;name&quot; : &quot;?&quot;}}, {&quot;field&quot; : {&quot;name&quot; : &quot;?&quot;}} ]}}}}</code></td></tr><tr><td style="text-align:left;"><code>NotIn</code></td><td style="text-align:left;"><code>findByNameNotIn(Collection&lt;String&gt;names)</code></td><td style="text-align:left;"><code>{&quot;bool&quot; : {&quot;must_not&quot; : {&quot;bool&quot; : {&quot;should&quot; : {&quot;field&quot; : {&quot;name&quot; : &quot;?&quot;}}}}}}</code></td></tr><tr><td style="text-align:left;"><code>Near</code></td><td style="text-align:left;"><code>findByStoreNear</code></td><td style="text-align:left;"><code>Not Supported Yet !</code></td></tr><tr><td style="text-align:left;"><code>True</code></td><td style="text-align:left;"><code>findByAvailableTrue</code></td><td style="text-align:left;"><code>{&quot;bool&quot; : {&quot;must&quot; : {&quot;field&quot; : {&quot;available&quot; : true}}}}</code></td></tr><tr><td style="text-align:left;"><code>False</code></td><td style="text-align:left;"><code>findByAvailableFalse</code></td><td style="text-align:left;"><code>{&quot;bool&quot; : {&quot;must&quot; : {&quot;field&quot; : {&quot;available&quot; : false}}}}</code></td></tr><tr><td style="text-align:left;"><strong><code>OrderBy</code></strong></td><td style="text-align:left;"><strong><code>findByAvailableTrueOrderByNameDesc</code></strong></td><td style="text-align:left;"><code>{&quot;sort&quot; : [{ &quot;name&quot; : {&quot;order&quot; : &quot;desc&quot;} }],&quot;bool&quot; : {&quot;must&quot; : {&quot;field&quot; : {&quot;available&quot; : true}}}}</code></td></tr></tbody></table><h4 id="\u6269\u5C55emprepository"><a class="header-anchor" href="#\u6269\u5C55emprepository" aria-hidden="true">#</a> \u6269\u5C55EmpRepository</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">EmpRepository</span> <span class="token keyword">extends</span> <span class="token class-name">ElasticsearchRepository</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token comment">// \u6839\u636E\u59D3\u540D\u67E5\u8BE2</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> <span class="token function">findByName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// \u6839\u636E\u5E74\u9F84\u67E5\u8BE2</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> <span class="token function">findByAge</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// \u6839\u636E\u59D3\u540D\u548C\u5730\u5740\u67E5\u8BE2</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> <span class="token function">findByNameAndAddress</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> address<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u6D4B\u8BD5\u81EA\u5B9A\u4E49\u67E5\u8BE2"><a class="header-anchor" href="#\u6D4B\u8BD5\u81EA\u5B9A\u4E49\u67E5\u8BE2" aria-hidden="true">#</a> \u6D4B\u8BD5\u81EA\u5B9A\u4E49\u67E5\u8BE2</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u57FA\u7840\u67E5\u8BE2 \u6839\u636E\u59D3\u540D \u59D3\u540D\u548C\u5E74\u9F84 \u5730\u5740 \u7B49
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindByName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> names <span class="token operator">=</span> empRepository<span class="token punctuation">.</span><span class="token function">findByName</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F20\u4E09\u4E30&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  names<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> ages <span class="token operator">=</span> empRepository<span class="token punctuation">.</span><span class="token function">findByAge</span><span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ages<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Emp</span><span class="token punctuation">&gt;</span></span> nameAndAddress <span class="token operator">=</span> empRepository<span class="token punctuation">.</span><span class="token function">findByNameAndAddress</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F20\u4E09\u4E30&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u6B66\u5F53\u5C71&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  nameAndAddress<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u9AD8\u4EAE\u67E5\u8BE2-2"><a class="header-anchor" href="#\u9AD8\u4EAE\u67E5\u8BE2-2" aria-hidden="true">#</a> \u9AD8\u4EAE\u67E5\u8BE2</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u590D\u6742\u67E5\u8BE2RestHighLevelClient \u9AD8\u4EAE\u67E5\u8BE2
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSearchQueryHighlight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u914D\u7F6E\u641C\u7D22\u53C2\u6570</span>
  <span class="token keyword">final</span> <span class="token class-name">SearchRequest</span> searchRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SearchRequest</span><span class="token punctuation">(</span><span class="token string">&quot;ems&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// \u521B\u5EFA\u641C\u7D22\u5BF9\u8C61</span>
  <span class="token keyword">final</span> <span class="token class-name">SearchSourceBuilder</span> searchSourceBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SearchSourceBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">HighlightBuilder</span> highlightBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HighlightBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  highlightBuilder<span class="token punctuation">.</span><span class="token function">field</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">requireFieldMatch</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">preTags</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;span style=&#39;color:red;&#39;&gt;&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">postTags</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/span&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  searchSourceBuilder<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token class-name">QueryBuilders</span><span class="token punctuation">.</span><span class="token function">termQuery</span><span class="token punctuation">(</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;\u6B66\u4FA0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//\u8BBE\u7F6E\u67E5\u8BE2\u6761\u4EF6</span>
    <span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token class-name">SortOrder</span><span class="token punctuation">.</span>DESC<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token comment">//\u8D77\u59CB\u9875\u6570\uFF08\u5F53\u524D\u9875-1\uFF09</span>
    <span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token comment">//\u6BCF\u9875\u5C55\u793A\u6761\u6570</span>
    <span class="token punctuation">.</span><span class="token function">highlighter</span><span class="token punctuation">(</span>highlightBuilder<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// \u8BBE\u7F6E\u9AD8\u4EAE</span>
  searchRequest<span class="token punctuation">.</span><span class="token function">types</span><span class="token punctuation">(</span><span class="token string">&quot;emp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span>searchSourceBuilder<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// \u6267\u884C\u641C\u7D22</span>
  <span class="token keyword">final</span> <span class="token class-name">SearchResponse</span> searchResponse <span class="token operator">=</span> restHighLevelClient<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>searchRequest<span class="token punctuation">,</span> <span class="token class-name">RequestOptions</span><span class="token punctuation">.</span>DEFAULT<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u603B\u6761\u6570\uFF1A&quot;</span> <span class="token operator">+</span> searchResponse<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTotalHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u6700\u5927\u5F97\u5206\uFF1A&quot;</span> <span class="token operator">+</span> searchResponse<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMaxScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u8BBE\u5B9A\u6392\u5E8F\u7684\u4E4B\u540E\uFF0C\u5F97\u5206\u5C31\u4E3ANaN</span>

  <span class="token keyword">final</span> <span class="token class-name">SearchHit</span><span class="token punctuation">[</span><span class="token punctuation">]</span> hits <span class="token operator">=</span> searchResponse<span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">SearchHit</span> hit <span class="token operator">:</span> hits<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>hit<span class="token punctuation">.</span><span class="token function">getSourceAsString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="es\u96C6\u7FA4"><a class="header-anchor" href="#es\u96C6\u7FA4" aria-hidden="true">#</a> es\u96C6\u7FA4</h2><h3 id="\u76F8\u5173\u6982\u5FF5"><a class="header-anchor" href="#\u76F8\u5173\u6982\u5FF5" aria-hidden="true">#</a> \u76F8\u5173\u6982\u5FF5</h3><h4 id="\u96C6\u7FA4"><a class="header-anchor" href="#\u96C6\u7FA4" aria-hidden="true">#</a> \u96C6\u7FA4</h4><p>\u96C6\u7FA4\u8981\u89E3\u51B3\u7684\u95EE\u9898\uFF1A</p><ul><li>\u5355\u8282\u70B9\u538B\u529B\u95EE\u9898 <ul><li>\u5E76\u53D1\u538B\u529B</li><li>\u7269\u7406\u8D44\u6E90\u7684\u4E0A\u9650\u538B\u529B</li></ul></li><li>\u6570\u636E\u5197\u4F59\u5907\u4EFD\u7684\u80FD\u529B</li></ul><blockquote><p>\u4E00\u4E2A\u96C6\u7FA4\u5C31\u662F\u7531\u4E00\u4E2A\u6216\u8005\u591A\u4E2A\u8282\u70B9\u7EC4\u7EC7\u5728\u4E00\u8D77\uFF0C\u5B83\u4EEC\u5171\u540C\u6301\u6709\u4F60\u6574\u4E2A\u7684\u6570\u636E\uFF0C\u5E76\u4E00\u8D77\u63D0\u4F9B\u7D22\u5F15\u548C\u641C\u7D22\u529F\u80FD\uFF0C\u4E00\u4E2A\u96C6\u7FA4\u7531\u4E00\u4E2A\u552F\u4E00\u7684\u540D\u5B57\u6807\u8BC6\uFF0C\u8FD9\u4E2A\u540D\u5B57\u9ED8\u8BA4\u5C31\u662Felasticsearch\u3002\u8FD9\u4E2A\u540D\u5B57\u662F\u91CD\u8981\u7684\uFF0C\u56E0\u4E3A\u4E00\u4E2A\u8282\u70B9\u53EA\u80FD\u901A\u8FC7\u6307\u5B9A\u67D0\u4E2A\u96C6\u7FA4\u7684\u540D\u5B57\uFF0C\u6765\u52A0\u5165\u8FD9\u4E2A\u96C6\u7FA4\uFF0C\u5728\u4EA7\u54C1\u73AF\u5883\u4E2D\u663E\u5F0F\u7684\u8BBE\u5B9A\u8FD9\u4E2A\u540D\u5B57\u662F\u4E00\u4E2A\u597D\u4E60\u60EF\uFF0C\u4F46\u662F\u4F7F\u7528\u9ED8\u8BA4\u503C\u6765\u8FDB\u884C\u6D4B\u8BD5/\u5F00\u53D1\u4E5F\u662F\u4E0D\u9519\u7684\u3002</p></blockquote><h4 id="\u8282\u70B9"><a class="header-anchor" href="#\u8282\u70B9" aria-hidden="true">#</a> \u8282\u70B9</h4><blockquote><p>\u4E00\u4E2A\u8282\u70B9\u662F\u4F60\u96C6\u7FA4\u4E2D\u7684\u4E00\u4E2A\u670D\u52A1\u5668\uFF0C\u4F5C\u4E3A\u96C6\u7FA4\u7684\u4E00\u90E8\u5206\uFF0C\u5B83\u5B58\u50A8\u4F60\u7684\u6570\u636E\uFF0C\u53C2\u4E0E\u96C6\u7FA4\u7684\u7D22\u5F15\u548C\u641C\u7D22\u529F\u80FD\u3002\u548C\u96C6\u7FA4\u7C7B\u4F3C\uFF0C\u4E00\u4E2A\u8282\u70B9\u4E5F\u662F\u7531\u4E00\u4E2A\u540D\u5B57\u6765\u6807\u8BC6\u7684\uFF0C\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u8FD9\u4E2A\u540D\u5B57\u662F\u4E00\u4E2A\u968F\u673A\u7684\u6F2B\u5A01\u6F2B\u753B\u89D2\u8272\u7684\u540D\u5B57\uFF0C\u8FD9\u4E2A\u540D\u5B57\u5728\u542F\u52A8\u7684\u65F6\u5019\u8D4B\u4E88\u8282\u70B9\u3002\u8FD9\u4E2A\u540D\u5B57\u5BF9\u4E8E\u7BA1\u7406\u5DE5\u4F5C\u6765\u8BF4\u633A\u91CD\u8981\u7684\uFF0C\u56E0\u4E3A\u5728\u8FD9\u4E2A\u7BA1\u7406\u8FC7\u7A0B\u4E2D\uFF0C\u4F60\u4F1A\u53BB\u786E\u5B9A\u7F51\u7EDC\u4E2D\u7684\u54EA\u4E9B\u670D\u52A1\u5668\u5BF9\u5E94\u4E8Eelasticsearch\u96C6\u7FA4\u4E2D\u7684\u54EA\u4E9B\u8282\u70B9</p></blockquote><blockquote><p>\u4E00\u4E2A\u8282\u70B9\u53EF\u4EE5\u901A\u8FC7\u914D\u7F6E\u96C6\u7FA4\u540D\u79F0\u7684\u65B9\u5F0F\u6765\u52A0\u5165\u4E00\u4E2A\u6307\u5B9A\u7684\u96C6\u7FA4\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u6BCF\u4E2A\u8282\u70B9\u90FD\u4F1A\u88AB\u5B89\u6392\u52A0\u5165\u5230\u4E00\u4E2A\u53EB\u505A&quot;elasticsearch&quot;\u7684\u96C6\u7FA4\u4E2D\uFF0C\u8FD9\u610F\u5473\u7740\uFF0C\u5982\u679C\u4F60\u5728\u4F60\u7684\u7F51\u7EDC\u4E2D\u542F\u52A8\u4E86\u82E5\u5E72\u4E2A\u8282\u70B9\uFF0C\u5E76\u5047\u5B9A\u4ED6\u4EEC\u80FD\u591F\u76F8\u4E92\u53D1\u73B0\u5F7C\u6B64\uFF0C\u4ED6\u4EEC\u5C06\u81EA\u52A8\u7684\u5F62\u6210\u5E76\u52A0\u5165\u5230\u4E00\u4E2A\u53EB\u505A&quot;elasticsearch&quot;\u7684\u96C6\u7FA4\u4E2D\u3002</p></blockquote><blockquote><p>\u5728\u4E00\u4E2A\u96C6\u7FA4\u91CC\uFF0C\u53EA\u8981\u4F60\u60F3\uFF0C\u53EF\u4EE5\u62E5\u6709\u4EFB\u610F\u591A\u4E2A\u8282\u70B9\u3002\u800C\u4E14\uFF0C\u5982\u679C\u5F53\u524D\u4F60\u7684\u7F51\u7EDC\u4E2D\u6CA1\u6709\u8FD0\u884C\u4EFB\u4F55elasticseach\u8282\u70B9\uFF0C\u8FD9\u65F6\u542F\u52A8\u4E00\u4E2A\u8282\u70B9\uFF0C\u4F1A\u9ED8\u8BA4\u521B\u5EFA\u5E76\u52A0\u5165\u5230\u4E00\u4E2A\u53EB\u505A&quot;elasticsearch&quot;\u7684\u96C6\u7FA4\u4E2D</p></blockquote><h4 id="\u5206\u7247\u548C\u590D\u5236-shards-replicas"><a class="header-anchor" href="#\u5206\u7247\u548C\u590D\u5236-shards-replicas" aria-hidden="true">#</a> \u5206\u7247\u548C\u590D\u5236(shards &amp; replicas)</h4><blockquote><p>\u4E00\u4E2A\u7D22\u5F15\u53EF\u4EE5\u5B58\u50A8\u8D85\u51FA\u5355\u4E2A\u8282\u70B9\u786C\u4EF6\u9650\u5236\u7684\u5927\u91CF\u6570\u636E\u3002\u6BD4\u5982\uFF0C\u4E00\u4E2A\u5177\u670910\u4EBF\u6587\u6863\u7684\u7D22\u5F15\u5360\u636E1tb\u7684\u78C1\u76D8\u7A7A\u95F4\uFF0C\u800C\u4EFB\u4E00\u8282\u70B9\u90FD\u6CA1\u6709\u8FD9\u6837\u5927\u7684\u78C1\u76D8\u7A7A\u95F4\uFF0C\u6216\u8005\u5355\u4E2A\u8282\u70B9\u5904\u7406\u7D22\u5F15\u8BF7\u6C42\uFF0C\u54CD\u5E94\u592A\u6162\u3002\u4E3A\u4E86\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\uFF0Celasticsearch\u63D0\u4F9B\u4E86\u5C06\u7D22\u5F15\u5206\u6210\u591A\u4EFD\u7684\u80FD\u529B\uFF0C\u8FD9\u4E9B\u4EFD\u5C31\u53EB\u505A\u5206\u7247\u3002\u5F53\u4F60\u521B\u5EFA\u4E00\u4E2A\u7D22\u5F15\u7684\u65F6\u5019\uFF0C\u4F60\u53EF\u4EE5\u6307\u5B9A\u4F60\u60F3\u8981\u7684\u5206\u7247\u7684\u6570\u91CF\u3002\u6BCF\u4E2A\u5206\u7247\u672C\u8EAB\u4E5F\u662F\u4E00\u4E2A\u529F\u80FD\u5B8C\u5584\u5E76\u4E14\u72EC\u7ACB\u7684\u201C\u7D22\u5F15\u201D\uFF0C\u8FD9\u4E2A\u201C\u7D22\u5F15\u201D\u53EF\u4EE5\u88AB\u653E\u7F6E\u5230\u96C6\u7FA4\u4E2D\u7684\u4EFB\u4F55\u8282\u70B9\u4E0A\u3002\u5206\u7247\u4E4B\u6240\u4EE5\u91CD\u8981\uFF0C\u4E3B\u8981\u6709\u4E24\u4E2A\u65B9\u9762\uFF1A\u5B83\u5141\u8BB8\u4F60\u6C34\u5E73\u5207\u5206\u4F60\u7684\u5185\u5BB9\u5377\uFF0C\u5B83\u5141\u8BB8\u901A\u8FC7\u5206\u7247\u6765\u5206\u5E03\u548C\u5E76\u6267\u884C\u64CD\u4F5C\u6765\u5E94\u5BF9\u65E5\u76CA\u589E\u957F\u7684\u6267\u884C\u91CF</p></blockquote><blockquote><p>\u5141\u8BB8\u4F60\u6C34\u5E73\u5206\u5272/\u6269\u5C55\u4F60\u7684\u5185\u5BB9\u5BB9\u91CF\u5141\u8BB8\u4F60\u5728\u5206\u7247(\u6F5C\u5728\u7684\uFF0C\u4F4D\u4E8E\u591A\u4E2A\u8282\u70B9\u4E0A)\u4E4B\u4E0A\u8FDB\u884C\u5206\u5E03\u5F0F\u7684\u3001\u5E76\u884C\u7684\u64CD\u4F5C\uFF0C\u8FDB\u800C\u63D0\u9AD8\u6027\u80FD/\u541E\u5410\u91CF\u3002\u81F3\u4E8E\u4E00\u4E2A\u5206\u7247\u600E\u6837\u5206\u5E03\uFF0C\u5B83\u7684\u6587\u6863\u600E\u4E48\u6837\u805A\u5408\u56DE\u641C\u7D22\u8BF7\u6C42\uFF0C\u662F\u5B8C\u5168\u7531elasticsearch\u7BA1\u7406\u7684\uFF0C\u5BF9\u4E8E\u4F5C\u4E3A\u7528\u6237\u6765\u8BF4\uFF0C\u8FD9\u4E9B\u90FD\u662F\u900F\u660E\u7684</p></blockquote><blockquote><p>\u5728\u4E00\u4E2A\u7F51\u7EDC/\u4E91\u7684\u73AF\u5883\u91CC\uFF0C\u5931\u8D25\u968F\u65F6\u90FD\u662F\u53EF\u80FD\u53D1\u751F\uFF0C\u5728\u67D0\u4E2A\u5206\u7247/\u8282\u70B9\u4E0D\u77E5\u600E\u4E48\u5C31\u5904\u4E8E\u79BB\u7EBF\u72B6\u6001\uFF0C\u6216\u8005\u7531\u4E8E\u4EFB\u4F55\u539F\u56E0\u6D88\u5931\u4E86\u3002\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u6709\u4E00\u4E2A\u6545\u969C\u8F6C\u79FB\u673A\u5236\u662F\u975E\u5E38\u6709\u7528\u5E76\u4E14\u662F\u5F3A\u70C8\u63A8\u8350\u7684\u3002\u4E3A\u6B64\u76EE\u7684\uFF0Celasticsearch\u5141\u8BB8\u4F60\u521B\u5EFA\u5206\u7247\u7684\u4E00\u4EFD\u6216\u8005\u591A\u4EFD\u62F7\u8D1D\uFF0C\u8FD9\u4E9B\u62F7\u8D1D\u53EB\u505A\u590D\u5236\u5206\u7247\uFF0C\u6216\u8005\u800C\u76F4\u63A5\u53EB\u505A\u590D\u5236\u3002\u590D\u5236\u4E4B\u6240\u4EE5\u91CD\u8981\uFF0C\u4E3B\u8981\u7531\u4E24\u4E2A\u65B9\u9762\u7684\u539F\u56E0\uFF1A\u4E00\u65E6\u5206\u7247\u4E22\u5931\uFF0C\u5C31\u4E0D\u80FD\u7EC4\u6210\u5B8C\u6574\u6570\u636E\uFF0C\u6240\u4EE5\u9700\u8981\u5C06\u5206\u7247\u590D\u5236\uFF1B\u590D\u5236\u5206\u7247\u4E0D\u80FD\u548C\u5206\u7247\u6E90\u5728\u540C\u4E00\u4E2A\u670D\u52A1\u5668\u4E0A</p></blockquote><blockquote><p>\u5728\u5206\u7247/\u8282\u70B9\u5931\u8D25\u7684\u60C5\u51B5\u4E0B\uFF0C\u63D0\u4F9B\u4E86\u9AD8\u53EF\u7528\u6027\u3002\u56E0\u4E3A\u8FD9\u4E2A\u539F\u56E0\uFF0C\u6CE8\u610F\u5230\u590D\u5236\u5206\u7247\u4ECE\u4E0D\u4E0E\u539F/\u4E3B\u8981(origina/primary)\u5206\u7247\u7F6E\u4E8E\u540C\u4E00\u8282\u70B9\u4E0A\u662F\u975E\u5E38\u91CD\u8981\u7684\u3002\u6269\u5C55\u4F60\u7684\u641C\u7D20\u91CF/\u541E\u5410\u91CF\uFF0C\u56E0\u4E3A\u641C\u7D22\u53EF\u4EE5\u5728\u6240\u6709\u7684\u590D\u5236\u4E0A\u5E76\u884C\u8FD0\u884C</p></blockquote><blockquote><p>\u603B\u4E4B\uFF0C\u6BCF\u4E2A\u7D22\u5F15\u53EF\u4EE5\u88AB\u5206\u6210\u591A\u4E2A\u5206\u7247\uFF0C\u4E00\u4E2A\u7D22\u5F15\u4E5F\u53EF\u4EE5\u88AB\u590D\u52360\u6B21(\u610F\u601D\u662F\u6CA1\u6709\u590D\u5236)\u6216\u591A\u6B21\u3002\u4E00\u65E6\u590D\u5236\u4E86\uFF0C\u6BCF\u4E2A\u7D22\u5F15\u5C31\u6709\u4E86\u4E3B\u5206\u7247(\u4F5C\u4E3A\u590D\u5236\u6E90\u548C\u539F\u6765\u7684\u5206\u7247)\u548C\u8D4B\u503C\u5206\u7247(\u4E3B\u5206\u7247\u7684\u62F7\u8D1D)\u4E4B\u522B\u3002\u5206\u7247\u548C\u590D\u5236\u7684\u6570\u91CF\u53EF\u4EE5\u5728\u7D22\u5F15\u521B\u5EFA\u7684\u65F6\u5019\u6307\u5B9A\u3002\u5728\u7D22\u5F15\u521B\u5EFA\u4E4B\u540E\uFF0C\u4F60\u53EF\u4EE5\u5728\u4EFB\u4F55\u65F6\u5019\u52A8\u6001\u7684\u6539\u53D8\u590D\u5236\u6570\u91CF\uFF0C\u4F46\u662F\u4E0D\u80FD\u6539\u53D8\u5206\u7247\u7684\u6570\u91CF\u3002</p></blockquote><blockquote><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0Celasticsearch\u4E2D\u7684\u6BCF\u4E2A\u7D22\u5F15\u88AB\u5206\u72475\u4E2A\u4E3B\u5206\u7247\u548C1\u4E2A\u590D\u5236\uFF0C\u8FD9\u610F\u5473\u7740\uFF0C\u5982\u679C\u4F60\u7684\u96C6\u7FA4\u4E2D\u81F3\u5C11\u6709\u4E24\u4E2A\u8282\u70B9\uFF0C\u4F60\u7684\u7D22\u5F15\u5C06\u4F1A\u67095\u4E2A\u4E3B\u5206\u7247\u548C\u53E6\u59165\u4E2A\u590D\u5236\u5206\u7247(1\u4E2A\u5B8C\u5168\u62F7\u8D1D)\uFF0C\u8FD9\u6837\u7684\u8BDD\u6BCF\u4E2A\u7D22\u5F15\u603B\u5171\u5C31\u670910\u5206\u7247\u3002\u4E00\u4E2A\u7D22\u5F15\u7684\u591A\u4E2A\u5206\u7247\u53EF\u4EE5\u5B58\u653E\u5728\u96C6\u7FA4\u7684\u4E00\u53F0\u4E3B\u673A\u4E0A\uFF0C\u4E5F\u53EF\u4EE5\u5B58\u653E\u5728\u591A\u53F0\u4E3B\u673A\u4E0A\uFF0C\u8FD9\u53D6\u51B3\u4E8E\u4F60\u7684\u96C6\u7FA4\u673A\u5668\u6570\u91CF\u3002\u4E3B\u5206\u7247\u548C\u590D\u5236\u5206\u7247\u7684\u5177\u4F53\u4F4D\u7F6E\u662F\u7531es\u5185\u5728\u7684\u7B56\u7565\u9501\u51B3\u5B9A\u7684</p></blockquote><h3 id="\u96C6\u7FA4\u67B6\u6784\u56FE"><a class="header-anchor" href="#\u96C6\u7FA4\u67B6\u6784\u56FE" aria-hidden="true">#</a> \u96C6\u7FA4\u67B6\u6784\u56FE</h3><p><strong>\u5982\u679C\u6211\u4EEC\u660E\u786E\u7684\u544A\u8BC9\u96C6\u7FA4\u7531\u591A\u4E2A\u673A\u5668\u7684\u8BDD\uFF0C\u5F53\u53EA\u6709\u4E00\u4E2A\u673A\u5668\u7684\u65F6\u5019\uFF0C\u96C6\u7FA4\u5C31\u4E0D\u4F1A\u5411\u5916\u63D0\u4F9B\u670D\u52A1\u4E86\uFF0C\u56E0\u4E3A\u8981\u4FDD\u8BC1\u6570\u636E\u7684\u5B8C\u6574\u6027</strong></p><p>\u642D\u5EFA\u96C6\u7FA4\u6700\u597D\u662F\u5947\u6570\u4E2A\u4E3A\u4E3B</p><p><img src="`+D+`" alt="image-20211215054815422"></p><p>\u96C6\u7FA4\u4E2D\u867D\u7136\u5B58\u5728master\u548Cslave\u4E4B\u5206\uFF0C\u4F46\u662Fmaster\u53EA\u662F\u63D0\u4F9B\u8C03\u5EA6\u670D\u52A1\uFF0C\u5E76\u6CA1\u6709\u4E3B\u6B21\u4E4B\u5206\uFF0C\u6BCF\u4E00\u53F0\u90FD\u5BF9\u5916\u63D0\u4F9B\u670D\u52A1\uFF0C\u800C\u4E14master\u662Fes\u81EA\u8EAB\u81EA\u5DF1\u51B3\u5B9A\u7684\uFF0C\u5E76\u4E0D\u662F\u901A\u8FC7\u6211\u4EEC</p><h3 id="\u5FEB\u901F\u642D\u5EFA\u96C6\u7FA4"><a class="header-anchor" href="#\u5FEB\u901F\u642D\u5EFA\u96C6\u7FA4" aria-hidden="true">#</a> \u5FEB\u901F\u642D\u5EFA\u96C6\u7FA4</h3><ol><li>\u5C06\u539F\u6709\u7684es\u5B89\u88C5\u5305\u590D\u5236\u4E09\u4EFD</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">cp</span> -r elasticsearch-6.8.0/ node-1/
<span class="token function">cp</span> -r elasticsearch-6.8.0/ node-2/
<span class="token function">cp</span> -r elasticsearch-6.8.0/ node-3/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>\u5220\u9664\u590D\u5236\u76EE\u5F55\u4E2D\u7684data\u76EE\u5F55</li></ol><blockquote><p>\u6CE8\u610F\uFF1A\u7531\u4E8E\u590D\u5236\u76EE\u5F55\u4E4B\u95F4\u4F7F\u7528\u8FC7\u56E0\u6B64\u9700\u8981\u5728\u521B\u5EFA\u96C6\u7FA4\u7684\u65F6\u5019\u5C06\u539F\u6765\u7684\u6570\u636E\u5220\u9664</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">rm</span> -rf node-1/data
<span class="token function">rm</span> -rf node-2/data
<span class="token function">rm</span> -rf node-3/data
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>\u7F16\u8F91master\u6587\u4EF6\u5939\u4E2Dconfig\u76EE\u5F55\u4E2D\u7684jvm.options\u6587\u4EF6\u8C03\u6574\u542F\u52A8\u5185\u5B58</li></ol><p>\u56E0\u4E3A\u5355\u4E2A\u673A\u5668\u542F\u52A8\u5185\u5B58\u4E0D\u591F\u7528\uFF0C\u73B0\u5728\u7684\u60C5\u51B5\u662F\uFF0C\u4E00\u4E2AG\u7684\u5185\u5BB9\u53EA\u80FD\u542F\u52A8\u4E00\u4E2Aes\uFF0C\u6240\u4EE5\u6211\u4EEC\u628A\u5185\u5B58\u8C03\u5C0F</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> node-1/config/jvm.options
<span class="token function">vim</span> node-2/config/jvm.options
<span class="token function">vim</span> node-3/config/jvm.options
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5206\u522B\u52A0\u5165</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>-Xms512m -Xmx512m
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6839\u636E\u673A\u5668\u91CF\u529B\u800C\u884C\uFF0C\u8FD9\u91CC\u8C03\u6574\u5230300m</p><p><img src="`+I+`" alt="image-20211215063648619"></p><ol start="4"><li>\u5206\u522B\u4FEE\u6539\u4E09\u4E2A\u6587\u4EF6\u5939\u4E2Dconfig\u76EE\u5F55\u4E2D\u7684elasticsearch.yml\u6587\u4EF6</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> node-1/config/elasticsearch.yml
<span class="token function">vim</span> node-2/config/elasticsearch.yml
<span class="token function">vim</span> node-3/config/elasticsearch.yml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5206\u522B\u52A0\u5165\u5982\u4E0B\u914D\u7F6E\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>cluster.name: my-es						<span class="token comment">## \u96C6\u7FA4\u540D\u79F0\uFF08\u96C6\u7FA4\u540D\u79F0\u5FC5\u987B\u4E00\u81F4\uFF09</span>
node.name: node-01							<span class="token comment">## \u8282\u70B9\u540D\u79F0\uFF08\u8282\u70B9\u540D\u79F0\u4E0D\u80FD\u4E00\u81F4\uFF09</span>
network.host: <span class="token number">0.0</span>.0.0					<span class="token comment">## \u76D1\u542C\u5730\u5740\uFF08\u5FC5\u987B\u5F00\u542F\u8FDC\u7A0B\u6743\u9650\uFF0C\u5173\u95ED\u9632\u706B\u5899\uFF09</span>
http.port: <span class="token number">9201</span>								<span class="token comment">## \u76D1\u542C\u7AEF\u53E3\uFF08\u5728\u4E00\u53F0\u673A\u5668\u65F6\u670D\u52A1\u7AEF\u53E3\u4E0D\u80FD\u4E00\u81F4\uFF09</span>
discovery.zen.ping_unicase.hosts: <span class="token punctuation">[</span><span class="token string">&quot;172.16.187.15:9302&quot;</span>,<span class="token string">&quot;172.16.187.15:9303&quot;</span><span class="token punctuation">]</span>		<span class="token comment">## \u53E6\u5916\u4E24\u4E2A\u8282\u70B9\u7684ip</span>
gateway.recover_after_nodes: <span class="token number">3</span>			<span class="token comment">## \u96C6\u7FA4\u53EF\u505Amaster\u7684\u6700\u5C0F\u8282\u70B9\u6570</span>
transport.tcp.port: <span class="token number">9301</span>			<span class="token comment">## \u96C6\u7FA4tcp\u7AEF\u53E3\uFF08\u5728\u4E00\u53F0\u673A\u5668\u642D\u5EFA\u5FC5\u987B\u4FEE\u6539\uFF09</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>\u542F\u52A8\u591A\u4E2Aes</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>./node-1/bin/elasticsearch -d
./node-2/bin/elasticsearch -d
./node-3/bin/elasticsearch -d
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li>\u67E5\u770B\u8282\u70B9\u72B6\u6001</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">curl</span> http://172.16.187.15:9201
<span class="token function">curl</span> http://172.16.187.15:9202
<span class="token function">curl</span> http://172.16.187.15:9203
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="7"><li>\u67E5\u770B\u96C6\u7FA4\u5065\u5EB7\u72B6\u6001</li></ol><p>\u5728\u4EFB\u610F\u4E00\u4E2A\u8282\u70B9\u4E0A\uFF1A</p><div class="language-http ext-http line-numbers-mode"><pre class="language-http"><code><span class="token header"><span class="token header-name keyword">http</span><span class="token punctuation">:</span><span class="token header-value">//172.16.187.15:9201/_cat/health?v</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="`+O+'" alt="image-20211215070644453"></p><ol start="8"><li>\u53EF\u4EE5\u4FEE\u6539kibana\u8FDE\u63A5\u5230es\u96C6\u7FA4\u4E0A</li></ol><p><img src="'+H+`" alt="image-20211215070947515"></p><h3 id="\u5B89\u88C5head\u63D2\u4EF6"><a class="header-anchor" href="#\u5B89\u88C5head\u63D2\u4EF6" aria-hidden="true">#</a> \u5B89\u88C5head\u63D2\u4EF6</h3><p>\u5982\u679C\u60F3\u5177\u4F53\u770B\u96C6\u7FA4\u5206\u7247\u7684\u72B6\u6001\uFF0C\u53EF\u4EE5\u5B89\u88C5\u63D2\u4EF6</p><ol><li>\u8BBF\u95EEgithub\u7F51\u7AD9</li></ol><p>\u641C\u7D22\uFF1Aelasticsearch-head \u63D2\u4EF6</p><ol start="2"><li>\u5B89\u88C5git</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum <span class="token function">install</span> <span class="token function">git</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>\u5C06elasticsearch-head\u4E0B\u8F7D\u5230\u672C\u5730</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> clone git@github.com:mobz/elasticsearch-head.git
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="4"><li>\u5B89\u88C5nodejs</li></ol><blockquote><p>\u6CE8\u610F\uFF1A\u6CA1\u6709wget\u7684\u9700\u8981\u5148\u5B89\u88C5</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum <span class="token function">install</span> -y <span class="token function">wget</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></blockquote><ol start="5"><li>\u89E3\u538Bnodejs</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>xz -d node-xxxxxxx.tar.xz
<span class="token function">tar</span> -xvf node-xxxxx.tar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li>\u914D\u7F6E\u73AF\u5883\u53D8\u91CF</li></ol><p>\u79FB\u52A8\u5230usr\u76EE\u5F55\u4E0B</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">mv</span> node-xxxxx nodejs
<span class="token function">mv</span> nodejs /usr/nodejs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u914D\u7F6E\u73AF\u5883\u53D8\u91CF</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> /etc/profile
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6DFB\u52A0</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">NODE_HOME</span><span class="token operator">=</span>/usr/nodejs
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$NODE_HOME</span>/bin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="7"><li>\u8FDB\u5165elasticsearch-head\u7684\u76EE\u5F55</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> config <span class="token builtin class-name">set</span> reigstry https://registry.npm.taobao.org
<span class="token function">npm</span> <span class="token function">install</span>
<span class="token function">npm</span> run start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6267\u884C\u7ED3\u679C</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost elasticsearch-head-master<span class="token punctuation">]</span><span class="token comment">## npm run start</span>

<span class="token operator">&gt;</span> elasticsearch-head@0.0.0 start /opt/dev-env/elasticsearch/elasticsearch-head-master
<span class="token operator">&gt;</span> grunt server

Running <span class="token string">&quot;connect:server&quot;</span> <span class="token punctuation">(</span>connect<span class="token punctuation">)</span> task
Waiting forever<span class="token punctuation">..</span>.
Started connect web server on http://localhost:9100
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="8"><li>\u7F16\u5199elasticsearch.yml\u914D\u7F6E\u6587\u4EF6\u5F00\u542Fhead\u63D2\u4EF6\u7684\u8BBF\u95EE</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>http.cors.enabled: <span class="token boolean">true</span>
http.cors.allow-origin: <span class="token string">&quot;*&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="9"><li>\u542F\u52A8\u8BBF\u95EEhead\u63D2\u4EF6\uFF0C\u9ED8\u8BA4\u7AEF\u53E39100</li></ol><div class="language-http ext-http line-numbers-mode"><pre class="language-http"><code><span class="token header"><span class="token header-name keyword">http</span><span class="token punctuation">:</span><span class="token header-value">//ip:9100</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="10"><li>\u67E5\u770B\u96C6\u7FA4\u72B6\u6001</li></ol><p>\u5C55\u793A\u4E86\u6240\u6709\u96C6\u7FA4\u7684\u6570\u636E\u7684\u5206\u5E03\uFF0C\u90FD\u4E0D\u5728\u540C\u4E00\u53F0\u673A\u5668\u4E0A</p><ul><li>\u7C97\u8FB9\u6846\u7684\u5C31\u662F\u4E3B\u5206\u7247</li><li>\u7EC6\u8FB9\u6846\u7684\u662F\u526F\u672C\u5206\u7247</li></ul><p>\u5E26\u661F\u661F\u7684\u5C31\u662Fmaster</p><p><img src="`+N+'" alt="image-20211215080828845"></p><p>\u65B0\u5EFA\u7D22\u5F15</p><p><img src="'+z+`" alt="image-20211215081109297"></p><ol start="11"><li>\u4E4B\u540E\u6211\u4EEC\u5728\u8FDE\u63A5es\u7684\u65F6\u5019\uFF0C\u5C31\u53EF\u4EE5\u8FDE\u63A5\u5230\u591A\u4E2A\u8282\u70B9</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RestClientConfig</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractElasticsearchConfiguration</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * \u8FD9\u4E2Aclient\u7528\u6765\u66FF\u4EE3transportClient\u5BF9\u8C61
     *
     * <span class="token keyword">@return</span>
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">RestHighLevelClient</span> <span class="token function">elasticsearchClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u5B9A\u4E49\u5BA2\u6237\u7AEF\u914D\u7F6E\u5BF9\u8C61</span>
        <span class="token comment">// \u7528\u7684\u662Frest\u7AEF\u53E3\u5BA2\u6237\u7AEF\uFF0C\u6240\u4EE5\u7528\u7684\u662F9200\u7AEF\u53E3</span>
        <span class="token keyword">final</span> <span class="token class-name">ClientConfiguration</span> configuration <span class="token operator">=</span> <span class="token class-name">ClientConfiguration</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">connectedTo</span><span class="token punctuation">(</span><span class="token string">&quot;172.16.187.15:9201&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;172.16.187.15:9202&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;172.16.187.15:9203&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u901A\u8FC7restClients\u5BF9\u8C61\u521B\u5EFA</span>
        <span class="token keyword">return</span> <span class="token class-name">RestClients</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>configuration<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,122);function xa(wa,ja){const a=o("ExternalLinkIcon");return c(),l(i,null,[P,n("blockquote",null,[Q,U,n("ul",null,[n("li",null,[M,n("ul",null,[n("li",null,[n("p",null,[n("a",F,[X,t(a)]),G,W,J,K,Y,V,$])]),Z])]),nn,sn,an,n("li",null,[n("p",null,[tn,n("a",en,[pn,t(a)]),on,n("a",cn,[ln,t(a)]),un,n("a",rn,[dn,t(a)]),kn,vn])])]),mn,bn,qn,gn,hn,yn]),fn,n("blockquote",null,[_n,xn,n("table",null,[wn,n("tbody",null,[n("tr",null,[jn,n("td",null,[Sn,Rn,Tn,n("a",En,[Cn,t(a)]),Bn])]),An,Dn,In,On,Hn,Nn,zn,n("tr",null,[Ln,n("td",null,[Pn,Qn,Un,Mn,Fn,Xn,Gn,Wn,Jn,n("a",Kn,[Yn,t(a)]),Vn])]),$n,Zn,ns,n("tr",null,[ss,n("td",null,[as,ts,es,n("a",ps,[os,t(a)]),cs])]),ls,is,us,rs,n("tr",null,[ds,n("td",null,[ks,vs,ms,bs,qs,gs,hs,n("a",ys,[fs,t(a)]),_s])]),xs])])]),ws,n("blockquote",null,[js,Ss,Rs,n("p",null,[Ts,Es,Cs,Bs,As,n("a",Ds,[Is,t(a)]),Os]),Hs,n("p",null,[Ns,zs,Ls,Ps,Qs,Us,Ms,n("a",Fs,[Xs,t(a)]),Gs,Ws,Js,n("a",Ks,[Ys,t(a)]),Vs,n("a",$s,[Zs,t(a)]),na])]),sa,n("blockquote",null,[n("p",null,[aa,ta,ea,n("a",pa,[oa,t(a)]),ca,la,ia,n("a",ua,[ra,t(a)]),da]),n("p",null,[ka,n("a",va,[ma,t(a)]),ba,qa,ga]),ha,ya,fa]),_a],64)}var Ra=p(L,[["render",xa],["__file","elasticSearch\u57FA\u7840.html.vue"]]);export{Ra as default};
